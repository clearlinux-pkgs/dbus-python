commit b7f3f7757c28fdc25ce413ccb3c2c6f7e16cbb51
Author: Simon McVittie <smcv@collabora.com>
Date:   2018-05-04 16:29:05 +0100

    1.2.8

M	NEWS
M	configure.ac

commit c50a1c9fc86c598d49ea85f7c383777ab165c9a1
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-05-04 17:14:11 +0100

    Revert "Generate a devhelp index for the HTML documentation"

    This reverts commit c57180785096f4271d45ccb1488086c468abcec1.
    The devhelp
    mode produces different HTML, and currently breaks Debian's
    dh_sphinxdoc.

M	Makefile.am

commit c57180785096f4271d45ccb1488086c468abcec1
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-05-03 14:59:58 +0100

    Generate a devhelp index for the HTML documentation

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	Makefile.am

commit 8c01125643e5ff94c9baa898dd61add8d4739680
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-05-03 13:14:37 +0100

    Travis-CI: Use system Python to run pip for system Python

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	.travis.yml
A	tools/travis-ci-setup.sh

commit 25923e84c44965c5ebdac0567133d5a88885015e
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-05-03 10:44:38 +0100

    Travis-CI: Install sphinx from PyPI

    The one in Ubuntu 14.04 is too old for "python -m sphinx", and we
    weren't installing it at all for non-system Pythons.

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	.travis.yml

commit 224012fb6557c775513d8719af6e9129717db791
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-05-03 10:30:46 +0100

    build: Don't install redirect pages intended for dbus.freedesktop.org

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	Makefile.am

commit 08be9858414f257f047c1d4f11bcd6f26ee884f1
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-05-03 10:30:30 +0100

    build: Don't install stamp file for documentation build

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	Makefile.am

commit b6f7db7fea9bc25901ebd8bd4a1d3a4ea4058965
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-05-03 10:14:51 +0100

    build: Install Sphinx documentation

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	Makefile.am

commit b15465fde6dfa4d088d694ec9542ad99d7210d5e
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-05-03 10:22:32 +0100

    build: Enable Sphinx documentation if dependencies are available

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	configure.ac

commit 174570d94e3000a91aac1ea1276292e5e154c36a
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-05-02 19:30:33 +0100

    Travis-CI: Pull in setuptools

    distcheck now requires it, to generate the egg_info.

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	.travis.yml

commit 721ef6373069bfc6955018681204e20e1ad836e4
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-05-02 19:15:39 +0100

    Remove remnants of old documentation

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	Makefile.am
M	configure.ac
D	m4/dbus-py-add-rst2htmlflag.m4

commit 48572c4dd8cea6c7a2661c4dacd73eb8d0d916c5
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-05-02 18:53:46 +0100

    Travis-CI: Install sphinx

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	.travis.yml

commit 72957e9f4af2ffd6308afaf7f5b30cebe5b278fe
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-05-02 15:18:32 +0100

    Use README as the long description

    PyPI no longer renders README by default.

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	setup.py

commit 5f8122b0d1b340c6a1330c0f8f729c60d3b96359
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-05-02 12:51:29 +0100

    Update NEWS

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	NEWS

commit 5421e3703ca98ba278f67cab133e030949b01997
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-05-02 12:38:05 +0100

    Fix distcheck

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	Makefile.am

commit 9dbabdb569c949bd319a294c822d945dfe18bfa4
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-05-02 12:32:50 +0100

    Add redirection from the old epydoc documentation to the new versions

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	Makefile.am
A	doc/redirects
A	doc/redirects.py

commit b81df570c8e7a450cfcbd09663f2f15725906b7a
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-05-02 12:05:30 +0100

    Improve documentation for Sphinx

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	dbus_bindings/bytes.c
M	dbus_bindings/conn.c
M	dbus_bindings/containers.c
M	dbus_bindings/int.c
M	dbus_bindings/message.c
M	dbus_bindings/signature.c
M	dbus_bindings/string.c
M	dbus_bindings/unixfd.c

commit 780e299bc7cd72c30473162e266479656f3ab9ff
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-05-02 11:11:00 +0100

    doc: Be more clear about bytes vs. unicode

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	dbus_bindings/bytes.c
M	dbus_bindings/message-get-args.c
M	doc/tutorial.txt

commit 7457ebb162febe9033ebcc7e6ef44e6f79d19410
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-05-02 11:09:42 +0100

    Improve UTF8String documentation

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	dbus_bindings/string.c

commit f78b1afbc01efbe58eff8d3fe5040733124027d5
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-05-02 11:08:28 +0100

    dbus-gmain: Ignore more generated files

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	dbus-gmain/.gitignore

commit 6c630a819f6504d48a3a205ab323b2d0458913e5
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-05-02 11:08:09 +0100

    Convert documentation from epydoc to Sphinx

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	.gitignore
M	Makefile.am
M	README
M	configure.ac
M	dbus/__init__.py
M	dbus/gi_service.py
M	dbus/gobject_service.py
M	dbus/service.py
M	dbus_bindings/bytes.c
M	dbus_bindings/containers.c
M	dbus_bindings/int.c
M	dbus_bindings/message-append.c
M	dbus_bindings/signature.c
M	dbus_bindings/string.c
M	dbus_bindings/unixfd.c
M	doc/HACKING.txt
M	doc/PY3PORT.txt
A	doc/_static/.gitignore
A	doc/conf.py
A	doc/dbus.bus.rst
A	doc/dbus.connection.rst
A	doc/dbus.decorators.rst
A	doc/dbus.exceptions.rst
A	doc/dbus.gi_service.rst
A	doc/dbus.glib.rst
A	doc/dbus.gobject_service.rst
A	doc/dbus.lowlevel.rst
A	doc/dbus.mainloop.rst
A	doc/dbus.proxies.rst
A	doc/dbus.rst
A	doc/dbus.server.rst
A	doc/dbus.service.rst
A	doc/dbus.types.rst
C056	README	doc/index.rst
A	doc/news.rst

commit 2d7f71cc7002b5d968f83adffe09e2fc8fd63eb5
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-05-02 11:02:38 +0100

    .gitignore: Ignore more test logs

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	.gitignore

commit 8a0dc04483ae99c1c92e34c979b571eba3afb88e
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-04-21 16:10:15 +0100

    Remove obsolete COMPAT.txt

    This was about compatibility with the rename and rewrite of
    dbus_bindings as _dbus_bindings, which took place over a decade ago.
    If any projects are still not compatible with the "new" dbus-python
    then there is no hope for them.

    Signed-off-by: Simon McVittie <smcv@collabora.com>

D	COMPAT.txt

commit fd4bd409e757dca1cee47188f5fb8a50ee9744c7
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-04-21 11:52:49 +0100

    Include PKG-INFO and egg_info in dist tarballs

    PyPI no longer accepts uploads without these.

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	.gitignore
M	Makefile.am

commit cf961cbdc28a886fbaffb1d14bb73d8683ff8363
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-01-30 22:52:15 +0000

    Create directories to hold .test files

    Some of the corresponding test scripts are in $(srcdir)/test, so there
    is no guarantee that $(builddir)/test will exist before these recipes
    run. This usually works, but can cause highly parallel builds to fail.

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	Makefile.am

commit 94672070f0756c1c3123796761c74a5fb43325a9
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-01-29 19:47:44 +0000

    Start towards 1.2.8

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	NEWS
M	configure.ac

commit bf54889b7bd2eee361843310c86bd6d7701110fc
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-01-29 12:41:57 +0000

    Prepare 1.2.6

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	NEWS
M	configure.ac

commit 80948a2ec2ed1a2b19f1287c99bff1e5bd5b1b67
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-01-29 12:37:20 +0000

    Add a note on how to update dbus-gmain

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	doc/HACKING.txt

commit 83de9ee526e6c844b0584defcf0b667e9b86f2d2
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-01-29 10:45:16 +0000

    travis-ci: Get autoconf-archive from deb.debian.org

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	.travis.yml

commit bc5efba85103c63dab7f530eba827416432e2db6
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-01-29 10:39:40 +0000

    travis-ci: Only test Python 2.7, 3.4 against system python executable

    It's a bit redundant to do otherwise, and for some reason the
    detection of support for -Wno-duplicated-branches fails for the
    Python 2.7 build, causing a spurious failure.

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	.travis.yml

commit 2d5ccd0cb9e580732d0abfbf8a97b1bf779d2a9e
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-01-29 10:30:43 +0000

    Avoid using async keyword

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	test/test-client.py
M	test/test-service.py

commit 05ef07b9b5a6ae4b53dc80728563d2455fe7e24f
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-01-29 10:05:37 +0000

    Require dbus 1.8

    On Travis-CI, cheat our way around the obsolete version of Ubuntu used
    for most builds: we can in fact compile against dbus 1.6, if we apply
    some force.

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	NEWS
M	configure.ac
M	tools/ci-build.sh

commit 9606cec969ba01252ae6ea08f4ac5f389f1e3c76
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-01-29 09:56:33 +0000

    Adjust dependency notes in NEWS

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	NEWS

commit 655a6d48a5e98b1aee556e14c5e00bd41ce0192c
Merge: 660e1b8 f5f817b
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-01-29 09:54:52 +0000

    Merge commit 'f5f817bf93e9fe1503cd327b546a1237f59e96b4'

commit f5f817bf93e9fe1503cd327b546a1237f59e96b4
Author: Simon McVittie <smcv@debian.org>
Date:	2018-01-29 09:54:30 +0000

    Add some notes on integrating dbus-gmain into larger projects

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	README

commit 660e1b8bb285403a369a46794e6229b906f1ffd3
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-01-29 09:44:28 +0000

    Use system extensions instead of strict C99

    Python 3.6 headers cause warnings when using a strict C99 compiler.

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	configure.ac

commit 28098f2c7c23bdef9247c5dfbb8437ca3f03dac4
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-01-29 09:43:56 +0000

    Integrate dbus-gmain

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	.travis.yml
M	AUTHORS
M	COPYING
M	Makefile.am
M	NEWS
M	configure.ac
M	dbus_glib_bindings/module.c

commit 20dce212d5554d5aaf25cba51f594b360a0f799d
Author: Simon McVittie <smcv@debian.org>
Date:	2018-01-29 09:42:04 +0000

    test-thread-client: Avoid deprecated g_thread_create

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	tests/test-thread-client.c

commit 8d0bc022242a89b1d31b2be0aa9e4d570179e3cc
Merge: 41b21ef c9f1a96
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-01-29 09:28:11 +0000

    Add 'dbus-gmain/' from commit
    'c9f1a9671e5c67da3a7d730407241b995c6606f9'

    git-subtree-dir: dbus-gmain
    git-subtree-mainline: 41b21ef63ea7d95bf61f2993183a6f5c2c526cb8
    git-subtree-split: c9f1a9671e5c67da3a7d730407241b995c6606f9

commit c9f1a9671e5c67da3a7d730407241b995c6606f9
Author: Simon McVittie <smcv@debian.org>
Date:	2018-01-29 09:22:45 +0000

    Use GLIB instead of DBUS_GLIB as prefix for GLib dependency

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	Makefile.am

commit 41b21ef63ea7d95bf61f2993183a6f5c2c526cb8
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-01-29 08:59:56 +0000

    Require dbus-run-session

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	Makefile.am
M	NEWS
M	configure.ac

commit 512cb36200c7d6006fe947336801e9fdc22df4b4
Author: Simon McVittie <smcv@debian.org>
Date:	2018-01-29 09:05:37 +0000

    Distribute ancillary files for dbus-gmain

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	Makefile.am

commit d354239ff42d972e6fe1448aae2db52e1af90aa7
Author: Simon McVittie <smcv@debian.org>
Date:	2018-01-29 08:49:48 +0000

    Move dbus-gmain to root directory

    Signed-off-by: Simon McVittie <smcv@debian.org>

R100	dbus-gmain/.gitignore	.gitignore
R100	dbus-gmain/AUTHORS	AUTHORS
R100	dbus-gmain/CONTRIBUTING CONTRIBUTING
R100	dbus-gmain/COPYING	COPYING
R100	dbus-gmain/Makefile.am	Makefile.am
R100	dbus-gmain/README	README
R100	dbus-gmain/dbus-gmain.c dbus-gmain.c
R100	dbus-gmain/dbus-gmain.h dbus-gmain.h
R100	dbus-gmain/tests/30574.c	tests/30574.c
R100	dbus-gmain/tests/test-thread-client.c	tests/test-thread-client.c
R100	dbus-gmain/tests/test-thread-server.c	tests/test-thread-server.c
R100	dbus-gmain/tests/test-thread.h	tests/test-thread.h
R100	dbus-gmain/tests/util.c tests/util.c
R100	dbus-gmain/tests/util.h tests/util.h

commit c80ae773e1cc50b6acde492b1b6f83f49f6e53c8
Author: Simon McVittie <smcv@debian.org>
Date:	2018-01-29 08:48:58 +0000

    Remove everything except dbus-gmain subdirectory

    Signed-off-by: Simon McVittie <smcv@debian.org>

D	.gitignore
D	AUTHORS
D	Android.mk
D	COPYING
D	HACKING
D	INSTALL
D	Makefile.am
D	NEWS
D	README
D	autogen.sh
D	configure.ac
D	dbus-bus-introspect.xml
D	dbus-glib-1-uninstalled.pc.in
D	dbus-glib-1.pc.in
D	dbus/.cvsignore
D	dbus/Makefile.am
D	dbus/dbus-bash-completion-helper.c
D	dbus/dbus-bash-completion.sh.in
D	dbus/dbus-binding-tool-glib.c
D	dbus/dbus-binding-tool-glib.h
D	dbus/dbus-gidl.c
D	dbus/dbus-gidl.h
D	dbus/dbus-glib-lowlevel.h
D	dbus/dbus-glib-tool.c
D	dbus/dbus-glib-tool.h
D	dbus/dbus-glib.c
D	dbus/dbus-glib.h
D	dbus/dbus-gloader-expat.c
D	dbus/dbus-gmarshal.c
D	dbus/dbus-gmarshal.h
D	dbus/dbus-gmarshal.list
D	dbus/dbus-gobject.c
D	dbus/dbus-gobject.h
D	dbus/dbus-gparser.c
D	dbus/dbus-gparser.h
D	dbus/dbus-gproxy.c
D	dbus/dbus-gsignature.c
D	dbus/dbus-gsignature.h
D	dbus/dbus-gtest-main.c
D	dbus/dbus-gtest.c
D	dbus/dbus-gtest.h
D	dbus/dbus-gthread.c
D	dbus/dbus-gtool-test.h
D	dbus/dbus-gtype-specialized-priv.h
D	dbus/dbus-gtype-specialized.c
D	dbus/dbus-gtype-specialized.h
D	dbus/dbus-gutils.c
D	dbus/dbus-gutils.h
D	dbus/dbus-gvalue-parse-variant.c
D	dbus/dbus-gvalue-parse-variant.h
D	dbus/dbus-gvalue-utils.c
D	dbus/dbus-gvalue-utils.h
D	dbus/dbus-gvalue.c
D	dbus/dbus-gvalue.h
D	dbus/examples/.cvsignore
D	dbus/examples/Makefile.am
D	dbus/examples/example-client.c
D	dbus/examples/example-service.c
D	dbus/examples/example-service.xml
D	dbus/examples/example-signal-emitter.c
D	dbus/examples/example-signal-emitter.xml
D	dbus/examples/example-signal-recipient.c
D	dbus/examples/statemachine/.cvsignore
D	dbus/examples/statemachine/Makefile.am
D	dbus/examples/statemachine/sm-marshal.list
D	dbus/examples/statemachine/statemachine-client.c
D	dbus/examples/statemachine/statemachine-server.c
D	dbus/examples/statemachine/statemachine-server.h
D	dbus/examples/statemachine/statemachine-server.xml
D	dbus/examples/statemachine/statemachine.c
D	dbus/examples/statemachine/statemachine.h
D	dbus/examples/statemachine/statemachine.xml
D	doc/Makefile.am
D	doc/dbus-binding-tool.1
D	doc/reference/Makefile.am
D	doc/reference/dbus-binding-tool.xml
D	doc/reference/dbus-glib-docs.sgml
D	doc/reference/dbus-glib-overrides.txt
D	doc/reference/dbus-glib-sections.txt
D	doc/reference/dbus-glib.types
D	doc/reference/version.xml.in
D	m4/Makefile.am
D	m4/gtk-doc.m4
D	test/Makefile.am
D	test/core/Makefile.am
D	test/core/error-mapping.c
D	test/core/manual/invalid-usage.c
D	test/core/my-object-marshal.list
D	test/core/my-object-subclass.c
D	test/core/my-object-subclass.h
D	test/core/my-object.c
D	test/core/my-object.h
D	test/core/peer-client.c
D	test/core/peer-on-bus.c
D	test/core/peer-server.c
D	test/core/private.c
D	test/core/proxy-noc.c
D	test/core/proxy-peer.c
D	test/core/registrations.c
D	test/core/run-peer-test.sh
D	test/core/run-test.sh
D	test/core/shared-bus.c
D	test/core/test-dbus-glib.c
D	test/core/test-gvariant.c
D	test/core/test-profile.c
D	test/core/test-service-glib-subclass.xml
D	test/core/test-service-glib.c
D	test/core/test-service-glib.xml
D	test/core/test-types.c
D	test/core/test-variant-recursion.c
D	test/data/nested-introspect.xml
D	test/data/valid-service-files/debug-echo.service.in
D	test/data/valid-service-files/debug-glib.service.in
D	test/data/valid-service-files/interfaces-test.service.in
D	test/errors.c
D	test/interfaces/.gitignore
D	test/interfaces/Makefile.am
D	test/interfaces/invalid-annotated-node.xml
D	test/interfaces/invalid-nested-annotation.xml
D	test/interfaces/run-test.sh
D	test/interfaces/test-client.c
D	test/interfaces/test-dup-prop-a.xml
D	test/interfaces/test-dup-prop-b.xml
D	test/interfaces/test-dup-prop.c
D	test/interfaces/test-dup-prop.h
D	test/interfaces/test-goodbye.xml
D	test/interfaces/test-hello.xml
D	test/interfaces/test-interfaces.c
D	test/interfaces/test-interfaces.h
D	test/interfaces/test-objects.c
D	test/interfaces/test-objects.h
D	test/interfaces/test-server.c
D	test/interfaces/test-song.xml
D	test/interfaces/valid-annotations.xml
D	test/specialized-types.c
D	test/test-compile-nested.sh
D	test/test-service.c
D	tools/Makefile.am
D	tools/dbus-glib-tests.supp
D	tools/dbus-glib.supp
D	tools/lcov.am
D	tools/run-with-tmp-session-bus.sh
D	tools/session.conf

commit 232cae5253382d8d8f7678dbda1ee37424904cab
Author: Simon McVittie <smcv@debian.org>
Date:	2018-01-29 08:47:56 +0000

    dbus-gmain: Add CONTRIBUTING file

    Signed-off-by: Simon McVittie <smcv@debian.org>

A	dbus-gmain/CONTRIBUTING

commit 399f1454f1aaad4627c2cac28f1ef78d62d007ca
Author: Simon McVittie <smcv@debian.org>
Date:	2018-01-29 08:38:33 +0000

    dbus-gmain: Allow swapping the namespace used

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	configure.ac
M	dbus-gmain/dbus-gmain.c
M	dbus-gmain/dbus-gmain.h
M	dbus-gmain/tests/30574.c
M	dbus-gmain/tests/test-thread-client.c
M	dbus-gmain/tests/test-thread-server.c
M	dbus/dbus-glib.c

commit 906508155ff27c76d1d85a7a1f68ab69f6161508
Author: Simon McVittie <smcv@debian.org>
Date:	2018-01-29 08:18:37 +0000

    dbus-gmain: Add a .gitignore

    This makes it a bit more self-contained.

    Signed-off-by: Simon McVittie <smcv@debian.org>

A	dbus-gmain/.gitignore

commit fd8dc56eb1948759d4fea8854dddfb1749436ba0
Author: Simon McVittie <smcv@debian.org>
Date:	2018-01-22 18:14:58 +0000

    dbus-gmain: Add more copyright and authorship information

    Signed-off-by: Simon McVittie <smcv@debian.org>

A	dbus-gmain/AUTHORS
A	dbus-gmain/COPYING
M	dbus-gmain/tests/30574.c
M	dbus-gmain/tests/test-thread-client.c
M	dbus-gmain/tests/test-thread-server.c
M	dbus-gmain/tests/util.c
M	dbus-gmain/tests/util.h

commit 13a000d6c1876bc429057c8a665809353e9cbe4b
Author: Simon McVittie <smcv@debian.org>
Date:	2018-01-22 18:14:41 +0000

    dbus-gmain: Don't include config.h unless HAVE_CONFIG_H is defined

    This should make it a little easier to integrate into more build
    systems.

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	dbus-gmain/dbus-gmain.c
M	dbus-gmain/tests/30574.c
M	dbus-gmain/tests/test-thread-client.c
M	dbus-gmain/tests/test-thread-server.c
M	dbus-gmain/tests/util.c

commit fa04927d0c6cd804e4db70b0d393b3086065f7d0
Author: Simon McVittie <smcv@debian.org>
Date:	2018-01-22 17:53:02 +0000

    dbus-gmain: Add a README

    Signed-off-by: Simon McVittie <smcv@debian.org>

A	dbus-gmain/README

commit c20597919cd35b513e7a8eb2fa59cb0cec900606
Author: Simon McVittie <smcv@debian.org>
Date:	2018-01-22 17:52:55 +0000

    Move tests for dbus-gmain to dbus-gmain/tests/

    Use dbus-run-session to run the only one that can be used as an
    automated test right now.

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	configure.ac
M	dbus-gmain/Makefile.am
R099	test/core/30574.c	dbus-gmain/tests/30574.c
R100	test/core/test-thread-client.c
dbus-gmain/tests/test-thread-client.c
R100	test/core/test-thread-server.c
dbus-gmain/tests/test-thread-server.c
R100	test/core/test-thread.h dbus-gmain/tests/test-thread.h
R100	test/lib/util.c dbus-gmain/tests/util.c
R100	test/lib/util.h dbus-gmain/tests/util.h
M	test/Makefile.am
M	test/core/Makefile.am
M	test/core/peer-on-bus.c
M	test/core/registrations.c
M	test/core/run-test.sh
M	test/core/test-dbus-glib.c
M	test/core/test-variant-recursion.c
M	test/interfaces/Makefile.am
M	test/interfaces/test-client.c
D	test/lib/Makefile.am

commit 449f30a089ce848883fcf2b6aaac742f87aad704
Author: Simon McVittie <smcv@debian.org>
Date:	2018-01-22 17:20:10 +0000

    dbus-gmain: Move to its own directory

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	Makefile.am
M	configure.ac
A	dbus-gmain/Makefile.am
R099	dbus/dbus-gmain.c	dbus-gmain/dbus-gmain.c
R100	dbus/dbus-gmain.h	dbus-gmain/dbus-gmain.h
M	dbus/Makefile.am
M	dbus/dbus-glib.c
M	test/core/30574.c
M	test/core/Makefile.am
M	test/core/test-thread-client.c
M	test/core/test-thread-server.c

commit be85eb31951c81dcbd2f6168798856a171e883e9
Author: Simon McVittie <smcv@debian.org>
Date:	2018-01-22 17:16:02 +0000

    dbus-gmain.c: Remove trailing whitespace

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	dbus/dbus-gmain.c

commit c6583de2500c14a979248c37942f515aa264656e
Author: Simon McVittie <smcv@debian.org>
Date:	2018-01-22 17:11:26 +0000

    Remove obsolete --with-test-socket-dir option

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	configure.ac

commit f30dd014fae061bf5572c8977b5ebdcb6ce9a7b9
Author: Simon McVittie <smcv@debian.org>
Date:	2018-01-22 17:10:45 +0000

    Remove remnants of --with-introspect-xml option

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	configure.ac

commit b031d671abde479facccd9da2e08e33922c9fc74
Author: Simon McVittie <smcv@debian.org>
Date:	2018-01-22 16:53:50 +0000

    Build libdbus-gmain into a separate convenience library

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	dbus/Makefile.am
M	test/core/Makefile.am

commit b6f7c810cf97914b6b90836f3d59ea256f318bcb
Author: Simon McVittie <smcv@debian.org>
Date:	2018-01-22 16:47:21 +0000

    Make dbus-gmain.h internal, and rename its symbols

    If we embed dbus-gmain in dbus-glib, dbus-python, at-spi2-core and
    others as a submodule or subtree, we won't want it to export the
    same ABI in all of them.

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	dbus/Makefile.am
M	dbus/dbus-glib-lowlevel.h
M	dbus/dbus-glib.c
M	dbus/dbus-gmain.c
M	dbus/dbus-gmain.h
M	test/core/30574.c
M	test/core/test-thread-client.c
M	test/core/test-thread-server.c

commit 892d30196cbad5449c42b08f4d5496b2ffcdb562
Author: Simon McVittie <smcv@debian.org>
Date:	2018-01-22 16:47:43 +0000

    dbus-gmain.c: Screen-scrape copyright notices from git history

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	dbus/dbus-gmain.c

commit 3cd9349a833099837e2b9e50b1a2ba13b0e68dbc
Author: Simon McVittie <smcv@collabora.com>
Date:	2018-01-17 10:26:01 +0000

    Officially de-support Python 3.3 too

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	.travis.yml
M	NEWS

commit c943d89ce90a7ea1abc22bcd257159f23aebc9fb
Author: Simon McVittie <smcv@collabora.com>
Date:	2017-11-05 13:58:25 +0000

    Update NEWS

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	NEWS

commit 71a613348477336df175a45dd46f035def495115
Author: Simon McVittie <smcv@collabora.com>
Date:	2017-11-05 13:08:09 +0000

    Rename source directories for C code to silence an ImportWarning

    Python warns that it is not importing these directories because they
    contain no __init__.py.

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	Makefile.am
M	configure.ac
R100	_dbus_bindings/abstract.c	dbus_bindings/abstract.c
R100	_dbus_bindings/bus.c	dbus_bindings/bus.c
R100	_dbus_bindings/bytes.c	dbus_bindings/bytes.c
R100	_dbus_bindings/compat-internal.h
dbus_bindings/compat-internal.h
R100	_dbus_bindings/conn-internal.h	dbus_bindings/conn-internal.h
R100	_dbus_bindings/conn-methods.c	dbus_bindings/conn-methods.c
R100	_dbus_bindings/conn.c	dbus_bindings/conn.c
R100	_dbus_bindings/containers.c	dbus_bindings/containers.c
R100	_dbus_bindings/dbus_bindings-internal.h
dbus_bindings/dbus_bindings-internal.h
R100	_dbus_bindings/debug.c	dbus_bindings/debug.c
R100	_dbus_bindings/exceptions.c	dbus_bindings/exceptions.c
R100	_dbus_bindings/float.c	dbus_bindings/float.c
R100	_dbus_bindings/generic.c	dbus_bindings/generic.c
R100	_dbus_bindings/int.c	dbus_bindings/int.c
R100	_dbus_bindings/libdbusconn.c	dbus_bindings/libdbusconn.c
R100	_dbus_bindings/mainloop.c	dbus_bindings/mainloop.c
R100	_dbus_bindings/message-append.c dbus_bindings/message-append.c
R100	_dbus_bindings/message-get-args.c
dbus_bindings/message-get-args.c
R100	_dbus_bindings/message-internal.h
dbus_bindings/message-internal.h
R100	_dbus_bindings/message.c	dbus_bindings/message.c
R100	_dbus_bindings/module.c dbus_bindings/module.c
R100	_dbus_bindings/pending-call.c	dbus_bindings/pending-call.c
R100	_dbus_bindings/server.c dbus_bindings/server.c
R100	_dbus_bindings/signature.c	dbus_bindings/signature.c
R100	_dbus_bindings/string.c dbus_bindings/string.c
R100	_dbus_bindings/types-internal.h dbus_bindings/types-internal.h
R100	_dbus_bindings/unixfd.c dbus_bindings/unixfd.c
R100	_dbus_bindings/validation.c	dbus_bindings/validation.c
R100	_dbus_glib_bindings/module.c	dbus_glib_bindings/module.c
M	setup.py

commit b4d2cded0f7584e9c9429790c841e926acd8a082
Author: Simon McVittie <smcv@collabora.com>
Date:	2017-11-05 13:05:36 +0000

    Update NEWS

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	NEWS

commit 8d695a84248ab70f576719141dffeeb9e8023e4d
Author: Simon McVittie <smcv@collabora.com>
Date:	2017-11-05 13:02:21 +0000

    Suppress documentation of __gtype__ in epydoc, for reproducible builds

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	dbus/gi_service.py
M	dbus/gobject_service.py

commit bde52a1943907dd87662c1eed1c27414670d7d17
Author: Simon McVittie <smcv@collabora.com>
Date:	2017-11-05 13:02:02 +0000

    build: Build with -Wno-duplicated-branches if the compiler supports it

    Otherwise building with gcc 7 fails like this:

    _dbus_bindings/server.c: In function
    ‘DBusPyServer_set_auth_mechanisms’:
    /usr/include/python2.7/abstract.h:1161:43: error: this condition
    has identical branches [-Werror=duplicated-branches]
	 (PyList_Check(o) ? PyList_GET_SIZE(o) : PyTuple_GET_SIZE(o))
					       ^
    _dbus_bindings/server.c:101:14: note: in expansion of macro
    ‘PySequence_Fast_GET_SIZE’
	 length = PySequence_Fast_GET_SIZE(fast_seq);
		  ^~~~~~~~~~~~~~~~~~~~~~~~

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	configure.ac

commit 258f328cdf919e02d895719ae04a5867f2782a67
Author: Simon McVittie <smcv@collabora.com>
Date:	2017-11-05 13:01:12 +0000

    Avoid NULL dereference if DBusPyServer_NewConsumingDBusServer fails

    Detected by gcc 7.

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	_dbus_bindings/server.c

commit d9b6485f5f908739aa6c6f342996924c4e4441fd
Author: Simon McVittie <smcv@collabora.com>
Date:	2017-11-01 16:47:11 +0000

    Update NEWS

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	NEWS

commit feb9494f1804cf3b95e4db4e6fbe5f76a5d8134e
Author: Simon McVittie <smcv@collabora.com>
Date:	2017-11-01 16:47:08 +0000

    Work around limitations of Python 2 distutils and AX_PYTHON_DEVEL

    Python 2 doesn't have the LDVERSION, so AX_PYTHON_DEVEL has to form
    PYTHON_LIBS using plain VERSION, which doesn't have the _d suffix.
    There doesn't seem to be a good way to find out that we need this,
    so I can't upstream a fix to autoconf-archive. However, the -dbg
    flavour is mostly a Debianism anyway, and in the long term the
    problem will be fixed by Python 2 going away.

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	tools/ci-build.sh

commit 913e24555b0abbb5893fd805d8b908ea80487aea
Author: Simon McVittie <smcv@collabora.com>
Date:	2017-11-01 16:47:07 +0000

    Bundle an updated AX_PYTHON_DEVEL to fix LIBS vs. LDFLAGS

    See <https://github.com/peti/autoconf-archive/pull/124>.

    aclocal's "serial number" mechanism means we'll still use the
    OS's copy
    if newer.

    Signed-off-by: Simon McVittie <smcv@collabora.com>

A	m4/ax_python_devel.m4

commit 57a3f733ed9adbf45e645dcb1f03259cddad643e
Author: Simon McVittie <smcv@collabora.com>
Date:	2017-11-01 16:47:04 +0000

    Officially de-support Python 3.2

    One test fails on travis-ci. It might be a spurious failure, but I
    have no interest in supporting versions whose vendors have dropped
    security support.

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	.travis.yml
M	NEWS

commit db93f1949f4bdff46ed94b74c8aec681efedab34
Author: Simon McVittie <smcv@collabora.com>
Date:	2017-11-01 16:47:03 +0000

    travis-ci: Install python-gi-dbg when testing python-dbg

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	.travis.yml

commit a430a1dd509ae1a606a1de5a50739b4a3c6a0a1a
Author: Simon McVittie <smcv@collabora.com>
Date:	2017-11-01 16:47:02 +0000

    ci-build: Export PYTHON to make sure we get exactly that version

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	tools/ci-build.sh

commit a1f95028652b69f0fefb13b2601b5621d6c550e6
Author: Simon McVittie <smcv@collabora.com>
Date:	2017-11-01 16:47:01 +0000

    ci-build: Write out config.log after attempting configure

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	tools/ci-build.sh

commit da4bc242486df24f5c34153476f49a03c1e8aac1
Author: Simon McVittie <smcv@collabora.com>
Date:	2017-11-01 16:47:00 +0000

    travis-ci: Use ccache, and cache pip installations too

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	.travis.yml

commit e6cb3b881d212b72a1221de8c3767cfc8e5c7a5e
Author: Simon McVittie <smcv@collabora.com>
Date:	2017-11-01 16:46:59 +0000

    travis-ci: Test Python 3.6 now that it has releases

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	.travis.yml

commit bfc158227ad811f8b16bece8490b623e607c3675
Author: Simon McVittie <smcv@collabora.com>
Date:	2017-11-01 16:46:59 +0000

    travis-ci: Use autoconf-archive from Debian 9 'stretch'

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	.travis.yml

commit 7108baab93b6edd16343a58af7f76638ad11f758
Author: Simon McVittie <smcv@collabora.com>
Date:	2017-11-01 16:46:57 +0000

    Revert "test/import-repeatedly: skip on Python 3.6 for now"

    Python 3.6.0a4 is meant to have fixed this.

    This reverts commit 1013581fef91c9be087d6264084cec34c2ca6e9a.

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	test/import-repeatedly.c

commit 41b48993e003a25a30b73bc8dd0be1a2f2493c4b
Author: Simon McVittie <smcv@collabora.com>
Date:	2017-11-01 16:46:56 +0000

    build: Use AX_PYTHON_DEVEL to find Python

    This avoids needing our own increasingly elaborate code to find the
    python-config executable corresponding to our python executable.

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	Makefile.am
M	configure.ac
D	m4/am-check-python-headers.m4

commit ba61efead30ff0f6649060d67f0f193976bc97d4
Author: Simon McVittie <smcv@collabora.com>
Date:	2017-11-01 16:46:55 +0000

    .gitignore: Ignore dbus._version

    Signed-off-by: Simon McVittie <smcv@collabora.com>

M	.gitignore

commit 3e464736320d7b191e4ee1b88a6bad94c2d716e6
Author: Simon McVittie <smcv@debian.org>
Date:	2017-11-01 16:23:13 +0000

    Convert a few tests to only use dbus-gmain

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	test/core/30574.c
M	test/core/test-thread-client.c
M	test/core/test-thread-server.c

commit 290ec72b76bc91355a54ba562565959a50ed29a9
Author: Simon McVittie <smcv@debian.org>
Date:	2017-11-01 16:22:44 +0000

    test_run_until_disconnected: Convert to pure libdbus

    This will let us do a few tests with just dbus-gmain.

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	test/core/30574.c
M	test/core/peer-on-bus.c
M	test/core/registrations.c
M	test/core/test-dbus-glib.c
M	test/core/test-variant-recursion.c
M	test/interfaces/test-client.c
M	test/lib/util.c
M	test/lib/util.h

commit 93f9fe7b9c009e89ca9a0c32e07176fb8ab9839d
Author: Simon McVittie <smcv@debian.org>
Date:	2017-11-01 15:48:27 +0000

    Move dbus_g_connection_open() etc. from dbus-gmain.c to dbus-glib.c

    This will facilitate conversion of dbus-gmain.[ch], which are the only
    part of GDBus that is not awful, into a separate library or a
    submodule or something.

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	dbus/dbus-glib.c
M	dbus/dbus-gmain.c

commit b433ea03e9523faf8e0479062e368cb01727b745
Author: Simon McVittie <smcv@debian.org>
Date:	2017-11-01 15:47:02 +0000

    dbus-gmain: Add a separate header for the main-loop integration

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	dbus/Makefile.am
M	dbus/dbus-glib-lowlevel.h
C052	dbus/dbus-glib-lowlevel.h	dbus/dbus-gmain.h

commit 65b40d2d380109a3713035c22e37c8ee323cd566
Author: Simon McVittie <smcv@debian.org>
Date:	2017-11-01 16:04:36 +0000

    autogen.sh: Cope with the Python rewrite of gtk-doc

    gtkdoc-scan 1.26 prints its version to stderr instead of stdout.

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	autogen.sh

commit 2a80d2dcf394e3934679df92349318fa4d671f0f
Author: Simon McVittie <smcv@debian.org>
Date:	2016-09-09 10:16:56 +0100

    Start 0.110 development

M	NEWS
M	configure.ac

commit 5b9b8b7f651765b55838ec11939e2beb139d0638
Author: Simon McVittie <smcv@debian.org>
Date:	2016-09-09 08:46:23 +0100

    0.108

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	NEWS
M	configure.ac

commit 2f0b80dc54da20244d32d7d60662e44e28ccef4c
Author: Simon McVittie <smcv@debian.org>
Date:	2016-08-28 15:13:10 +0100

    Update NEWS

M	NEWS

commit 0e641b27a1e6ea7063a338e00a3de6ed38e3b1d9
Author: Simon McVittie <smcv@debian.org>
Date:	2016-08-28 15:12:16 +0100

    run-with-tmp-session-bus.sh: use dbus-run-session

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	tools/run-with-tmp-session-bus.sh

commit 167200cef749be40b3d3624cfb86a5928aeca522
Author: Simon McVittie <smcv@debian.org>
Date:	2016-08-11 10:15:01 +0100

    Drop support for Python 2.6, along with several workarounds

    It hasn't had security support for about 3 years.

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	.travis.yml
M	NEWS
M	configure.ac
M	dbus/_compat.py
M	doc/PY3PORT.txt
M	test/test-standalone.py

commit 1013581fef91c9be087d6264084cec34c2ca6e9a
Author: Simon McVittie <smcv@debian.org>
Date:	2016-08-11 09:58:58 +0100

    test/import-repeatedly: skip on Python 3.6 for now

    This is a workaround for <http://bugs.python.org/issue27736>.

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	test/import-repeatedly.c

commit 6e9d32883ef51b3c8e72b200caf9e105627b7c62
Author: Simon McVittie <smcv@debian.org>
Date:	2016-08-11 09:12:21 +0100

    import-repeatedly: detect exceptions

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	test/import-repeatedly.c

commit a66cc5f91380fbeffcff2b25981d035a53d93cac
Author: Simon McVittie <smcv@debian.org>
Date:	2016-08-11 08:38:28 +0100

    Use Automake TAP driver

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	Makefile.am
M	configure.ac

commit 56af7b702bfd9fa97c11111d4f832bb95263273f
Author: Simon McVittie <smcv@debian.org>
Date:	2016-08-11 08:34:01 +0100

    Use TAP syntax for all directly-run tests

    For now this means that skipped tests will be reported as passed.
    This will be corrected in the next commit.

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	.travis.yml
M	NEWS
M	setup.py
M	test/import-repeatedly.c
M	test/run-test.sh
M	test/test-client.py
M	test/test-exception-py2.py
M	test/test-exception-py3.py
M	test/test-p2p.py
M	test/test-signals.py
M	test/test-standalone.py
M	test/test-unusable-main-loop.py

commit eff7c820285504d229ef8474c870302abfbe4bc1
Author: Simon McVittie <smcv@debian.org>
Date:	2016-03-06 21:07:45 +0000

    start 1.2.6 development

M	NEWS
M	configure.ac

commit c0df2200a881b9c8fa4987cb3f7d281865536bfc
Author: Simon McVittie <smcv@debian.org>
Date:	2016-03-06 17:50:19 +0000

    1.2.4

M	NEWS
M	configure.ac

commit 007ea1d228b849e192e3a471bb3c14292b897b0e
Author: Simon McVittie <smcv@debian.org>
Date:	2016-03-06 17:34:55 +0000

    ci-build: test the setup.py glue as well as the Autotools build

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	tools/ci-build.sh

commit 602064459995b89d169d7e138691a96d4190b614
Author: Simon McVittie <smcv@debian.org>
Date:	2016-03-06 17:37:46 +0000

    Clean up test-service.log

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	Makefile.am

commit aba80c07c07cf8dd669dbfbe2aa51786425aa53f
Author: Simon McVittie <smcv@debian.org>
Date:	2016-03-06 17:20:23 +0000

    NEWS so far

M	NEWS

commit 9740e695a8e2276704f940a38c4067edbe8491f7
Author: Simon McVittie <smcv@debian.org>
Date:	2016-03-06 17:08:03 +0000

    Add Travis-CI metadata

    Signed-off-by: Simon McVittie <smcv@debian.org>

A	.travis.yml
M	Makefile.am
A	tools/ci-build.sh

commit 7881666743df953227ccc403af4edfac7dd7ab8e
Author: Simon McVittie <smcv@debian.org>
Date:	2016-03-06 15:38:16 +0000

    decorators: use a more modern idiom for signatures in Python >= 3.4

    getargspec() isn't in Python 3.6 development versions.

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	dbus/decorators.py

commit 991c1f8de2f6396801736153173eb83dce0e9c15
Author: Simon McVittie <smcv@debian.org>
Date:	2016-03-06 12:56:56 +0000

    unicode test: cope with Python 2.6 as provided on travis-ci

    Python 2.6 didn't allow struct.pack(u'...', ...).

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	test/test-standalone.py

commit cf52ac6e8c92fe0a5577da8f9328b908967763bf
Author: Simon McVittie <smcv@debian.org>
Date:	2016-03-06 15:39:50 +0000

    .gitignore: ignore autoconf-archive and pkg-config

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	.gitignore

commit 988c290f4a1bafdac6dabc499efb8b7ffa94a251
Author: Simon McVittie <smcv@debian.org>
Date:	2016-03-05 23:57:46 +0000

    run-test: avoid "test: =: unary operator expected"

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	test/run-test.sh

commit 506945f13c098f2b9abcccf681e64d6b924da3eb
Author: Simon McVittie <smcv@debian.org>
Date:	2016-03-05 23:49:51 +0000

    Stop breaking a pre-existing PYTHONPATH in installed-tests'
    environment

    ${PYTHONPATH} in Exec= isn't substituted by gnome-desktop-testing.

    If we rely on the fact that Python prepends the scripts' directory to
    sys.path, then we don't need to alter PYTHONPATH at all.

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	Makefile.am

commit b6e1a0ce33969dc56fade2a5839848f4a926b8bb
Author: Simon McVittie <smcv@debian.org>
Date:	2016-03-05 23:20:49 +0000

    Fix Unicode tests on narrow Python builds

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=57140
    Signed-off-by: Simon McVittie <smcv@debian.org>

M	test/test-standalone.py

commit f1f4f1cd110a0a6bdd41ab8b3ae126c5ea455801
Author: Simon McVittie <smcv@debian.org>
Date:	2016-03-05 21:16:31 +0000

    Use the template GNOME autogen.sh

    Taken from: https://wiki.gnome.org/Projects/GnomeCommon/Migration

    This removes the non-standard --no-configure option, and replaces it
    with NOCONFIGURE=1 as recommended in
    <https://github.com/cgwalters/build-api>.

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	autogen.sh

commit ed350ae4f4e43d0f5146c5891069829e89018322
Author: Simon McVittie <smcv@debian.org>
Date:	2016-03-05 16:32:44 +0000

    Add a regression test for the version numbering

    Now that dbus.__version__ and dbus.version exist even in uninstalled
    builds, we can do this.

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	test/test-standalone.py

commit e119bf86c5a4a10ea4ed048df3a5d4a78fa15d5c
Author: Simon McVittie <smcv@debian.org>
Date:	2016-03-05 16:36:08 +0000

    Get the version from the C code, not by generating a Python file

    This means we never try to import dbus/_version.py from the
    ${builddir},
    which won't work.

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	.gitignore
M	Makefile.am
M	configure.ac
M	dbus/__init__.py
D	dbus/_version.py.in

commit 13f590af2ee74b2b01c5c1a3414a92764648c89e
Author: Simon McVittie <smcv@debian.org>
Date:	2016-03-05 16:32:25 +0000

    Make dbus.version a tuple again

    Otherwise it won't sort correctly.

    Bug-Debian: https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=816729
    Signed-off-by: Simon McVittie <smcv@debian.org>

M	dbus/_version.py.in

commit 135eeb0c0ddc871c5b5dfbaf09aace94f7126cc7
Author: Simon McVittie <smcv@debian.org>
Date:	2016-03-05 16:08:03 +0000

    Always include dbus_bindings-internal.h first

    This file includes <Python.h>, with some #defines that affect the
    interpretation of the Python headers (PY_SSIZE_T_CLEAN,
    PY_SIZE_T_CLEAN).

    In particular, <Python.h> transitively includes pyconfig.h, which
    defines _GNU_SOURCE, altering the version of struct stat used;
    this is potentially a problem if a struct stat is shared between
    files, although in practice we don't do that.

    Bug-Debian: https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=749133

M	_dbus_bindings/abstract.c
M	_dbus_bindings/bus.c
M	_dbus_bindings/bytes.c
M	_dbus_bindings/conn-methods.c
M	_dbus_bindings/conn.c
M	_dbus_bindings/containers.c
M	_dbus_bindings/dbus_bindings-internal.h
M	_dbus_bindings/debug.c
M	_dbus_bindings/float.c
M	_dbus_bindings/int.c
M	_dbus_bindings/message-append.c
M	_dbus_bindings/message-get-args.c
M	_dbus_bindings/message-internal.h
M	_dbus_bindings/module.c
M	_dbus_bindings/signature.c
M	_dbus_bindings/string.c
M	_dbus_bindings/types-internal.h
M	_dbus_bindings/unixfd.c

commit 3f7aa13c82444457675763cdf0d3bb5c5a45d137
Author: Simon McVittie <smcv@debian.org>
Date:	2016-03-05 16:02:53 +0000

    Include config.h every time we compile C code

    This is Autoconf best-practice: on some platforms it might contain
    things like "#define inline __inline" which should affect all C code.

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	Makefile.am
M	_dbus_bindings/compat-internal.h
M	_dbus_bindings/mainloop.c
M	_dbus_bindings/message-append.c
M	_dbus_bindings/module.c

commit c729593c36c745f99daa02abb955a19737bf37cb
Author: Simon McVittie <smcv@debian.org>
Date:	2016-03-05 15:50:33 +0000

    Move dbus-python.h to a dbus subdirectory

    This means we can consistently #include <dbus/dbus-python.h>,
    either in-tree or out-of-tree.

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	Makefile.am
M	_dbus_bindings/dbus_bindings-internal.h
M	_dbus_glib_bindings/module.c
R100	include/dbus-python.h	include/dbus/dbus-python.h
M	test/dbus_py_test.c

commit 01ecf02c749f7bddb15f57aae26e9e064db0240f
Author: Simon McVittie <smcv@debian.org>
Date:	2016-02-22 17:26:54 +0000

    fix NEWS syntax

M	NEWS

commit 568aa2c958d33ddb8b798add8f01b881dee8f432
Author: Simon McVittie <smcv@debian.org>
Date:	2016-02-22 17:05:03 +0000

    apply development version

M	NEWS
M	configure.ac

commit 261f510ec0196f3f3c55c4ac7c4bedc879bdd8f3
Author: Simon McVittie <smcv@debian.org>
Date:	2016-02-22 16:35:13 +0000

    1.2.2

M	NEWS
M	configure.ac

commit 7fd4c59f906cec2d6b87fde795a72499314273ee
Author: Simon McVittie <smcv@debian.org>
Date:	2016-02-22 16:04:33 +0000

    Disable Automake maintainer mode when building via setup.py

    pip doesn't preserve timestamps in tarballs, so half the build system
    is going to look as though it has been changed.

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	configure.ac
M	setup.py

commit afcf3e432efa8bed73c714d03062fbf53cc76bdf
Author: Simon McVittie <smcv@debian.org>
Date:	2016-02-22 13:18:35 +0000

    Make all test scripts properly executable

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	test/cross-test-client.py
M	test/cross-test-server.py
M	test/test-exception-py2.py
M	test/test-exception-py3.py
M	test/test-p2p.py
M	test/test-signals.py
M	test/test-unusable-main-loop.py

commit 84b7bdafc1deecd9451ba52c30e5dc63a7ebb056
Author: Simon McVittie <smcv@debian.org>
Date:	2016-02-22 13:18:18 +0000

    Don't install crosstest.py executable

    It's meant to be imported, not executed.

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	Makefile.am

commit a7c0dc02695addec1a2ed4c2277878c514883c9d
Author: Simon McVittie <smcv@debian.org>
Date:	2016-02-22 12:27:22 +0000

    Fix setup.py in tarballs on Python 2

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	setup.py

commit e443d3b5c60cf2f5fda17bcba47be3c8279b3140
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2016-02-19 12:47:33 +0000

    Use AX_IS_RELEASE with the micro-version policy

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	NEWS
M	configure.ac
M	dbus/_version.py.in

commit 3df99bcbe3e80467f050484d83eca9ffae03e947
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2016-02-19 12:37:59 +0000

    Use AX_GENERATE_CHANGELOG to generate ChangeLog

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	Makefile.am
M	configure.ac

commit 55d8f3fc9cdfe5b8f00c546a7264b195fb655148
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2016-02-19 12:18:27 +0000

    .gitignore: update and sort

M	.gitignore

commit bfa02dd9f85f90200de796ad2d9e65596e8add6b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2016-02-19 12:17:26 +0000

    check-coding-style: work in out-of-tree builds

M	tools/check-coding-style.mk

commit 67759dbc248f4eb05855a796eea6d464e051b2e8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2016-02-19 12:05:02 +0000

    configure.ac: avoid misleading syntax highlighting

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	configure.ac

commit af14eca77a3f2c037b1aca4d3f6945ffa2b985db
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2016-02-19 12:04:44 +0000

    configure.ac: use AS_CASE, AS_IF

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	configure.ac
M	m4/dbus-py-add-rst2htmlflag.m4

commit 00e36366aa437f592a8e7d9dad5a7764890f40b2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2016-02-19 11:57:11 +0000

    Make autoconf fail with an explanatory message if an AX_ macro
    is missing

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	configure.ac

commit 19879fa7aebea51677550ad2d7cdb07f16ac134f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2016-02-17 13:02:16 +0000

    Remove a leftover reference to m4/am-check-pymod.m4

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	Makefile.am

commit d14e14ad8e4b64203c87b64f176f72803dfccf4e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2016-01-21 20:17:16 +0000

    Use AX_PYTHON_MODULE from autoconf-archive instead of AM_CHECK_PYMOD

M	configure.ac
D	m4/am-check-pymod.m4

commit 14a609ac5e4706bc9ebbe83de8168eb3399bf50c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2016-01-21 20:09:27 +0000

    Ignore .dirstamp files

M	.gitignore

commit 88e9da1ddec51a99246d5128a6202dd9205af34c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2016-01-21 20:06:09 +0000

    Add a setup.py which wraps Autotools in something virtualenv-friendly

M	.gitignore
M	Makefile.am
A	setup.py

commit d7677ab1bcabe60e84215eb17b51b644737bfcb0
Author: Simon McVittie <smcv@debian.org>
Date:	2016-01-20 12:39:07 +0000

    Use gi instead of gobject, everywhere except dbus.gobject_service

M	doc/tutorial.txt
M	examples/example-async-client.py
M	examples/example-service.py
M	examples/example-signal-emitter.py
M	examples/example-signal-recipient.py
M	examples/gconf-proxy-service2.py
M	examples/unix-fd-service.py
M	test/test-server.py

commit ea0e8705750e8b4448e5e51c86d07132cf1ac1c8
Author: Simon McVittie <smcv@debian.org>
Date:	2016-01-20 12:38:48 +0000

    Replace hard-coded sleep with a wait for the D-Bus name to appear

M	Makefile.am
M	test/run-test.sh
A	test/wait-for-name.py

commit c145c7c6b6c62ef097ed33e1abeaa2987b01007d
Author: Simon McVittie <smcv@debian.org>
Date:	2016-01-20 12:19:26 +0000

    Use non-recursive make for tests, and make them into installed-tests

M	Makefile.am
M	configure.ac
D	test/Makefile.am
M	test/TestSuitePythonService.service.in
D	test/dbus_python_check.py
M	test/run-test.sh
M	test/test-client.py
M	test/test-p2p.py
M	test/test-service.py
M	test/test-signals.py
M	test/test-standalone.py
M	test/tmp-session-bus.conf.in

commit 9567e3eab6672705f7259970e8606f4e7adaf991
Author: Simon McVittie <smcv@debian.org>
Date:	2016-01-20 10:48:19 +0000

    Use non-recursive make for everything except tests

M	Makefile.am
D	_dbus_bindings/Makefile.am
D	_dbus_glib_bindings/Makefile.am
M	configure.ac
D	examples/Makefile.am
D	m4/Makefile.am
M	test/Makefile.am
D	tools/Makefile.am

commit 97234e4e95b181747b8f0e7b415c565f4bef6fee
Author: Simon McVittie <smcv@debian.org>
Date:	2016-01-14 09:37:12 +0000

    0.107

M	NEWS
M	configure.ac

commit 838b05c7fac3f6cbebb303ad55507172010c7139
Author: Simon McVittie <smcv@debian.org>
Date:	2016-01-14 08:44:12 +0000

    0.106

M	NEWS
M	configure.ac

commit c4f335cbddf29f271896f491bbb7949ac0680ff5
Author: Simon McVittie <smcv@debian.org>
Date:	2016-01-14 08:38:50 +0000

    manual test: move to test/core

    The strange use of source from a sibling directory seems to be
    breaking
    distcheck:

    Making distclean in manual
    make[3]: Entering directory
    '/.../dbus-glib-0.105/_build/sub/test/manual'
    Makefile:409: ../core/.deps/my-object.Po: No such file or directory
    make[3]: *** No rule to make target '../core/.deps/my-object.Po'.
    Stop.

M	configure.ac
M	test/Makefile.am
M	test/core/Makefile.am
R100	test/manual/invalid-usage.c	test/core/manual/invalid-usage.c
D	test/manual/Makefile.am

commit f9b23a4d7f536b5d4c42c39d170bc561811cbe6f
Author: Simon McVittie <smcv@debian.org>
Date:	2016-01-14 08:34:36 +0000

    test: stop generating marshallers

    They haven't been needed since GLib 2.30. Until now, we were also
    incorrectly distributing the generated marshallers in tarball
    releases.

M	test/core/Makefile.am
M	test/core/my-object.c
M	test/core/my-object.h
M	test/core/test-dbus-glib.c
M	test/manual/Makefile.am

commit 43a446bbd4e7c5726e87882b03185df37e97fe73
Author: Simon McVittie <smcv@debian.org>
Date:	2016-01-14 07:00:13 +0000

    test: stop calling g_mem_profile(), no longer supported

    This now raises a g_warning() which makes the test fail.

M	test/core/test-dbus-glib.c

commit 6211894d92d45271fa5e8c964521ca8ee2cef1ac
Author: Simon McVittie <smcv@debian.org>
Date:	2016-01-14 06:53:22 +0000

    Enable subdir-objects Automake option to silence warnings

    automake: warning: possible forward-incompatibility.
    automake: At least a source file is in a subdirectory, but the
    'subdir-objects'
    automake: automake option hasn't been enabled. [etc.]

M	configure.ac

commit ebda5f95126d6adc38c2511a65e330d472af4f60
Author: Simon McVittie <smcv@debian.org>
Date:	2016-01-14 06:52:30 +0000

    Replace deprecated INCLUDES with AM_CPPFLAGS

M	dbus/Makefile.am
M	dbus/examples/Makefile.am
M	dbus/examples/statemachine/Makefile.am
M	test/Makefile.am
M	test/core/Makefile.am
M	test/interfaces/Makefile.am
M	tools/Makefile.am

commit be7177fafb94bc3db50843e739df4575d4dabac0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2016-01-04 14:08:01 +0000

    NEWS: mention GLib 2.47.2, credit Colin

M	NEWS

commit af8e9f140d50eaf46d89503d2e765699aa923252
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2016-01-04 14:05:30 +0000

    NEWS

M	NEWS

commit 14d608cc0bd83ce5d5bdf469ec0e83a6afd97afd
Author: Colin Watson <cjwatson@debian.org>
Date:	2015-12-26 18:01:04 +0000

    Stop using G_HAVE_INLINE

    GLib removed this macro from its headers in
    db2367e8782d7a39fc3e93d13f6a16f10cad04c2 (GLib 2.47.2).  It's
    unnecessary here for the same reasons, and relying on it now causes an
    unused-function warning from GCC.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=93513
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	dbus/dbus-binding-tool-glib.c

commit b95a7f0f596e3e3d000c3756bb520d28b127d5e1
Author: Simon McVittie <smcv@debian.org>
Date:	2015-12-06 17:46:21 +0000

    Simplify testing by using dbus-run-session and Automake "log compiler"

    Fall back to Telepathy's old with-session-bus.sh script if dbus
    doesn't
    have dbus-run-session (versions < 1.8).

    Also run most of the tests individually, instead of under run-test.sh.

M	configure.ac
M	test/Makefile.am
M	test/run-test.sh
D	test/run-with-tmp-session-bus.sh
A	test/with-session-bus.sh

commit f8379493b1c413d7b583025d47a38f042b710d89
Author: Simon McVittie <smcv@debian.org>
Date:	2015-12-06 10:35:59 +0000

    .gitignore: anchor most patterns at $(top_srcdir), and sort

M	.gitignore

commit 192b5d4ed0021f1e15e42e52763bd4cd32a3b502
Author: Simon McVittie <smcv@debian.org>
Date:	2015-12-05 21:27:10 +0000

    Don't try to build epydoc documentation if we can't "import epydoc"

M	configure.ac

commit 407ad2d298188b83763f7003ae224b505f07e162
Author: Simon McVittie <smcv@debian.org>
Date:	2015-12-06 10:33:28 +0000

    Put Autoconf droppings in build-aux/

M	.gitignore
M	configure.ac

commit 8cbfa02ca5c9847bffabc88320fa4c612d517f86
Author: Simon McVittie <smcv@debian.org>
Date:	2015-12-06 10:33:13 +0000

    Use AX_COMPILER_FLAGS from autoconf-archive

M	NEWS
M	m4/Makefile.am
D	m4/jh-add-cflag.m4
D	m4/tp-compiler-flag.m4
D	m4/tp-compiler-warnings.m4

commit 9eae0f2693acee05887125a46190e682fa119e78
Author: Simon McVittie <smcv@debian.org>
Date:	2015-12-05 15:41:11 +0000

    Use AX_COMPILER_FLAGS

M	_dbus_bindings/Makefile.am
M	_dbus_glib_bindings/Makefile.am
M	configure.ac
M	test/Makefile.am

commit f8479140d228d7d5043069a0e966e9d3bf94e341
Author: Simon McVittie <smcv@debian.org>
Date:	2015-12-05 15:40:52 +0000

    Update build system for Automake 1.13 (parallel test driver)

M	configure.ac
M	test/Makefile.am

commit 6e4ebe32f0f14aceb91011e422eb232e8dd21d4f
Author: Simon McVittie <smcv@debian.org>
Date:	2015-12-05 15:39:30 +0000

    _dbus_py_assertion_failed: flag as NORETURN

M	_dbus_bindings/dbus_bindings-internal.h

commit 2ad803c5326af0569fdb36ce90166292b9fe9a79
Author: Simon McVittie <smcv@debian.org>
Date:	2015-12-04 17:32:03 +0000

    configure.ac: use AS_IF for PYTHON_LIBS

M	configure.ac

commit 8d794193c8ac611f27d32333d50873d4d97aace0
Author: Simon McVittie <smcv@debian.org>
Date:	2015-12-04 17:31:44 +0000

    Try ${PYTHON}-config before searching PATH

    This is helpful for Debian's special debug-build interpreters
    such as python3.4-dbg, each with an accompanying python3.4-dbg-config.

M	m4/am-check-python-headers.m4

commit 6ebbb5bc7abaf3caaa88cc11f6d3969e3f665544
Author: Yamashita, Yuu <peek824545201@gmail.com>
Date:	2015-09-22 23:42:38 +0900

    Find `python-config` from PATH properly

    Expecting `python-config` at the same directory as `python` executable
    would not be suitable if user is using virtualenv.

M	configure.ac
M	m4/am-check-python-headers.m4

commit 998c10b8ec9058f213752818fa20d8362c15c02d
Author: Simon McVittie <smcv@debian.org>
Date:	2015-12-04 15:13:34 +0000

    gconf examples: add brief documentation

M	examples/gconf-proxy-client.py
M	examples/gconf-proxy-service2.py

commit 77075d82f4ec39c35d14536cf13e4266839ae81f
Author: Simon McVittie <smcv@debian.org>
Date:	2015-12-04 15:13:22 +0000

    Use a name in example.com for our example GConf proxy

    dbus-python is not a GNOME project, so we should not use their
    namespace.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=85720

M	examples/gconf-proxy-client.py
M	examples/gconf-proxy-service2.py

commit 1dbda697112becc44e0aa8e303159e0fae5852a3
Author: Ben Longbons <b.r.longbons@gmail.com>
Date:	2014-10-31 14:35:53 -0700

    Install all examples

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=85720
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    [smcv: separated out from a previous commit]

M	examples/Makefile.am

commit f8ffd3ab796ae622912b243c1e6f1d3e12c90ad7
Author: Ben Longbons <b.r.longbons@gmail.com>
Date:	2014-10-31 14:35:53 -0700

    Consistently make examples executable

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=85720
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    [smcv: separated out from a previous commit]

M	examples/example-async-client.py
M	examples/example-client.py
M	examples/example-service.py
M	examples/example-signal-emitter.py
M	examples/example-signal-recipient.py
M	examples/list-system-services.py

commit 246e5b03a137e64611c6f1e368250804d66f73f6
Author: Ben Longbons <b.r.longbons@gmail.com>
Date:	2014-10-31 14:35:53 -0700

    Fix GConf examples

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=85720
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    [smcv: separate out some changes into separate commits]

M	examples/gconf-proxy-client.py
M	examples/gconf-proxy-service2.py

commit 6185aeb81969b82da804c66958d64bc628cb5aa4
Author: Ben Longbons <b.r.longbons@gmail.com>
Date:	2014-10-31 14:35:53 -0700

    Include FallbackObject in "from dbus.service import *"

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=85720
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    [smcv: separate out some changes into separate commits]

M	dbus/service.py

commit 94c6ec840575a11c485ebb3a652a4bc89917dcd0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2015-02-09 16:26:16 +0000

    0.105

M	NEWS
M	configure.ac

commit 3000eaff772abadc1dcd22742d7d80545bd7269f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2015-02-09 15:58:57 +0000

    0.104

M	NEWS
M	configure.ac

commit 82ca3f62848b72061bf041df529bea58e53d55e7
Author: Philip Withnall <philip.withnall@collabora.co.uk>
Date:	2015-02-09 13:38:27 +0000

    doc: Make the deprecation warning bigger

    Make the deprecation warning in the documentation introduction bigger.
    Add a copy of it to the front page of the documentation too, which is
    what people see when they first find the documentation online.

M	doc/reference/dbus-glib-docs.sgml

commit 983ea5ae211dcac80007cc8ef2b3be0aad35ecb1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2015-02-09 15:02:17 +0000

    30574 test: squash some compiler warnings

M	test/core/30574.c

commit 63d86aad0624cb9c861cb8aae53467893b47a497
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2015-02-09 14:49:06 +0000

    Drop unused functions

M	dbus/dbus-gobject.c

commit b972d42d074335d2043fd0c2b4300825a22783b1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2015-02-09 14:48:59 +0000

    Use GLIB_VERSION_MAX_ALLOWED, GLIB_VERSION_MIN_REQUIRED

M	configure.ac

commit fa9065942e51cac4bf3927d7c38e350457ae085a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2015-02-09 14:43:49 +0000

    Stop calling g_thread_init or linking libgthread-2.0

    Since GLib 2.32, which we now depend on, this is unnecessary.

M	configure.ac
M	test/core/peer-client.c
M	test/core/peer-server.c
M	test/core/test-profile.c
M	test/core/test-service-glib.c
M	test/core/test-thread-client.c
M	test/core/test-thread-server.c

commit b5528d7ff526d700aab5b9e11aed871180d4f81e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2014-09-16 13:32:45 +0100

    Require a modern libdbus and a modern GLib

    This means we can assume that GLib and libdbus are thread-safe by
    default.

    Also explicitly document that the object-mapping layer of dbus-glib
    is not thread-safe.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=64214
    Reviewed-by: Colin Walters <walters@verbum.org>
    [with review comments to be fixed in subsequent commit -smcv]

M	configure.ac
M	dbus/dbus-gthread.c
M	test/core/Makefile.am

commit c0d1ffc09b5b008fe9b3ee09330ad663927669af
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2014-09-16 13:36:28 +0100

    Use g_cclosure_marshal_generic for all marshalling

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=64214
    Reviewed-by: Colin Walters <walters@verbum.org>

M	dbus/dbus-gobject.c
M	dbus/dbus-gobject.h
M	dbus/dbus-gproxy.c

commit d3a4fb94e10bacb2c18e0b56456e565471898508
Author: Mike Gorse <mgorse@suse.com>
Date:	2012-08-31 13:24:19 -0500

    Remove erroneous assert from connection_setup_add_timeout

    When switching a connection from one main loop to another, timeouts
    are
    moved to the new connection, so connection_setup_add_timeout gets
    called on
    the new connection for all timeouts that were set on the old
    connection.
    This means that the timeout's data can, in fact, be non-NULL, and
    it will be
    freed / removed from the old connection as a side-effect of adding
    it to the
    new connection. A similar assert was removed from
    dbus_connection_add_watch
    a while ago as part of the original patch for this bug.

    Also, clean up the regression test a bit, and test that a
    DBusConnection
    can be migrated when a pending call is present.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30574
    [resolve conflicts -smcv]
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	dbus/dbus-gmain.c
M	test/core/30574.c

commit 40ae208c3309cfa0be27ef458e6947433ff3841e
Author: Jiří Klimeš <jklimes@redhat.com>
Date:	2012-02-06 14:00:06 +0100

    docs: fix a typo in dbus_g_type_get_struct() description

    Signed-off-by: Jiří Klimeš <jklimes@redhat.com>
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=45686

M	dbus/dbus-gtype-specialized.c

commit b8d44600179172cbf72337f46f4bad58fbefaf8f
Author: Jiří Klimeš <jklimes@redhat.com>
Date:	2012-02-06 12:29:54 +0100

    docs: fix a typo in dbus_g_type_struct_get()'s doc

    Signed-off-by: Jiří Klimeš <jklimes@redhat.com>
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=45686

M	dbus/dbus-gtype-specialized.c

commit 8f9eb639229410a127958424fe1687135be3a38d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2014-09-16 13:31:15 +0100

    Document the entire library as deprecated

M	dbus/dbus-glib.c
M	dbus/dbus-gmain.c
M	dbus/dbus-gobject.c
M	dbus/dbus-gproxy.c
M	dbus/dbus-gthread.c
M	dbus/dbus-gtype-specialized.c
M	dbus/dbus-gvalue-parse-variant.c
M	dbus/dbus-gvalue.c
M	doc/reference/dbus-glib-docs.sgml

commit a868cfe62f36bd11f60b5e68a8af854f95cb4931
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2014-09-16 12:40:52 +0100

    Use gtk-doc in no-tmpl mode, moving documentation into the source code

    Part of a patch from Rafał Mużyło.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=58698

M	configure.ac
M	dbus/dbus-glib.c
M	dbus/dbus-gobject.c
M	dbus/dbus-gproxy.c
M	dbus/dbus-gtype-specialized.c
M	doc/reference/dbus-glib-docs.sgml
M	doc/reference/dbus-glib-sections.txt

commit c67ec31532d678c893a6f29060db4a0e2d9f0770
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2014-09-16 12:39:49 +0100

    Use AC_LANG_PROGRAM to check for socklen_t

    Part of a patch from Rafał Mużyło.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=58698

M	configure.ac

commit 6efaae028bed13d022020ecf728b7442e8fd737b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2014-09-16 12:39:04 +0100

    Replace deprecated AM_PROG_LIBTOOL with LT_INIT

M	configure.ac

commit 019b5f844f4c7bf33759e1e98236b599a542ba6c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2014-09-16 12:38:09 +0100

    Use AC_LANG_PROGRAM in AC_COMPILE_IFELSE

    Part of a patch from Rafał Mużyło.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=58698

M	configure.ac

commit ffa9f9e5e0926cabbfac5cd661a02cfb43bcc952
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2014-09-16 12:35:51 +0100

    configure.ac: modernize AC_OUTPUT

    Part of a patch from Rafał Mużyło.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=58698

M	configure.ac

commit 7678b6f8f43789a880147749bd4b6dc3454d4dec
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:	2014-07-29 11:16:47 +0100

    demarshal_static_variant: fail gracefully with unknown message types

    Refuse to demarshal variants containing unknown types such as
    DBUS_TYPE_UNIX_FD
    or DBUS_TYPE_MAYBE.  Otherwise we will not be able to free them
    automatically
    with g_value_unset.

    Symptoms:
    > GLib-GObject-CRITICAL **: g_value_unset: assertion 'G_IS_VALUE
    (value)' failed

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=80557
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	dbus/dbus-gvalue.c

commit 7b81cf6445b0802c582dfca4a7e5afec5c9c389e
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:	2014-07-28 17:32:16 +0100

    _dbus_gtype_from_signature_iter: fail gracefully with unknown
    message types

    _dbus_gtype_from_signature_iter now returns G_TYPE_INVALID on
    unknown message
    types such as DBUS_TYPE_UNIX_FD or DBUS_TYPE_MAYBE.

    Symptoms:
    > arguments to dbus_signature_iter_recurse() were incorrect, assertion
    > "dbus_type_is_container (dbus_signature_iter_get_current_type
    (iter))" failed
    > in file ../../dbus/dbus-signature.c line 213.
    > This is normally a bug in some application using the D-Bus library.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=80557
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	dbus/dbus-gsignature.c

commit 52e42240ed11a1aeb1e6b6d1c77497e620b36015
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2014-09-05 15:06:20 +0100

    tests: only remove sources that have not already been removed

    With modern GLib, misusing GSource provokes a critical warning, which
    is made fatal by our test framework.

    It is possible (indeed likely) that some or all of the
    cancel_exit_timeout() calls just before re-adding the timeout are
    redundant, but I didn't want to waste time on assessing that - easier
    to just do it every time.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=83530
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	test/core/test-dbus-glib.c

commit eb14381d59ac3fdf7bbd7b75705cbf133cada399
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2014-02-12 15:36:38 +0000

    nano version

M	NEWS
M	configure.ac

commit 397e8297d433547c9bf4150ddd2b9e0b4c39628c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2014-02-12 13:39:09 +0000

    update NEWS, release 0.102

M	NEWS
M	configure.ac

commit f53a35e5d20a2c0010718e7bfd863fc09ff9b1a7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2014-02-12 13:32:29 +0000

    ignore more Automake droppings

M	.gitignore

commit ee0f90d5d619ef53f30edbbeb19c7b6a5055a84b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2014-01-14 11:22:34 +0000

    dbus-binding-tool: check for valid interface, member and property
    names

    Properties are currently allowed to be arbitrary UTF-8 since this
    matches
    dbus-glib's runtime behaviour, although ideally new interfaces should
    use the more restrictive member naming rules (leading to names like
    MyProperty) for interop with QtDBus.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=7909
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	dbus/dbus-gidl.c
M	dbus/dbus-gparser.c

commit f1311ce39c6bcab1e25de20eb684bb78cce56e59
Author: Xavier Claessens <xavier.claessens@collabora.co.uk>
Date:	2013-11-19 16:41:50 -0500

    dbus_g_value_build_g_variant(): Fix NULL string case

    g_variant_new_string(NULL) is not accepted.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=71811
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	dbus/dbus-gtype-specialized.c

commit e0edaf682056f487b315c3d8236a06ac8c156b8d
Author: Xavier Claessens <xavier.claessens@collabora.co.uk>
Date:	2013-11-19 16:16:33 -0500

    dbus_g_value_build_g_variant(): Fix NULL strv case

    g_variant_new_strv(NULL, -1) is not accepted, but (NULL, 0) is good.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=71811
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	dbus/dbus-gtype-specialized.c

commit 2b1b3c4f6c271a64f6767c2cbd9f5713d0bdedaf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-12-04 18:13:10 +0000

    Fix yet another leak, this one caused by poor documentation (#29195)

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=41129
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	test/core/error-mapping.c

commit b78ab1e3f845ae075afe8880c96568506135506c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-22 13:51:13 +0100

    Add a list of Valgrind suppressions for false-positives

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=41129
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

A	tools/dbus-glib-tests.supp
A	tools/dbus-glib.supp

commit 30a03399929cf943449968d537499c63019d36b3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-12-04 17:56:24 +0000

    Add infrastructure for running tests under valgrind

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=41129
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	Makefile.am
M	test/Makefile.am
M	test/core/Makefile.am
M	test/interfaces/Makefile.am

commit 45869f2d43de75c3fef4b3f5978f096296797257
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-22 19:06:29 +0100

    test-dbus-glib: free numerous leaked objects, and clean up more
    thoroughly

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=41129
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	test/core/test-dbus-glib.c

commit 27b65f054da59f2ce660af6b1c3ecdc2647c07bd
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-22 19:04:23 +0100

    Separate the test for shared-bus equivalence into its own binary

    When valgrinding tests it's useful to avoid using the shared bus,
    which
    cannot be closed. Move all the essential shared-bus use into a
    test which
    can be treated specially.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=41129
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	.gitignore
M	test/core/Makefile.am
M	test/core/run-test.sh
A	test/core/shared-bus.c
M	test/core/test-dbus-glib.c

commit f3538c4210447c572aa82cb2eb0305ef7f70b2b3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-22 18:32:35 +0100

    test-types: use a private bus, and close it afterwards

    This frees more of the memory.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=41129
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	test/core/test-types.c

commit 72e865d96b266cc8c9c0586fff2a36382b23d7ec
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-22 18:32:09 +0100

    registrations test: run the connections to completion and call
    dbus_shutdown

    This frees more of the memory.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=41129
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	test/core/registrations.c

commit 48e799e7184722047c4944ab16dc37751cc89227
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-22 18:31:40 +0100

    30574 test: use a private bus so we can free it more thoroughly

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=41129
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	test/core/30574.c

commit ce8f21c62064a3ccd3bfd2d01444e017312ab1d3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-22 18:31:12 +0100

    test-variant-recursion: use a private bus so we can free it more
    thoroughly

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=41129
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	test/core/test-variant-recursion.c

commit 021d157ba43702b05973cbd96fafcf6ec3b96ece
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-22 18:29:27 +0100

    test-variant-recursion: free our GValues and the output string
    correctly

    Previously, if we'd freed the GValues, it would have crashed, because
    g_value_take_boxed on a value of type G_TYPE_VALUE requires that
    the inner
    GValue was g_malloc'd individually, but we were allocating them as a
    block. This only "worked" because *none* of them were freed...

    The returned string was also leaked; free it too, but only on success.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=41129
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	test/core/test-variant-recursion.c

commit 8f7fbad772460e1ec9509de481bd572a7a9233d0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-22 18:25:37 +0100

    registrations test: bin some unused variables

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=41129
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	test/core/registrations.c

commit dacf9d5d09b104469c1b30c6efd4107d03ce79bc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-22 13:50:40 +0100

    interfaces test: don't call an undefined function on failure, just
    use set -e

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=41129
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	test/interfaces/run-test.sh

commit 79d817e8c11f9dd45f83da30f864f31641e05ac0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-22 13:50:11 +0100

    test-client: wait for disconnection, to get more state freed

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=41129
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	test/interfaces/test-client.c

commit 230751f4e63a65294739087ea994bafb320ca3f6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-22 13:49:05 +0100

    test-client: don't leak NodeInfo and one proxy

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=41129
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	test/interfaces/test-client.c

commit 15afdc4c10720c31a4142db66845e806244310a8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-12 12:41:05 +0100

    30574 test: don't leak two messages and a pending call per run

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=41129
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	test/core/30574.c

commit f210a9025fb17b91902b3815411f26eaad4597e7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2013-02-15 12:00:41 +0000

    Add a regression test for CVE-2013-0292

    Inspired by Sebastian Krahmer's 'darklena.c', which used
    this bug to exploit pam_fprintd.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=68603
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	test/core/Makefile.am
A	test/core/proxy-noc.c

commit d5e48a022b7da2d073df22775f8aeab98a82f693
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2013-02-18 13:46:23 +0000

    Update HACKING for current status

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=68602
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	HACKING

commit e1f1926c6b67726206c4c199781831e82553aae9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2013-10-21 12:24:52 +0100

    Bring back NEWS

    I'm the only one who does dbus-glib releases these days, and I find it
    easier to track changes as we go along than to construct a change
    list during the release process.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=68602
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	NEWS

commit f1fc0540d861c7fad17a7d9917db7ff1ddedaa46
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2013-02-18 11:35:47 +0000

    README: replace with a deprecation warning

    Most of the README was really about libdbus anyway.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=68602
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	README

commit 725105b4534e90db01adc7cddc88420a419333fd
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2013-08-27 13:16:51 +0100

    Avoid underlinking internal library libdbus-gtool.la

    Anything that links libdbus-gtool needs to pull in GLib/GObject,
    and the order matters (things that libdbus-gtool depends on must
    appear after libdbus-gtool itself). libtool understands this, but
    only if you tell it the full dependencies.

    This broke compilation of test-dbus-glib.exe when cross-compiling
    for 32-bit Windows with mingw-w64 (GNU tuple: i686-w64-mingw32).

    The linking order used here for dependencies is "lowest in the stack
    first", as recommended by the GStreamer documentation.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=68601
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	dbus/Makefile.am

commit a466946c5ef882ff4710c624b2f33b3ff81a5ea9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2013-08-27 12:23:00 +0100

    tests: fix under-linking

    The test for errors uses dbus_set_error() so it should link -ldbus-1.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=68601
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	test/Makefile.am

commit 425993a3107812734b1138a5a011fed4fc041fef
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2013-05-08 14:09:46 +0100

    development version

M	NEWS
M	configure.ac

commit d0d5b5be685dc4c16b21c54335becc87ca4d6f58
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2013-05-08 08:49:58 +0100

    distribute new tests

M	test/Makefile.am

commit bd6aac594c72d32057a5821fcedb2d36644526aa
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2013-05-08 08:48:28 +0100

    1.2.0

M	NEWS
M	configure.ac

commit 9b26cf8238a7d432fe96a50a75008aa6bce110da
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2013-05-08 08:38:22 +0100

    Add support for skipping tests, and use it

    Now that Python 2.6 isn't a supported version in Debian, it doesn't
    get a gi module, but we can still get some minimal test coverage.

M	test/cross-test-client.py
M	test/cross-test-server.py
M	test/run-test.sh
M	test/run-with-tmp-session-bus.sh
M	test/test-client.py
M	test/test-p2p.py
M	test/test-signals.py

commit 0872782255fdbaeda64311a298664597e59ba94f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2013-05-08 08:37:13 +0100

    utf8 test: pass when used with dbus 1.6.10, 1.7.2

    We used to reject noncharacters, but now we accept them.

M	test/test-standalone.py

commit f909f596705f62a5218cf16d61433364fe2f8168
Author: Marko Lindqvist <cazfi74 gmail com>
Date:	2013-05-07 20:16:20 +0100

    Replace AM_CONFIG_HEADER with AC_CONFIG_HEADERS

    This has been (silently!) deprecated since 2002 and was removed from
    Automake 1.13.

    [added commit message -smcv]
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	configure.ac

commit 423ee853dfbb4ee9ed89a21e1cf2b6a928e2fc4d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2013-04-22 17:40:51 +0100

    Use GObject.__class__ instead of GObjectMeta

    In pygobject 3.8, GObjectMeta is no longer available via
    gi.repository.GObject. What we actually want is "the metaclass of
    GObject", so, say so.

M	NEWS
M	dbus/gi_service.py
M	dbus/gobject_service.py

commit c9ad0a3909c80c09d33b21db6cb46cfee4489010
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2013-04-22 15:47:06 +0100

    Unset DBUS_STARTER_ADDRESS, DBUS_STARTER_BUS_TYPE

    See <https://bugs.freedesktop.org/show_bug.cgi?id=63119>.

M	test/run-with-tmp-session-bus.sh

commit 121c294b1853a280b01e0504eb1828c6d0e07bbc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2013-04-22 15:44:57 +0100

    Require D-Bus 1.6, drop fallback paths

M	NEWS
M	_dbus_bindings/compat-internal.h
M	_dbus_bindings/message-append.c
M	configure.ac

commit 9cd58adf12ec11069947032c01e8d12fde9d34fd
Merge: 75c61e7 02b44f8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2013-02-25 12:56:34 +0000

    Merge tag 'dbus-glib_0.100.2'

    dbus-glib_0.100.2

    Conflicts:
	    configure.ac

commit 75c61e7d357fac288d4591d32536d395f50ad8bc
Author: Marko Lindqvist <cazfi74@gmail.com>
Date:	2013-02-25 12:40:11 +0000

    use AC_CONFIG_HEADERS, not AM_CONFIG_HEADER

    Automake-1.13 removed long obsolete AM_CONFIG_HEADER completely
    <http://lists.gnu.org/archive/html/automake/2012-12/msg00038.html> and
    errors out upon seeing it.

    [commit message added -smcv]
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=59003
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	configure.ac

commit 02b44f8427ea48463d7b9f2a9f7099be7643b60d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2013-02-25 12:24:35 +0000

    0.102: respin tarball

M	configure.ac

commit f2d10073a23987c9eef3a6384faa0f7813108936
Merge: ee85b07 78f3e95
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2013-02-15 17:13:33 +0000

    Merge tag 'dbus-glib_0.100.1'

commit 78f3e953e4a05a1126874dd2ca6cec5777a15b3b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2013-02-15 12:37:04 +0000

    0.100.1 point release

M	configure.ac

commit 166978a09cf5edff4028e670b6074215a4c75eca
Author: Colin Walters <walters@verbum.org>
Date:	2013-02-14 10:19:34 -0500

    CVE-2013-0292: dbus-gproxy: Verify sender of NameOwnerChanged signals
    to be o.f.DBus

    Anyone can hop on the bus and emit a signal whose interface is
    o.f.DBus; it's expected at the moments that clients (and notably DBus
    libraries) check the sender.

    This could previously be used to trick a system service using
    dbus-glib
    into thinking a malicious signal came from a privileged source, by
    claiming that ownership of the privileged source's well-known name had
    changed from the privileged source's real unique name to the
    attacker's
    unique name.

    [altered to be NULL-safe so it won't crash on peer connections -smcv]
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	dbus/dbus-gproxy.c

commit ee85b071fb51efb9f9a48d4a658cbefefd14544a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-04-20 16:15:20 +0100

    Add a feature test for fd.o #23633, non-default main context

    [rebased and added to run-test.sh -dbcw]
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=23633

M	.gitignore
M	test/core/Makefile.am
A	test/core/private.c
M	test/core/run-test.sh

commit a90fe0f1d742579b6bcc07980551969c556c184b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-11-19 16:12:32 +0000

    test-profile: exit a bit more gracefully

    We close the connection to ourselves, resulting in libdbus shooting us
    in the head unless we ask it not to. Nice to see how thoroughly this
    code has been tested...

    For future reference, it can be tested like this:

	DBUS_TOP_BUILDDIR=$(pwd) ./test/core/run-test.sh profile

    (or substitute the real absolute top build directory, if out-of-tree).

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40711
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Dan Williams <dcbw@redhat.com>

M	test/core/test-profile.c

commit fac9b965fb65352641521d380b1428702015012b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-11-19 16:09:14 +0000

    test-profile: actually initialize GLib, if required

    It's alarming how often the phrase "I'm amazed this ever worked" comes
    up while maintaining dbus-glib.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40711
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Dan Williams <dcbw@redhat.com>

M	test/core/test-profile.c

commit e4a163431f2cd26959c9f46e573fc200c5b9fd3d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-11-19 15:55:53 +0000

    Remove check for abstract sockets, not relevant to dbus-glib

    test-profile.c was its only use, and all it was used for was to listen
    on an abstract or path-based socket, matching what D-Bus would do,
    when obtaining comparative performance figures for D-Bus vs.
    plain Unix sockets.

    test-profile.c isn't normally run, only works on Unix, and
    the check for abstract sockets was broken on current glibc (fd.o
    #29895),
    leading to us using the non-abstract code path anyway, so this clearly
    wasn't very important. I'm tempted to delete test-profile.c entirely,
    but until then, let's just make it use path-based sockets.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40711
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Dan Williams <dcbw@redhat.com>

M	Android.mk
M	configure.ac
M	test/core/test-profile.c

commit bed0713c0a67b7bd558285b748ff212a3dfdd003
Author: Dan Williams <dcbw@redhat.com>
Date:	2012-10-07 10:55:50 -0500

    Add DBusGMethodInvocation accessor for the DBusGConnection

    If you're using two connections, say a shared connection and a private
    connection that uses DBusServer, there's no way to figure out which
    DBusConnection a method invocation originates from, and thus no way
    to do access control based on that.

    Private bus setup done with eg:

    void new_conn_func(DBusServer *s, DBusConnection *conn, gpointer
    to_export)
    {
      DBusGConnection *gconn;

      /* set access control, eg with
      dbus_connection_set_unix_user_function() */
      dbus_connection_setup_with_g_main(conn, NULL);

      gconn = dbus_connection_get_g_connection(conn);
      dbus_g_connection_register_object(gconn, "/foo", G_OBJECT
      (to_export));
    }

    void start_server(GObject *to_export)
    {
      DBusServer *s;

      s = dbus_server_listen("unix:path=/var/foo", NULL);
      dbus_server_setup_with_g_main (s, NULL);
      dbus_server_set_new_connection_function (s, new_conn_func,
      to_export);
    }

    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=55729

M	dbus/dbus-glib.h
M	dbus/dbus-gobject.c

commit f9056cf5fe5ce67ad0b530c9af1977860231dde2
Author: Dan Williams <dcbw@redhat.com>
Date:	2012-10-07 11:09:10 -0500

    Add dbus_g_connection_open_private() for private D-Bus sockets

    Like dbus_g_connection_open() but for private bus sockets, calling
    dbus_connection_open_private() and ensuring the dbus-glib types are
    initialized.

    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=55730

M	dbus/dbus-glib.h
M	dbus/dbus-gmain.c

commit 2e1ba392a29107c9bf9413113aff7b98a963da21
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-20 12:36:36 +0100

    Remove declaration of _dbus_gutils_test, which does not exist

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40711
    Reviewed-by: Dan Williams <dcbw@redhat.com>

M	dbus/dbus-gtest.h

commit 107bc996d95f0068f7c6144c713819aa1b77c203
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-11-03 12:36:04 +0000

    Flatten _dbus_gmain_test into _dbus_gvalue_test

    It actually only tests _dbus_gtype_from_signature and related things,
    and has nothing to do with main loop integration.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40711
    Reviewed-by: Dan Williams <dcbw@redhat.com>

M	dbus/dbus-gmain.c
M	dbus/dbus-gtest.c
M	dbus/dbus-gtest.h
M	dbus/dbus-gvalue.c

commit fc3d2bffd9cbac6002c5aa8c6369129e51dfcf6e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-20 12:28:38 +0100

    Move _dbus_gvalue_utils_test into a separate binary, it only uses
    public API

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40711
    Reviewed-by: Dan Williams <dcbw@redhat.com>

M	.gitignore
M	dbus/dbus-gtest.c
M	dbus/dbus-gtest.h
M	dbus/dbus-gvalue-utils.c
M	test/Makefile.am
A	test/specialized-types.c

commit 2a339b850872094d6ebf3c42c6704105ce96a10d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-20 11:44:37 +0100

    _dbus_gvalue_utils_test: don't call private API

    dbus_g_type_specialized_init should be, and is, sufficient.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40711
    Reviewed-by: Dan Williams <dcbw@redhat.com>

M	dbus/dbus-gvalue-utils.c

commit 0ae4c0d0c3acc63bdf97dde0c29625ff03889856
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-20 11:42:36 +0100

    Use more modern assertions in errors test

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40711
    Reviewed-by: Dan Williams <dcbw@redhat.com>

M	test/errors.c

commit 18a6eb96849b1931f478bfba0823f0c5a7d24fbe
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-11-03 12:22:43 +0000

    Turn _dbus_glib_test into a standalone test case, since it only
    tests public API

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40711
    Reviewed-by: Dan Williams <dcbw@redhat.com>

M	.gitignore
M	dbus/dbus-glib.c
M	dbus/dbus-gtest.c
M	dbus/dbus-gtest.h
M	test/Makefile.am
A	test/errors.c

commit 82c724ab629d7aaea7f7461c375407ac41c0c09a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-20 11:29:50 +0100

    Remove --with-socket-dir, use /tmp for its only use

    test-profile.c is not run by default anyway, and it hard-codes the
    use of Unix
    sockets which isn't portable off Unix. If you have Unix sockets
    but not
    /tmp, then your platform has worse problems than inability to run
    all dbus-glib tests.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40711
    Reviewed-by: Dan Williams <dcbw@redhat.com>

M	configure.ac
M	test/core/test-profile.c

commit 61081c7ed819a844e26837688347182721922d57
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-20 11:25:49 +0100

    Move AC_ARG_ENABLE for checks/assertions closer to where it takes
    effect

    The command line is parsed early on anyway.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40711
    Reviewed-by: Dan Williams <dcbw@redhat.com>

M	configure.ac

commit 8459facc2c5d7f36849b93e40df81a415f5c40b8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-20 11:23:20 +0100

    Remove remnants of DBUS_DISABLE_CHECKS

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40711
    Reviewed-by: Dan Williams <dcbw@redhat.com>

M	configure.ac

commit aaddc6c50d961a78e63145a1f40ada28a0fe5109
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-20 11:22:41 +0100

    Remove remnants of DBUS_DISABLE_ASSERT

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40711
    Reviewed-by: Dan Williams <dcbw@redhat.com>

M	configure.ac
M	test/core/test-profile.c

commit 39a1c14556d4f89ae9bd1d63155ee622afe89bfb
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-20 11:21:36 +0100

    Remove unused support for "verbose mode"

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40711
    Reviewed-by: Dan Williams <dcbw@redhat.com>

M	configure.ac
M	test/core/test-profile.c

commit 7ee9f5c9b91c0f3e196bf47e96ec7cc01c0c7509
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-17 12:29:17 +0100

    Use standard autotools @abs_top_builddir@ to replace
    TEST_SERVICE_BINARY etc.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40711
    Reviewed-by: Dan Williams <dcbw@redhat.com>

M	configure.ac
M	test/core/Makefile.am
M	test/data/valid-service-files/debug-echo.service.in
M	test/data/valid-service-files/debug-glib.service.in
M	test/data/valid-service-files/interfaces-test.service.in
M	test/interfaces/Makefile.am

commit 23ad1e98c62fd31adf06dd1f138be3853855f4a7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-17 12:28:06 +0100

    Remove EXPANDED_LOCALSTATEDIR etc., no longer needed

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40711
    Reviewed-by: Dan Williams <dcbw@redhat.com>

M	configure.ac

commit c57c4d281369589b636aee928238b7cf6e42e00f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-10-23 19:34:35 +0100

    NEWS

M	NEWS

commit f52465232234ae71fa16741abcd57aab155949ad
Author: Thiago Macieira <thiago.macieira@intel.com>
Date:	2012-10-23 11:12:21 -0700

    Update the confusing notice of what license dbus-python is under

    We tried to change the license for the D-Bus core too but were unable
    to reach all copyright holders. The MIT license was the suggested new
    license and all reached parties had agreed to.

    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	COPYING

commit d262628e89115bbcc33c439c77d33733c4a23491
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-10-16 18:33:08 +0100

    DBusException: override both __str__ and __unicode__

    Avoid chaining up to the superclass, because that behaves particularly
    oddly. This fixes regression test failures: str(some_dbus_exception)
    was no
    longer prefixed with the D-Bus error name under Python 2.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=55899

M	dbus/exceptions.py

commit 544e05a16e55dad7e666baabfb665997a79d6580
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-10-16 18:31:43 +0100

    Slightly better test coverage

M	test/test-client.py

commit efdd1823239b02fe5a39e766cbd7597e6c3fcb96
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-10-16 17:52:36 +0100

    Use a form of assertRaises() that works in Python 2.6

M	test/test-exception-py2.py

commit 83615efbed565a689008b00a4ac82fc0fc4e5603
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-10-16 17:52:22 +0100

    Skip test_dbus_exception_convert_str_fail under unusual default
    encodings

    This would actually work fine if the default encoding was UTF-8 or
    Latin-1 or something.

M	test/test-exception-py2.py

commit 09b540bd55fb2fca14d4df7e0c520b8ba0ce4646
Author: Michael Vogt <mvo@ubuntu.com>
Date:	2012-10-12 13:37:51 +0200

    Support unicode messages for DBusException in Python 2

    [commit message amended -smcv]
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=55899
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	dbus/exceptions.py
M	test/run-test.sh
A	test/test-exception-py2.py
A	test/test-exception-py3.py

commit 5558ee11313fd929ed6aeb22228e89de2263e520
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-07-04 12:17:10 +0100

    Link Python extensions differently on Windows

M	_dbus_bindings/Makefile.am
M	_dbus_glib_bindings/Makefile.am
M	configure.ac

commit ec2671485a23090c470180eb297e67b86638d9b5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-07-04 12:15:16 +0100

    Replace incorrect AM_LDFLAGS usage with a proper AM_LDFLAGS/LIBADD
    split

M	_dbus_bindings/Makefile.am
M	_dbus_glib_bindings/Makefile.am

commit 9c02d05642c8f99e3fe61804bcc33df380ebd5b1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-07-04 20:27:12 +0100

    run-test.sh: don't go via make to run the cross-test

    Based on a patch from Christoph Höger.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=51725

M	test/run-test.sh

commit e8a507570e12778a0f325786fcf9f5f768019118
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-07-04 19:49:13 +0100

    NEWS

M	NEWS

commit f3199102a68c72460fd0a025ab966557a0996223
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-07-04 19:49:07 +0100

    Don't include stdint.h

    Every use here turns out to be unnecessary, some compilers *still*
    don't have it after more than a decade in ISO C, and if we need
    fixed-length integer types we can use the ones from D-Bus.

M	_dbus_bindings/abstract.c
M	_dbus_bindings/bytes.c
M	_dbus_bindings/containers.c
M	_dbus_bindings/float.c
M	_dbus_bindings/signature.c
M	_dbus_bindings/types-internal.h

commit 6f5ec9552ca169b66b338698850a125151e3599c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-07-04 19:36:26 +0100

    Re-indent now that the indentation is unecessary

M	_dbus_bindings/server.c

commit 5b79604a6d1eb11268293342d19da633e5eedaa4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-07-04 19:35:43 +0100

    Avoid variable-length arrays, which MSVC *still* doesn't support

    Based on patches from Christoph Höger.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=51725

M	_dbus_bindings/message-append.c
M	_dbus_bindings/server.c

commit bdc48547078b8ba09856c81b7c4f148fb163c01b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-07-04 19:19:12 +0100

    Use AC_C_INLINE to make sure "inline" works

M	configure.ac

commit 1a61c71e4037ebea5db7dc2f0fdceae764e47e17
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-06-28 12:54:02 +0100

    my_object_unsafe_disable_legacy_property_access: have the right
    signature

    I'm amazed this ever worked.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=51511
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Colin Walters <walters@verbum.org>

M	test/core/my-object.c
M	test/core/my-object.h

commit e2ae8f0d14f90162121387173db514dbd4c6ce50
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-06-25 21:28:34 +0100

    Development version

M	configure.ac

commit 807b93bbef4cefd101a7c9456916554a550b6110
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-30 16:18:29 +0100

    Fix documentation upload target for recent gtk-doc

    It previously said docs/ not doc/ (which should have been changed when
    copying this target from Telepathy); and now that gtk-doc builds
    in the
    builddir, we need to copy HTML from there, not from the srcdir.

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	Makefile.am

commit 3d23ff9e91151c2fb8e5ccb74067ff7ad6df3067
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-06-25 21:20:12 +0100

    reset to unreleased

M	configure.ac

commit 86b978042fa23d9b262cb0baa40398e21ddb0530
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-06-25 21:19:35 +0100

    prepare release

M	NEWS
M	configure.ac

commit c6cbdf9ed99f82983dd529319475dd02c53ad2aa
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-06-25 18:23:30 +0100

    Fix builds without tests

M	test/manual/Makefile.am

commit a0dd0c8c240896a5dd205c1dbc51924b9d41f833
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-06-25 17:26:48 +0100

    Prepare version 0.100

M	configure.ac

commit 8b7e4a1c4ae055864e26db4addbcc2dc38ee6963
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-04-16 12:11:38 +0100

    Fix two crashes when dbus_g_proxy_new_for_peer is used on a bus

    The first part of the bug is that when NameOwnerChanged is received
    with
    a dbus_g_proxy_new_for_peer (which has no name) alive, checking
    whether it was affected by the NameOwnerChanged caused a NULL
    dereference and segfault.

    The second part of the bug is that if the last proxy in existence is
    for a peer, when it was unregistered there would be no
    owner_match_rules,
    causing a crash.

    Both are exercised in the new test added here.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=41126
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

M	.gitignore
M	dbus/dbus-gproxy.c
M	test/core/Makefile.am
A	test/core/peer-on-bus.c
M	test/core/run-test.sh

commit 82d45d15088d206f1e1f024215e95301fa04e92c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-04-16 12:10:37 +0100

    Add a utility function to tear down a private connection in tests

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=41126
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

M	configure.ac
M	test/Makefile.am
M	test/core/Makefile.am
M	test/interfaces/Makefile.am
A	test/lib/Makefile.am
A	test/lib/util.c
A	test/lib/util.h

commit 403c5bf4d98fcba83caa94aee96da27128bbf9c8
Author: Matthias Klose <doko@ubuntu.com>
Date:	2012-06-25 17:11:45 +0100

    Fix build error with -Werror=format-security

    Origin: vendor, Ubuntu
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	dbus/dbus-gobject.c

commit f6066573d25508f5cbbc5c12254086d419bb8828
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-06-25 17:01:51 +0100

    fd.o #40817: validate UTF-8 according to the same rules as libdbus

M	NEWS
M	_dbus_bindings/message-append.c
M	configure.ac
M	test/test-standalone.py

commit 4a0f4379d4a5783d576aec90019a39459eff007d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-06-05 19:39:20 +0100

    NEWS

M	NEWS

commit 6ff89bf0d05a550cf1aff2053579fc1f0192cd97
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-06-05 19:07:51 +0100

    Py3: correctly guess the signature of ObjectPath(...) and
    Signature(...)

    Under Python 2, ObjectPath and Signature are subtypes of str (=
    bytes),
    and the existing type-guessing worked.

    The type-guessing code assumed that all unicode objects were just
    strings, but that assumption became false in the Python 3 port:
    ObjectPath and Signature are still subtypes of str, but str now means
    unicode, not bytes.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=50740

M	_dbus_bindings/message-append.c
M	test/test-standalone.py

commit 2f08b9e644c8530c4d324c4bd9d8a0cdb24edc92
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-05-09 17:50:59 +0100

    Back to unreleased status

M	NEWS
M	configure.ac

commit 4a4bce958b3257b7cb2adc050022879660aface1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-05-09 15:47:48 +0100

    1.1.0

M	NEWS
M	configure.ac
M	dbus/gobject_service.py

commit e2e589889ef5257f62cc3a32561142f625716ef0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-05-02 11:11:11 +0100

    Make AM_CHECK_PYTHON_HEADERS compatible with Python 3 in the absence
    of python3-config

M	m4/am-check-python-headers.m4

commit 2f59718a4bf22cbea28e0c7b2f880f86d4497a7a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-05-02 10:44:13 +0100

    Deprecate dbus.gobject_service and make it vaguely compatible with 1.0

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=48904

M	dbus/gobject_service.py

commit 5b9f87676802f04ebc339fd16a4a30dc42e33c91
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-05-02 10:41:27 +0100

    Reinstate the old dbus.gobject_service, but only for Python 2

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=48904

M	Makefile.am
M	configure.ac
A	dbus/gobject_service.py

commit ba3f3ff253982c9ad3b5a33df5b120e5692c9d29
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-05-02 10:39:29 +0100

    Rename gobject_service (PyGI version) to gi_service

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=48904

M	Makefile.am
R090	dbus/gobject_service.py dbus/gi_service.py
M	test/test-service.py

commit ae0ed3e435c550c3fae1a86a1c3cb42da319dff2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-28 17:42:44 +0100

    Move use of 0 as an error domain into the invalid-usage test

    I think this is invalid, although others might disagree.

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40151
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

M	test/core/error-mapping.c
M	test/manual/invalid-usage.c

commit 92c613b8f429a4fe6c762805f1a4f3588511e6a7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-28 17:35:42 +0100

    Add a manual test for various invalid behaviour

    Most of this has been sitting in a branch since fd.o #30171; fixing
    fd.o #40151, another case of library-user error leading to undefined
    behaviour and a hard-to-diagnose crash, seems a good time to get this
    merged.

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40151
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

M	.gitignore
M	configure.ac
M	test/Makefile.am
A	test/manual/Makefile.am
A	test/manual/invalid-usage.c

commit 539bd92b8703134057c039f965ff7a5b5434c3a7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-28 17:41:35 +0100

    Remove tests in test-dbus-glib which basically just test error mapping

    Also remove the methods on MyObject that only existed to support these
    tests; ThrowError is now versatile enough to implement them all.

    Leave ThrowUnregisteredError as it is, since it violates GError
    expectations (see GNOME#660371), but stop using it in test-dbus-glib -
    it's enough to use it in test-error-mapping.

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40151
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

M	test/core/my-object.c
M	test/core/test-dbus-glib.c
M	test/core/test-service-glib.xml

commit b0dc0f419b641f4ab8fdd8eaf69f4ed4c2d61159
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-28 14:56:45 +0100

    Add a new test for error mapping

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40151
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

M	.gitignore
M	test/core/Makefile.am
A	test/core/error-mapping.c
M	test/core/run-test.sh

commit 5aa25d4f3c44e7f46e95b8d8de64bf63f2c7c42e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-28 17:23:18 +0100

    MyObject: make ThrowError, AsyncThrowError throw a caller-specified
    error

    This can be used to test arbitrary errors, but only in-process; in
    tests with the service out-of-process, like test-dbus-glib,
    the initial
    error (matching the error they previously threw) will always be used.

    This obsoletes ThrowErrorUnderscore, ThrowErrorMultiWord and
    ThrowNotSupported, but not ThrowUnregisteredError due to some strange
    assumptions about the validity of GError domains in that method
    (see GNOME#660731).

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40151
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

M	test/core/my-object.c
M	test/core/my-object.h

commit df3949806818ba0eab495fcaad2c7f3ad38007c7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-28 16:14:52 +0100

    test-dbus-glib.c isn't GTest yet, but add bug numbers anyway

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40151
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

M	test/core/test-dbus-glib.c

commit ead4ef065f700a4b586e78400789a7a18c856cc4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-28 14:57:02 +0100

    Add copyright/licensing information to test-dbus-glib

    I've tried to dig up the copyright holders from git history; possibly
    incomplete, but none of them cared enough to add their own copyright
    notices, so this is the best we'll get.

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40151
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

M	test/core/test-dbus-glib.c

commit 309bce6d7965037bc6f1827715d2372ae19c98d5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-28 13:23:29 +0100

    Form a valid D-Bus error name if an unmapped error has a negative code

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40151
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

M	dbus/dbus-gobject.c

commit ffd32e448a76045696d81a82fec9aeac7dd5e64b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-28 12:20:16 +0100

    If an error code is out of range for its domain, warn about it

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40151
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

M	dbus/dbus-gobject.c

commit a31371cb5852c485b85926125988c0a170a640ca
Author: David Woodhouse <dwmw2@infradead.org>
Date:	2011-09-28 12:16:01 +0100

    Don't crash in gerror_domaincode_to_dbus_error_name if code is out
    of range

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=40151
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	dbus/dbus-gobject.c

commit f264e37f13720898d941f3636f77c489a9a1d845
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-03-12 11:41:00 +0000

    Fix ref leak in dbus_py_variant_level_set

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=47108
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	_dbus_bindings/abstract.c

commit 86ba4b0b8591b882803be1a064df4c213349fba0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-22 18:25:02 +0100

    dbus_g_value_parse_variant: fix several GVariant ref leaks

    g_variant_get_child_value() (and hence g_variant_get_variant(),
    which is
    a simple wrapper) returns a ref to the child; we were assuming
    it didn't.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=41125
    Reviewed-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

M	dbus/dbus-gvalue-parse-variant.c

commit c53788657c0cfbd038325e690e7097e31f5e8430
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-02-29 13:35:24 +0000

    Put sockets for the regression tests in /tmp, not ${builddir}

    Some automated build systems (naming no Portage) have really long
    build
    directories, which can cause dbus-python to hit the length limit
    for Unix
    sockets' names.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=46747
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	test/tmp-session-bus.conf.in

commit 1055343d746accc4048e5806f84a880143444c9f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-11-15 16:07:57 +0000

    Use DBusBasicValue instead of reinventing it, if dbus is new enough

    If we don't find it, continue to reinvent it, but move the reinvention
    to an internal header so it's at least the same in both files that
    want it.

M	_dbus_bindings/Makefile.am
A	_dbus_bindings/compat-internal.h
M	_dbus_bindings/message-append.c
M	_dbus_bindings/message-get-args.c
M	configure.ac

commit 8e4836c318eb64ef720b497bebc247ac6a468b4b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-02-01 10:10:26 +0000

    Fix _maintainer-update-htmldocs for out-of-tree builds

M	Makefile.am

commit de81bf8dd5d70f4184412a5c7c2aacd82348d7ea
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-02-01 10:10:10 +0000

    Remove TODO, which is now empty - use bugzilla instead

M	Makefile.am
D	TODO

commit 996a3f46f0998219eaf0cd68a744ebc90cfc6dd8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-01-24 20:33:38 +0000

    back to unreleased

M	configure.ac

commit c59647b024b3242810fe46e500d557fd56d684d4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-01-24 20:33:26 +0000

    retroactively add release date

M	NEWS

commit 5a8eb939ab4603a931457c5d4e8dfcdc323eaf89
Author: Barry Warsaw <barry@python.org>
Date:	2012-01-24 16:43:05 +0000

    Install _compat.py

M	Makefile.am

commit d1ccc12dd1dee34faae52c7b325048ea801599fd
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-01-24 16:41:46 +0000

    Generate ChangeLog correctly when out-of-tree

M	Makefile.am

commit 1ee2b1a8cf729a71ae56e5671564c5fd62504707
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-01-24 16:36:49 +0000

    Let's call this 1.0

M	NEWS
M	configure.ac

commit 5b76f66e79f9bc07241a44c0277d4bbebc08ce20
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-01-24 16:35:45 +0000

    Remove duplicate -Werror machinery

M	configure.ac

commit cd4e91c65624062b5504c10b2af0a05aefbf4878
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-01-24 16:35:38 +0000

    Move PY3PORT into doc, use the same extension as other rst, and
    render it

M	Makefile.am
M	NEWS
M	configure.ac
R100	PY3PORT.rst	doc/PY3PORT.txt

commit 09ca5de0f38d3cc30b8d149b2a8c9f0ad810a09a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-01-24 16:21:15 +0000

    Describe problems, alternatives

M	README

commit b486edf800ecb9d2e23a35f7ac3151657ee39250
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-01-24 16:06:35 +0000

    Deprecate dbus.glib (use dbus.mainloop.glib or dbus.mainloop.qt4)

M	dbus/glib.py

commit 50fa5eb54992c28d63b0532533f755ff39f082e2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-01-11 15:02:40 +0000

    Add INTORLONG_CHECK macro so we don't have to conditionalize
    PyInt_Check

M	_dbus_bindings/bus.c
M	_dbus_bindings/bytes.c
M	_dbus_bindings/dbus_bindings-internal.h
M	_dbus_bindings/message-append.c
M	_dbus_bindings/unixfd.c

commit 4f043cf34a8001c071644eb8c89dc7d43e86b62a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-01-11 15:01:39 +0000

    Use native 'int' (whatever that means) for variant_level etc.

    This reverts the Python 2 API to be in terms of PyInt, leaving the
    Python 3 API in terms of PyLong (which is called 'int' in Python
    code).

M	NEWS
M	PY3PORT.rst
M	_dbus_bindings/abstract.c
M	_dbus_bindings/bytes.c
M	_dbus_bindings/conn-methods.c
M	_dbus_bindings/dbus_bindings-internal.h
M	_dbus_bindings/message-get-args.c
M	_dbus_bindings/message.c

commit cdc0ca5c72686aab38a172f14da3b38fe304baa9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-01-11 14:59:36 +0000

    update NEWS, PY3PORT.rst

M	NEWS
M	PY3PORT.rst

commit ae61078cc90917c20b14298aaec18e87e149d337
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-01-11 14:04:14 +0000

    Test behaviour of various Message methods

M	test/test-standalone.py

commit 69342f86b0d036ca41a19363efaf4e8352837c24
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-01-11 14:03:53 +0000

    Do not allow Byte(unicode(x)) (i.e. Byte(str(x)) in Python 3)

    Unicode strings aren't bytestrings, so there's no obvious meaning for
    the byte value of a Unicode string of length 1.

M	PY3PORT.rst
M	_dbus_bindings/bytes.c
M	test/cross-test-client.py
M	test/test-standalone.py

commit cada4883df6b67f4059eedd2def1f5cffa41c7d8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-01-11 12:58:21 +0000

    Use better names for the superclasses of Byte and ByteArray

    Strictly speaking, DBUS_FOO is libdbus' namespace, not ours. Use
    DBUS_PY_FOO.

    DBUS_BYTES_BASE was misleading: it's the base class for a single byte,
    so call it DBUS_PY_BYTE_BASE.

M	_dbus_bindings/bytes.c

commit beaa479066a0139bbb09f058818cd5476f1a79d2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-01-11 12:57:15 +0000

    Consistently use the str type for identifier-like (ASCII) strings

    Porting to Python 3 left these methods returning unicode, which is
    arguably an API break in Python 2:

    * Message.get_member
    * Message.get_path_decomposed (array of unicode)
    * Message.get_sender
    * Message.get_destination
    * Message.get_interface
    * Message.get_error_name
    * Server.get_address
    * Server.get_id

    Instead, make them return whatever the natural str type is (bytes in
    Python 2, unicode in Python 3).

M	_dbus_bindings/bus.c
M	_dbus_bindings/conn-methods.c
M	_dbus_bindings/exceptions.c
M	_dbus_bindings/message.c
M	_dbus_bindings/server.c

commit a5c77b73651f8f288f7ea2eb9029895eed3cacab
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-01-11 12:54:26 +0000

    DBusPythonString base class: use "native str" as base class instead
    of reinventing it

M	_dbus_bindings/abstract.c
M	_dbus_bindings/dbus_bindings-internal.h

commit 0daad225ff9085c4013da69e5733e8846e9b8de3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2012-01-11 12:50:43 +0000

    SignalMessage.__repr__: include the destination and abbreviate
    "interface" more conventionally

    Yes, signals can have a destination. The default is to broadcast.

M	_dbus_bindings/message.c

commit 51222609f1af2eda0c223881dda3985435c3ad3f
Author: Colin Walters <walters@verbum.org>
Date:	2012-01-08 11:29:33 -0500

    test-service-glib: Fix build with GLib 2.30

    Only <glib.h> can be included directly.

M	test/core/test-service-glib.c

commit 0215b0af4c95c9b9fc79ada5b99882f1261e2644
Author: Colin Walters <walters@verbum.org>
Date:	2012-01-08 11:28:10 -0500

    autogen.sh: Honor NOCONFIGURE=1 environment variable

    http://people.gnome.org/~walters/docs/build-api.txt

M	autogen.sh

commit 9201d65b31305c8bef86ab072b7c33b197ede562
Author: Barry Warsaw <barry@python.org>
Date:	2011-12-17 12:09:57 -0500

    Quash a few more deprecations.

M	test/test-p2p.py
M	test/test-signals.py

commit f8dab5af0bef5d26a51df41a564a5285c16a9cb5
Author: Barry Warsaw <barry@python.org>
Date:	2011-12-16 17:07:07 -0500

    More Python 3 porting, this time primarily to get test-client.py
    working.
    Changes include:

    - DBusException.get_dbus_message(): In Python 3, the str of the
    exception will
      already be a unicode, so don't try to decode it unless it's a
      bytes object
      (a.k.a. 8-bit str in Python 2).
    - gobject_service.py: Switch to pygi and rewrite the metaclass
    instantiation
      code to be portable between Python 2 and Python 3.
    - run-test.sh: echo a few more useful environment variables
    - test-client.py:
      - Globally replace deprecated assertEquals with assertEqual
      - Globally replace deprecated assert_ with assertTrue
      - Use bytes objects for both 'ay' signatured methods on the server
      - AcceptUnicodeString will return a native unicode, i.e. a str in
      Python 3
	and a unicode in Python 2.  Python 3 has no `unicode` built-in.
      - Reformat some long lines for debugging.
    - test-service.py:
      - Open the log file in 'a' mode for easier tailing.
      - AcceptUnicodeString will return a native unicode, i.e. a str in
      Python 3
	and a unicode in Python 2.  Python 3 has no `unicode` built-in.
      - reformat some long lines for debugging.
      - Put module-scope code into a main() function and add a bunch
      of logger
	output for better debugging.  `session_bus` must still be
	global though.
	Wrap main() in a bit try/except to log all top-level exceptions.

M	dbus/exceptions.py
M	dbus/gobject_service.py
M	test/run-test.sh
M	test/test-client.py
M	test/test-service.py

commit 2167b305db78b8345b0f5ea23bfa445fa7cfca4d
Author: Barry Warsaw <barry@python.org>
Date:	2011-12-16 11:15:01 -0500

    Re-enable the other tests, even though these still fail for me
    (b.f.o #43303).
    Fix another except syntax problem.

M	test/run-test.sh
M	test/test-client.py

commit 0c71d7dd6eb843a74931c714d6142921f1971f88
Author: Barry Warsaw <barry@python.org>
Date:	2011-12-15 19:58:06 -0500

    Re-enable previously disabled test.

M	test/cross-test-client.py

commit ef05d294e85978cf96a86535321cf914b605fa48
Author: Barry Warsaw <barry@python.org>
Date:	2011-12-15 19:37:23 -0500

    Fix the match rule semantics so that a match rule of "arg0='/'"
    does not match
    object paths in Python3, as per Simon's review comments.

M	dbus/connection.py
M	test/test-standalone.py

commit 8e87ac365f6b08c0617985488dd5d27148c9281d
Author: Barry Warsaw <barry@python.org>
Date:	2011-12-15 17:55:20 -0500

    Consistency; clean-up.

M	_dbus_bindings/abstract.c
M	_dbus_bindings/bytes.c

commit f2909c23abc4f8fa55d71673785f8e70a843f6ce
Author: Barry Warsaw <barry@python.org>
Date:	2011-12-15 16:50:02 -0500

    - Added back the missing PY3PORT.rst file, with updates.
    - Disallow appending unicode objects with 'y' (bytes) signatures.
    This now
      requires either a bytes object or an integer.  Update the tests
      to reflect
    - this change.
    - Fix broken __all__ in Python 3.

A	PY3PORT.rst
M	_dbus_bindings/message-append.c
M	dbus/types.py
M	test/cross-test-client.py
M	test/run-test.sh
M	test/test-standalone.py

commit 4c1c2eade1c5b383adad94a7a4fd6553873fecf0
Author: Barry Warsaw <barry@python.org>
Date:	2011-12-15 06:57:21 -0500

    This is the big one; it adds Python 3 support.

M	_dbus_bindings/Makefile.am
M	_dbus_bindings/abstract.c
M	_dbus_bindings/bus.c
M	_dbus_bindings/bytes.c
M	_dbus_bindings/conn-methods.c
M	_dbus_bindings/conn.c
M	_dbus_bindings/containers.c
M	_dbus_bindings/dbus_bindings-internal.h
M	_dbus_bindings/exceptions.c
M	_dbus_bindings/int.c
M	_dbus_bindings/message-append.c
M	_dbus_bindings/message-get-args.c
M	_dbus_bindings/message.c
M	_dbus_bindings/module.c
M	_dbus_bindings/server.c
M	_dbus_bindings/signature.c
M	_dbus_bindings/string.c
M	_dbus_bindings/types-internal.h
M	_dbus_bindings/unixfd.c
M	_dbus_glib_bindings/Makefile.am
M	_dbus_glib_bindings/module.c
M	configure.ac
M	dbus/__init__.py
A	dbus/_compat.py
M	dbus/_dbus.py
M	dbus/_expat_introspect_parser.py
M	dbus/bus.py
M	dbus/connection.py
M	dbus/decorators.py
M	dbus/proxies.py
M	dbus/service.py
M	dbus/types.py
M	include/dbus-python.h
M	test/cross-test-client.py
M	test/cross-test-server.py
M	test/dbus_py_test.c
M	test/run-test.sh
M	test/test-client.py
M	test/test-p2p.py
M	test/test-service.py
M	test/test-standalone.py
M	test/test-unusable-main-loop.py

commit 667082d0b4aef9c438a2e7fec89614b5b8ef960a
Author: Barry Warsaw <barry@python.org>
Date:	2011-12-14 15:05:16 -0500

    First round of PyInt -> PyLong changes.  These are only compatible
    with Python
    2, since there are still some unconditional PyInt calls, which are
    not valid
    in Python 3.  However, it lays the framework for conditionalizing
    on Python 3
    and using only PyLong in that case.  Where it doesn't matter, PyLong
    is used
    unconditionally.

M	_dbus_bindings/abstract.c
M	_dbus_bindings/bus.c
M	_dbus_bindings/bytes.c
M	_dbus_bindings/conn-methods.c
M	_dbus_bindings/conn.c
M	_dbus_bindings/containers.c
M	_dbus_bindings/generic.c
M	_dbus_bindings/int.c
M	_dbus_bindings/message-append.c
M	_dbus_bindings/message-get-args.c
M	_dbus_bindings/message.c
M	_dbus_bindings/types-internal.h
M	_dbus_bindings/unixfd.c
M	test/test-standalone.py

commit 11c639e3bd2ca3e6a87f349155dda2acc3cd92ea
Author: Barry Warsaw <barry@python.org>
Date:	2011-12-14 13:54:31 -0500

    Add error checking to dbus_py_variant_level_get() and call sites.

M	_dbus_bindings/abstract.c
M	_dbus_bindings/containers.c
M	_dbus_bindings/message-append.c

commit 71f4481c1876785572170ef68d5624ed23f91333
Author: Barry Warsaw <barry@python.org>
Date:	2011-12-14 13:36:39 -0500

    In preparation for Python 3 support, use the Python 2 PyBytes aliases
    for the
    PyString API.  This makes the code compilable in Python 2.x (x >=
    6) and
    Python 3.

M	_dbus_bindings/abstract.c
M	_dbus_bindings/bus.c
M	_dbus_bindings/bytes.c
M	_dbus_bindings/conn-methods.c
M	_dbus_bindings/conn.c
M	_dbus_bindings/containers.c
M	_dbus_bindings/exceptions.c
M	_dbus_bindings/message-append.c
M	_dbus_bindings/message.c
M	_dbus_bindings/server.c
M	_dbus_bindings/signature.c
M	_dbus_bindings/types-internal.h

commit ca7a705663adbac2e781d10c13fc98a5444ef646
Author: Barry Warsaw <barry@python.org>
Date:	2011-12-14 12:00:04 -0500

    In preparation for Python 3 support, all reprs now return unicodes,
    which is
    legal in Python 2 also.  Use fancy REPR macro and the %V format
    code for
    cross-Python compatibility.

M	_dbus_bindings/abstract.c
M	_dbus_bindings/containers.c
M	_dbus_bindings/dbus_bindings-internal.h
M	_dbus_bindings/int.c
M	_dbus_bindings/string.c

commit 5ff1d938ee230b47dcab8b7703409067df35ed2f
Author: Barry Warsaw <barry@python.org>
Date:	2011-12-13 17:36:49 -0500

    Modernize multiline imports in preparation for Python 3 support.

M	dbus/__init__.py
M	dbus/_dbus.py
M	dbus/bus.py
M	dbus/connection.py
M	dbus/lowlevel.py
M	dbus/proxies.py
M	dbus/service.py
M	dbus/types.py

commit dc7b07bc5921cd6263552bb1f3351416327fd67c
Author: Barry Warsaw <barry@python.org>
Date:	2011-12-13 17:26:15 -0500

    Modernize `raise` syntax in preparation of Python 3 support.

M	dbus/decorators.py

commit e033b0c8f22a67abfe2ba1b61365d0c2570b7429
Author: Barry Warsaw <barry@python.org>
Date:	2011-12-13 17:22:22 -0500

    Import threading instead of thread.  The latter is gone in Python 3.

M	dbus/_dbus.py
M	dbus/connection.py
M	dbus/service.py

commit 061e55e8edbfb457bf56194c52e7d7624855cf41
Author: Barry Warsaw <barry@python.org>
Date:	2011-12-13 17:17:46 -0500

    Fix an inconsequential typo.

M	_dbus_bindings/signature.c

commit 4477b6120240e186db8d86619f6da63faca296ba
Author: Barry Warsaw <barry@python.org>
Date:	2011-12-13 17:15:41 -0500

    For pendantic correctness, and future Python 3 compatibility,
    explicitly
    initialize the weaklist slots.

M	_dbus_bindings/conn.c
M	_dbus_bindings/server.c

commit 48abd4782f336de2d6dd228e58f86729778e26fb
Author: Barry Warsaw <barry@python.org>
Date:	2011-12-13 17:08:50 -0500

    Don't leak the fast_seq object.

M	_dbus_bindings/server.c

commit 033a0f2890495053fd6474d6f52d4a6e9c32cca1
Author: Barry Warsaw <barry@python.org>
Date:	2011-12-13 16:50:38 -0500

    - Add a few missing Py_TYPE() changes for Python 3 compatibility.
    - De-tabbify a few instances that "make check" complains about.

M	_dbus_bindings/bytes.c
M	_dbus_bindings/containers.c
M	_dbus_bindings/message-append.c

commit 4a26dab362e8ddd7a765f1249649408f62eb96e7
Author: Barry Warsaw <barry@python.org>
Date:	2011-12-13 16:21:04 -0500

    Additional PyObject_HEAD_INIT -> PyVarObject_HEAD_INIT changes
    in preparation
    for Python 3 support.

M	_dbus_bindings/abstract.c
M	_dbus_bindings/conn.c
M	_dbus_bindings/int.c
M	_dbus_bindings/libdbusconn.c
M	_dbus_bindings/message.c
M	_dbus_bindings/server.c

commit deccd695a43573d31183fe0e93316d306ce989f2
Author: Alexandre Rostovtsev <tetromino@gentoo.org>
Date:	2011-12-13 12:06:17 +0000

    Fix rst2html build failure in non-unicode locales

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=43735
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	NEWS
M	configure.ac

commit 75f2aaaa06e57bc1fbdbaf0530e48dea02541b03
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-12-13 12:04:25 +0000

    Update NEWS

M	NEWS

commit cabcf23207a67cb9215e3efc25ae6e8d73823fd1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-12-13 12:04:19 +0000

    Remove dbus_bindings, deprecated for nearly 5 years

M	Makefile.am
M	NEWS
M	dbus/__init__.py
M	dbus/_dbus.py
D	dbus/dbus_bindings.py
D	dbus_bindings.py

commit 14225c74b5bd75cf6c4cda3647341dc20214e6b8
Author: Barry Warsaw <barry@python.org>
Date:	2011-12-13 11:55:44 +0000

    Use Python 3 syntax to catch exceptions

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	dbus/_expat_introspect_parser.py
M	dbus/bus.py
M	dbus/connection.py
M	dbus/proxies.py
M	dbus/service.py
M	examples/example-client.py
M	test/cross-test-client.py
M	test/test-client.py
M	test/test-service.py

commit 959ce518a3b5b8794b9813bac82c64540c21fc31
Author: Barry Warsaw <barry@python.org>
Date:	2011-12-13 11:51:17 +0000

    Use PyVarObject_HEAD_INIT to initialize types

    Part of a patch for Python 3 compatibility.

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	_dbus_bindings/bytes.c
M	_dbus_bindings/containers.c
M	_dbus_bindings/float.c
M	_dbus_bindings/int.c
M	_dbus_bindings/mainloop.c
M	_dbus_bindings/pending-call.c
M	_dbus_bindings/signature.c
M	_dbus_bindings/string.c
M	_dbus_bindings/unixfd.c

commit 380d1f383c65e767c49d8416dde041a59ba1343e
Author: Barry Warsaw <barry@python.org>
Date:	2011-12-13 11:46:17 +0000

    Adjust debug messages

    Part of a patch for Python 3 compatibility.

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	_dbus_bindings/message-append.c

commit fc24dbaa43e1aea47945cc608640022fd8f94093
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-12-13 11:39:32 +0000

    Require Python 2.6, to make porting to Python 3 easier

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	NEWS
M	configure.ac

commit ebd44a420264da0031b715f7f08a0b347a81dd30
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-12-13 11:38:48 +0000

    Use Py_TYPE() rather than thing->ob_type, for Python 3 portability

    Based on part of a patch from Barry Warsaw.

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	_dbus_bindings/abstract.c
M	_dbus_bindings/bytes.c
M	_dbus_bindings/conn.c
M	_dbus_bindings/containers.c
M	_dbus_bindings/dbus_bindings-internal.h
M	_dbus_bindings/int.c
M	_dbus_bindings/libdbusconn.c
M	_dbus_bindings/message-append.c
M	_dbus_bindings/message-get-args.c
M	_dbus_bindings/message.c
M	_dbus_bindings/pending-call.c
M	_dbus_bindings/server.c
M	_dbus_bindings/string.c

commit dc1c98f05d29c5b7464d7ac34ee900066f261a86
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-12-13 11:30:54 +0000

    _message_iter_get_pyobject: if UTF-8 from libdbus is invalid,
    don't crash

    Based on part of a patch from Barry Warsaw.

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	_dbus_bindings/message-get-args.c

commit 876c668ecbc7b79aa04218b90e0f8b617d3997ed
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-12-13 11:26:31 +0000

    Don't warn about unused parameters

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	configure.ac

commit d1b628e10626a51c306ac8f59bcfbaae2b6fbf2b
Author: Barry Warsaw <barry@python.org>
Date:	2011-12-13 11:25:01 +0000

    Don't leak UTF-8 string if serializing a unicode object fails with OOM

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	_dbus_bindings/message-append.c

commit fb64313b8d37a7869c5489c8ee1bfad0c2c84c0f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-12-13 11:22:28 +0000

    Remove dbus_py_tp_richcompare_by_pointer, dbus_py_tp_hash_by_pointer

    These turn out not to be used for anything. Spotted by Barry Warsaw.

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	_dbus_bindings/dbus_bindings-internal.h
M	_dbus_bindings/generic.c

commit 3caf4241af3a0fbee5948a217172990bb3c5e0b7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-11-15 16:34:51 +0000

    NEWS

M	NEWS

commit 092f60d1887a907434fb34e3a8841b067c21a01e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-11-15 16:23:50 +0000

    Remove support for Python < 2.5

M	_dbus_bindings/dbus_bindings-internal.h
M	_dbus_bindings/module.c
M	configure.ac

commit dfa62b24adde8666df4d9cf64569d3aa51063ac8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-11-15 13:33:27 +0000

    Bump dbus dependency to 1.4 so we can make decent error handling
    mandatory

M	_dbus_bindings/message-append.c
M	configure.ac

commit 6a8daa9569a4a6c2610758b122f46f181ce52448
Author: Derek Foreman <derek.foreman@collabora.co.uk>
Date:	2011-04-20 12:14:23 -0400

    Support building on Android

    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=42532

M	.gitignore
A	Android.mk
M	dbus/Makefile.am

commit dfdb0de78563a01c3d722e1de83d85e90163feaa
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-30 16:12:29 +0100

    Micro version

M	configure.ac

commit f669a4aa6c7caaf6cbf9395ed14a1a357c4f6004
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-30 12:06:50 +0100

    Prepare 0.98

M	configure.ac

commit 1803b6cf35876247bb3e577bec9be8eed8b1b825
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-08-17 19:28:04 +0100

    invoke_object_method: simplify how we return

    Based on review feedback from Cosimo.

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=35767

M	dbus/dbus-gobject.c

commit 83bdd09f6124289dd19556da9334906f28064838
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-08-17 19:26:46 +0100

    dbus-gobject: centralize death-by-OOM and use oom() instead of goto

    You can't recover from OOM (in GLib-land) so there's no point in
    complicating the code for the reader.

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=35767

M	dbus/dbus-gobject.c

commit 705761ad983392c311c3e66c3ddf7e44e0efbc6f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-27 18:42:33 +0100

    Fix various minor documentation bugs

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37793
    Bug-NB: related to NB#218973

M	dbus/dbus-glib.c
M	dbus/dbus-glib.h
M	dbus/dbus-gmain.c
M	dbus/dbus-gobject.c
M	dbus/dbus-gproxy.c
M	dbus/dbus-gvalue.c
M	doc/reference/dbus-glib-sections.txt

commit 0d058307cb914fa61e809b9e0500ac139e286ec6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-27 17:47:03 +0100

    specialized types: improve documentation and document more things

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37793
    Bug-NB: related to NB#218973

M	dbus/dbus-gtype-specialized.c
M	dbus/dbus-gtype-specialized.h
M	doc/reference/dbus-glib-sections.txt

commit b3af6fdb643f9293d156c95860270a997b9f6843
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-27 17:50:07 +0100

    dbus_g_type_collection_value_iterate, etc.: check that the type
    is suitable

    Otherwise we'd probably crash when we cast the vtable to an
    inappropriate
    type, and call its methods with inappropriate arguments as a result.

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37793
    Bug-NB: related to NB#218973

M	dbus/dbus-gtype-specialized.c

commit 3183d79b119d0296924602f19d9fc2a58a7bd597
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-27 17:47:46 +0100

    dbus_g_type_collection_get_fixed: check preconditions on the type
    and vtable

    Previously, if it wasn't a collection or didn't have the
    fixed_accessor,
    we'd just segfault. Not ideal.

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37793
    Bug-NB: related to NB#218973

M	dbus/dbus-gtype-specialized.c

commit 7fcaf6c8c6d0e6ade0e8d5460b5311b564a24d3f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-27 17:41:36 +0100

    dbus-gtype-specialized: warn if vtables have missing callbacks

    It's just about conceivable that they wouldn't segfault, if
    application
    authors carefully avoided the unimplemented functionality... but
    still.

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37793
    Bug-NB: related to NB#218973

M	dbus/dbus-gtype-specialized.c

commit 58ed26382bf23fe9fb592d38b5be2c2c7b2e77e2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-31 16:17:10 +0100

    Tidy up docs for DBusGError and its pseudo-methods

    * attach the introductory doc-comments to the enum and macro names,
      not the internal function
    * remove docs for method parameters which didn't actually exist
    * more cross-references
    * make the domain macro visible in the documentation index

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37793
    Bug-NB: related to NB#218973

M	dbus/dbus-glib.c
M	doc/reference/dbus-glib-sections.txt

commit 4b6482d5987095b474c9582e7415bf94a154d9b4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-27 16:25:21 +0100

    Make gtk-doc DOC_SOURCE_DIR absolute, fixing out-of-tree docs

    I used an absolute path to avoid differing behaviour with older
    versions
    of gtk-doc, where DOC_SOURCE_DIR was relative to the *source*
    directory.

    Also resync doc/reference/Makefile.am with gtk-doc's example.

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

M	doc/reference/Makefile.am

commit 83471e869e464c63063e9e254bc8c40b25de03b7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-31 16:04:29 +0100

    DBusGProxy: be more pedantic about boolean returns

    Returning false doesn't strictly imply that the error is set;
    if you're
    being pedantic enough, it's really a tri-state where TRUE indicates
    success, FALSE indicates failure, and calling the function incorrectly
    results in undefined behaviour (currently a critical warning and
    returning FALSE).

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37793
    Bug-NB: NB#218973

M	dbus/dbus-gproxy.c

commit c6aa1d7dbdf04501495e4a3b4cfe6e7d808af6dd
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-31 15:57:44 +0100

    DBusGProxy: misc documentation tidying

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37793
    Bug-NB: related to NB#218973

M	dbus/dbus-gproxy.c
M	doc/reference/dbus-glib-sections.txt

commit c568ace5ee6a9c13f748d876d69ad50234b2bc78
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-31 15:57:15 +0100

    DBusGProxy: make argument names in declaration, definition and
    docs consistent

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37793
    Bug-NB: related to NB#218973

M	dbus/dbus-glib.h
M	dbus/dbus-gproxy.c

commit dc766e475f3a42872edbd9c3bcc98714dde8bff7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-31 15:55:47 +0100

    DBusGProxy: mark struct contents as private

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37793
    Bug-NB: related to NB#218973

M	dbus/dbus-glib.h

commit 9d1cce7c64662733f0b48e52e4d5a1e805a3e246
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-31 15:40:40 +0100

    Remove declaration of dbus_pending_call_get_g_type, which doesn't
    exist

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37793
    Bug-NB: related to NB#218973

M	dbus/dbus-glib-lowlevel.h
M	doc/reference/dbus-glib-sections.txt

commit 35e049459945a22b87cc61c05bd903790f05cf40
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-31 16:17:34 +0100

    Add DBUS_TYPE_CONNECTION, DBUS_TYPE_MESSAGE to the docs, and document
    them better

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37793
    Bug-NB: related to NB#218973

M	dbus/dbus-glib.c
M	doc/reference/dbus-glib-sections.txt

commit 43a4bf8b038c08d6b8c565495cbf69433bc2dcc6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-31 16:15:43 +0100

    Tidy up docs for DBusGMessage

    * document the instance struct
    * make argument names match the headers
    * document the GType macro, not the function it calls, and mention it
      in the documentation (since this is a boxed type, so it's
      non-obvious)

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37793
    Bug-NB: related to NB#218973

M	dbus/dbus-glib.c
M	doc/reference/dbus-glib-sections.txt

commit 53ac9ee390e173f8e63f276d8c7e211e4fadca4b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-29 16:34:38 +0100

    Clean up docs for DBusGConnection

    * introductory doc-comment for the (pseudo-)class
    * attach the doc-comment for the GType to the macro, not the internal
      function
    * rename function parameters to match what the header file says

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37793
    Bug-NB: related to NB#218973

M	dbus/dbus-glib.c
M	doc/reference/dbus-glib-sections.txt

commit be937e037a6c076cf650bb79aba9c1138da39511
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-29 16:42:19 +0100

    Ignore non-API source files correctly

    gtk-doc only cares about the basename of the files.

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37793
    Bug-NB: related to NB#218973

M	doc/reference/Makefile.am

commit 053d41e56050706b512562f13b9ebde7dac3c60b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-29 16:42:44 +0100

    Remove stray empty subsection

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37793
    Bug-NB: related to NB#218973

M	doc/reference/dbus-glib-sections.txt

commit 3d02f22d475286db8160604755ee85d24b133005
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-31 16:13:24 +0100

    Mention which header to include in the gtk-doc

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37793
    Bug-NB: related to NB#218973

M	doc/reference/dbus-glib-sections.txt

commit 30b6a106ed590c0fd97a783998a19779002e65d8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-31 16:13:07 +0100

    Add some missing symbols to the docs

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37793
    Bug-NB: related to NB#218973

M	doc/reference/dbus-glib-sections.txt

commit a4bc263721fc5a80a78c6b551f35d281c22694ff
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-21 18:14:46 +0100

    Micro version

M	configure.ac

commit 80e37faeac62a4694514410ec17c2ab4a75d50e6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-09-21 17:36:11 +0100

    dbus-glib 0.96

M	configure.ac

commit 4bc172fd5f31123ee883c4027e729b38c2777d7d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-04-05 17:43:15 +0100

    test-dbus-glib: make lose() abort, and make lose_gerror() more
    informative

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=35766
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	test/core/test-dbus-glib.c

commit 9e97f9744e7ffeb04a105087da6143931195ce77
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-04-05 16:25:15 +0100

    get_all_object_properties: if _dbus_gvalue_marshal fails, bail out

    This isn't necessarily OOM: _dbus_gvalue_marshal can fail due to
    programming errors. If so, raise a critical warning, then (if
    that wasn't
    fatal) return a D-Bus error to be sent to the caller.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=35766
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	dbus/dbus-gobject.c

commit bfd1c05174b86c9dfcf1b22a4fa0b2c552dfc902
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-04-05 18:02:47 +0100

    get_all_object_properties: note which operations can only fail via OOM

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=35766
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	dbus/dbus-gobject.c

commit 30198a2368c9cd19db4b8f595bfad7a719ada7e9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-04-05 16:21:12 +0100

    get_all_object_properties: skip invalidly-named properties, with
    a critical

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=35766
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	dbus/dbus-gobject.c

commit a2a3315ac9747dcc7dda860ceb1d1f94ab56d29b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-08-17 19:15:05 +0100

    dbus-gobject: add and use connection_send_or_die to check for OOM

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=35766
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Conflicts:
	    dbus/dbus-gobject.c

M	dbus/dbus-gobject.c

commit 22262581b0956f69f321b9e2eb702e3f15b49823
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-04-05 15:50:38 +0100

    emit_signal_for_registration: assert that signal headers are all valid

    This is an assertion, not a return_if_fail, because we already checked
    the object path in dbus_g_connection_register_g_object and the others
    in export_signals.

    After these checks, dbus_message_new_signal can really only fail
    on OOM.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=35766
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	dbus/dbus-gobject.c

commit cccf1e6672fba6b649fe02082c2f087cdf022dcd
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-04-05 15:49:18 +0100

    export_signals: check interface, signal names for validity

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=35766
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	dbus/dbus-gobject.c

commit d09dfcb130be0a17f337bd198a9fb43aab7dfa28
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-04-05 15:43:30 +0100

    object_registration_message: check for OOM when a property is absent

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=35766
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	dbus/dbus-gobject.c

commit 7b92ac1bfd1e50e842549dbb14b845478d114652
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-04-05 15:42:49 +0100

    object_registration_message: make logic/assertions slightly clearer

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=35766
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	dbus/dbus-gobject.c

commit b5b27e4ca0d8ca250fa7649bcf2613e8d889a722
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-04-05 15:42:29 +0100

    object_registration_message: handle remote caller errors better

    If the remote process sends us a wrong message, that's its fault, not
    ours; we should send back a comprehensible D-Bus error, and not spam
    to stderr.

    Previously, in each of these cases libdbus would have sent back
    NoReply,
    because we declined to handle the method call.

    One case that's still wrong is passing extra arguments to Get,
    GetAll or
    Set, like so:

	Get("com.example.Iface", "MyProperty", "extra")
	Set("com.example.Iface", "MyProperty", Variant("foo"), "extra")
	GetAll("com.example.Iface", "extra")

    dbus-glib has historically warned, ignored the extra argument(s)
    and sent
    back a reply as if they hadn't been there, whereas a stricter
    implementation (like telepathy-glib's TpDBusPropertiesMixin) would
    have sent back an error reply and done nothing.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=35766
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	dbus/dbus-gobject.c

commit e5cf2be0e03af4df19618076015cc2a6556ca5d4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-04-05 15:36:09 +0100

    get_object_property: add brief documentation

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=35766
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	dbus/dbus-gobject.c

commit d3aa6c7942cce0cf7b602c6b0854488938f0548e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-04-05 15:25:55 +0100

    get_object_property: unwind on errors, and avoid returning NULL

    Also treat all errors here as programming errors (because this method
    should never fail), upgrading them from warning to critical; return a
    D-Bus error reply anyway, to be nicer to our callers.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=35766
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	dbus/dbus-gobject.c

commit 98b3b3f323fd4001be0630c3e0a1dc4fb83cdeab
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-04-05 15:21:56 +0100

    check_property_access: centralize error handling (and check for OOM)

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=35766
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	dbus/dbus-gobject.c

commit 6293849bf0469ce8d6d122b38db5091c21304a30
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-08-17 19:11:14 +0100

    dbus-gobject: check for NULL when producing messages

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=35766
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Conflicts:
	    dbus/dbus-gobject.c

M	dbus/dbus-gobject.c

commit 8ec3166b6a40508a91144efedc10dcb32964498e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-04-05 14:56:16 +0100

    dbus-gobject: factor out reply_or_die, error_or_die and add
    error-checking

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=35766
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	dbus/dbus-gobject.c

commit 7a1abf5243fe5b7adf7211fd7d8c82851f448192
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-04-04 16:52:58 +0100

    invoke_object_method: if marshalling an out argument fails, discard
    message

    We shouldn't report this as OOM, because it probably wasn't (it's much
    more likely to be programming error); we should also continue
    through the
    arguments, so that we don't leak them.

    By abandoning the message as soon as we detect a programming error,
    we can use reply == NULL as an indicator of whether to keep appending.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=35767
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	dbus/dbus-gobject.c

commit 4ba637e2ae32b2daf224265c22cc8b43cf0a0bbf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-04-04 15:45:07 +0100

    invoke_object_method, dbus_g_method_return_error: handle sending
    failure

    I just made it fatal, since it's either programming error or OOM.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=35767
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	dbus/dbus-gobject.c

commit cd7e9a1c6dd0eef6e867cac80339a38758d0cd6f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-04-04 15:44:28 +0100

    gerror_to_dbus_error_message: guarantee to return non-NULL

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=35767
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	dbus/dbus-gobject.c

commit c239a810543bde85dd458012612874cdc81a4151
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-04-04 15:41:32 +0100

    invoke_object_method: if dbus_message_new_method_return fails,
    fail hard

    There's no point in doing graceful unwinding here, since it really
    shouldn't happen.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=35767
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	dbus/dbus-gobject.c

commit 480c480b024a77dd8f4efecdb6639d45de9767ce
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-04-04 15:40:40 +0100

    arg_iterate: document

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=35767
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	dbus/dbus-gobject.c

commit 36b55c3aac5de873a69c9bd0fbe003200a03ba32
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-16 15:33:01 +0100

    dbus_g_proxy_manager_unregister: if GetNameOwner failed, don't assert

    got_name_owner_cb never adds the proxy to the unassociated_proxies
    list
    if there is a D-Bus error other than NameHasNoOwner.

    Based on a patch from Janne Karhunen, for Maemo.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=38408
    Bug-NB: NB#116862
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	dbus/dbus-gproxy.c

commit 18705c42ca6b6a583b64451055eec4dad3aaa3b4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-17 14:40:28 +0100

    Add a regression test for fd.o #38406

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=38406
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	.gitignore
M	test/core/Makefile.am
A	test/core/proxy-peer.c

commit 5d800ca9352b40354a0f4a905c1c0b111b81f030
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-17 14:53:09 +0100

    MyObject: register marshallers so individual tests don't have to

    These marshallers are actually dual-use: they're used to call certain
    methods on MyObject, and also to bind to its signals.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=38406
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	test/core/Makefile.am
M	test/core/my-object.c
M	test/core/my-object.h
M	test/core/test-dbus-glib.c

commit 70e09208ab13812037b3cf133df312aacd24d036
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-17 12:18:57 +0100

    DBusGProxy: deal with errors in DBUS_G_VALUE_ARRAY_COLLECT_ALL

    G_VALUE_COLLECT can fail (admittedly, it's a programming error if it
    does). Previously, we leaked the resulting g_malloc'd string; now we
    emit a critical warning, free it, and abort the call.

    Based on patches from Kimmo Hämäläinen and Christian Dywan
    in Maemo's
    dbus-glib.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=38406
    Bug-NB: NB#86280
    Bug-NB: NB#180486 (CID-34419 to CID-34424 inclusive)
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	dbus/dbus-gproxy.c

commit 2731a2f7f824f9c1cd11dd14e88ff1e0875f280b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-17 12:15:20 +0100

    dbus_g_proxy_call: simplify error handling now that call_id may be 0

    There's no need to special-case it any more - we can just use
    dbus_g_proxy_end_call_internal and rely on it to cope.

    This reverts the fix for fd.o #12675, since the commit before this one
    is more general.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=38406
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	dbus/dbus-gproxy.c

commit 1b38cecf7bbdb8a99ef13616b8c661dfb0bc060f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-17 12:06:11 +0100

    DBusGProxy: cope gracefully with call_id == 0

    As well as happening on a programming error or OOM (which both provoke
    critical warnings), dbus_g_proxy_begin_call_internal() can
    legitimately
    fail if we got disconnected from D-Bus (so can't send any more),
    but are
    still working through our backlog of incoming messages (so we haven't
    got round to the Disconnected message yet, so the DBusGProxy hasn't
    emitted ::destroy).

    fd.o #12675 fixed dbus_g_proxy_call(), but
    dbus_g_proxy_call_with_timeout()
    and the asynchronous API still need similar treatment.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=38406
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	dbus/dbus-gproxy.c

commit af31c9c21efeec8a38c73de24d82a2038d80f74e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-08-03 18:38:49 +0100

    registrations test: fix race condition in adding match rules

    If you don't block waiting for the reply to AddMatch, and you're
    using two
    connections to the bus, then messages sent from connection 2 might not
    be matched by connection 1, because they arrive before the AddMatch
    call
    from connection 1. This manifests itself as the /registrations/twice
    test *sometimes* failing (dependent on timing).

    Only tests with two parallel bus connections need this, but to
    be safe,
    I've added it throughout this test.

    Reviewed-by: Vivek Dasmohapatra <vivek@collabora.co.uk>

M	test/core/registrations.c

commit 6d06dd358b22057dca1808c1432e620998202c41
Author: Tim Waugh <twaugh@redhat.com>
Date:	2011-07-22 15:13:42 +0100

    dbus-binding-tool: fixed "pretty" mode output for methods.

    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=39475

M	dbus/dbus-glib-tool.c

commit e294ba3e579db1c12158ce95ad6ff34391cf571a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-16 18:12:27 +0100

    Show warning if marshalling in dbus_g_method_return fails

    Based on a patch from Christian Dywan <christian.dywan@lanedo.com>.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=29884
    Bug-NB: NB#180486
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>

M	dbus/dbus-gobject.c

commit cce0887278ae105f010d35636fc5f6d654c2d41f
Author: Christian Dywan <christian.dywan@lanedo.com>
Date:	2010-12-14 15:07:27 +0100

    remove minor dead code in dbus-gparser

    There's no way retval can be false at this location.

    Bug-NB: NB#180486 CID-643
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	dbus/dbus-gparser.c

commit f446cb80f91b4cf584883b47477295d07dd32eac
Author: Derek Foreman <derek.foreman@collabora.co.uk>
Date:	2011-06-02 17:16:42 +0100

    remove remaining inclusions of <glib/gi18n.h> from library

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=36428
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	dbus/dbus-binding-tool-glib.c
M	dbus/dbus-gproxy.c

commit 2a85bd434e6d8dba9615a53d288a0a72d6b5e0cf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-02 13:50:20 +0100

    Regression test for fd.o #37852

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37852
    Reviewed-by: Colin Walters <walters@verbum.org>

M	test/core/my-object.c
M	test/core/my-object.h
M	test/core/registrations.c
M	test/core/test-service-glib.xml

commit 3e0828f57c3925ea9b63d22ab82d991a0fea0536
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-02 13:49:51 +0100

    Fix regression in marshalling objects as object paths

    This regressed while fixing fd.o #36811. NetworkManager apparently
    uses
    this idiom.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37852
    Bug-Debian: http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=628890
    Tested-by: Michael Biebl <biebl@debian.org>
    Reviewed-by: Colin Walters <walters@verbum.org>

M	dbus/dbus-gobject.c

commit f534276eb20d8035566a206d1e38fd651a1eeab9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-31 17:03:59 +0100

    registrations test: only listen for signals, not all messages

    Otherwise, we'd reply with an error to messages not intended for us.

    Reviewed-by: Colin Walters <walters@verbum.org>

M	test/core/registrations.c

commit 867d670daad983f8b4416528e69d3ad2e0596e88
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-01 19:44:42 +0100

    0.95

M	configure.ac

commit 469df67525a9e5363644ac730ac8ec7580a8ebe0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-01 19:07:30 +0100

    Prepare 0.94 release

M	configure.ac

commit 5a780af947f0141f4e0524aaf62fdd06abe6cd5f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-04-04 13:46:11 +0100

    dbus-binding-tool: forbid ReturnVal annotation after the first
    OUT <arg>

    It has never actually worked correctly (invoke_object_method would
    always
    treat the ReturnVal as if it had been the first OUT argument),
    so let's
    only allow the situation that worked in practice.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=35952
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

M	dbus/dbus-binding-tool-glib.c

commit a8605cf4c6c9dbc4a933dd744d339744e0102765
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-01 17:33:48 +0100

    Fix compiler warnings in dbus-binding-tool

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

M	dbus/dbus-glib-tool.c

commit 0c162cc63b073a9f50dd11ea99db72fe95a16064
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-01 17:33:07 +0100

    Remove all support for Doxygen

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=10890

D	Doxyfile.in
M	Makefile.am
M	README
M	configure.ac
D	doc/api/README

commit 6e20efb5c4c094915d2b6e86c3cab486a0562a95
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-01 17:32:58 +0100

    Use single star in doc-comments not intended for gtk-doc

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=10890

M	dbus/dbus-glib.h
M	dbus/dbus-gloader-expat.c
M	dbus/dbus-gproxy.c
M	dbus/dbus-gtest.c

commit 1472d195bd201d219aab5bc4b31d80d8340cee5c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-01 17:32:06 +0100

    Remove Doxygen droppings from source code

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=10890

M	dbus/dbus-gidl.c
M	dbus/dbus-gidl.h
M	dbus/dbus-glib.c
M	dbus/dbus-gmain.c
M	dbus/dbus-gobject.c
M	dbus/dbus-gparser.c
M	dbus/dbus-gproxy.c
M	dbus/dbus-gthread.c
M	dbus/dbus-gutils.c
M	dbus/dbus-gutils.h
M	dbus/dbus-gvalue.c

commit 4c3a346d296789cf3a81f6cc98f64d84ea892247
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-01 17:24:36 +0100

    Remove _dbus_g_proxy_test, which isn't called and doesn't do anything

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37790

M	dbus/dbus-gproxy.c

commit cded5996b02ff937a73654788d1f3a7ca46ca0a9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-01 17:24:29 +0100

    Remove _dbus_gutils_test, which didn't test anything

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37790

M	dbus/dbus-gtest.c
M	dbus/dbus-gutils.c

commit d81722def291666a3c557a18d66be061f8f55e31
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-01 17:24:22 +0100

    _dbus_gidl_test: remove unused function which does nothing

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37790

M	dbus/dbus-gidl.c

commit 1f371d3c75a5c2e9979350380e4243e3c445e093
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-01 17:23:45 +0100

    dbus-glib-tool: remove regression-test boilerplate which does nothing

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37790
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

M	dbus/dbus-glib-tool.c

commit 8abfa07b8acd2d8527785db3711d8a88a213a60e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-06-01 17:18:52 +0100

    dbus-binding-tool: clean up temporary file on error

    This fixes distcheck, which otherwise fails because temporary
    files are
    left over after distclean. We could delete them with the build system,
    but leaving them behind is a bug, so...

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37812
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

M	dbus/dbus-glib-tool.c

commit d5b9aa101d61bcd2321f0266fa638b644e4cba96
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-31 14:35:01 +0100

    Remove useless HAVE_GLIB conditional - GLib is mandatory

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37789

M	configure.ac

commit 601b51279e7fbb08ff6ce8c98eaf4bcee21d46a5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 14:40:12 +0100

    Remove unused DBUS_DAEMONDIR

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37789

M	configure.ac

commit 1a966d070e71378590fb0b64c5ec7a2e250d397b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 14:39:57 +0100

    Remove vestigial dbus-glib-error-*.h and the machinery to generate
    them

    This was the only use of DBUS_INCLUDEDIR, so remove that too.

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37789

M	.gitignore
M	configure.ac
M	dbus/Makefile.am
D	dbus/make-dbus-glib-error-enum.sh
D	dbus/make-dbus-glib-error-switch.sh

commit 98d7cb8c869b53686a742fb48d1f189c74ff1484
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-31 14:33:18 +0100

    Simplify the check for dbus-1

    As in commit 0f782b4, omitting the action-if-found and
    action-if-not-found
    results in much better error messages if this mandatory dependency
    isn't
    found.

    Nothing checks HAVE_DBUS (as they shouldn't - it's mandatory!),
    so there's
    no point in keeping that either.

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37789

M	configure.ac

commit b00d53dd647cf456ddb67c1dfdf44a8d56be90b4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-01-04 18:35:41 +0000

    Add more auto-generated gtkdoc droppings to .gitignore

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37789

M	.gitignore

commit bd92f266609fef162b6028fd249250b0ab9ae689
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-31 14:46:33 +0100

    Remove support for i18n completely

    As far as I can tell, dbus-glib has never actually been translated
    into
    another language, or even had the necessary infrastructure so
    people could
    do that. The translated strings are all low-level errors in
    "programmer
    English" anyway, and most of them only make sense to D-Bus experts.

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=36428

M	configure.ac
M	dbus/dbus-binding-tool-glib.c
M	dbus/dbus-glib-tool.c
M	dbus/dbus-gparser.c
M	dbus/dbus-gproxy.c
M	dbus/dbus-gvalue.c

commit c37bd4357d50d1cd683ef04f05ee427c9a0f7e9f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 14:43:15 +0100

    Remove i18n macros from files where they're unused

    dbus-glib-tool (dbus-binding-tool) and dbus-gparser are theoretically
    localizable, but the library doesn't make any use of gettext.

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=36428

M	dbus/dbus-glib.c
M	dbus/dbus-gmain.c

commit e8a4f0496d0eec10fc9c76e0ef20e761bb2256c6
Author: Dan Williams <dcbw@redhat.com>
Date:	2011-05-31 11:25:59 -0500

    Log error message from failed object registration

    See https://bugzilla.redhat.com/show_bug.cgi?id=708686 for a case
    of this; it
    would be extremely helpful to figure out what the error actually
    was since it
    appears not to be a double-registration or other such issues after
    inspection
    of nm-applet and libnm-glib.

    Reviewed-by: Colin Walters <walters@verbum.org>
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37795

M	dbus/dbus-gobject.c

commit eeb1c50aa03a95c39487e9331107142f27412958
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-04-20 16:41:28 +0100

    Remind maintainers to update the libtool versioning

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=22854
    Reviewed-by: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>

M	HACKING

commit 9e2031148fd0ee114ec67c681d2b9bcfd84cdaa4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-04-20 16:41:00 +0100

    add a Makefile rule to upload a tarball and up-to-date docs

    Simplified from telepathy-glib, which has more elaborate machinery to
    automate releases.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=26952
    Reviewed-by: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>

M	HACKING
M	Makefile.am

commit 61f48c290176c007ff0aef6ca4d752491763e4b0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-30 15:41:27 +0100

    Force a full rebuild for new gcc versions if gcov is enabled

    This avoids a lot of "Version mismatch - expected 406p got
    405*". Because
    we're changing the content of each file after preprocessing, it even
    defeats ccache, which is desirable here - otherwise we'd get old
    versions
    of the profiling code being resurrected from the cache.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37060
    Reviewed-by: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>

M	configure.ac

commit 0f320c5224fe39df44648ac75ecce9e0a01079d0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-30 15:41:01 +0100

    Include config.h in generated C files, and regenerate dbus-gmarshal.c

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37060
    Reviewed-by: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>

M	dbus/Makefile.am
M	dbus/dbus-gmarshal.c
M	dbus/examples/statemachine/Makefile.am
M	test/core/Makefile.am

commit f91828abb160e44b53a32823516d55d8a5d634bc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-30 15:39:28 +0100

    Consistently include config.h in all non-generated .c files

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37060
    Reviewed-by: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>

M	dbus/dbus-gidl.c
M	dbus/dbus-gloader-expat.c
M	dbus/dbus-gparser.c
M	dbus/dbus-gproxy.c
M	dbus/dbus-gthread.c
M	dbus/dbus-gtype-specialized.c
M	dbus/dbus-gvalue-parse-variant.c
M	dbus/examples/example-client.c
M	dbus/examples/example-service.c
M	dbus/examples/example-signal-emitter.c
M	dbus/examples/example-signal-recipient.c
M	dbus/examples/statemachine/statemachine-client.c
M	dbus/examples/statemachine/statemachine-server.c
M	dbus/examples/statemachine/statemachine.c
M	test/core/30574.c
M	test/core/peer-client.c
M	test/core/peer-server.c
M	test/core/test-dbus-glib.c
M	test/core/test-gvariant.c
M	test/core/test-service-glib.c
M	test/core/test-thread-client.c
M	test/core/test-thread-server.c
M	test/core/test-types.c
M	test/core/test-variant-recursion.c
M	test/interfaces/test-client.c
M	test/interfaces/test-objects.c
M	test/interfaces/test-server.c
M	test/test-service.c

commit 6d6d9a61e47f5bc28b5d61ae0d6cb072a81b5569
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-04-13 19:00:41 +0100

    dbus_g_proxy_add_signal: document error cases

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=36216
    Reviewed-by: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>

M	dbus/dbus-gproxy.c

commit 52f4e09d49551f3a8ece6578a6cb6e016c03a9d8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-10 12:00:15 +0100

    dbus-gobject: check various preconditions for methods

    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=36811

M	dbus/dbus-gobject.c

commit 6a61c922cedad9f5af5c32a0d783e9fbd53f3487
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-04 12:52:25 +0100

    dbus-gobject: move weakref to ObjectExport, with ObjectRegistration
    pointing there

    This has the following results:

    * each exported object only needs one weak ref to itself, however many
      times it is registered
    * because the ObjectRegistration now points to the ObjectExport,
      it can always remove itself from the list of registrations even
      if the
      actual object has been disposed, avoiding a leak (fd.o #36811)

    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=36811

M	dbus/dbus-gobject.c

commit f07cf89fd36aebe5bd32f9e7cff13b5697365917
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-04 12:25:18 +0100

    Add a regression test for removing all registrations and starting
    again

    This has been confirmed to fail when the previous commit is reverted.

    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=36811

M	test/core/registrations.c

commit c3c6f8365f5074f3f59b66c5b4ece1feb214be23
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-04 12:24:35 +0100

    dbus_g_connection_register_g_object: only hook onto signals on
    first use

    This fixes a bug in which an empty list of registrations was
    considered
    to be synonymous with the object never having been exported, resulting
    in this failure mode:

    * register object at n locations
      - the first time, export_signals() is called
    * unregister all of those locations
    * register object at a new location
      - export_signals() is wrongly called again
    * emit a signal
      - the D-Bus signal gets emitted twice

    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=36811

M	dbus/dbus-gobject.c

commit 323d5adb48f8630024f2b22172f10684508bd2a8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-04 10:47:56 +0100

    dbus_g_connection_register_g_object: attach ObjectExport first

    This means we no longer need the unnecessarily subtle "steal and
    put back"
    pattern.

    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=36811

M	dbus/dbus-gobject.c

commit c9961279c5ac667d4ddca98cbd3a3dfb4f1d8705
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-04 10:45:58 +0100

    dbus-gobject: wrap the GSList of registrations in a simple struct

    For simplicity, the ObjectExport struct isn't freed until the object
    is actually destroyed, even if there are no more registrations.

    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=36811

M	dbus/dbus-gobject.c

commit 357fef2267d4243435e0d26ae659d21bd6bcde96
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-01-04 16:12:03 +0000

    test/interfaces: test annotated arguments

    The D-Bus Specification doesn't actually allow this, but dbus-glib has
    always supported it, and indeed understands a couple of <arg>
    annotations
    itself - org.freedesktop.DBus.GLib.ReturnVal and ….DBus.GLib.Const.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=27598
    Reviewed-by: Robert Ancell <robert.ancell@canonical.com>

M	test/interfaces/valid-annotations.xml

commit b04f6b33224973cefec959a9fe0f7de655b93d0e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-01-04 16:07:39 +0000

    test/interfaces: check that some invalid annotations aren't allowed

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=27598
    Reviewed-by: Robert Ancell <robert.ancell@canonical.com>

M	.gitignore
M	test/interfaces/Makefile.am
A	test/interfaces/invalid-annotated-node.xml
A	test/interfaces/invalid-nested-annotation.xml
M	test/interfaces/run-test.sh

commit e4a25a148703ef7ff13e5d87276b5d6fc395a57d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-01-04 16:01:39 +0000

    Test that interfaces, methods, properties, signals can be annotated

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=27598
    Reviewed-by: Robert Ancell <robert.ancell@canonical.com>

M	test/interfaces/Makefile.am
A	test/interfaces/valid-annotations.xml

commit ac53fc025df08f12532fa7e3e69208db16151935
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-01-04 15:51:05 +0000

    Don't .gitignore everything in test/interfaces, and remove some
    duplication

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=27598
    Reviewed-by: Robert Ancell <robert.ancell@canonical.com>

M	.gitignore

commit b1338486f0ce5df460e9af67f3738f6a0f829840
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-01-04 15:45:57 +0000

    Allow <annotation> inside <property> too

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=27598
    Reviewed-by: Robert Ancell <robert.ancell@canonical.com>

M	dbus/dbus-gparser.c

commit 160842c85f808a4815d005dd39a0d9419aa06788
Author: Christian Dywan <christian@lanedo.com>
Date:	2011-01-04 15:43:05 +0000

    Allow signal annotations in dbus-binding-tool

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=27598
    Bug-NB: NB#163566
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Robert Ancell <robert.ancell@canonical.com>

M	dbus/dbus-gparser.c

commit 9c26d255d7d94a6a9be961672ca666de601b561d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-25 13:51:24 +0100

    Nano version

M	configure.ac

commit 6bdb27482cace69935584d2d9b33bdfce50ef5ce
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-25 12:50:36 +0100

    prepare 0.84

M	NEWS
M	configure.ac

commit 5ee02bf8785167f042636ab3005105243bff533b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-24 17:49:20 +0100

    Let PYTHON_LIBS be overriden on the command line too

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=21017

M	configure.ac

commit e9feba0f7b3a2b67fd56154185e92eab4b932468
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-24 17:48:36 +0100

    Let the user set PYTHON_INCLUDES on the configure command line

    This might be useful for cross-compilation or other strange setups.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=21017

M	m4/am-check-python-headers.m4

commit d6962024d7686e40cc012905581cb31c6999b856
Merge: 4093246 cbc3f71
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-24 16:39:13 +0100

    Merge branch 'fd-passing'

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30812
    Tested-by: Elvis Pfützenreuter <epx@signove.com>

commit 4093246a1593ccc7bf02b5097254df163ab33b8b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-18 12:30:57 +0100

    NEWS

M	NEWS

commit 86653c55435a05d047cc6bb191e2df64f3aa165c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-17 18:54:55 +0100

    _ProxyMethod: allow an explicit signature to be given to method calls

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=36206
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

M	dbus/proxies.py

commit cbc3f71cebc313b988f8ecc461031c828bfd2302
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-18 11:10:54 +0100

    remove stray declaration of dbus_py_unixfd_range_check

M	_dbus_bindings/types-internal.h

commit 77f745f8a27af7b0ff4692ec02278591cdda2bbf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-18 11:09:00 +0100

    unix-fd-service example: also exercise returning UnixFd(int)

    Also, cycle through the three possible return types deterministically,
    rather than choosing at random.

M	examples/unix-fd-service.py

commit 917c41bfcad70c2c519c56a8f2a62e1804c08fc1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-18 11:02:58 +0100

    Don't try to export DBUS_TYPE_UNIX_FD constant if not defined

M	_dbus_bindings/module.c

commit 04d9fe485b408bf1139e59c457f665a93f514464
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-18 11:02:44 +0100

    unixfd: improve documentation

M	_dbus_bindings/unixfd.c

commit 9d848d864606866f06d3a61cf74e6b9ae44180c1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-18 10:49:11 +0100

    _message_iter_get_pyobject: fix whitespace

M	_dbus_bindings/message-get-args.c

commit c1f49ac473ac8910aa14f65362088a22e3f60a42
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-18 10:49:00 +0100

    UnixFd: don't close file descriptors passed to the constructor as
    an int

    Elvis agreed that this shouldn't differ from our handling of
    objects with
    a fileno().

    This means that _message_iter_get_pyobject does need to close the fd
    itself, so do that.

M	_dbus_bindings/message-get-args.c
M	_dbus_bindings/unixfd.c

commit 630a7c54d85b36b82b1e180703d712ca2d5c5650
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-18 10:38:49 +0100

    unixfd: coding style

M	_dbus_bindings/unixfd.c

commit 13503a5c05b63f19f2d2f65c872fe70debf11700
Author: Elvis Pfützenreuter <epx@signove.com>
Date:	2010-10-14 14:53:29 -0300

    Added Unix Fd support to dbus-python

M	_dbus_bindings/Makefile.am
M	_dbus_bindings/containers.c
M	_dbus_bindings/dbus_bindings-internal.h
M	_dbus_bindings/message-append.c
M	_dbus_bindings/message-get-args.c
M	_dbus_bindings/module.c
M	_dbus_bindings/types-internal.h
A	_dbus_bindings/unixfd.c
M	dbus/types.py
A	examples/unix-fd-client.py
A	examples/unix-fd-service.py

commit 95dc58760290d190a9f62d13d5b3936a0249cb43
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-17 18:56:45 +0100

    example-async-client: remove duplicate handle_hello_error()

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=22560

M	examples/example-async-client.py

commit 070bddd9a60604ea47f003a0982ee90356092be5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-17 18:06:40 +0100

    adjust Scott's patch to force boolean to be 0 or 1, and for coding
    style

M	_dbus_bindings/conn-methods.c

commit 4965899a9a6bfa1d9969895720089986b997189e
Author: Scott Tsai <scottt.tw@gmail.com>
Date:	2011-02-16 23:46:39 +0800

    Wrap dbus_connection_set_allow_anonymous()

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=34342
    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	_dbus_bindings/conn-methods.c

commit d2fc8a5a4ac2ce8eab519557c40432a6879a7c23
Author: Scott Tsai <scottt.tw@gmail.com>
Date:	2011-03-24 22:13:55 +0800

    ProxyObject: clear _pending_introspect_queue after execution

    Signed-off-by: Simon McVittie <smcv@debian.org>

M	dbus/proxies.py

commit dcbebd2ee2941136a2e04868da08777c985e0117
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-03 18:49:19 +0100

    Add a regression test for removing an object from only one connection

    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=32087

M	test/core/registrations.c

commit 818b90092102e4fe6d2addfe77ee5a86d50e31c5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-03 18:49:06 +0100

    dbus_g_connection_unregister_g_object: only unregister from
    @connection

    Previously, we unregistered the object from all connections, if it was
    present on more than one.

    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=32087

M	dbus/dbus-gobject.c

commit 6b29f7f317df7d96a94ac910306508452be9130c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-03 18:43:29 +0100

    Add a regression test for registering an object on two connections

    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=32087

M	test/core/registrations.c

commit 17d5dcf86c766075400aff5d2aa3fe8e599fb715
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-03 18:19:44 +0100

    fd.o #32087: emit signals on the appropriate connections

    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=32087

M	dbus/dbus-gobject.c

commit 7f041871c3e5d023ee9cb77609bf0b69ebdbde34
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-03 16:06:25 +0100

    Add a regression test for re-registering an object at the same path

    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=36793

M	test/core/registrations.c

commit 43f9dda46e9279b4489b6bd1efa0e5f9eb825a48
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-03 16:04:30 +0100

    dbus_g_connection_register_g_object: don't destroy state on early
    return

    At the beginning of the function we steal the object's state so we
    can add
    to the list. After doing that, we must make sure we give it back!

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=36793
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Reviewed-by: Sjoerd Simons <sjoerd.simons@collabora.co.uk>

M	dbus/dbus-gobject.c

commit 4da28a6c49cecb902544d9152a693105d320cdac
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-03 11:59:44 +0100

    dbus_g_connection_unregister_g_object: fix out-of-bounds reading

    The list of registrations is singly linked; we only avoid a crash here
    by luck.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=36793
    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Reviewed-by: Sjoerd Simons <sjoerd.simons@collabora.co.uk>

M	dbus/dbus-gobject.c

commit da740bfd88850c858d1cee079c8d261a79e2c75e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-03 15:25:08 +0100

    Subsume the test for #5688 into the more general registrations test

    Also test that the object is unregistered by the last unref or
    by forced
    disposal, without crashing.

    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=36793

D	test/core/5688.c
M	test/core/Makefile.am
M	test/core/registrations.c
M	test/core/run-test.sh

commit 0692c5995ea4a7013b4ab605cd76aca49239168d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-03 15:08:27 +0100

    Convert registrations test to use GTest

    Also use a private bus connection, for potentially better
    leak-detection.

    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=36793

M	test/core/registrations.c

commit 002feb57cfcfeb439be1ace875a67ad540fed950
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-03 14:49:29 +0100

    Rename test/core/unregister to registrations (no source changes)

    Reviewed-by: Cosimo Alfarano <cosimo.alfarano@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=36793

M	.gitignore
M	test/core/Makefile.am
R100	test/core/unregister.c	test/core/registrations.c
M	test/core/run-test.sh

commit 15d9f31812b07439558e615d4d9bdfccaa33dbd5
Author: Mike Gorse <mgorse@novell.com>
Date:	2011-03-11 09:26:01 -0600

    Fix removal of old io and timeout handlers when switching
    GMainContexts

    Bug: http://bugs.freedesktop.org/show_bug.cgi?id=35115
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	dbus/dbus-gmain.c

commit a1a9a6f973f64e543c3d43b01bd6ef0963f8bf16
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-10 11:17:53 +0100

    test-service: ignore result of dbus_bus_request_name since we look
    at the error instead

    gcc 4.6 warns for this usage.

    Reviewed-by: Colin Walters <walters@verbum.org>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37062

M	test/test-service.c

commit 6c1e9559094be37bf66731b9f09fffcb1a19e8e5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-10 11:16:45 +0100

    marshal_collection_array: statically assert that size conversion is
    not needed

    Previously, the function blindly assumed this without a check.

    Reviewed-by: Colin Walters <walters@verbum.org>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37062

M	dbus/dbus-gvalue.c

commit 324122a9f0bc859bb424d9026019e9077cda4015
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-10 11:15:32 +0100

    marshal_collection_array: remove set-but-unused variable elt_size

    gcc 4.6 warns about these.

    Reviewed-by: Colin Walters <walters@verbum.org>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37062

M	dbus/dbus-gvalue.c

commit 341043e2d776cbd6faaf5b8d6a54a46920bb094c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-04 15:18:48 +0100

    marshal_map, marshal_struct: remove unused variable ret

    gcc 4.6 warns about these.

    Reviewed-by: Colin Walters <walters@verbum.org>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37062

M	dbus/dbus-gvalue.c

commit 1ea2eee4623cace2e852f1c16b1b1ce23035d037
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-04 15:18:18 +0100

    demarshal_static_variant: remove useless call to
    dbus_message_iter_get_arg_type

    gcc 4.6 warns about this.

    Reviewed-by: Colin Walters <walters@verbum.org>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37062

M	dbus/dbus-gvalue.c

commit f8a7ccf024a19caa54d6f79cd9d62a63a9b36c5b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-05-04 15:17:51 +0100

    bash completion helper: remove unused variable 'prev', and simplify

    gcc 4.6 warns about this.

    Reviewed-by: Colin Walters <walters@verbum.org>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=37062

M	dbus/dbus-bash-completion-helper.c

commit 09d85a945760d06447aea09a38ea99d0dc54de2a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-29 17:05:04 +0100

    DBusGProxy: link against GIO and use GDBus to check names' syntax

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=23616

M	configure.ac
M	dbus/dbus-gproxy.c

commit f2b445d0d931f3f680cefe0141e62abeafda9742
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-29 15:08:36 +0100

    dbus_g_proxy_end_call: check that it's a proxy

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=23616

M	dbus/dbus-gproxy.c

commit 811089dae49c2f47d0f15fd7e9c180674f484391
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-29 15:08:05 +0100

    dbus_g_proxy_set_interface: check that it's a proxy and not destroyed

    If it has emitted destroy, our use of priv->manager will be a NULL
    pointer dereference.

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=23616

M	dbus/dbus-gproxy.c

commit af3d48b10042616ac7ecceed5af8ddaeecc093f5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-29 15:07:23 +0100

    Document that most DBusGProxy methods stop working on ::destroy

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=23616

M	dbus/dbus-gproxy.c

commit 63bd85823fd3039e88176105434c7bbdeae71e84
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-29 15:06:18 +0100

    dbus_g_proxy_new_from_proxy: check that the old proxy is in fact
    a proxy

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=23616

M	dbus/dbus-gproxy.c

commit 97de5501c2ebb29e4e32822bae0e45c88140bffd
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:	2011-04-14 14:48:56 +0100

    DBusGProxy: remove duplicate owner match rules.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=33646
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	dbus/dbus-gproxy.c

commit bc0497ea0c5ac65abc3658a31c95f9b0e15680f3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-04-13 19:00:23 +0100

    dbus_g_proxy_add_signal: stop falsely claiming that we read
    introspection

    If we believed the introspection, services could change their
    introspection and remote-crash us, so it's good that we don't. We
    shouldn't claim that we do, though.

    The second sentence is subtle: for D-Bus types that dbus-glib can map
    into more than one GLib type, you must currently use the one that
    dbus-glib would "naturally" produce. The only example I can find
    is that
    object paths must be DBUS_TYPE_G_OBJECT_PATH, even though dbus-glib
    can
    also (in principle) unmarshal object-paths as DBUS_TYPE_G_PROXY.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=36216

M	dbus/dbus-gproxy.c

commit f5008cc76e0b466c4730e331857bc041aced5e94
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 18:52:27 +0100

    improve documentation of proxy timeouts to mention that -1 is special

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gproxy.c

commit 25c4b24a0d8490a7ba667b9944ce9b1c0808878a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 18:52:02 +0100

    Don't allow proxy timeouts to be set negative, except for -1

    libdbus checks this as a precondition, but to avoid astonishing error
    behaviour (interpreted as OOM), so should we.

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gproxy.c

commit 35d1d8479031393f86fe668d2a1f64325b5dd1be
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 17:35:51 +0100

    DBusGProxy: share OOM handler

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gproxy.c

commit 3a0e477ed6648bcb99711976fd51f4c0394000c6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 17:32:11 +0100

    dbus_g_proxy_call_no_reply: don't assume NULL message means OOM

    It might either be OOM or bad arguments, probably the latter. That's
    programming error, but we already raised a critical warning, so
    be silent.

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gproxy.c

commit d0332f9862c3af18161f58444f35c7d03d9fb067
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 17:32:00 +0100

    dbus_g_proxy_begin_call_internal: don't assume NULL message means OOM

    It might either be OOM or bad arguments, probably the latter. That's
    programming error, but we already raised a critical warning, so
    be silent.

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gproxy.c

commit cd0da3f56873c5399b6247791df16acd3f4a73b1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 17:30:29 +0100

    dbus_g_proxy_marshal_args_to_message: diagnose inability to marshal
    args

    Failure to marshal arguments is entirely reachable, albeit only via
    programming error.

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gproxy.c

commit 8b75efc7941ac789605128d48f82168da18bb9fd
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 17:27:18 +0100

    marshal_collection_array: simplify exit path

    Also don't assume that failure of dbus_message_iter_close_container is
    always OOM.

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gvalue.c

commit 7729c5a4ee9c1bba0fe3f35d840c542303e26a1a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 17:26:56 +0100

    marshal_collection_array: if appending fails, don't assume OOM

    Appending can also fail by appending ((gboolean) 23) or something;
    admittedly, that's a programming error.

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gvalue.c

commit 73c1dc8031df7c9de0ab321f02cc5bedc49be7c1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 17:25:50 +0100

    marshal_collection_array: assert validity of signature

    This means we can recognise OOM reliably; do so.

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gvalue.c

commit ca88a4f4adffccc1be8ddc0835d640f36d42f9fc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 17:25:25 +0100

    marshal_collection_array: fail early if the array is NULL

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gvalue.c

commit 7228321ddafc88e12406ca49406dfaa80240be9d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 17:24:53 +0100

    marshal_collection_ptrarray: abandon broken containers, simplify
    exit path

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gvalue.c

commit 9e8bed2ec229e48df0b1c63560b183f46d33bffd
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 17:24:18 +0100

    marshal_collection_ptrarray: assert that the signature is valid

    This means that dbus_message_iter_open_container can't fail except
    by OOM,
    so use the shared handler.

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gvalue.c

commit 385180d3b1975afce823d4aa9aa5daf82fa09b5a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 17:23:46 +0100

    marshal_variant: abandon broken containers rather than closing them

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gvalue.c

commit 72c21e4e4cac8092c1dcf8348fdf3955cb01229c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 17:23:34 +0100

    marshal_struct: simplify teardown, and abandon broken containers

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gvalue.c

commit 48cf1b8b147d80265e2ab23b257d5c96ca260db9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 17:23:08 +0100

    marshal_map: on error, abandon the container instead of closing it

    libdbus considers it to be a programming error if you close a
    container
    gracefully when its contents are incomplete.

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gvalue.c

commit c827cd5b160b59246305526eac6154006f8bb8d5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 17:21:18 +0100

    marshal_signature: check validity of the signature

    Also remove a spurious cast, and comment why we're *not* assuming that
    failure here is necessarily OOM.

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gvalue.c

commit 98e5da6a6363b68042503e8e01819dc86ec7781e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 17:20:51 +0100

    marshal_object: check that it's really an object and its path is valid

    Again, we can now assume that failure is OOM.

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gvalue.c

commit 5d90b996ad4e9ee927d25fc692c8b08baa2a36b4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 17:20:23 +0100

    marshal_object_path: check that it's really a valid object path

    Again, this means failure can only be OOM, so use the shared handler.
    Also remove an unnecessary cast.

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gvalue.c

commit f57e4e33838062e98d39764202fdcd60b709362d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 17:19:45 +0100

    marshal_proxy: check that it's really a proxy and its path is valid

    This means that dbus_message_iter_append_basic can't fail other
    than by
    OOM, so use the shared OOM handler.

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gvalue.c

commit 15bf1a2ef4d8b3e37b056cc893a844706fc714dc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 17:18:43 +0100

    marshal_valuearray: simplify teardown

    If close_container fails, it might be an assertion failure in libdbus,
    so don't assume it's OOM. We have to handle programming errors
    somewhat
    gracefully during marshalling anyway, so there's no point in
    asserting.

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gvalue.c

commit d1093f2c3413285c839cdbbca0c848b0d071cb62
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 17:16:29 +0100

    marshal_valuearray: abandon the container if we fail

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gvalue.c

commit 782412b65a1364f8736e15217aa853083c962935
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 17:15:27 +0100

    marshal_basic: if marshalling a string fails, critical and return
    FALSE

    This could be OOM, but it could also be non-UTF-8.

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gvalue.c

commit a2c276a49fa9efb8336db74db60dc1bcd2f0e8d6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 17:14:25 +0100

    marshal_basic: if a boolean has a non-boolean value, diagnose
    the error

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gvalue.c

commit 94a501e0e69cf912c7f6a5250fdea0ec5fe673c7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 17:13:50 +0100

    dbus-gvalue: replace trivial cases of OOM with a call to a noreturn
    function

    In these cases there's no invalid value we could be supplying
    to libdbus,
    so it's definitely OOM, not a programming error (e.g. non-UTF-8)
    masquerading as OOM.

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gvalue.c

commit 41b2fd28a833995c8ccab1a690c0e3925572488b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 17:54:12 +0100

    When given an object path, use GVariant to check syntactic validity

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	dbus/dbus-gobject.c
M	dbus/dbus-gproxy.c

commit 367a58bc081d451ff90262ae96b7d78ea74f3d11
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-28 19:05:44 +0100

    Depend on dbus 1.2.16 for dbus_message_iter_abandon_container

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30171

M	configure.ac

commit 0f782b478a784ac890741e5d84fd741a26d49510
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-03-29 14:45:34 +0100

    Stop overriding pkg-config's nice informative message if GLib is
    too old

    This means that instead of this rather ambiguous text:

	checking for DBUS_GLIB... no
	checking for DBUS_GLIB_THREADS... yes
	configure: error: GLib development libraries not found

    platforms whose GLib is too old will get the conventional output:

	checking for DBUS_GLIB... no
	configure: error: Package requirements (gobject-2.0 >= 2.26)
	were not met:

	Requested 'gobject-2.0 >= 2.26' but version of GObject is 2.24.0

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=33145
    Reviewed-by: Colin Walters <walters@verbum.org>

M	configure.ac

commit ab2a98bd3ae0c59f198e82cba2c81095a47fa58d
Author: Robert Ancell <robert.ancell@canonical.com>
Date:	2011-02-15 14:10:34 +1100

    Fix linking order

    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=34282

M	dbus/Makefile.am

commit af0c64037673d598a6842fb344b5f3dad80ab821
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:	2010-06-02 16:31:54 +0100

    docs: correct links in introduction

    Fixes https://bugs.freedesktop.org/show_bug.cgi?id=22667 — thanks to
    Daniel Macks for the bug report!

M	doc/reference/dbus-glib-docs.sgml

commit 04e11da48a6c2a75bebb5ece31cf86508203dd02
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-01-04 16:33:27 +0000

    Add a regression test for errors containing underscores

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30274
    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

M	test/core/my-object.c
M	test/core/my-object.h
M	test/core/test-dbus-glib.c
M	test/core/test-service-glib.xml

commit 2d987890c3ba2fd8efc92f8b75da88904ce425f9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2011-01-04 18:04:11 +0000

    Run run-with-tmp-session-bus.sh directly rather than via ${SHELL}

    It has a correct #!/bin/sh line and is executable, so just running
    it is
    fine. This avoids running it under a user's chosen interactive shell,
    which might be non-POSIX (zsh, csh). Gentoo Portage apparently sets
    SHELL to /bin/false, presumably to trap this sort of thing.

    (I've tested this on Debian unstable with /bin/sh -> /bin/dash,
    to check
    that weren't accidentally relying on $SHELL being bash or similar.)

    Based on a workaround from Myckel Habets on the Gentoo bug.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=27193
    Bug-Gentoo: https://bugs.gentoo.org/show_bug.cgi?id=254192
    Reviewed-by: Colin Walters <walters@verbum.org>

M	test/core/run-test.sh
M	test/interfaces/run-test.sh

commit 6708c68cc9c312ffea600d0020425412ba242ddb
Author: Christian Dywan <christian@lanedo.com>
Date:	2011-01-04 18:48:31 +0000

    Cleanup indentation in dbus-glib-binding-tool

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=32351
    Bug-NB: NB#180486
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	dbus/dbus-binding-tool-glib.c

commit f1b8944a93a22d342f744526f5c47e80e394579f
Author: Christian Dywan <christian@lanedo.com>
Date:	2011-01-04 18:48:27 +0000

    Plug leaks in dbus-glib-binding-tool

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=32351
    Bug-NB: NB#180486
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	dbus/dbus-binding-tool-glib.c

commit 4cd1f54f4db5759db3781da4645cebcd4143e9a4
Author: Christian Dywan <christian@twotoasts.de>
Date:	2010-09-20 11:57:08 +0200

    Do not squash underscores in error names

    Underscores are used and valid according to the specification.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30274
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	dbus/dbus-gobject.c

commit d4780b527f5112acf015c0e57c9911e939b16f99
Author: Christian Dywan <christian.dywan@lanedo.com>
Date:	2010-07-21 16:32:22 +0200

    Watch server_set_data failure in dbus__server_setup_with_g_main

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=29884
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	dbus/dbus-gmain.c

commit c7b83e5b3bf7291b75399eed3f01ecea0c98702f
Author: Christian Dywan <christian.dywan@lanedo.com>
Date:	2010-12-13 10:14:57 -0800

    Verify Increment call in dbus-glib-test

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=29884
    Origin: vendor, Maemo
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	test/core/test-dbus-glib.c

commit 73fce893626e2e2640a35798266f4ee2bc6c05eb
Author: Simon McVittie <smcv@debian.org>
Date:	2010-12-02 17:47:13 +0000

    Release 0.83.2

M	NEWS
M	configure.ac

commit d51c445c8460507526124c3874f81a205a1ae4b9
Author: Simon McVittie <smcv@debian.org>
Date:	2010-12-02 17:41:12 +0000

    NEWS

M	NEWS

commit 59a0ea47f343da7626ea6f10f661a942f8eb284a
Author: Simon McVittie <smcv@debian.org>
Date:	2010-12-02 17:39:08 +0000

    DBusPyException_ConsumeError: check whether the constructor failed

M	_dbus_bindings/exceptions.c

commit 28880468dddbb0e063d80dd003145a6322238507
Author: Simon McVittie <smcv@debian.org>
Date:	2010-12-02 17:28:33 +0000

    Add a regression test for fd.o #23831

M	.gitignore
M	configure.ac
M	test/Makefile.am
A	test/import-repeatedly.c

commit d3f57baf2a9e5e26e2365313abd2890239b6572a
Author: Simon McVittie <smcv@debian.org>
Date:	2010-12-02 17:27:34 +0000

    fd.o #23831: make sure to ref types passed to PyModule_AddObject

    This avoids these static types wrongly being deallocated. Python
    implements static types as having one initial reference, which
    is never
    meant to be released, but if you get your refcounting wrong they'll be
    "deallocated" (causing a crash) during Py_Finalize.

M	_dbus_bindings/abstract.c
M	_dbus_bindings/bytes.c
M	_dbus_bindings/conn.c
M	_dbus_bindings/containers.c
M	_dbus_bindings/float.c
M	_dbus_bindings/int.c
M	_dbus_bindings/libdbusconn.c
M	_dbus_bindings/mainloop.c
M	_dbus_bindings/message.c
M	_dbus_bindings/pending-call.c
M	_dbus_bindings/server.c
M	_dbus_bindings/signature.c
M	_dbus_bindings/string.c

commit 56ad64cd14e52b479489549f76343f19e3842139
Author: Simon McVittie <smcv@debian.org>
Date:	2010-12-02 16:31:07 +0000

    Use Py_CLEAR for greater robustness

M	_dbus_bindings/abstract.c
M	_dbus_bindings/bus.c
M	_dbus_bindings/bytes.c
M	_dbus_bindings/conn-methods.c
M	_dbus_bindings/conn.c
M	_dbus_bindings/containers.c
M	_dbus_bindings/exceptions.c
M	_dbus_bindings/generic.c
M	_dbus_bindings/int.c
M	_dbus_bindings/message-append.c
M	_dbus_bindings/message-get-args.c
M	_dbus_bindings/message.c
M	_dbus_bindings/module.c
M	_dbus_bindings/pending-call.c
M	_dbus_bindings/server.c
M	_dbus_bindings/signature.c
M	_dbus_bindings/string.c
M	_dbus_glib_bindings/module.c
M	test/dbus_py_test.c

commit cb1bbd2414e892469023653ea7ddd5d39cd76b84
Author: Simon McVittie <smcv@debian.org>
Date:	2010-12-02 15:15:02 +0000

    dbus_py_Message_append: avoid looking beyond the valid part of
    a signature

    Similar reasoning: we don't even want to look where the iterator is
    pointing if the last call to dbus_signature_iter_next indicated
    "no more".

M	_dbus_bindings/message-append.c

commit db66571902a3406fc58ac453d8bfa7f689f46c42
Author: Simon McVittie <smcv@debian.org>
Date:	2010-12-02 15:13:28 +0000

    _message_iter_append_multi: bail out safely if a struct isn't filled

    In newer versions of libdbus, calling
    dbus_signature_iter_get_current_type
    when the iterator is pointing at the ')' of a struct trips an
    assertion
    failure, rather than just returning INVALID.

M	_dbus_bindings/message-append.c

commit 3813781fec33ed3cf33cedbfe7d1ecaf8af34aee
Author: Simon McVittie <smcv@debian.org>
Date:	2010-12-02 15:10:50 +0000

    Use dbus_message_iter_abandon_container to bail out, if supported

    This avoids (potentially fatal) warnings, with newer libdbus;
    it'll only
    work if we were compiled against libdbus >= 1.3.0.

M	_dbus_bindings/message-append.c
M	configure.ac

commit 156463909029aa5f3b56755f488e3ac15ed5a79a
Author: Simon McVittie <smcv@debian.org>
Date:	2010-12-02 15:09:00 +0000

    _message_iter_append_multi: assert that mode is what we expect

M	_dbus_bindings/message-append.c

commit abefbed911ecab8fb5c08d887479f21b449b392b
Author: Simon McVittie <smcv@debian.org>
Date:	2010-12-02 15:08:15 +0000

    Makefile.am: build API docs etc. last, so they pick up any recent
    changes

M	Makefile.am

commit 53e9cde2ca64de906967546750e5c6dd6aa58da6
Author: Simon McVittie <smcv@debian.org>
Date:	2010-11-23 19:17:19 +0000

    fd.o #21831: deserialize empty ByteArray objects correctly

    For some reason libdbus gives us NULL instead of a pointer to a
    zero-length object (i.e. any random place in the message would
    do), which
    Py_BuildValue doesn't interpret the way we'd want it to.

M	_dbus_bindings/message-get-args.c
M	test/test-standalone.py

commit 292a9eab92e908b6dc0e97b5ea07c432f41b8bae
Author: Simon McVittie <smcv@debian.org>
Date:	2010-11-23 19:06:17 +0000

    Move CFLAGS_WARNINGS setup after uses of JH_ADD_CFLAG

    We don't want to enable potentially-fatal errors when checking
    for things
    like -fno-strict-aliasing, because autoconf's test programs provoke
    warnings.

M	configure.ac

commit 7e157ee379de430fce9874291701c0c6666d2c2d
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:	2010-11-10 10:44:38 +0000

    Bump version to 0.93 for development

M	configure.ac

commit a12d06317591f954542d5ddbe1a1d3cad10a8156
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:	2010-11-10 10:25:19 +0000

    Release version 0.92

M	configure.ac

commit cb7a627ea838ae453d1401679a2b97acd95ba327
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:	2010-11-10 10:22:40 +0000

    Bump GLib dependency to 2.26.

    G_VARIANT_TYPE_STRING_ARRAY, as used by the GVariant<->GValue
    conversion
    functions, was added in 2.26. The previous release should have
    had this
    dependency, but I didn't notice.

M	configure.ac

commit c12efeeb7d9eb76eeae049528cee09c331551a5e
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:	2010-11-08 00:20:20 -0500

    Bump version to 0.91 for development

M	configure.ac

commit 4d4a1e266727de9ed1cba2707006435a389cac90
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:	2010-11-08 00:16:46 -0500

    HACKING: Fix release URL; be honest about NEWS

M	HACKING

commit b3c18c486dbb1fd2c6221d26fd64719d73ff4200
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:	2010-11-08 00:12:00 -0500

    Makefile.am: Remove ChangeLog's spurious FORCE dependency

    This seems to be some kind of leftover from the now-deleted lcov
    stuff.

M	Makefile.am

commit ccd31bb39e496ba511e888d793b15bfaa22894f0
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:	2010-11-08 00:08:15 -0500

    Release version 0.90

M	configure.ac

commit 65fb5802295ff28970ac1e3f0d5adaa6927a5773
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:	2010-11-08 00:04:31 -0500

    Build test/ before its subdirs.

    This fixes running `make check` without first running `make`, since
    subdirs of test/ depend on the binaries in that directory.

M	test/Makefile.am

commit 22df79e0c1373b696adbbaf2791195f0a8b5fb0f
Author: Mike Gorse <mgorse@novell.com>
Date:	2010-10-22 04:33:53 -0400

    Fix switching a connection's GMainContext

    dbus_connection_setup_with_g_main and dbus_server_setup_with_g_main
    are
    intended to switch the setup to a new main loop context if they are
    called with a context other than the one with which they were
    initially
    called.  However, this does not work in practice.  The problem has
    to do
    with libdbus maintaining a list of watches associated with the
    connection.  When dbus_connection_set_watch_functions is called, it
    first adds the existing watches using the new function and data, then
    removes the watches using the old function and data.  Remove_watch
    calls
    connection_setup_remove_watch, and the latter does not check that the
    watch's connection setup matches the connection setup passed to it, so
    it winds up removing the watch from the new connection setup.  (The
    watch has already been removed from the old setup at this point, as a
    side effect of dbus_watch_set_data).

    Fixes: <https://bugs.freedesktop.org/show_bug.cgi?id=30574>
    Signed-off-by: Will Thompson <will.thompson@collabora.co.uk>

M	.gitignore
M	dbus/dbus-gmain.c
A	test/core/30574.c
M	test/core/Makefile.am
M	test/core/run-test.sh

commit 83b51706c422662dd0a7d55a40030a1d75c38f88
Author: Elvis Pfützenreuter <epx signove.com>
Date:	2010-10-14 23:19:14 -0300

    Fix compilation in 64-bit architecture

M	_dbus_bindings/message-append.c

commit 8f0936de52b62b025385182406e5ea5795503d76
Merge: 8aca055 afd0987
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2010-10-14 13:06:47 +0100

    Merge branch 'type-names'

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30431

commit 8aca05563f86bd24fedb4322363ae844affc3c61
Merge: 0ab27bb ad4b66d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2010-10-14 12:37:58 +0100

    Merge branch 'gvariant'

    Reviewed-by: Danielle Madeley <danielle.madeley@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=30428

commit ad4b66db0e3a6ecab31bed214f341c4b07691224
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2010-10-14 12:15:08 +0100

    copy arrays of 'o', 'g' from GVariant without constructing a format
    string programmatically

M	dbus/dbus-gvalue-parse-variant.c

commit 869c180e12c68ed06fe973c58f26cffbf4a3cec9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2010-10-14 12:13:19 +0100

    output unhandled GVariantClass as ASCII if possible

M	dbus/dbus-gvalue-parse-variant.c

commit 42192c5bc0517d747aa83e9ce82e0208c3426aab
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2010-10-14 12:06:36 +0100

    Add dbus_g_value_parse_g_variant to gtkdoc

M	doc/reference/dbus-glib-sections.txt

commit f3b4a2d82994f0013f14fffbd3fedd8cd45cf7da
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2010-10-14 12:06:07 +0100

    dbus_g_value_parse_variant_by_type: talk about GVariant, not GDBus,
    in docs

M	dbus/dbus-gvalue-parse-variant.c

commit bc207d10cace8051ff7b2ddf51176030c0d40d17
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2010-10-14 12:05:48 +0100

    Adjust syntax to avoid relying on array/pointer duality

M	dbus/dbus-gvalue-parse-variant.c

commit a66176ecd5eab86d62e23c393c90dfda4d9ca354
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2010-10-14 12:04:29 +0100

    dbus_g_value_basic_array_parse_variant: allow the fast path to
    be taken

M	dbus/dbus-gvalue-parse-variant.c

commit b9c4c4bf00321ab1fb092514c6b1312d82a098c3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2010-10-13 13:27:33 +0100

    Test dbus_g_value_parse_g_variant

    Also test dbus_g_value_build_g_variant more thoroughly, by carrying
    out
    various round-trip conversions.

M	test/core/test-gvariant.c

commit 817e1fc7c50ccde3643c20ed837dce00bc16a885
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2010-10-13 12:57:35 +0100

    dbus_g_value_build_g_variant: cope with empty arrays, maps

    We can't just derive the type from the first entry if there's no first
    entry, so for the empty case we need a function whose structure
    mirrors
    dbus_g_value_build_g_variant itself, which just returns the type.

M	dbus/dbus-gtype-specialized.c

commit 53d4457fb5bd71467acb1fbca7ecd80d8e39e189
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2010-10-13 12:52:39 +0100

    dbus_g_type_specialized_map_append: document that the value contents
    are stolen

    This is highly non-obvious, and tripped me up while writing
    dbus_g_value_parse_g_variant.

M	dbus/dbus-gtype-specialized.c

commit 26e1c1d86b6e583ac326674ab8b886673f7c1f90
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2010-10-13 12:52:07 +0100

    fd.o #30428: add dbus_g_value_parse_g_variant

    This is the inverse of dbus_g_value_build_g_variant, and can be
    used to
    present an API with GVariant 'in' arguments to library users, then
    translate them into GValue for transmission over dbus-glib, as a
    transition mechanism.

M	dbus/Makefile.am
M	dbus/dbus-glib.h
A	dbus/dbus-gvalue-parse-variant.c
A	dbus/dbus-gvalue-parse-variant.h

commit abe6ee06e30f71187aeaed2c8804cbcc6692d8cc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2010-10-13 12:48:51 +0100

    replace remnants of gcov support with lcov.am from telepathy-glib

M	.gitignore
M	Makefile.am
A	tools/lcov.am

commit b4362df4d4b9ccd3246f102f7990dbda426f1b8c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2010-10-12 15:27:52 +0100

    Remove gcov decoder, which hasn't worked since dbus-glib left libdbus

M	Makefile.am
M	test/Makefile.am
D	test/decode-gcov.c

commit c42b86fecc793edaf82055a3552f1490be8ad29c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2010-10-12 15:19:24 +0100

    Test dbus_g_value_build_g_variant for various fixed arrays

M	test/core/test-gvariant.c

commit 75161c695e8d9729ead8543b1297202eee1894f9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2010-10-12 15:19:05 +0100

    Actually run test/core/test-gvariant

M	test/core/run-test.sh

commit 48b2b580c4d6fdcd9db83db7acebb0ea4be6fff9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2010-10-12 14:41:35 +0100

    Give specialized GArrays iteration/appending support

    This is necessary to have dbus_g_value_build_g_variant work on them.

M	dbus/dbus-gvalue-utils.c

commit 0ab27bb2b7c3f944348e6368069ffbfcfc2bcb5a
Author: Christian Dywan <christian.dywan@lanedo.com>
Date:	2010-07-21 17:28:09 +0200

    Free looked up function name in dbus binding tool

M	dbus/dbus-binding-tool-glib.c

commit 5784ee8f24334e634e91b8761dfa956f97a0d2ba
Author: Christian Dywan <christian.dywan@lanedo.com>
Date:	2010-07-21 17:18:18 +0200

    Always free method_c_name in dbus binding tool

M	dbus/dbus-binding-tool-glib.c

commit 4acce76d97825721c1792417994e592542f4d3d9
Author: Christian Dywan <christian.dywan@lanedo.com>
Date:	2010-07-21 17:12:34 +0200

    Free path string after emission in in statemachine server example

M	dbus/examples/statemachine/statemachine-server.c

commit ddb48ae24e40c8636b85555e8d288e2a33cadd44
Author: Christian Dywan <christian.dywan@lanedo.com>
Date:	2010-07-21 17:10:26 +0200

    Plug leak of expected_str in threaded server test

M	test/core/test-thread-server.c

commit a07afee00e091a11dc9eefd775288a32f0e49e2d
Author: Christian Dywan <christian.dywan@lanedo.com>
Date:	2010-07-21 18:41:06 +0200

    Dereference main loop once variant recursion test is done

M	test/core/test-variant-recursion.c

commit ffe66eb93737eb5ac699b8acba7781a5f77bdab6
Author: Christian Dywan <christian.dywan@lanedo.com>
Date:	2010-07-22 16:26:15 +0200

    Remove unused method attribute variables in introspect_interfaces

M	dbus/dbus-gobject.c

commit afd098718e36b8ce51f565447f429d807bab3785
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2010-09-28 17:19:19 +0100

    Add DBusGObjectPath, DBusGSignature typedefs

M	dbus/dbus-glib.h
M	dbus/dbus-gvalue.c
M	doc/reference/dbus-glib-sections.txt

commit 0ed654e18e29f8c23add3d69e57f6b3628c8f848
Author: Louis-Francis Ratté-Boulianne
<louis-francis.ratte-boulianne@collabora.co.uk>
Date:	2010-08-18 14:02:11 -0400

    Don't override CFLAGS when adding compiler warnings

    Macro function TP_COMPILER_WARNINGS overrides the value of the given
    variable (first argument of the function)

    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	configure.ac

commit 8318613e6b186bd9e5c8a844c58beebf47426116
Author: Colin Walters <walters@verbum.org>
Date:	2010-08-12 10:19:35 -0400

    configure: Release 0.88

M	configure.ac

commit 510bdcd63ae4e588a5cb72727696d5ad7fd5298b
Author: Colin Walters <walters@verbum.org>
Date:	2010-04-19 16:47:11 -0400

    Respect property access flags for writing, allow disabling for reads

    Because DBus-GLib originally was designed as a generic "object
    mapping"
    binding, the handler for org.freedesktop.DBus.Properties simply
    allowed access (read or write) to any GObject property that was
    exported.

    Later, the (compile time) introspection XML was added, and while
    we only
    listed "exported" properties in the dynamic introspection XML, we
    still allowed Get or Set calls to any property that was valid.

    With this patch, we deny writes to properties which aren't listed
    in the XML, or are listed as read-only.

    For backwards compatibility however, we still allow reads.	A
    service may disable this by calling
    dbus_glib_global_set_disable_legacy_property_access().

M	dbus/dbus-binding-tool-glib.c
M	dbus/dbus-glib.h
M	dbus/dbus-gobject.c
M	test/core/my-object.c
M	test/core/my-object.h
M	test/core/test-dbus-glib.c
M	test/core/test-service-glib.xml

commit f0668d71d63f97c1c429dad165a30d3aadbdfa0f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2010-08-09 11:25:19 +0100

    Consolidate LDADD variables in tests/examples and make them more
    complete

    This fixes compilation with LDFLAGS=-Wl,--no-add-needed, which is the
    default behaviour of GNU gold, and of Fedora's patched GNU ld.
    See: http://fedoraproject.org/wiki/Features/ChangeInImplicitDSOLinking

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=29274
    Reviewed-by: Colin Walters <walters@verbum.org>

M	dbus/examples/Makefile.am
M	dbus/examples/statemachine/Makefile.am
M	test/core/Makefile.am
M	test/interfaces/Makefile.am

commit ccf4a4d8c82b7309af7f3fb23144690acbf8e38c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2010-08-09 11:25:55 +0100

    Add various tests etc. to .gitignore

M	.gitignore

commit dcc9c8f2dede482614b885eace06f2dedaf2a736
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2010-07-27 17:16:33 +0100

    Add Libtool m4 to .gitignore

M	.gitignore

commit 9440209e203cccef158904800ea623568637a71e
Merge: 0eec114 077d445
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:	2010-08-05 10:09:08 +0100

    Merge remote branch 'danni/gvalue-to-gvariant'

    Fixes: https://bugs.freedesktop.org/show_bug.cgi?id=28715

commit 0eec114bb510a3bb30888b0020ca0dc11dc3497d
Author: Christian Dywan <christian@twotoasts.de>
Date:	2010-07-22 13:38:01 +0200

    Refer to dbus_g_connection_flush rather than the plain dbus call

    Fixes: https://bugs.freedesktop.org/show_bug.cgi?id=29214

M	dbus/dbus-gproxy.c

commit 077d445078663e3ee6f93beacc14d866504148bf
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:	2010-07-14 15:43:11 +1000

    Support DBUS_TYPE_G_SIGNATURE

M	dbus/dbus-gtype-specialized.c
M	test/core/test-gvariant.c

commit 13f7c51344111ca5266e790d2f4863fab770bfd8
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:	2010-06-25 14:35:17 +1000

    Test test_g_variant_equivalent itself

M	test/core/test-gvariant.c

commit 90b5e06797f2c9c5ed8918d22de35d5093bc3bd1
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:	2010-06-25 14:11:40 +1000

    Write a recursive equivalence function for testing the equivalence
    of GVariants

    Makes up for the limitations of g_variant_equal()

M	test/core/test-gvariant.c

commit 5456dc1f10544505a61f2608f646256e28b0047a
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:	2010-06-24 22:10:48 +1000

    Tests for GValue-to-GVariant

M	test/core/Makefile.am
A	test/core/test-gvariant.c

commit 5cc0676c83ee678069886daad5fc5487f098686e
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:	2010-06-24 20:52:26 +1000

    fd.o #28715: Add dbus_g_value_build_g_variant()

M	dbus/dbus-gtype-specialized.c
M	dbus/dbus-gtype-specialized.h
M	doc/reference/dbus-glib-sections.txt

commit 5ed147db0808e5f4ef50dfd6011419c44255ea6c
Author: Danielle Madeley <danielle.madeley@collabora.co.uk>
Date:	2010-06-24 20:59:05 +1000

    Bumping required GLib to 2.24 for GVariant

M	configure.ac

commit 7f054d7bce4b2ea74e5268f2cf65c467773ee14f
Author: Dan Williams <dcbw@redhat.com>
Date:	2010-06-29 21:19:25 -0700

    Fix lookup of regular properties when shadow properties are used

    Only free the uscore converted name if there's actually a shadow
    property registered for this property; otherwise if there is no
    shadow property we free the uscore converted one and then return
    it immediately after.

M	dbus/dbus-gobject.c

commit e6b6e27dc2d6e3abae88d9a773a1e4c016e58aa3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2010-05-04 12:39:51 +0100

    fd.o #27958: dbus_g_error_domain_register: rewrite the documentation

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>

M	dbus/dbus-gobject.c

commit 451183c140f7d6b42fdff3a6c190ef93d860c5fc
Merge: 7db074f 499beb6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2010-05-04 12:18:31 +0100

    Merge branch '14579-remove-before-cancel'

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=14579

commit 7db074fead497c31041ebf417db26ae9a7ab565c
Author: Fridrich Štrba <fridrich.strba@bluewin.ch>
Date:	2010-04-26 18:51:49 +0200

    Put the G_OS_WIN32 check where it can be defined.

M	test/core/test-profile.c

commit fb7cb9f10e08eaf3887b2a63a7fa59510e40b5d2
Author: Fridrich Štrba <fridrich.strba@bluewin.ch>
Date:	2010-04-26 18:50:31 +0200

    Fix linking of tests. On windows, undefined symbols are not allowed
    and symbol lookup is sequencial

M	test/core/Makefile.am
M	test/interfaces/Makefile.am

commit fadbedfbbf512d69611a80a0cd4698e3b5d579ea
Author: Fridrich Štrba <fridrich.strba@bluewin.ch>
Date:	2010-04-26 18:44:21 +0200

    Use EXEEXT so that we satisfy dependencies when cross-compiling

M	test/core/Makefile.am
M	test/interfaces/Makefile.am

commit f0abb1f78d4e4764119b57d2b6f3b5fa57d8fdfb
Author: Dan Williams <dcbw@redhat.com>
Date:	2010-04-22 13:26:44 -0700

    core: don't pass malformed error interface to dbus (rh#581794)

    While clients should really register their errors, dbus-glib
    shouldn't be passing a malformed error interface to dbus
    either.  It's just not nice and libdbus will call abort().

    See https://bugzilla.redhat.com/show_bug.cgi?id=581794

    Signed-off-by: Colin Walters <walters@verbum.org>

M	dbus/dbus-gobject.c
M	test/core/my-object.c
M	test/core/my-object.h
M	test/core/test-dbus-glib.c
M	test/core/test-service-glib.xml

commit 47adc3b17f20a78230c5c34e635fc30bb7afbde2
Author: Colin Walters <walters@verbum.org>
Date:	2010-04-26 10:51:39 -0400

    Disable test-profile on win32 for now

    It uses Unix sockets, and overall isn't very interesting anyways.

M	test/core/test-profile.c

commit 16deb341b52421695b81ebe8c91c81f47eb173f3
Author: Fridrich Strba <fridrich.strba@bluewin.ch>
Date:	2010-04-26 10:31:23 -0400

    Don't use the identifier "interface" in public headers

    This causes problems on Windows.

M	dbus/dbus-gidl.h
M	dbus/dbus-glib.h

commit 354ed0897ae0e815e95a7eb931de6ba35325121c
Author: Fridrich Strba <fridrich.strba@bluewin.ch>
Date:	2010-04-26 10:29:41 -0400

    Use AC_CANONICAL_HOST, not _TARGET

    This is what GLib uses; see the Autoconf manual for the full
    explanation of the train wreck.

M	configure.ac

commit af0ec6795ea64d6498b83f30ecd94adc4e935e7e
Author: Astone Lin <astone.lin@mediatek.com>
Date:	2010-04-19 06:56:43 -0400

    Allow duplicate object path registrations for different connections

    We clearly need to respect the connection when comparing
    registrations,
    since it's perfectly valid to have the same one on two different
    connections.

M	dbus/dbus-gobject.c

commit fc7114a536571688d48ede025f1357c0e467c879
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:	2010-04-07 12:08:59 +0200

    add mising DBUS_TYPE_G_* to the doc

    Reviewed-by: Will Thompson <will.thompson@collabora.co.uk>
    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	doc/reference/dbus-glib-sections.txt

commit 8df3281e536557cfd6b4056a9c95102d57596179
Author: Colin Walters <walters@verbum.org>
Date:	2010-03-24 20:17:54 -0400

    [configure] Release 0.86

M	configure.ac

commit 551d86f7fe0e7f2304f57baa7a406c935182b06a
Author: Dan Williams <dcbw@redhat.com>
Date:	2010-03-24 14:40:09 -0700

    core: performance optimization for object info lookup

M	dbus/dbus-gobject.c

commit ed73cb2f32c411a3306c6dfe2ae541aea249f200
Author: Dan Williams <dcbw@redhat.com>
Date:	2010-03-24 12:20:13 -0700

    core: allow duplicate property names on GInterfaces

    Allows dbus-glib clients to handle objects that implement
    more than one interface with the properties of the same name.
    Normally this would not be allowed since with GObject all
    properties are in the same namespace.  This patch allows
    the interface to register "shadow" properties on a per-interface
    basis which redirect the lookup of the property name.

M	dbus/dbus-glib.h
M	dbus/dbus-gobject.c
M	test/interfaces/Makefile.am
M	test/interfaces/test-client.c
A	test/interfaces/test-dup-prop-a.xml
A	test/interfaces/test-dup-prop-b.xml
A	test/interfaces/test-dup-prop.c
A	test/interfaces/test-dup-prop.h
M	test/interfaces/test-server.c

commit c1bbf6fb1b7c6e2a743c8a7353cddea52d42fa2d
Author: Colin Walters <walters@verbum.org>
Date:	2010-03-18 21:39:24 -0400

    [dbus-gobject.c] Trivial compiler warning fixes

M	dbus/dbus-gobject.c

commit b52c16b495632bd945328ca858533d5660106bdf
Author: Colin Walters <walters@verbum.org>
Date:	2010-03-18 21:37:38 -0400

    Remove dbus-glib-undeclared.txt from git; it's a generated file

D	doc/reference/dbus-glib-undeclared.txt

commit 7b029451dac1fdd14da4e558cc995fb7f5263d04
Author: Colin Walters <walters@verbum.org>
Date:	2010-03-18 21:37:05 -0400

    [configure.ac] Use AM_SILENT_RULES if available

M	configure.ac

commit f68a143ac3b19bd40709cbc85b5112fcb0d2e07b
Author: Johan Sandelin <johan@alphafish.com>
Date:	2010-03-23 15:15:33 +0100

    Fixed typo in dbus/bus.py where list_activatable_names
    would call org.freedesktop.DBus.ListNames instead of
    org.freedesktop.DBus.ListActivatableNames

    Reviewed-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	dbus/bus.py

commit db026859406ce768d71d4ccf850e8be56b52998c
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:	2010-03-09 17:18:10 +0000

    Free errors returned by method implementations

    https://bugs.freedesktop.org/show_bug.cgi?id=26981

M	dbus/dbus-gobject.c

commit 3902ac5a13a7510b8411b1147d0cce5711cf4168
Author: Sven Herzberg <herzi@gnome-de.org>
Date:	2010-03-08 16:50:28 +0100

    turn the gtk-doc documentation into buildable shape

    * dbus/dbus-gobject.c: the < and > symbols broke the sgml generation
    in
      gtk-doc

M	dbus/dbus-gobject.c

commit 3d69cfeab177e79b4ecfe1b4284a5bd840fd11e7
Author: Colin Walters <walters@verbum.org>
Date:	2009-04-02 14:01:05 +0100

    Fix hyphenated error codes correctly

    The error code names generated my glib-mkenums separate the words by
    hyphens which are invalid D-BUS error names. This patch converts them
    back to wincaps, but we can't uppercase the first letter.

    Based on an original patch from Neil Roberts <neil@linux.intel.com>

M	dbus/dbus-gobject.c
M	test/core/my-object.c
M	test/core/my-object.h
M	test/core/test-dbus-glib.c
M	test/core/test-service-glib.xml

commit 4538adc1fe903d1ce71ca24590df9bdac7c4a50e
Author: Colin Walters <walters@verbum.org>
Date:	2010-03-02 12:12:18 -0500

    Revert "Squash underscores and dashes in errors when converting to
    DBus errors"

    This reverts commit 9637ed9f0c66982a06048b18ccf983881643e456.

    This incorrectly uppercased the first character in error names:
    https://bugzilla.redhat.com/show_bug.cgi?id=569631

M	dbus/dbus-gobject.c

commit 2d85761286e96df3490426af1e20e7b553448092
Author: Colin Walters <walters@verbum.org>
Date:	2010-03-02 13:52:36 -0500

    Remove dbus-glib-undocumented.txt from git

    It's autogenerated by gtk-doc, so shouldn't be in git.

D	doc/reference/dbus-glib-undocumented.txt

commit e2262071188067360a7798ae30d4b694229f6f0f
Author: Simon McVittie <smcv@debian.org>
Date:	2010-02-18 18:11:34 +0000

    Start 0.83.2

M	NEWS
M	configure.ac

commit 49884241db42ea4d2eadd08cb8b5805a6708c925
Author: Simon McVittie <smcv@debian.org>
Date:	2010-02-18 17:15:57 +0000

    Prepare version 0.83.1

    Second try :-)

M	NEWS
M	configure.ac

commit c91476085faaf7456c5b67e431c11b153b3c8762
Author: Simon McVittie <smcv@debian.org>
Date:	2010-02-18 17:35:32 +0000

    Use telepathy-glib's macros for desirable and undesirable compiler
    warnings

M	configure.ac
M	m4/Makefile.am
A	m4/tp-compiler-flag.m4
A	m4/tp-compiler-warnings.m4

commit 65838e33fc871a8cf4b18541a6b0a59af2951eb2
Author: Simon McVittie <smcv@debian.org>
Date:	2010-02-18 17:35:11 +0000

    Require a halfway modern Automake

M	configure.ac

commit 4bef0dcf7a040d3656b60e480e9e94b663887ab9
Author: Simon McVittie <smcv@debian.org>
Date:	2010-02-18 17:35:01 +0000

    Support silent rules if automake >= 1.11

M	configure.ac

commit ea197112c5601b0b527b933c3e1241a1bdb02f9f
Author: Simon McVittie <smcv@debian.org>
Date:	2010-02-18 17:22:14 +0000

    Fix signature and return value of Connection_tp_init (oops)

M	_dbus_bindings/conn.c

commit 1c9d2019260b38f7ee2eef1f73d07c0620ba51f2
Author: Simon McVittie <smcv@debian.org>
Date:	2010-02-18 17:21:56 +0000

    Revert "Prepare version 0.83.1"

    This reverts commit a63043f262e8938affe515faa145d0f619b9fae6.

M	NEWS
M	configure.ac

commit a63043f262e8938affe515faa145d0f619b9fae6
Author: Simon McVittie <smcv@debian.org>
Date:	2010-02-18 17:15:57 +0000

    Prepare version 0.83.1

M	NEWS
M	configure.ac

commit 2124e4f2a44791c92781276ebe7c4e9a458888d5
Author: Simon McVittie <smcv@debian.org>
Date:	2010-02-18 17:15:48 +0000

    Ignore generated files from newer libtool

M	.gitignore

commit 35f4c2e950539f3c72628eb758b62ed2a0b70492
Author: Simon McVittie <smcv@debian.org>
Date:	2010-02-18 17:02:13 +0000

    Use git log rather than git-log, to support distcheck with modern git

M	Makefile.am

commit 50f0a326c63f35b2cafe8cb9e9082bc2c4a3fa1b
Author: Simon McVittie <smcv@debian.org>
Date:	2010-02-18 15:07:39 +0000

    fd.o#21172: avoid DeprecationWarning with Python 2.6

M	_dbus_bindings/conn.c

commit abdf6021b21883beb51d92862caafc127d3c25ec
Author: Simon McVittie <smcv@debian.org>
Date:	2010-02-18 15:03:30 +0000

    tests/cross-test-*: don't use deprecated sets module

    set() has been a built-in since 2.4, and we don't support older
    versions.

M	test/cross-test-client.py
M	test/cross-test-server.py

commit add31c0964a0a659443aa534b1f114f4e0a2e7b3
Author: Simon McVittie <smcv@debian.org>
Date:	2010-02-18 14:45:24 +0000

    fd.o #15013: expose dbus.lowlevel.MESSAGE_TYPE_SIGNAL and friends

M	_dbus_bindings/module.c
M	dbus/lowlevel.py

commit 9637ed9f0c66982a06048b18ccf983881643e456
Author: Colin Walters <walters@verbum.org>
Date:	2010-02-01 10:09:53 -0500

    Squash underscores and dashes in errors when converting to DBus errors

    We were just taking the enumeration nick and appending to the DBus
    error name, but since these can contain '-' we need to squash.

M	dbus/dbus-gobject.c

commit d039ca66f85955788e2d58294c249579bed9cc03
Author: Colin Walters <walters@verbum.org>
Date:	2010-01-27 13:56:48 -0500

    Release 0.84

M	configure.ac

commit f1c3f7bf585d6010c84491372b0a6f0ae3b1432a
Author: Colin Walters <walters@verbum.org>
Date:	2010-01-27 13:01:29 -0500

    Add GMainContext to dbus_g_bus_get_private, add a test case

    To even sort of work with threads right now, a common workaround
    is to open a private connection.  This patch more explicitly
    supports creating a private connection, associating it with
    the GMainContext which will be used for a thread.

    Also, add a (very simple) test case which just uses a private
    connection for the default main context.

M	dbus/dbus-glib.h
M	dbus/dbus-gmain.c
M	test/core/test-dbus-glib.c

commit 87c645ed17d6fef350e8c26e322ecde566a27d42
Author: Colin Walters <walters@verbum.org>
Date:	2010-01-27 13:06:34 -0500

    Fix compilation of dbus-gvalue.c

    commit c4a5653e0402f876a1824c33a19e69991ee46a27 was missing a "break;"

M	dbus/dbus-gvalue.c

commit e6cd65545ee5cd2eeb5ccc21d5bfe8e8ac286d95
Author: Colin Walters <walters@verbum.org>
Date:	2010-01-27 11:40:07 -0500

    Add note about non-maintenance of NEWS

M	NEWS

commit c4a5653e0402f876a1824c33a19e69991ee46a27
Author: Andres Salomon <dilinger@collabora.co.uk>
Date:	2009-08-19 08:57:21 -0400

    dbus-gvalue: set an error when demarshal_basic doesn't recognize type

    By passing dbus_g_proxy_call an incorrect signature, we can cause
    the function to fail but not provide any error message (if
    G_DISABLE_ASSERT is defined).  As smvc pointed out, this can also
    become a runtime error when a telepathy CM changes signature, but
    the client hasn't been updated.  As such, g_assert isn't an
    appropriate
    action.  See http://bugs.debian.org/541632 for more information.

    This patch causes it to set an error when demarshalling a type
    that it's
    not expecting.  Instead of a NULL error, one instead
    sees something like the following when the method returns a path
    object but the client expected a string:

    "modem Create() failed: Expected type gchararray, got type code 'o'"

    Signed-off-by: Andres Salomon <dilinger@collabora.co.uk>

M	dbus/dbus-gvalue.c

commit b976413f896f2d5a0be9449fc77a716f2e67cc96
Author: Jiří Klimeš <jklimes@redhat.com>
Date:	2010-01-27 10:36:57 -0500

    Fix bad NAME in dbus-binding-tool man page

M	doc/dbus-binding-tool.1

commit 34636b12c62523b9db789b0fbeb3a86782debf10
Author: Colin Walters <walters@verbum.org>
Date:	2010-01-15 12:23:30 -0500

    Import dbus-bus-introspect.xml upstream

    Rather than having consumers pass an externally-generated XML file,
    just include one here.  In practice our target audience is OS
    builders,
    who if they have the capability to update dbus, also have the
    capability
    to update dbus-glib.

M	Makefile.am
M	configure.ac
A	dbus-bus-introspect.xml
M	tools/Makefile.am

commit 9cefa4bae8d20beddf695380af00945790da0206
Merge: 5e5a1c1 15f4533
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2009-11-25 14:55:32 +0000

    Merge remote branch 'upstream/master'

commit 15f4533742ad6aeab85ebb723ac8fca99c00e939
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:	2009-11-16 13:32:40 +0000

    Don't leak DBusGMethodInvocation for no-reply calls

    https://bugs.freedesktop.org/show_bug.cgi?id=25119

M	dbus/dbus-gobject.c

commit 5e5a1c1930173dac0e331c2cb78a164c3565b0eb
Merge: 2a4396b 90e2199
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2009-09-29 14:22:07 +0100

    Merge remote branch 'wjt/duplicate-registrations'

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

commit 2a4396b523912c3bf4d2a1ef6d6fa930c0871c67
Merge: 980b468 e2007cf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2009-09-29 14:07:11 +0100

    Merge branch '20936-fsf-address'

    Reviewed-by: Colin Walters <walters@verbum.org>

commit 980b46870aa0e44a04ad1191d7af1d0601577501
Author: Stian Skjelstad <stian@nixia.no>
Date:	2009-09-18 14:01:00 -0400

    Bug 19623 - Add dbus_g_bus_get_private

    Useful for cases where you have to get a private connection, among
    them to work around threading issues.

    Signed-off-by: Colin Walters <walters@verbum.org>

M	dbus/dbus-glib.h
M	dbus/dbus-gmain.c

commit 90e2199ac99f5b8ab0cd5f45dcb398ecf9af03d9
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:	2009-09-12 11:58:22 +0100

    Copy object registration list when unregistering.

    Since the list of registrations on the object is modified when
    each path
    is removed, iterating it directly is wrong: after the first pass
    of the
    loop, 'iter' would point to a link which has been freed.

M	dbus/dbus-gobject.c

commit 39e2642e41b2293de7556fa15c57872f78ffcdc8
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:	2009-09-12 11:28:25 +0100

    Only re-set registration list if it's non-empty

M	dbus/dbus-gobject.c

commit 0263b72669de710e0adda419a520ae9f123a1be9
Author: Colin Walters <walters@verbum.org>
Date:	2009-08-19 13:27:53 -0400

    Support duplicate object registrations

    Before commit e869fda4, we semi-supported registering the
    same object multiple times.  We'd accept messages for both paths,
    however when signals were emitted, they'd both use the first object
    path.

    That commit simply disallowed multiple registrations, which broke
    backwards compatibility with some projects like PolicyKit which
    had the same object registered with different paths.

    With this commit, explicitly allow and support multiple registrations.
    The primary change is that signals are now emitted once for each
    registration path of an object, using the correct path.

M	dbus/dbus-gobject.c
M	test/core/test-dbus-glib.c
M	test/core/test-service-glib.c

commit c993494ad463ffe55b8603e58aa5ecb6dd731144
Author: Colin Walters <walters@verbum.org>
Date:	2009-07-16 14:09:18 -0400

    Release 0.82

M	configure.ac

commit 65e03ccf0f2417a83fd187035b80d680e376fd32
Author: Colin Walters <walters@verbum.org>
Date:	2009-07-16 13:51:57 -0400

    Test for git-log in Makefile.am should just be for git now

    The combined tools are no longer in $PATH for modern git.

M	Makefile.am

commit f5edb761202d3aff8f8bd0bc68dd57d3d32d2bd1
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:	2009-07-16 13:39:08 -0400

    Bug 18294 - Be defensive about a possibly NULL property string

    As far as I can tell we should always be writing one, but it doesn't
    hurt to guard against NULL here.

    Signed-off-by: Colin Walters <walters@verbum.org>

M	dbus/dbus-gobject.c

commit 2508e687e7d7792a656c7af0aad1be851faa33bb
Author: Brian Cameron <brian.cameron@sun.com>
Date:	2009-07-16 13:15:38 -0400

    Bug 20343 - Add a man page for dbus-binding-tool

    Signed-off-by: Colin Walters <walters@verbum.org>

M	doc/Makefile.am
A	doc/dbus-binding-tool.1

commit 29513843b22dbd2aba1d3ba2930bb38e2c6631e5
Author: Marc-André Lureau <marcandre.lureau@gmail.com>
Date:	2009-05-09 18:13:49 +0300

    build: fix undefined macro: AM_PROG_LIBTOOL with recent libtool

    Without this patch, I get:

     configure.ac:206: warning: macro `AM_PROG_LIBTOOL' not found
     in library
     configure.ac:213: error: possibly undefined macro: AM_PROG_LIBTOOL
	   If this token and others are legitimate, please use
	   m4_pattern_allow.
	   See the Autoconf documentation.
     autoreconf2.50: /usr/bin/autoconf failed with exit status: 1

    (I am using libltdl-dev 2.2.6a-4 from Debian)

M	Makefile.am
M	autogen.sh

commit d66337bdf9fc8f5372d84b05ae68c818bb9c881b
Author: Luis Menina <liberforce@freeside.fr>
Date:	2009-07-16 10:55:39 -0400

    Bugg 22244 - Only include <glib.h>, not individual headers

    Signed-off-by: Colin Walters <walters@verbum.org>

M	dbus/dbus-glib-tool.h

commit 67c289a60a4ac2ee9660f38a7168a238c1b3cffb
Author: Colin Walters <walters@verbum.org>
Date:	2009-07-15 15:33:31 -0400

    Clean up some compilation warnings

M	dbus/dbus-gloader-expat.c
M	dbus/dbus-gobject.c
M	test/core/test-dbus-glib.c

commit 5eea6af0d24780109dbbc15b8bfa4078df3a80a2
Author: Colin Walters <walters@verbum.org>
Date:	2009-07-15 15:28:06 -0400

    Add missing prototype for dbus_g_connection_unregister_g_object

    The function was introduced in commit b4911558384de and intended
    to be public, make it so.

M	dbus/dbus-glib.h

commit de68d2b2fc3012ae733212a704aa29a748f22f80
Author: Brian Tarricone <bjt23@cornell.edu>
Date:	2009-07-15 15:03:36 -0400

    Bug 21753 - Correctly initialize GValues in dbus-binding-tool
    generated code

    GValues should have their type set to 0.

    Signed-off-by: Colin Walters <walters@verbum.org>

M	dbus/dbus-binding-tool-glib.c

commit af07e13e6afe09456588ddba4b72cba215bc7c93
Author: Jason Leach <jason@archlinux.us>
Date:	2009-07-01 15:41:04 -0400

    Bug 21362 - Remove use of deprecated symbols

    The _set*_take_ownership are replaced by _take, and
    use g_main_loop_run.

M	dbus/dbus-binding-tool-glib.c
M	dbus/dbus-gvalue-utils.c
M	dbus/dbus-gvalue.c
M	m4/gtk-doc.m4
M	test/core/test-dbus-glib.c
M	test/core/test-thread-client.c
M	test/core/test-thread-server.c

commit e2007cfc5822f057b975660bd369fee56a7f2eb6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2009-06-09 16:22:46 +0100

    fd.o #20936: Fix another couple of instances of the old FSF address

    `git grep 'Temple Place'` now returns nothing.

M	dbus/dbus-bash-completion-helper.c
M	dbus/dbus-gtool-test.h
M	dbus/dbus-gtype-specialized-priv.h

commit cbe5250e553112221e1230301767ad1052790b0a
Author: Tobias Mueller <fdo-bugs@cryptobitch.de>
Date:	2009-04-15 21:37:05 +0100

    fd.o #20936: Update FSF address

    The glib bindings contain an outdated address of the FSF:
    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307

    The new address is:
    http://www.fsf.org/about/contact.html writes:
    > Free Software Foundation
    > 51 Franklin Street, Fifth Floor
    > Boston, MA 02110-1301
    > USA

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	COPYING
M	dbus/dbus-binding-tool-glib.c
M	dbus/dbus-binding-tool-glib.h
M	dbus/dbus-gidl.c
M	dbus/dbus-gidl.h
M	dbus/dbus-glib-lowlevel.h
M	dbus/dbus-glib-tool.c
M	dbus/dbus-glib-tool.h
M	dbus/dbus-glib.c
M	dbus/dbus-glib.h
M	dbus/dbus-gloader-expat.c
M	dbus/dbus-gmain.c
M	dbus/dbus-gobject.c
M	dbus/dbus-gobject.h
M	dbus/dbus-gparser.c
M	dbus/dbus-gparser.h
M	dbus/dbus-gproxy.c
M	dbus/dbus-gsignature.c
M	dbus/dbus-gtest-main.c
M	dbus/dbus-gtest.c
M	dbus/dbus-gtest.h
M	dbus/dbus-gthread.c
M	dbus/dbus-gtype-specialized.c
M	dbus/dbus-gtype-specialized.h
M	dbus/dbus-gutils.c
M	dbus/dbus-gutils.h
M	dbus/dbus-gvalue-utils.c
M	dbus/dbus-gvalue-utils.h
M	dbus/dbus-gvalue.c
M	test/core/test-profile.c
M	test/decode-gcov.c

commit 499beb64a12cead99ccb09d7de01890aaa800ef2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-11-28 16:04:57 +0000

    Bug 14579: remove pending call from hash table before cancelling it

    Previously, the code implicitly assumed that cancelling the pending
    call
    would not cause the DBusGProxy to be freed. This can fail if user_data
    for the pending call holds the last reference to the DBusGProxy - in
    this case, it is unsafe to be manipulating the contents of "priv"
    after
    the call is cancelled.

M	dbus/dbus-gproxy.c

commit b615918eef9723c00f03d30903181d9989dfd261
Merge: cb8a113 f550c49
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2009-06-09 16:15:49 +0100

    Merge branch '13908-autoinit'

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Reviewed-by: Colin Walters <walters@verbum.org>
    Bug: http://bugs.freedesktop.org/show_bug.cgi?id=13908

commit f550c492a10922795099166db34d8ccf5dbe63a7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2009-05-28 18:21:27 +0100

    fd.o #13908: silently initialize specialized types whenever required

    Colin Walters asks: "Is there a reason not to just do the
    initialization
    at the time someone calls one of the public API entry points that
    depends
    on it?". This turns out to be non-trivial because those public
    API entry
    points are themselves used inside the initialization.

M	dbus/Makefile.am
A	dbus/dbus-gtype-specialized-priv.h
M	dbus/dbus-gtype-specialized.c
M	dbus/dbus-gvalue-utils.c

commit cb8a113be8808fe2c88d3e7851e79115235f9e8c
Merge: 0d64d31 725e98f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2009-05-28 18:04:20 +0100

    Merge branch '20716-with-dbus-binding-tool'

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>
    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=20716
    Reviewed-by: Colin Walters <walters@verbum.org>

commit 0d64d318397da26f224abd2d7ef1f27d14a544fa
Merge: 48abffb b93c2a1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2009-05-28 18:02:44 +0100

    Merge branch '5688-survive-disconnection'

    This is unsuitable for cherry-picking by distros, since it adds API.

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=21219
    Reviewed-by: Colin Walters <walters@verbum.org>

commit 48abffba4cd81c182901dd7c80987251ba05348e
Merge: 9a0c188 e869fda
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2009-05-28 18:01:54 +0100

    Merge part of branch '5688-survive-disconnection'

    Bug: https://bugs.freedesktop.org/show_bug.cgi?id=5688
    Reviewed-by: Colin Walters <walters@verbum.org>

commit 9a0c188e2662809950738e92b963e5602dfbd8eb
Merge: 03de444 98087a3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2009-05-07 15:33:15 +0100

    Merge branch '16776-make-dbus-errors-throwable'

    Reviewed-by: Colin Walters <walters@verbum.org>

commit 03de44461132ed610c3d52133d4b4760f20e4cb2
Merge: b6b3787 f363811
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2009-04-27 10:47:58 +0100

    Merge branch '20884-proxy-manager-replace-name-owner'

    Reviewed-by: Colin Walters <walters@verbum.org>

commit b6b37871960ee06d9cc589e031ec3d5d6a4a6b92
Merge: e11c0ac d275c2e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2009-04-16 19:25:02 +0100

    Merge branch '20886-configure-cleanup'

    Reviewed by Colin Walters, fd.o #20886.

commit e11c0aced3b00733766207f15876fb300d63d442
Author: Colin Walters <walters@verbum.org>
Date:	2009-02-25 11:27:57 -0500

    Bug 19927 - Use const for GError * param we're not modifying

    This makes it clearer we're not taking ownership of the error, and
    interoperates more nicely with functions which provide const GError *.

M	dbus/dbus-glib.h
M	dbus/dbus-gobject.c

commit a809ea3016a0eae166df13c757f3e917dea0c0f9
Author: Vincent Untz <vuntz@gnome.org>
Date:	2009-04-16 12:35:42 -0400

    Bug 20879 - Use --skip-source argument for glib-genmarshal

    This avoids adding debug information for the temporary file.

    Signed-off-by: Colin Walters <walters@verbum.org>

M	dbus/dbus-binding-tool-glib.c

commit b93c2a19f468930c6badf054f79597d99d86e76c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2009-04-16 12:59:10 +0100

    fd.o #21219: regression test

M	test/core/Makefile.am
M	test/core/run-test.sh
A	test/core/unregister.c

commit e869fda44331e6f590f974ad779115a22f5af22e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2009-04-16 12:57:43 +0100

    dbus-gobject: save the ObjectRegistration on each object, not just
    the path

M	dbus/dbus-gobject.c

commit b4911558384de9919a231c29d75d9560f81fad0a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2009-04-16 12:58:32 +0100

    fd.o #21219: implement unregistration of objects

M	dbus/dbus-gobject.c
M	doc/reference/dbus-glib-sections.txt

commit e42535c3c0dace3ede96c50f5a9b3cc315c80190
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2009-04-16 12:11:15 +0100

    fd.o #5688: Add a regression test

    Also assert that dbus_g_connection_lookup_g_object works (my previous
    attempt to fix #5688 broke this).

A	test/core/5688.c
M	test/core/Makefile.am
M	test/core/run-test.sh

commit 6de1441865da2816c6bcd8cae842be93a8a96304
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2009-04-16 12:06:26 +0100

    fd.o #5688: don't assert when exported object is destroyed *after*
    D-Bus connection closes

    My solution was to introduce an ObjectRegistration struct which
    encapsulates the D-Bus <-> GObject glue.

    Also, warn and keep the first object path if the library user
    registers
    an object at two object paths (previously, this would fail silently,
    use
    the second object path, and leak memory).

M	dbus/dbus-gobject.c

commit 725e98ffa810d04baf38e5d5d3f62091334b0888
Author: Peter Korsgaard <jacmet@sunsite.dk>
Date:	2009-04-15 21:29:09 +0100

    add --with-dbus-binding-tool option to use an external
    dbus-binding-tool

    Cross compilation fix. dbus-binding-tool needs to run on the host, but
    gets
    compiled for the target. Add an option to use an external program
    (host version) instead, similar to the --with-introspect-xml option.

    Signed-off-by: Peter Korsgaard <jacmet@sunsite.dk>
    Signed-off-by: Robert Schwebel <r.schwebel@pengutronix.de>

M	configure.ac
M	dbus/examples/Makefile.am
M	dbus/examples/statemachine/Makefile.am
M	test/core/Makefile.am
M	test/interfaces/Makefile.am
M	tools/Makefile.am

commit a0124a5ecc829b73e2293cd7b23bf0cf0eb0a87c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2009-03-26 18:06:53 +0000

    dbus_g_type_specialized_init: make some effort at being thread-safe

    dbus-glib isn't really thread-safe and needs a systematic audit,
    but let's
    at least be preemptively thread-safe in new code.

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	dbus/dbus-gtype-specialized.c

commit f36381131b6f410333a9a823a4fc131ac799394f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2009-03-26 18:00:16 +0000

    fd.o#20884: dbus_g_proxy_manager_replace_name_owner: don't leave
    freed memory in the hash table if the name was the owner's first

    Here's a situation where this code would fail:

    * an owner :1.42 owns a name com.Example and a name org.Example
    * the owner_names hash table contains { :1.42 => c }, where
      c is a GSList link with data = "com.Example", next = o and
      o is a GSList link with data = "org.Example", next = NULL
    * the name owner for com.Example changes so :1.42 no longer owns the
      name
    * initially, names == c
    * g_slist_delete_link unlinks and frees c, and sets names = o
    * but c is still in the hash table, so next time we look in the hash
      table, we crash

    The fix is to replace c with o in the owner_names hash table.

M	dbus/dbus-gproxy.c

commit d275c2e646f67a3929d9290c6bdb270d6346b83c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-11-28 17:14:47 +0000

    Remove all sorts of libdbus cruft from configure.ac

M	configure.ac
M	test/Makefile.am

commit 6791d09f72a63dcb72d57a187210bc133f463fcf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-11-28 17:07:06 +0000

    Don't check for atomic integer ops

    GLib has perfectly good ones, and `git grep ATOMIC` confirms that
    we no
    longer use the result of the check

M	configure.ac

commit 6de33eb0a3e53d92e47a717849f144a0a313e923
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-11-28 17:06:29 +0000

    Don't check whether va_copy works

    `git grep DBUS_VA_COPY` confirms that we no longer care

M	configure.ac

commit 7bf91463598fc1e6ad44096f33aa4b61bf58443f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-11-28 17:04:09 +0000

    configure.ac: Don't check endianness

    `git grep ENDIAN` confirms that we no longer need it.

M	configure.ac

commit dc93d2a6eaf75bd783d16d90f62d8abefd4e26a4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-11-28 17:01:32 +0000

    Don't define DBUS_API_SUBJECT_TO_CHANGE

    It isn't, and we need libdbus >= 1.1 in any case

M	configure.ac

commit 094f45d0097679e8d458431231bcb3c999568d60
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-11-28 17:00:06 +0000

    configure.ac: don't check the sizes of integers

    This is presumably a relic of libdbus.

M	configure.ac

commit d30b06afd0a8bb6dddeefd7ac4d978799df03a52
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-11-28 16:58:37 +0000

    Remove CXX cruft from configure.ac

    There is no C++ in this package, so why are we checking for a C++
    compiler?

M	configure.ac

commit 98087a3d62523b621a1bd2359661ffe24553c34e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-11-28 17:22:59 +0000

    Bug #16776: add a regression test

M	test/core/my-object.c
M	test/core/my-object.h
M	test/core/test-dbus-glib.c
M	test/core/test-service-glib.xml

commit 20c474b8b8b356836e50af0e9bf3b32584d83ac4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-11-28 16:23:43 +0000

    Bug 16776: teach dbus_g_method_return_error about DBUS_GERROR

    Code called by dbus_g_method_return_error assumes that errors in the
    domain DBUS_GERROR always have the code DBUS_GERROR_REMOTE_EXCEPTION.
    This is clearly not true, and it would be nice to be able to raise the
    "well-known" D-Bus errors from library user code.

M	dbus/dbus-gobject.c

commit e18f5dd13c562333bc580f3b5bdf3ecd8d7555ce
Author: Mikkel Kamstrup Erlandsen <mikkel.kamstrup@gmail.com>
Date:	2008-11-28 15:58:43 +0000

    Bug 13908: make dbus_g_type_specialized_init() safe for library
    users to call

M	dbus/dbus-gtype-specialized.c
M	dbus/dbus-gvalue.c

commit bc474819fa638a0daf3c89e6d041949b73e9228e
Author: Sjoerd Simons <sjoerd@luon.net>
Date:	2009-03-17 11:21:56 +0000

    Use g_strdup instead of strdup in dbus_g_method_get_sender

M	dbus/dbus-gobject.c

commit dfef72c61c050e7f57e1d2eb601701e0a27827cc
Author: Colin Walters <walters@verbum.org>
Date:	2009-02-05 11:17:15 -0500

    Bug 14183 - Listen to NameOwnerChanged using arg0 matching

    This is more efficient - we avoid waking up every dbus-glib using
    process
    when a process joins or leaves the bus.

M	dbus/dbus-gproxy.c

commit 42b17678dec6d0100bcbc433441f6a75df747e5c
Author: Colin Walters <walters@verbum.org>
Date:	2009-02-05 10:59:15 -0500

    Use -fno-strict-aliasing by default

    We're unlikely to be strict-aliasing safe anytime soon.  This change
    corresponds with http://bugs.freedesktop.org/show_bug.cgi?id=10599

M	configure.ac

commit 56b9773dc5dd589638e22f48ec4222ae491c2bc1
Author: Frederic Crozat <fcrozat@mandriva.com>
Date:	2009-02-03 14:00:50 +0100

    Fix format-security warning

M	dbus/dbus-gobject.c

commit 300b4fd822b8f57802ca35f4c867464b881632e3
Author: Colin Walters <walters@verbum.org>
Date:	2009-02-02 19:40:51 -0500

    Bump configure for unstable cycle

M	configure.ac

commit 49cad2ca523de6a85f12d22ade23046c548ea601
Author: Colin Walters <walters@verbum.org>
Date:	2009-02-02 19:40:29 -0500

    Release 0.80

M	configure.ac

commit b161082148a51f2a2d8a4ee85f5736791dedc276
Author: Colin Walters <walters@verbum.org>
Date:	2009-02-02 15:07:51 -0500

    Bug 19065 - handle nested nodes in dbus-binding-tool

    Patch modified from one provided by Stian Skelstad <stian@nixia.no>.

    Split the generate_glue function explicitly into a toplevel
    function and
    one for processing recursive nodes.

M	dbus/dbus-binding-tool-glib.c
M	m4/gtk-doc.m4
M	test/Makefile.am
M	test/core/Makefile.am
A	test/data/nested-introspect.xml
A	test/test-compile-nested.sh

commit 64ec55f59a9ebe699e240c2a3b4d82e85f2db4a0
Author: Doug Goldstein <cardoe@gentoo.org>
Date:	2009-01-30 17:38:19 -0500

    Bug 19325 - parallel build fix

    Signed-off-by: Colin Walters <walters@verbum.org>

M	dbus/Makefile.am

commit 299460549e92665e5ea09d459d3985fc85d8d73c
Author: Colin Walters <walters@verbum.org>
Date:	2009-01-30 16:03:11 -0500

    Bug 19259: Always use /etc/bash_completion.d

    This looks like what bash upstream has standardized on.

M	dbus/Makefile.am

commit 78eb504bd9954918c363f357d0ab71ca85e3fc23
Author: Colin Walters <walters@verbum.org>
Date:	2009-01-27 18:59:01 -0500

    Bug 19647: Move test-types inside run-test to avoid dep on existing
    session bus

    All tests that use DBUS_BUS_SESSION should be in run-test.sh to
    avoid introducing
    a dependency on an existing session bus.

M	test/core/Makefile.am
M	test/core/run-test.sh

commit 3d25c1640d59e9770c33fafb1a12766feb6494e8
Merge: d92a441 8868486
Author: Colin Walters <walters@verbum.org>
Date:	2009-01-27 18:43:50 -0500

    Merge branch 'master' of
    ssh://walters@git.freedesktop.org/git/dbus/dbus-glib

commit d92a44109e3fdc766e34b53f7ec5329e98e13909
Author: Colin Walters <walters@verbum.org>
Date:	2009-01-27 17:00:37 -0500

    Bug 19441: Don't send replies for messages explicitly not requesting
    one

    In sending a reply when a message has the dbus_message_set_no_reply
    flag set, we can cause spurious denials logged on the system bus,
    aside
    from being inefficient.

M	dbus/dbus-gobject.c

commit 88684866d06df99f89b30a07e4809369b4cb0453
Author: Colin Walters <walters@verbum.org>
Date:	2008-12-19 11:18:26 -0500

    Add new files missed from last commit

A	test/core/my-object-subclass.c
A	test/core/my-object-subclass.h
A	test/core/test-service-glib-subclass.xml

commit d55ffa5bbccd027caf7f2e7376b555e397a7ac3c
Author: Dan Williams <dcbw@redhat.com>
Date:	2008-12-18 13:09:33 -0500

    Bug 19145: test cases for GetAll

    Add test cases for GetAll.

    Signed-off-by: Colin Walters <walters@verbum.org>

M	test/core/Makefile.am
M	test/core/test-dbus-glib.c
M	test/core/test-service-glib.c
M	test/core/test-service-glib.xml

commit 94d68f00d9d244de3b1d66d3cf78bb5171552311
Author: Tambet Ingo <tambet@gmail.com>
Date:	2008-12-18 12:09:43 +0200

    Use the provided interface for org.freedesktop.DBus.Properties.GetAll
    call.

M	dbus/dbus-gobject.c

commit 1b150c32aa574b421161b63bb01eeeb5ad23bf3a
Author: Frederic Crozat <fcrozat@mandriva.com>
Date:	2008-12-05 11:16:46 -0500

    Fix linking order so -Wl,--as-needed works

    Signed-off-by: Colin Walters <walters@verbum.org>

M	dbus/Makefile.am

commit f4a6c4755d7a82bb7ec0a8bf472bfe091c310ef0
Author: Colin Walters <walters@verbum.org>
Date:	2008-12-04 16:12:18 -0500

    Do NEWS for 0.78

    Should have been in earlier commit, oops.

M	NEWS

commit 3a713710a34d75d174eb632a6444e87dbf3923f4
Author: Colin Walters <walters@verbum.org>
Date:	2008-12-04 16:02:12 -0500

    Bump configure for unstable cycle

M	configure.ac

commit beaff4e7c8e6ef601a00c03a4bed533becd273be
Author: Colin Walters <walters@verbum.org>
Date:	2008-12-04 15:58:30 -0500

    Release 0.78.

M	configure.ac

commit d77506652b555b147e79889d6163208535e1cd74
Author: Colin Walters <walters@verbum.org>
Date:	2008-12-04 15:58:12 -0500

    Clean bash completion file

M	dbus/Makefile.am

commit 6ba71576f4417bab46ca666fa44dda52dee95e88
Author: David Zeuthen <davidz@redhat.com>
Date:	2008-07-31 12:28:07 -0400

    add bash completion for dbus-send(1)

    For now, it's in dbus-glib since dbus doesn't have an introspection
    XML parser (yet).

    Signed-off-by: Colin Walters <walters@verbum.org>

M	configure.ac
M	dbus/Makefile.am
A	dbus/dbus-bash-completion-helper.c
A	dbus/dbus-bash-completion.sh.in

commit 48738e529dc7a0f27d185f2e79174b0e369fd0af
Author: Tomas Pelka <tpelka@redhat.com>
Date:	2008-12-04 15:46:31 -0500

    Bug 18497 - Correct type in test case

    Changing to INT32 matches the sending side.

    Signed-off-by: Colin Walters <walters@verbum.org>

M	test/core/test-thread-server.c

commit aebec4bd82c023502600786793ba0ce0c7323fbe
Author: Colin Walters <walters@verbum.org>
Date:	2008-12-04 15:42:08 -0500

    Bug 18698 - Use AC_SEARCH_LIBS to avoid unneeded dep on nsl

    Also changed the socket search to be the same way.

M	configure.ac

commit f10ee141185f9501c852acaf557b100abafc60fb
Author: Nick Welch <nick@incise.org>
Date:	2008-12-04 15:28:45 -0500

    Typo fix in docs

    Signed-off-by: Colin Walters <walters@verbum.org>

M	dbus/dbus-gobject.c

commit c0bba240c4beb6ecfd71aefa184011e8adc27f5f
Author: Robert McQueen <robert.mcqueen@collabora.co.uk>
Date:	2008-09-23 23:42:02 +0300

    Bug #17329: allow hash tables to contain complex types

    Previously, dbus-glib has provided destroy functions for the keys and
    values when constructing hash tables, so that any hash tables it
    constructed could be entirely freed (along with their contents) by
    destroying/unreffing. Unfortunately this meant that any "complex"
    types,
    where you need to know the GType in order to free them, were not
    allowed
    in hash tables. In real terms, this was anything which dbus-glib
    marshalled to a GPtrArray, so any array of arrays, variants,
    structures,
    object paths, or other boxed types were not allowed as hash values.

    This patch allows a broader range of types to be used as the values in
    hash tables, including those where no simple free function is
    available.
    Instead of relying on the key/value destroy functions, the new
    hash_free
    function uses g_hash_table_foreach_steal to remove the keys and values
    pairwise and free them when the type is known.

    Unfortunately, it's part of the API assumptions that hash tables which
    were produced through the current API had valid free functions, and
    particularly that if the hash table was reffed by the application,
    that
    the keys/values would persist beyond when dbus-glib had unreffed
    it, and
    be freed when the hash table was later destroyed. So it's not
    sufficient
    to use only this new freeing method on all hash tables from now on
    - we
    have to behave in the old way for all of the previously allowable
    types
    (including any hash tables which contain any hash tables which were
    freeable in the old way).

    However, as these new hash tables contain values which will not
    be freed
    if you manipulate the hash table directly (removing or replacing keys,
    or destroying or unreffing it directly), and g_boxed_free should
    be used
    instead, a false free function is provided to print a critical warning
    for the developer in the case that memory would be leaked.

M	dbus/dbus-gvalue-utils.c
M	test/core/test-dbus-glib.c
M	test/core/test-service-glib.xml

commit 143b09b42d73451dcc3b835f76f8d43da786342a
Author: Robert McQueen <robert.mcqueen@collabora.co.uk>
Date:	2008-09-22 21:40:48 +0100

    Bug #17798: add support for 'o', 'g' and 'as' in dictionaries

    This teaches the parameterised hash table about how to hash,
    compare and
    free object paths and signatures, allowing them to be used as
    hash keys
    and values, and also how to free strvs, so they can be used as values.
    Adds some simple test methods which echo a{gas} and a{oas}
    dictionaries
    back immediately and compare the results.

M	dbus/dbus-gvalue-utils.c
M	test/core/my-object.c
M	test/core/my-object.h
M	test/core/test-dbus-glib.c
M	test/core/test-service-glib.xml

commit e4c917189dc9478c261c94703b311e1579292f22
Author: Robert McQueen <robert.mcqueen@collabora.co.uk>
Date:	2008-09-14 21:16:10 +0100

    Bug #17797: add support for 'g' type, as a boxed char *

    Adds DBUS_G_TYPE_SIGNATURE, which is a boxed type just like
    DBUS_G_TYPE_OBJECT_PATH.

M	dbus/dbus-binding-tool-glib.c
M	dbus/dbus-glib.h
M	dbus/dbus-gmain.c
M	dbus/dbus-gsignature.c
M	dbus/dbus-gvalue.c
M	test/core/my-object.c
M	test/core/my-object.h
M	test/core/test-dbus-glib.c
M	test/core/test-service-glib.xml

commit f89b8de02f21891f430a2e370c391238b575403a
Author: Robert McQueen <robert.mcqueen@collabora.co.uk>
Date:	2008-09-23 23:45:14 +0300

    Bug #17795: depend on Glib 2.10 for hash unref consistency

    Commit a8bf32 (for bug #11396) introduced a compile-time version check
    for Glib 2.10 which changed whether hash_simple_free called
    g_hash_table_unref or g_hash_table_destroy. This is at best useless
    for
    people who actually wanted to rely on _unref being used instead of
    _destroy, because dbus-glib can legitimately be built against older
    versions of Glib than that in use by the application itself, and at
    worst harmful as applications relying on the _unref semantics
    would have
    their assumptions violated on platforms where this was the case. Given
    in /most/ cases now, Glib 2.10 is readily available, and we were
    in this
    kinda vague state where people could've used _unref and gotten
    away with
    it, I'm going to say thats what our ABI is now, and stick to
    it. People
    can depend on the next version of dbus-glib if they rely on _unref.

M	configure.ac
M	dbus/dbus-gvalue-utils.c

commit 24b94fb83c0d22cf2803af692dd8ccbc485d890c
Author: Robert McQueen <robert.mcqueen@collabora.co.uk>
Date:	2008-09-22 21:25:03 +0100

    Bug #17794: make run-test.sh fail when die is called

    Missing die() function meant this wasn't returning non-zero even when
    tests were failing. Oops.

M	test/core/run-test.sh

commit 3ca014ea6b55cd843f1c80b04a4e0ec41af6210e
Author: Colin Walters <walters@verbum.org>
Date:	2008-11-17 18:30:32 -0500

    Bug 18573 - Fix race when service appears and disappears quickly

    We can't assert that a for_name_owner proxy is associated when
    we disassociate; if a service appears and disappears quickly, we
    won't be associated yet.  So remove the assertion.
    Correspondingly we need to cancel any inflight GetNameOwner call
    when disassociating proxies to avoid leaking.

M	dbus/dbus-gproxy.c

commit c1ade22086f9d25cfd1d1096307bbf96cbb1ae29
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-09-30 15:38:16 +0100

    Update NEWS again

M	NEWS

commit a6df6fb20142e7624b78b5c84e9e23cba3d3a3b9
Author: Huang Peng <shawn.p.huang gmail com>
Date:	2008-09-30 15:35:39 +0100

    Message.set_sender: allow org.freedesktop.DBus

    I found Message.set_sender method only accepts unique bus name. But in
    my project, I need implement a simple dbus daemon, it need set
    the sender
    as "org.freedesktop.DBus".

M	_dbus_bindings/message.c

commit 98d85a33c8570dff007ce79d87657b19e67e0f00
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-09-30 15:34:24 +0100

    NEWS: mention mpg's bugfix

M	NEWS

commit 0a883a523f8d133f71271276b755162c56480021
Author: Philip Van Hoof <pvanhoof@gnome.org>
Date:	2008-09-18 18:22:59 -0400

    Bug 17614: Use g_slice for allocating temporary async call data

    Using g_slice is going to be faster.

    Signed-off-by: Colin Walters <walters@verbum.org>

M	dbus/dbus-binding-tool-glib.c

commit 29774bca65ef7f887f9dafda56cb167dc0a2e80e
Merge: 884acb5 6a94507
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-09-16 11:27:24 +0100

    Merge branch 'mpg'

commit 884acb58ef583a7565bfa88f2dc161d10c8adde6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-09-16 11:26:24 +0100

    Start development for 0.83.1

M	NEWS
M	configure.ac

commit 6a945076699cd0a5eebde6bcf22a3cc4a4f9e547
Author: Marco Pesenti Gritti <mpgritti gmail com>
Date:	2008-09-15 18:09:00 +0100

    Cleanup self._signal_recipients_by_object_path (fd.o #17551)

    In Connection, add_signal_receiver adds object paths to
    self._signal_recipients_by_object_path and they are not cleaned by
    remove_signal_receiver.

    As a result self._signal_recipients_by_object_path keeps growing
    indefinitely.

    This seem to work for me. I know very little about dbus-python though,
    so I
    could very well be doing it wrong.

    https://bugs.freedesktop.org/show_bug.cgi?id=17551
    https://bugs.freedesktop.org/attachment.cgi?id=18857

    Signed-off-by: Simon McVittie <simon.mcvittie@collabora.co.uk>

M	dbus/connection.py

commit 81d0dcd79e1bc6187faa2f6a2f6d4d821f879a0e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-23 17:45:07 +0100

    Release version 0.83.0

M	NEWS
M	configure.ac

commit d634b018107c5aaeaeca704c14b9e853b9d52bfd
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-23 17:36:41 +0100

    Avoid some compiler warnings

M	_dbus_bindings/dbus_bindings-internal.h
M	_dbus_glib_bindings/module.c
M	test/dbus_py_test.c

commit fe5981ca2b90978c75d3308b0f58844fabf8ea4d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-23 17:36:24 +0100

    Make the API docs build correctly when out-of-tree

M	Makefile.am
M	NEWS

commit 7ef26213b5b3b46444f87a603ee3bb5c6381a56a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-23 17:16:43 +0100

    Require dbus 1.0.

    It's been out for ages, and we can finally drop
    DBUS_API_SUBJECT_TO_CHANGE if we do.

M	NEWS
M	configure.ac
M	dbus-python.pc.in
M	include/dbus-python.h

commit 8c2ef87d94525af4b1e7f21e18b0a07b30ab425b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-17 13:06:06 +0100

    Update NEWS again

M	NEWS

commit d1ded84e774c4aaad9bf02842e1898580dd599ea
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-17 13:00:15 +0100

    Omit the remote traceback from certain D-Bus errors

    Specifically, DBusException and its subclasses no longer have
    the remote
    traceback by default (although subclasses can turn it back on again
    by setting include_traceback = True, and the various "programmer
    error"
    subclasses of DBusException do have this set).

    Hopefully this will stop people thinking it's a dbus-python or
    telepathy-python bug when a D-Bus API like Telepathy deliberately
    raises an
    error (and so dbus-python or telepathy-python is visible in the
    traceback).

M	dbus/exceptions.py
M	dbus/service.py
M	test/test-client.py
M	test/test-service.py

commit b962965f8c30d785ade69dd6a60924b42d6a1c8d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-17 12:17:31 +0100

    Update NEWS. Let's call the next release 0.83 since it's a feature
    release

M	NEWS
M	dbus/server.py

commit 90c84c2cbe826e8aa4a4a4d8c4f4926c77590f25
Merge: a7725c9 b5aa7ce
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-15 19:38:08 +0100

    Merge branch 'master' into server

commit b5aa7ce1baa7628c883982f6dde9ca32958db857
Author: Huang Peng <phuang@redhat.com>
Date:	2008-07-15 19:37:00 +0100

    Bugfix for: if using Connection.add_message_filter, only the last
    filter will be called

M	_dbus_bindings/conn-methods.c

commit a7725c9d7589773de7c068f11ca63b95f99ccfcc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-15 19:33:01 +0100

    Alter dbus.server.Server API to have pseudo-signals

    By either appending to a list of callbacks, or subclassing and
    providing a
    method, you can be notified when connections are added or removed.
    Inspired by the DBusServer patch from Huang Peng.

M	dbus/server.py
M	test/test-server.py

commit 810b67cd6d30e4af73067090c7fe1ae14952ce00
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-15 19:30:33 +0100

    Initialize LibDBusConnection correctly

M	_dbus_bindings/module.c

commit 07196538f58c069313eeda2c496278f8289b9437
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-15 19:22:33 +0100

    Add some more compiler warning flags if supported

M	configure.ac

commit 88a08077393d4c6f091109ccc819c6ec4664ba71
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-15 19:22:21 +0100

    Make DBusPyConnection_NewConsumingDBusConnection static now nobody
    else needs to call it

M	_dbus_bindings/conn.c

commit 2f7e3865c5cae60769b98dac163802e224345fb9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-15 19:21:51 +0100

    DbusPyServer: construct connections by calling the type, so the
    object will be fully initialized

M	_dbus_bindings/server.c

commit bdc76e63da5ca9e017cfbea6c1ce1b0e21ebf706
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-15 19:15:42 +0100

    Refactor DBusPyConnection_NewForBus and make it go via
    DbusPyConnection_Type.tp_new

    Now that we have the LibDBusConnection temporary objects, we
    don't have
    to do strange sideways inheritance, we can just chain up to the
    superclass
    constructor.

M	_dbus_bindings/bus.c

commit 0f0193180b7853cfea486d0aef1b60d4fa067ed2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-15 19:13:55 +0100

    _dbus_bindings._Connection: sort out constructor

    Accept a LibDBusConnection for the address (sic) parameter,
    so we can construct a Connection for a DBusConnection that already
    exists.

    The way all this works right now is a bit unfortunate, with hindsight,
    but most of it is fixable like this.

M	_dbus_bindings/conn.c

commit 9d53f6c5179c590089bd6560e266dda538202f93
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-15 18:59:33 +0100

    [trivial] un-extern Struct_tp_getattro

M	_dbus_bindings/containers.c

commit 9d9322f9faf49f7ac8b4c3048f1333a9d7cabb48
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-15 18:54:54 +0100

    Add LibDBusConnection in _dbus_bindings

M	_dbus_bindings/Makefile.am
M	_dbus_bindings/conn-internal.h
M	_dbus_bindings/dbus_bindings-internal.h
A	_dbus_bindings/libdbusconn.c

commit 565d2e88c54d3f2e6dab4ae0ed3202d3a26bfd2c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-14 18:44:15 +0100

    Add Connection.call_on_disconnection

M	dbus/connection.py

commit a7e29e3dbab9651761fc9a7c3ec7fbc27c711286
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-14 17:30:43 +0100

    Actually create objects of class Server->conn_class

M	_dbus_bindings/server.c

commit ee4c9f80cd6a6e839eeebd2e592e4793e9bb61a8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-14 17:24:35 +0100

    dbus.server.Server: implement a stub version of _on_new_connection

M	dbus/server.py

commit 689e366ec0192920bcc961a0c44e89898d9bd8b1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-14 17:19:56 +0100

    Fix *another* thinko in dbus.server

M	dbus/server.py

commit 2a646b1a5ac0ac15923e657058703f146f12a452
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-14 17:18:45 +0100

    Fix thinko in dbus.server: actually instantiate a _Server

M	dbus/server.py

commit b9925dc51a1fe6d07c263f7f956005b44ca95b29
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-14 16:56:02 +0100

    Add some whitespace to make reStructuredText happy

M	dbus/_dbus.py

commit c731758bd9d5dfcfe2a9e3176596bb43777ea334
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-14 16:54:16 +0100

    Hook DBusServer into the build system.

    Based on parts of the patch by Huang Peng <phuang@redhat.com>

M	Makefile.am
M	_dbus_bindings/Makefile.am
M	_dbus_bindings/dbus_bindings-internal.h
M	_dbus_bindings/mainloop.c
M	_dbus_bindings/module.c

commit 6dcd530f0b6aa158330726d7a5cca9d6dd96eafb
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-14 16:43:15 +0100

    Rename _dbus_bindings.Server to _dbus_bindings._Server

M	_dbus_bindings/server.c
M	dbus/server.py

commit 87a86d7d6033cbb61271a84f20d5d25c4b4182c0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-14 16:41:28 +0100

    DBusPyServer: construct a user-specified subtype of Connection

M	_dbus_bindings/server.c
M	dbus/server.py

commit 8e213001de0523bd7971fc9251c56635a9e943db
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-14 16:40:32 +0100

    test-server: import Connection from the right place

M	test/test-server.py

commit 54a64a6571a6de18b87177ff1410e5d57f574463
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-14 16:16:22 +0100

    DBusPyServer initialization: remove some debugging printfs

M	_dbus_bindings/server.c

commit 05c19f23c63246322e4c9dfed2af47aaf77f7619
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-14 16:15:43 +0100

    DBusPyServer get_address, get_id: correct docs, these return str
    not String

M	_dbus_bindings/server.c

commit cf64e96607157f4e73c6dacaa34fb54fead26d1f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-14 16:14:48 +0100

    DBusPyServer tp_dealloc: remove a stray debugging printf

M	_dbus_bindings/server.c

commit d9821035d58c4fe161a9ff0a2546198e2c1dbb49
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-14 16:13:34 +0100

    DBusPyServer: correctly unref the partially constructed DBusPyServer
    on errors

M	_dbus_bindings/server.c

commit 6d77f23d062f047437dc8ce428d86a7ad9fa05b2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-14 16:12:27 +0100

    DBusPyServer: correctly unref the weakref object on errors

M	_dbus_bindings/server.c

commit 603d449610275db1e51816104630cce6d74ac9d4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-14 16:11:30 +0100

    DBusPyServer: fix a typo

M	_dbus_bindings/server.c

commit 0a888fb732074426d9b0dd6f487dffe5cee9df39
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-14 16:09:57 +0100

    DBusPyServer: Fix refcounting of the main loop

M	_dbus_bindings/server.c

commit 1144c656fa9d956853fd8c03dc52937f60d3ee2e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-14 16:09:27 +0100

    DBusPyServer: if there's no main loop, throw an exception

    The code starting at the "err" label assumes that an exception
    has been
    set already.

M	_dbus_bindings/server.c

commit 37fd41a721a5417eeb72e90cbe3296f823ccc1b2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-14 16:08:26 +0100

    Document that DBusPyServer_NewDBusServer consumes a reference to
    the server.

    Rename it to DBusPyServer_NewConsumingDBusServer to make this clearer.

M	_dbus_bindings/server.c

commit 1896381006ec54b1dfaf8bbcaaeab14b8a12ed32
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-14 15:45:35 +0100

    DBusPyServer: remove some stray debugging printfs

M	_dbus_bindings/server.c

commit ac83797b39b1d0eacaafcdf42772eab8ca91ce63
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-07-14 15:39:02 +0100

    DBusPyServer: refactor set_auth_mechanisms

    * save a malloc
    * return a boolean
    * don't crash if the sequence isn't a sequence
    * don't coerce items to strings too hard (we only want to accept
    str or
      unicode, accepting FooObject and trying to use it as an
      authentication
      method "<FooObject at 0xdeadbeef>" would be silly)

M	_dbus_bindings/server.c

commit 9774cdade2306b9bb641162a14645510fc822c86
Author: Mathias Hasselmann <mathias@openismus.com>
Date:	2008-01-31 23:26:30 +0100

    Initial support for DBusServer class (#14322).

A	_dbus_bindings/server.c
A	dbus/server.py
A	test/test-server.py

commit 4c7e60e3ff4148a181a496f85b491e8cb39d7e46
Author: Colin Walters <walters@verbum.org>
Date:	2008-06-20 14:08:47 -0400

    Bug 10373: Use of deprecated API (was used incorrectly)

	    * dbus/dbus-gvalue.c: The use of
	    dbus_message_iter_get_array_len
	    here is incorrect; we don't want to allocate a number
	    of pointers
	    based on the length of the strings.  Instead, we now use
	    the regular
	    GArray type which handles reallocating as size increases
	    appropriately.

M	dbus/dbus-gvalue.c

commit 2514b84b3644223653018cd75d0d6e1459a7ab70
Author: Colin Walters <walters@verbum.org>
Date:	2008-06-19 12:47:16 -0400

    Bug 16419: stack overflow demarshaling recursive variants

	    * dbus/dbus-gvalue.h: Add a recursion_depth member.
	    * dbus/dbus-gvalue.c: Keep track of recursion depth in
	    _dbus_gvalue_demarshal, cut it off at a default
	    (right now 32).
	    * dbus/dbus-gobject.c: Initialize recursion depth.
	    * dbus/dbus-gproxy.c: Ditto.
	    * test/core/test-variant-recursion.c: Test the
	    variant recursion case, make sure the remote site
	    will throw an error.
	    * test/core/Makefile.am: Add test-variant-recursion.

M	dbus/dbus-gobject.c
M	dbus/dbus-gproxy.c
M	dbus/dbus-gvalue.c
M	dbus/dbus-gvalue.h
M	test/core/Makefile.am
M	test/core/run-test.sh
A	test/core/test-variant-recursion.c

commit d1b80d803a0268bd4b3dd5b9a9522230461f2947
Author: Dan Williams <dcbw@redhat.com>
Date:	2008-06-05 17:57:53 -0400

    Bug 16114 [patch] wincaps-to-uscore property names for GetAll()

	    * dbus/dbus-gobject.c: We need to uscore property names
	    so that we actually find the right properties.

M	dbus/dbus-gobject.c

commit 8054025ae498cc586676fd0ed6573828dd0de4a0
Author: Colin Walters <walters@verbum.org>
Date:	2008-06-05 16:05:39 -0400

    One final large HACKING update

M	HACKING

commit d80bc7686a0e5cc7d45d940e8404ac4c8742b8f5
Author: Colin Walters <walters@verbum.org>
Date:	2008-06-05 15:40:35 -0400

    Pacify gtk-doc by adding new files

	    * doc/reference/dbus-glib-undeclared.txt:
	    * doc/reference/dbus-glib.types: New files
	    without which gtk-doc complains.

A	doc/reference/dbus-glib-undeclared.txt
A	doc/reference/dbus-glib.types

commit d91cf40b83f7900899fe89cc83a75c82cd4bf833
Author: Colin Walters <walters@verbum.org>
Date:	2008-06-05 15:37:16 -0400

    Another HACKING tweak

M	HACKING

commit e4b73986d1b2d6f9badda4656e57023b2c921ff7
Author: Colin Walters <walters@verbum.org>
Date:	2008-06-05 15:37:02 -0400

    Bump for development

M	configure.ac
M	doc/reference/dbus-glib-undocumented.txt

commit 96f144d25c7f3d573684bd50f87d912990f3c589
Author: Colin Walters <walters@verbum.org>
Date:	2008-06-05 15:09:02 -0400

    Release 0.76

M	configure.ac

commit 1517f7f395527519402f8b37988de9d4ea24dbc5
Author: Colin Walters <walters@verbum.org>
Date:	2008-06-05 15:08:40 -0400

    Document release process

M	HACKING

commit e0dcd92e33e566f9852df94036e74f48af795ea3
Author: Colin Walters <walters@verbum.org>
Date:	2008-06-05 14:55:15 -0400

    Update HACKING

M	HACKING

commit 4f776e9db9f299dab96a12a00a6279b6977f6c32
Author: Colin Walters <walters@verbum.org>
Date:	2008-06-05 14:48:18 -0400

    Update gtk-doc

M	doc/reference/dbus-glib-undocumented.txt

commit fa46dc8d35de877b8bdcb53f9508252249138bd6
Author: Colin Walters <walters@verbum.org>
Date:	2008-06-05 14:40:09 -0400

    Update NEWS

M	NEWS

commit acd44d2ae3069667dbbb8b9c9c8b9c2afcad96d9
Author: Christian Persch <chpe@gnome.org>
Date:	2008-06-03 18:01:54 -0400

    Bug 16217: generated bindings don't build with
    -DG_DISABLE_SINGLE_INCLUDES

	    * dbus/dbus-binding-tool-glib.c: Only include glib.h because
	    individual includes are disallowed.

    Signed-off-by: Colin Walters <walters@verbum.org>

M	dbus/dbus-binding-tool-glib.c

commit 1744bf88024756d17f867ab9b86aca25e2b77e64
Author: Colin Walters <walters@verbum.org>
Date:	2008-05-28 14:11:01 -0400

    Remove GConnection tests that assert, since we abort on those

M	test/core/test-types.c

commit a94e11973467e1b2cc43ba1e77b7413655b1dff7
Author: Colin Walters <walters@verbum.org>
Date:	2008-05-28 00:25:57 -0400

    Bug 11671: Don't use well known name in /tmp

    This as a side effect fixes the test suite on Solaris.

M	test/core/peer-client.c
M	test/core/peer-server.c
M	test/core/run-peer-test.sh

commit dceee795d0cdc5889701064ac38d3c64451b02ec
Author: Colin Walters <walters@verbum.org>
Date:	2008-05-27 23:19:52 -0400

    From OpenSUSE: Add return statement in case assertions not enabled

M	dbus/dbus-gvalue-utils.c

commit 681f3ae573b2e00dad5c1193a044a994fc50cf38
Author: Colin Walters <walters@verbum.org>
Date:	2008-05-27 23:08:59 -0400

    Bug 13060: Remove NameOwnerChange matches on unref (Kimmo
    Hämäläinen)

M	dbus/dbus-gproxy.c

commit eef148bdc0f602b0fba09a851c1ca6b55b8bb71c
Author: Colin Walters <walters@verbum.org>
Date:	2008-05-27 23:01:39 -0400

    Bug 15733: Cosmetic fix for removing redundant declarations

M	dbus/dbus-gtype-specialized.h

commit d043342c41535e610268b9bb2a45143bad0b597d
Author: Colin Walters <walters@verbum.org>
Date:	2008-05-27 22:56:00 -0400

    Bug 12505: Avoid receiving duplicate NameOwnerChanged (Dan Williams)

M	dbus/dbus-gproxy.c

commit 43db9baa4cd0921d2ee830185ab46b4646b4e73b
Author: Colin Walters <walters@verbum.org>
Date:	2008-05-27 16:49:26 -0400

    Bug 10834: Fix error handling path for dbus_g_proxy_end_call_internal

    This patch was based initial work by Peter Kjellerstedt.

    This patch made obvious the need to correctly handle type
    mismatches in demarshal_basic, similarly to what the other
    demarshalers are doing.

    Also add some tests for error handling.

M	dbus/dbus-gproxy.c
M	dbus/dbus-gvalue.c
M	test/core/test-dbus-glib.c

commit dc3bfd517a3bd0e28f4fc2d030ac38bdc848eb86
Author: Colin Walters <walters@verbum.org>
Date:	2008-05-27 16:36:58 -0400

    Fix some test suite memory leaks

M	test/core/test-dbus-glib.c

commit 167ea555cf3a763d148a69d0af9453b83d70d107
Author: Julien Danjou <julien@danjou.info>
Date:	2008-04-24 14:03:42 +0200

    Fix typo in --help print strings

    Signed-off-by: Julien Danjou <julien@danjou.info>
    Signed-off-by: Colin Walters <walters@verbum.org>

M	dbus/dbus-glib-tool.c

commit c057283a86230904552d5c51623bbce5ab0c9770
Author: Colin Walters <walters@verbum.org>
Date:	2008-05-27 15:15:35 -0400

    Bug 10244: Fix error handling case in parser (William Jon McCann)

    We need to return FALSE when handling an error.

M	dbus/dbus-gparser.c

commit 361dc90eaa269325ddc5dae0003ca11e1d7b811e
Author: Colin Walters <walters@verbum.org>
Date:	2008-05-27 14:57:20 -0400

    Bug 9867: Respect ACLOCAL_FLAGS (Kalle Vahlman)

M	autogen.sh

commit a8bf32ab8b0e30e0c74e07c58e9bc79a448683b2
Author: Colin Walters <walters@verbum.org>
Date:	2008-05-27 14:31:58 -0400

    Bug 11396: Use g_hash_table_unref if available (Marco Barisione)

    This lets users ref hashes with g_hash_table_ref.

M	dbus/dbus-gvalue-utils.c

commit ad35bf13f93d18b0b0e8f930ff79af9dcc1c8508
Author: Colin Walters <walters@verbum.org>
Date:	2008-05-27 14:18:49 -0400

    Bug 12675: Handle disconnected connections in calls (Kimmo
    Hämäläinen)

M	dbus/dbus-gproxy.c

commit f110cd3aa0532ab6cdfb1ee9a19f839700fe32e6
Author: Colin Walters <walters@verbum.org>
Date:	2008-05-27 13:57:40 -0400

    Bug 12857: Balance va_start/va_end in error case (Kimmo Hämäläinen)

M	dbus/dbus-gparser.c

commit d20c90aab3b0eca8715deaa59877f35a7d4e345e
Author: Colin Walters <walters@verbum.org>
Date:	2008-05-27 13:54:11 -0400

    Bug 12849: Fix use after free (Kimmo Hämäläinen)

M	dbus/dbus-gvalue.c

commit fde77bff42fac9ed95869a69acff4f9daab23e04
Author: Colin Walters <walters@verbum.org>
Date:	2008-05-27 13:35:20 -0400

    Bug 16079: Return an error on unknown property

    https://bugs.freedesktop.org/show_bug.cgi?id=16079

    Previously we just asserted, not very useful.

M	dbus/dbus-gobject.c
M	test/core/test-dbus-glib.c

commit b26f1887f6907d4c9a1dac013649f28950c6b2d3
Author: Colin Walters <walters@verbum.org>
Date:	2008-05-27 13:34:55 -0400

    Support for monitoring conversation during tests

M	test/core/run-test.sh

commit b783ce802db01a5370ce70514755e1885f6e6eb1
Author: Colin Walters <walters@verbum.org>
Date:	2008-05-27 12:39:44 -0400

    Also make CRITICAL messages fatal in tests.

M	test/core/test-dbus-glib.c

commit 8fe656de630e851bc512bbd7e7a6c18c53aecb61
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-04-14 12:56:43 +0100

    Freeze error ABI at the ABI used in Fedora 8 and Ubuntu gutsy.

    This avoids getting a different ABI depending on the version of
    libdbus
    we're compiled against. fd.o #15430, Debian #476080.

M	dbus/dbus-glib.h
M	dbus/dbus-gobject.c
M	dbus/make-dbus-glib-error-enum.sh
M	dbus/make-dbus-glib-error-switch.sh

commit 7fccdc8386d97d8c7e963800b1fbedd47f72b66b
Author: Colin Walters <walters@space-ghost.verbum.private>
Date:	2008-03-31 11:23:29 -0400

    Add some docs to dbus_set_g_error.

M	dbus/dbus-gobject.c

commit 34042c4cf2fcf18e101d07e495f9fa5dda99aa58
Merge: df7c2b7 bd53ac9
Author: David Zeuthen <davidz@redhat.com>
Date:	2008-03-17 13:11:45 -0400

    Merge branch 'master' of
    ssh://david@git.freedesktop.org/git/dbus/dbus-glib

commit df7c2b783ed92f33a1bedcba12a9c30fc34ba8d5
Author: David Zeuthen <davidz@redhat.com>
Date:	2008-03-17 13:10:47 -0400

    add some design advice to dbus_g_proxy_set_default_timeout()

    ... as requested on the mailing list.

M	dbus/dbus-gproxy.c

commit bd53ac9f7ef9a6c2c9d1d12af382b1a8a10e9dba
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2008-03-17 15:10:43 +0100

    allow namespaced extentions to introspection XML

    This allows us to stick namespaced documentation stuff into the
    introspection
    XML and have dbus-glib not puke on it.

    Patch credit goes to Colin Walters.

M	dbus/dbus-glib-tool.c
M	dbus/dbus-gparser.c

commit cb732d38f78dfb7c1ef73179e798fa4f42fd962e
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2008-03-17 14:26:50 +0100

    bump version and dbus dependancy

    Bumps version to 0.75. Bumps dbus dependany to 1.1.

M	configure.ac

commit 09b0fc5818812d0167243bae9fd52cdaf67f0af0
Author: David Zeuthen <davidz@redhat.com>
Date:	2008-03-15 16:51:48 -0400

    Export the recently added GetAll() method on org.fd.DBus.Properties

    Because round-trip city is a bad place.

M	dbus/dbus-gobject.c

commit bf0c9b3d6adc95863d5b5a4ce6ca994fd7fdc137
Author: David Zeuthen <davidz@redhat.com>
Date:	2008-03-15 15:32:56 -0400

    Add new function to specify the default timeout for a proxy

    Without a function like this the generated client glue code is
    unusable for D-Bus methods that take a long time to complete (such as
    disk operations like mkfs and partitioning).

    Also add some missing _with_timeout functions on DBusGProxy to the gtk
    docs.

M	dbus/dbus-glib.h
M	dbus/dbus-gproxy.c
M	doc/reference/dbus-glib-sections.txt
M	doc/reference/dbus-glib-undocumented.txt

commit 1fa4129f67208e24f6ae5f9ab38a3ee26c521f87
Author: David Zeuthen <davidz@redhat.com>
Date:	2008-03-15 15:21:06 -0400

    Bump version to 0.75

M	configure.ac

commit 1124256e1a87291101a6c287c1248c2f7276b993
Author: Ross Burton <ross@burtonini.com>
Date:	2008-02-27 14:27:49 +0000

    Fix incorrect assign in test suite

    We were assigning a DBusConnection* to a DBusGConnection*, which
    is bad.

M	test/core/test-types.c

commit eea8f7247e1cbeb8c00fe316a37520b98acd55dc
Author: Ross Burton <ross@burtonini.com>
Date:	2008-02-27 14:22:16 +0000

    Use dbus_watch_get_unix_fd not dbus_watch_get_fd

    The latter is deprecated, so don't use it.

M	dbus/dbus-gmain.c

commit 2cf62d7ff7d3a7bc450d0b60bb81a8365ffd310b
Author: Ross Burton <ross@burtonini.com>
Date:	2008-02-27 14:19:48 +0000

    Fix pending call cancelling in proxy dispose

    The dispose treated the hash values as DBusGProxyCall objects,
    but they are
    DBusPendingCall (thanks Dafyd Harries).

M	dbus/dbus-gproxy.c

commit 8e024ae2252e6e948c28203f07aa416df3dac0b8
Author: Ross Burton <ross@burtonini.com>
Date:	2008-02-27 14:02:36 +0000

    Unref the connection and message on dbus_g_return_error

M	dbus/dbus-gobject.c

commit dff98456995c37d964eb32a7de7ca718fc3d48d7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2008-01-22 12:01:18 +0000

    Don't assume that libdbus only gives method call messages to
    object-path handlers (fd.o #14199)

M	NEWS
M	dbus/service.py

commit 2295b58e4eef9f41a2f917c51408f83a4d2b7efd
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-12-19 18:19:02 +0000

    doc/tutorial.txt: Briefly describe how to use the Qt event loop.
    Based on a patch from Phil Thompson, riverbankcomputing.co.uk

M	doc/tutorial.txt

commit e0883f3518f137399077c13409f7a469924c0fd8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-12-10 17:40:23 +0000

    Unset release flag, and start NEWS for 0.82.5

M	NEWS
M	configure.ac

commit a536c5ed08c21e35937bc8ea52844c2f19bfdc55
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-12-10 17:39:20 +0000

    Add a maintainer-upload target to the Makefile.am, which uploads
    the current .tar.gz and .tar.gz.asc

M	Makefile.am

commit ca0a58e3ef9fe1cc2b1282b52f652c71b736e182
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-12-10 15:14:06 +0000

    Version 0.82.4

M	configure.ac

commit ae97b7432232bc008e20e4696c512bcf69938dd8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-12-10 15:13:48 +0000

    When user sets reply_handler but not error_handler raise
    MissingReplyHandlerException instead of MissingErrorHandlerException,
    and vice versa (fd.o #12304, patch from René Neumann)

M	NEWS
M	dbus/proxies.py

commit 98423ae4e6b85741ce15f097652620886a49c375
Author: Ross Burton <ross@burtonini.com>
Date:	2007-11-13 17:56:37 +0000

    Allow daemondir to be configured (#10668)

    The daemon can be at any location, and may not be on the path.
    Fetch the path
    from the pkg-config file and use it if it is set.

    Thanks to Brian Cameron for this patch.

M	configure.ac
M	tools/Makefile.am

commit 2beb7890280ae3b553e59ab8355b65ec203e4776
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-10-12 11:34:37 +0100

    Update NEWS

M	NEWS

commit 6076d4222af7da5a8aa1de28626423d811ba6be2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-10-12 11:34:28 +0100

    Don't try to make dbus/Makefile from dbus/Makefile.in; the fix for
    #12741 removed it

M	configure.ac

commit 4fdbc65e42d940ba6cc4445a8a83af90dc3d3a34
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-10-09 12:26:21 +0100

    Revert "Make sure extensions are built before docs; get rid of
    strange inter-directory dependency"

    This reverts commit 5321d836844f3bc06a6d5796c9ca902e0bd6f4cc.

M	Makefile.am

commit 09611c45b3301e93a34a03366e058c3edc184e47
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-10-09 12:24:52 +0100

    Don't distribute COPYING.*, which we no longer have or need

M	Makefile.am

commit 81897e3143ff5d4c660e4960cc103b92d54ae14d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-10-09 12:24:15 +0100

    Don't try to distribute COPYING.AFL-2.1 and COPYING.GPL-2, which we
    no longer have or need

M	Makefile.am

commit 0a8b67e2d99ed36f30d6709277a40fdd2812953d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-10-09 12:20:10 +0100

    Use MIT/X11 license as per permission given on the dbus mailing list.
    This affects code with copyright statements from the following
    individuals:
    * Anders Carlsson
    * Colin Walters
    * David Zeuthen
    * Rob Taylor
    and the following companies:
    * Collabora Ltd. (represented by me)
    * Red Hat Inc. (represented by Havoc Pennington)

M	COPYING
D	COPYING.AFL-2.1
D	COPYING.GPL-2
M	dbus/__init__.py
M	dbus/_dbus.py
M	dbus/_expat_introspect_parser.py
M	dbus/decorators.py
M	dbus/glib.py
M	dbus/mainloop/glib.py
M	dbus/proxies.py
M	dbus/service.py
M	test/run-test.sh
M	test/run-with-tmp-session-bus.sh

commit 5321d836844f3bc06a6d5796c9ca902e0bd6f4cc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-10-09 12:07:57 +0100

    Make sure extensions are built before docs; get rid of strange
    inter-directory dependency

M	Makefile.am

commit 07b0486fa32ede65b5c05011d56f2ee0694a5176
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-10-09 11:43:05 +0100

    Use non-recursive make for dbus/ to work around types.py clash with
    top-level types module (fd.o #12741)

M	Makefile.am
D	dbus/Makefile.am

commit 64eeafbf7a167dd116aeabbcf78ebc257f551e1b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-10-09 11:42:00 +0100

    test/: add some missing copyright headers

M	test/dbus_py_test.c
M	test/run-test.sh
M	test/run-with-tmp-session-bus.sh

commit 5295a01631b2a02f948d22417de997a3200a2cee
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-09-28 11:49:28 +0100

    License examples under MIT/X11.
    According to history of dbus-core before the bindings split, the
    examples were
    written by Red Hat employees, so we should be OK to relicense them;
    and it's
    good to have copyright headers.

M	examples/example-async-client.py
M	examples/example-client.py
M	examples/example-service.py
M	examples/example-signal-emitter.py
M	examples/example-signal-recipient.py
M	examples/gconf-proxy-client.py
M	examples/gconf-proxy-service2.py
M	examples/list-system-services.py

commit c658f7804cf892c2c45548dc9283c06ce7249925
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-09-28 11:28:26 +0100

    Use MIT/X11 license for code owned by Collabora and Red Hat only,
    as per Havoc's permission
    (Message-ID:
    <815098350709271800k2505485dlef9414609d392b48@mail.gmail.com>)

M	test/dbus_python_check.py
M	test/test-client.py
M	test/test-p2p.py
M	test/test-service.py
M	test/test-signals.py

commit a6c85a634286fe6ddfb0d15c40a475acf4bd214c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-09-27 19:05:06 +0100

    Unset dbus_python_released following release

M	configure.ac

commit 137f8e8bbfcd1bef30efe8aec4923c407da180eb
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-09-27 18:36:07 +0100

    Version 0.82.3

M	NEWS
M	configure.ac

commit a5d922d9605ae3c1540cd232cb754a9dc5dc7812
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-09-27 18:31:20 +0100

    Don't try to distribute COPYING.LGPL-2.1 - no longer exists

M	Makefile.am

commit dfa86e6e601be2ebef25ad99056929ff30e1cac9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-09-27 18:24:58 +0100

    Fix NEWS indentation

M	NEWS

commit 4e39a3c08aef2b502e9d330b372b7ab96fac6881
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-09-27 18:21:16 +0100

    Mention relicensing in NEWS

M	NEWS

commit 2afba7e53cf65fccfd15c87852e791845cff8467
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-09-27 18:19:16 +0100

    Update NEWS, and add regression tests for fd.o #12096 and #12403

M	NEWS
M	test/test-client.py
M	test/test-service.py

commit cb1ffaea799249d6c2dcc9452f758f57392f55e7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-09-27 18:14:11 +0100

    fd.o #12432: fix documentation for remove_from_connection

M	dbus/service.py

commit 05460fdecf77c56640c332d290a5950884f26769
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-09-27 18:13:42 +0100

    dbus.exceptions.DBusException: allow setting _dbus_error_name in
    subclasses

M	dbus/exceptions.py

commit 79b4ea50399db59fa8459badf33918764677248d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-09-27 17:57:15 +0100

    Don't raise KeyError when closing private dbus.Bus. (fd.o #12096)
    Also deprecate private dbus.Bus in favour of dbus.bus.BusConnection -
    the only
    things you gain from using dbus.Bus are the shared-instance behaviour
    and some
    strange more-than-one-way-to-do-it APIs.

M	dbus/_dbus.py

commit d8c154284ca464f493c81a4d3b5a37890d68acec
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-09-27 13:57:49 +0100

    Relicense Collabora code under the MIT/X11 license proposed for dbus
    core, removing all references to the LGPL as a result

M	COPYING
D	COPYING.LGPL-2.1
M	_dbus_bindings/abstract.c
M	_dbus_bindings/bus.c
M	_dbus_bindings/bytes.c
M	_dbus_bindings/conn-internal.h
M	_dbus_bindings/conn-methods.c
M	_dbus_bindings/conn.c
M	_dbus_bindings/containers.c
M	_dbus_bindings/dbus_bindings-internal.h
M	_dbus_bindings/debug.c
M	_dbus_bindings/exceptions.c
M	_dbus_bindings/float.c
M	_dbus_bindings/generic.c
M	_dbus_bindings/int.c
M	_dbus_bindings/mainloop.c
M	_dbus_bindings/message-append.c
M	_dbus_bindings/message-get-args.c
M	_dbus_bindings/message-internal.h
M	_dbus_bindings/message.c
M	_dbus_bindings/module.c
M	_dbus_bindings/pending-call.c
M	_dbus_bindings/signature.c
M	_dbus_bindings/string.c
M	_dbus_bindings/types-internal.h
M	_dbus_bindings/validation.c
M	_dbus_glib_bindings/module.c
M	dbus/bus.py
M	dbus/connection.py
M	dbus/exceptions.py
M	dbus/gobject_service.py
M	dbus/lowlevel.py
M	dbus/mainloop/__init__.py
M	doc/tutorial.txt
M	include/dbus-python.h
M	test/cross-test-client.py
M	test/cross-test-server.py
M	test/crosstest.py
M	test/test-standalone.py
M	test/test-unusable-main-loop.py

commit 003204b6a58faad7bc937ba029a99204cfa417e1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-09-27 13:56:01 +0100

    dbus.service: Don't assume that exceptions passed to asynchronous
    callbacks are the same as the pending exception
    (fd.o #12403, https://dev.laptop.org/ticket/3370)

M	dbus/service.py

commit 33b7a7f05372baaaf95d0e1c2c3b758321e4b0c5
Author: Ross Burton <ross@burtonini.com>
Date:	2007-09-11 10:52:07 +0100

    Update ignores

    Add the new tests and *~ to the ignore list.

M	.gitignore

commit 4b2cf9d75f6c315071adc925ec56e3bac3423730
Author: Ross Burton <ross@burtonini.com>
Date:	2007-09-11 10:49:49 +0100

    Fix bashism

    "function" is a bashism, so don't use it.

M	tools/run-with-tmp-session-bus.sh

commit 3f6e2c0c76d3643a1823b5ea7c8f5486a6b448de
Author: Ross Burton <ross@burtonini.com>
Date:	2007-09-11 10:37:47 +0100

    Fix broken introspection XML

    When writing XML for properties a duplicate closing tag was
    written. (#8607,
    thanks William Jon McCann).

M	dbus/dbus-gobject.c

commit c08a7f910c4c746ba790375be2d0f0682471cf06
Author: Ross Burton <ross@burtonini.com>
Date:	2007-09-11 10:34:07 +0100

    Fix build with non-gcc compilers

    AIX's compiler and some non-c99 compilers are braindead, massage
    the code to
    work with them (#11675, thanks Peter O'Gorman).

M	dbus/dbus-gtype-specialized.c
M	dbus/examples/statemachine/statemachine.c

commit b2bcb0f3fdf8eaec9257f48dd0a0e2ca03220775
Author: Ross Burton <ross@burtonini.com>
Date:	2007-09-11 10:17:12 +0100

    Fix bashisms

    The test suite used /bin/bash for no good reason, remove all bashisms.
    (#11672,
    thanks Peter O'Gorman).

M	test/core/run-peer-test.sh
M	test/core/run-test.sh
M	test/interfaces/run-test.sh
M	tools/run-with-tmp-session-bus.sh

commit 377831cc8496bf2b3f96e96a44ff4dfc1a6c690e
Author: Ross Burton <ross@burtonini.com>
Date:	2007-09-11 10:11:12 +0100

    Fix build with Glib 2.6

    configure.ac checks for glib 2.6, but the test suite used
    g_intern_static_string
    which was added in 2.10.  This removes the use of that function
    because it isn't
    required (#11674, thanks Peter O'Gorman).

M	test/interfaces/test-interfaces.c

commit 7028d177352b18efa3cc567f6753e1dbdab8f025
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-08-06 14:27:01 +0100

    Update NEWS

M	NEWS

commit 050bf4a893e24061c3de35eb24c05d3d1002ed28
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-08-06 14:26:21 +0100

    Makefile.am, test/Makefile.am: Use @abs_top_builddir@,
    @abs_top_srcdir@
    This fixes incorrect Python path for docs and tests if doing an
    out-of-tree
    build using an absolute path for $(srcdir), and is also less ugly.

M	Makefile.am
M	test/Makefile.am

commit 33773b778911c890d76c38b13f0fdb39df237d9e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-08-01 21:37:50 +0100

    Unset dbus_python_released

M	NEWS
M	configure.ac

commit af16daa9ff5d7217f361d68ce2bfe405f2cbd412
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-08-01 21:37:02 +0100

    Release 0.82.2

M	NEWS
M	configure.ac

commit f27c16490c23df1b7700904ea20232ef3e4097ae
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-08-01 20:00:37 +0100

    Mention in NEWS that API docs are generated by default

M	NEWS

commit 44471aab0502cfccef6a4fb63f01feeb6bf8732e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-08-01 19:59:19 +0100

    Reorganise README to reflect that API docs are generated by default

M	README

commit d3208ff19c3b61ae006403a9096c7a7ac09d4f5f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-08-01 19:58:59 +0100

    Mention incompatibility with 0.82.1 more prominently

M	NEWS

commit 8a27b1d1164c6c63467d79c497330fefd7c6de6e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-08-01 19:27:30 +0100

    Check for epydoc version >= 3, and default to building API docs
    if available

M	configure.ac

commit 44f7d60ff7ea038c2e314f05f1ccbc3a76f258d5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-08-01 19:15:45 +0100

    Update NEWS to mention #11623 fix

M	NEWS

commit 5e6fa32bf95a0d17fe5ce6a4ecdcae5dd3f967d5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-08-01 19:10:37 +0100

    Add rel_path_keyword to @method (fd.o #11623)

M	dbus/decorators.py
M	dbus/service.py
M	test/test-client.py
M	test/test-service.py

commit 65680613473b7ca39f68d25010b6b17eda841f6a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-08-01 19:08:48 +0100

    Avoid deprecated API in cross-test

M	test/cross-test-client.py
M	test/cross-test-server.py

commit cea890e5e98e1846c47b220b69ae00e843c695a1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-08-01 18:36:37 +0100

    Update NEWS

M	NEWS

commit 159319390404ed58406dba5a42d931740660af78
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-08-01 18:34:38 +0100

    Fix introspection on objects with more than one connection or more
    than one object path (bugs.fd.o #11794)

M	dbus/service.py
M	test/test-client.py
M	test/test-service.py

commit 5aef31b429ac0c14312265e166aeeeda91b3f8ac
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-07-31 19:01:11 +0100

    NEWS: mention the solved build problems related to python-config

M	NEWS

commit e821e102b2fa3baff4de719411b03385132dd0f4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-07-31 18:49:43 +0100

    Re-fix checking for Python include paths. Use $PYTHON-config like
    in 0.82.1 if we can, use the hard-coded logic from versions prior
    to 0.82.0 if we can't.

M	m4/am-check-python-headers.m4

commit f0291410ce950913593d5ae6c9fd4fabd5eaaa3f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-07-31 18:04:16 +0100

    Complete the .m4 renaming

R100	m4/dbuspy-add-rst2htmlflag.m4	m4/dbus-py-add-rst2htmlflag.m4

commit 4764f07dfeee9a3baa90399f9f2a18d7d5175fd2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-07-31 17:47:12 +0100

    Move dbus-py-add-rst2htmlflag.m4 to jh-add-cflag.m4 - the contents
    of two of the .m4 files were the opposite of what they should be

R100	m4/dbus-py-add-rst2htmlflag.m4	m4/jh-add-cflag.m4

commit 3396bcbacfaaa4c2ad4ad1e9d627be8ce14a6d77
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-07-31 17:46:42 +0100

    Move jh-add-cflag.m4 to dbuspy-add-rst2htmlflag.m4 - the contents
    of two of the .m4 files were the opposite of what they should be

R100	m4/jh-add-cflag.m4	m4/dbuspy-add-rst2htmlflag.m4

commit a7b73b44ca3b86a0ccf0a58e2c1fdee205633657
Author: Simon McVittie <smcv@carbon.pseudorandom.co.uk>
Date:	2007-07-31 17:40:20 +0100

    Revert "Use python-config to get Python cppflags (patch from Ubuntu,
    fd.o #11282)."

    Python < 2.5 didn't have python-config (although some distributions,
    e.g.
    Debian and Ubuntu, shipped it as an add-on). Even for 2.5, some
    distributions
    install it under gratuitously different names (hi, Gentoo). As
    a result,
    this patch needs replacing with one that doesn't rely on having
    python-config.

    This reverts commit 7c9d08d1ba7f5b0a9aa4a37118e56b1725cdaef9.

M	m4/am-check-python-headers.m4

commit 66ebaa801a13be7403e6ec47de1f322ccf310346
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-07-31 13:01:04 +0100

    _dbus_bindings/mainloop.c: Remove Watch and Timeout.

    They were never used, and didn't make a great deal of sense. I now
    believe the
    right direction for pure-Python mainloop support is to define a
    Pythonic main
    loop abstraction and coerce libdbus to fit into it, rather than
    pretending
    the objects in libdbus' abstraction are Python objects.

M	_dbus_bindings/mainloop.c

commit 4856b6c485c430ac15d4a634b6958d5f6af89dfa
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-07-31 12:55:16 +0100

    NEWS: update with timeout fix

M	NEWS

commit 5ab6cdc200267095edd56645df536dac5d4dc986
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-07-31 12:38:02 +0100

    Measure async call timeout in seconds as intended, not in ms (blocking
    calls already used seconds). Add regression tests

M	dbus/connection.py
M	test/test-client.py
M	test/test-service.py

commit 70f802152547898f225a0a675789fb923a5ea410
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-07-26 17:04:44 +0100

    test-client: Avoid deprecated usage - explicitly pass SessionBus()
    to BusName ctor

M	test/test-client.py

commit f5eb61dce982d6c51a78f5bb745ebd632ef1ad70
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-07-18 21:26:10 +0100

    Try to avoid importing things from _dbus_bindings when they could
    be imported from public API

M	dbus/_dbus.py
M	dbus/bus.py
M	dbus/connection.py
M	dbus/decorators.py
M	dbus/glib.py
M	dbus/service.py

commit 4cab9350dda0b36446d7b2a935bd6451a38e67a2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-07-12 16:26:05 +0100

    Bump version to 0.82.1.YYYYMMDD

M	configure.ac

commit 07bb7f1de21c64ea1f19ff107910daa2a14ec4ba
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-07-12 13:13:13 +0100

    Avoid cpp directives inside macro calls, to be nice to old gcc
    versions

M	_dbus_bindings/containers.c
M	_dbus_bindings/int.c

commit a94d9d68d17fd5284aa549187ac6fbb29c188efd
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-07-11 17:11:08 +0100

    NEWS, configure.ac: 0.82.1, the "double precision" release

M	NEWS
M	configure.ac

commit e94f1a9a3c4e9a7800e013dd61b06b5538c9b8ac
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-07-11 15:51:23 +0100

    Use PyArg_ParseTuple correctly, fixing the timeout in
    send_message_with_reply and send_message_with_reply_and_block.
    (bugs.fd.o #11489; thanks to Marco Pesenti Gritti for report and
    initial patch)

M	NEWS
M	_dbus_bindings/conn-methods.c

commit 9fc1958471a95249984e9556b7dab8838eb19844
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-07-03 19:54:06 +0100

    Unset dbus_python_released

M	configure.ac

commit a2ee1a4bbdef1613c44be8131b9a89bf8c4543ba
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-29 17:54:02 +0100

    .gitignore: ignore patch(1) cruft, and detached signatures for the
    release tarballs

M	.gitignore

commit 439ceed581837381aa690b6a0b809a06470d167d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-29 17:47:23 +0100

    Update NEWS

M	NEWS

commit 1b91d2d408ea471af1e4641e7fb31b4534026a70
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-29 17:38:46 +0100

    dbus.proxies: If making a call with ignore_reply=True, don't block
    for introspection

M	dbus/proxies.py

commit 2929a9d676b9961abff6c6acb1b67431f7d62ab1
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2007-06-27 11:49:02 +0100

    Update version in configure.ac

    Update version to 0.74 in configure.ac

M	configure.ac

commit de33a575aa58867642bcfd8bb8cb2efc631d9f1d
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2007-06-27 11:39:08 +0100

    Update NEWS

    Update NEWS from git history.

M	NEWS

commit a732cbc211b562660c5a17c898ad032fb8c041fd
Author: Ross Burton <ross@burtonini.com>
Date:	2007-06-27 11:05:03 +0100

    Sleep after starting the peer server, before starting the peer client.

    This fixes random failures due to the race.

M	test/core/run-peer-test.sh

commit 4335b1204a483ffa5c5a72d58b585f77827d852d
Author: Ross Burton <ross@burtonini.com>
Date:	2007-06-27 10:58:03 +0100

    Update NEWS for pending release.

M	NEWS

commit 0d77d83b7afd5837d4427b7cdc5940f54625b65c
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2007-06-22 17:15:34 +0100

    make test/core/run-peer-test.sh executable

M	test/core/run-peer-test.sh

commit 0ba73bf7cf1a2770b7aac8d57e61e755aca45b4d
Author: Ross Burton <ross@burtonini.com>
Date:	2007-06-22 15:46:37 +0100

    Add missing include.

M	test/core/Makefile.am

commit bf647c411b42064fe48877c30803cbe10d751204
Author: Ross Burton <ross@burtonini.com>
Date:	2007-06-22 15:45:57 +0100

    Install the type info before creating signals

    This fixes the type system warnings from peer-server, because the
    types where
    used (when creating signals) before they were created.  Installing
    type info
    initialises the types.

M	test/core/my-object.c

commit a3a6efda1117633cc8a5525811f6a3ba41f2d31b
Author: Ross Burton <ross@burtonini.com>
Date:	2007-06-22 15:28:48 +0100

    Init threading first to stop a warning from new GLib.

M	test/core/peer-client.c
M	test/core/peer-server.c
M	test/core/run-peer-test.sh

commit 36ed523539074a84cd990a8513b5d02a6223c44c
Author: Ross Burton <ross@burtonini.com>
Date:	2007-06-22 15:27:18 +0100

    Make test script executable

M	test/core/run-peer-test.sh

commit 514fd82183c214e3afd4cca630a20ff24b62e482
Author: Ross Burton <ross@burtonini.com>
Date:	2007-06-22 15:25:14 +0100

    Remove unused variable.

M	test/core/run-peer-test.sh

commit d428aa4edf426f662e89f2b08a377b0dd481f3ac
Author: Ross Burton <ross@burtonini.com>
Date:	2007-06-22 15:15:37 +0100

    Remove the XML documentation support in configure

    It isn't used and is legacy from when this was part of dbus itself.

M	configure.ac

commit 1f385f6b10799cdd0bf57d69d5212ac16ac17266
Author: Ross Burton <ross@burtonini.com>
Date:	2007-06-22 15:02:24 +0100

    Fix typo in _dbus_gvalue_signals_error (#10837)

    It was using g_value_get_boxed() when looking at a object-holding
    value.  Thanks
    to Peter Kjellerstedt for noticing this.

M	dbus/dbus-gvalue-utils.c

commit 68f03928aaac849dd12e38c01e448b569f578976
Author: Ross Burton <ross@burtonini.com>
Date:	2007-06-22 14:41:36 +0100

    Update GLib requirement (#10889).

M	INSTALL

commit 06810eb34ed2cdc5f0def02b45680915b0e0b985
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-21 01:22:27 +0100

    dbus.service: use DBUS_INTROSPECT_1_0_XML_DOCTYPE_DECL_NODE

M	dbus/service.py

commit 9556649e48df344f6ec0010c4af00a076a751760
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-21 01:22:04 +0100

    Expose HANDLER_RESULT_HANDLED, HANDLER_RESULT_NOT_YET_HANDLED as
    public API in dbus.lowlevel

M	dbus/lowlevel.py

commit 0d4f60d771305572594fb2cfb502bf565230fa37
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-21 01:21:33 +0100

    Get stacklevel right on deprecation of not specifying bus in
    BusName.__init__

M	dbus/service.py

commit 11925e0a12989793926f82d2286cbb20ef7a179d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-21 01:20:39 +0100

    _dbus_bindings: add DBUS_INTROSPECT_1_0_XML_DOCTYPE_DECL_NODE etc.

M	_dbus_bindings/module.c

commit d45d56a6ba455ee9b12af4d2c8c448392d74d1b4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-21 01:19:39 +0100

    Avoid using deprecated dbus_watch_get_fd()

M	_dbus_bindings/mainloop.c
M	configure.ac

commit a2f7458105791f37be52e1de22b710968904b235
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-20 18:01:19 +0100

    dbus.service: Deprecate the omission of the `bus` argument in the
    BusName constructor.
    Explicit is better than implicit.

M	dbus/service.py

commit 39c996ac7439c5c9a61ddb0efc92bada491fa0e5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-20 18:00:10 +0100

    Stop using interactive-Python syntax in tutorial to reduce user
    confusion.
    Closes bugs.fd.o #11209.

M	doc/tutorial.txt

commit 9f2e2040c33b09196e438c818379290c9e41a4ca
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-19 18:05:00 +0100

    Version 0.82.0

M	NEWS
M	configure.ac

commit 343aaa190f8a1c7475e4565c50483abbc5914a75
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-19 13:59:23 +0100

    Improve API documentation markup, particularly adding :Since:
    annotations

M	dbus/bus.py
M	dbus/connection.py
M	dbus/decorators.py
M	dbus/proxies.py
M	dbus/service.py

commit e631446a0c3113260c380284fe1f71419d5a7edb
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-19 13:58:37 +0100

    Mark Bus.get_connection() as deprecated; improve Bus.__repr__

M	dbus/_dbus.py

commit 10c49fa072b4f28713cfc873444b902b0bbe021e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-19 13:37:30 +0100

    Update NEWS with recent changes; next version should be 0.82.0 I think

M	NEWS

commit 7c9d08d1ba7f5b0a9aa4a37118e56b1725cdaef9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-19 13:22:31 +0100

    Use python-config to get Python cppflags (patch from Ubuntu,
    fd.o #11282).
    Thanks to Sebastien Bacher.

M	m4/am-check-python-headers.m4

commit 543ebc088ffbef9a52de333d99361b47301571b3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-18 16:31:20 +0100

    Implement fallback objects.
    In the process, simplify the signal decorator a bit - don't allow
    the signal
    to be emitted from a subset of interfaces (removing
    connection_keyword),
    deprecate path_keyword, disallow path_keyword on objects that
    support multiple
    object paths, and add rel_path_keyword. This is an API removal
    since previous
    patches, but is compatible with the last release.

M	dbus/decorators.py
M	dbus/service.py
M	test/run-test.sh
M	test/test-client.py
M	test/test-service.py
M	test/test-signals.py

commit b62c9694c5f3e39ef00c08fee5754a91515bca54
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-15 19:03:03 +0100

    Unset dbus_python_released

M	configure.ac

commit c5f1a34d6319e768f38f18817b09134849c74794
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-15 18:51:46 +0100

    Update NEWS

M	NEWS

commit b4a34bf6ac17fae4f0cc67f5b5082856f0aa7283
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-14 11:05:39 +0100

    doc/tutorial.txt: @service and @method take dbus_interface=...,
    not interface=...

M	doc/tutorial.txt

commit dbfb6d7b676d22dc98c3ef88071a9deeffa79648
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-12 14:27:39 +0100

    dbus.bus: In watch_name_owner, only watch the desired name!

M	dbus/bus.py

commit 5b408fd8501d79f87bd752f9ce483f5beb6f157b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-11 18:10:16 +0100

    dbus.bus: Ignore any errors while cleaning up signal matches, so we
    can make the call asynchronously

M	dbus/bus.py

commit 7f2e0bfe0c205af512af716f4fcb7b8508269eb7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-11 14:51:59 +0100

    dbus.service: Allow objects to start off unexported, and become
    exported later.
    Also allow them to be exported on more than one object path or
    even connection.
    dbus.decorators: Allow connection_keyword on signals and methods,
    so we can
    tell which connection to use for any follow-up actions.

M	dbus/decorators.py
M	dbus/service.py
M	test/test-service.py

commit cc6ea2758794601e2747ad9deccf7c8e887b0100
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-07 20:11:57 +0100

    dbus.bus: when a unique name goes away, disconnect all signal
    handlers.
    Unique names are not recycled, so no more signals can arrive for
    that name.

M	dbus/bus.py

commit c2773de718d0cbcac27a60d2fc56063499eeef0e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-04 14:47:15 +0100

    Update date in NEWS for 0.81.1 release

M	NEWS

commit 8d5f51a95f04ddc524e8790a00635082c851b4a1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-04 14:19:21 +0100

    Version 0.81.1

M	configure.ac

commit 382b890175ecef7818ce07d8d36cdaab138032df
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-04 12:26:15 +0100

    NEWS: update

M	NEWS

commit f1c2dcd0f7b9d177877aafed95fe64343862c1cf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-04 12:24:58 +0100

    dbus.service: change unexport() to remove_from_connection() at
    J5's request

M	dbus/service.py
M	test/test-client.py
M	test/test-service.py

commit a370850a68659a771690c2dac7148e371b6c9b51
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-06-04 12:10:53 +0100

    dbus-python.pc.in: Use -I${includedir} to allow libdbus and
    dbus-python to be in different ${prefix}es
    Patch from Phil Thompson at Riverbank Computing Ltd.

M	dbus-python.pc.in

commit cf4afc9ccf1408f0f0fde2a01e2dd68ba59de1f9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-30 15:52:36 +0100

    NEWS: Describe the fix for #10457

M	NEWS

commit c87b55c6ab30542d5d17f2e2041e4c87b3df712d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-30 15:19:46 +0100

    dbus.service: Make it possible to unexport objects (fd.o#10457)

M	dbus/service.py
M	test/test-client.py
M	test/test-service.py

commit 030b68b4e6d64dc25904618852917839892de1be
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-29 15:33:44 +0100

    NEWS: mention list_exported_child_objects() and its use in
    introspection

M	NEWS

commit 5618e6182ded0d1861a9fcb5a26440e4454801f6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-29 15:33:18 +0100

    dbus.service: include child nodes in introspection

M	dbus/service.py

commit 26288ab181eb2452fad7fd94c9bc00c817b4137d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-29 15:32:01 +0100

    _dbus_bindings/conn-methods.c: add list_exported_child_objects().
    This is equivalent to dbus_connection_list_registered() in libdbus.

M	_dbus_bindings/conn-methods.c
M	test/test-client.py
M	test/test-service.py

commit f0947ab721499d5202cdbfcaad6fac7d781b5666
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-28 19:47:25 +0100

    NEWS: mention the fix for Debian#426412

M	NEWS

commit ffb1d3310d97bc4d86a09604649f334e3367816f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-28 19:45:59 +0100

    dbus.connection: Release signals lock before calling
    _clean_up_signal_match().
    This prevents a deadlock when a signal match that's tracking name
    owner
    changes is removed, causing a match on NameOwnerChanged to be
    removed too.
    (Debian bug#426412)

    Also move more of the tree manipulation inside the lock, to be nice to
    anyone attempting a port to implementations without a GIL (mainly
    IronPython),
    and add a regression test for the above bug.

M	dbus/bus.py
M	dbus/connection.py
M	test/test-client.py
M	test/test-signals.py

commit 03bcbff71d4bf112441dfd53300328c70d3a512c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-21 13:18:18 +0100

    dbus.bus: detect NameHasNoOwner correctly, using new get_dbus_name()
    method

M	dbus/bus.py

commit 09e138af65710b11363e0852711171c3a9f8ef00
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-21 13:15:48 +0100

    NEWS: Describe new DBusException 'args' support

M	NEWS

commit c68cc723a95f6a4716d61b4ae455e3f8382347e3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-21 13:10:09 +0100

    Describe DBusException.get_dbus_name() in NEWS

M	NEWS

commit 000536a6b707fe3b28f7afd5360058d48e281688
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-17 12:41:05 +0100

    dbus.proxies: Log more informatively when introspection fails,
    and use logging rather than just stderr

M	dbus/proxies.py

commit b052211a63cf833ac394ca529c344c288e921401
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-16 11:05:29 +0100

    Implement DBusException in pure Python; add get_dbus_name() method
    and name= keyword argument

M	_dbus_bindings/bus.c
M	_dbus_bindings/conn-methods.c
M	_dbus_bindings/dbus_bindings-internal.h
M	_dbus_bindings/exceptions.c
M	_dbus_bindings/message.c
M	_dbus_bindings/module.c
M	dbus/__init__.py
M	dbus/_dbus.py
M	dbus/bus.py
M	dbus/connection.py
M	dbus/dbus_bindings.py
M	dbus/decorators.py
M	dbus/exceptions.py
M	dbus/service.py

commit df88e33eb69ef1528f76d06429d451b8274bd69b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-16 11:03:34 +0100

    configure.ac: Reset released flag to 0

M	configure.ac

commit 523e63fcef2c3391e94ded7959abdba739a52354
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-09 10:13:02 +0100

    Update NEWS for 0.81.0

M	NEWS

commit fac67418d9bc51b75f39b108c3e5f0bd9d7e6a98
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-09 10:03:06 +0100

    Increment version to 0.81.0

M	configure.ac

commit 756d092e3bb346dbf791af32f31c0efe520573d1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-09 10:02:33 +0100

    Don't run the examples during "make check" - timing/startup issues
    cause intermittent failures

M	test/run-test.sh

commit 32c4636888e03025b5f01167cea6530a8fb1ce53
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-09 09:56:51 +0100

    Generate ChangeLog during make dist rather than during make.
    Commit a dummy ChangeLog so the autotools won't fail in git checkouts.

M	.gitignore
A	ChangeLog
M	Makefile.am

commit 46d28550bbe03ccf9853f072743d879ae7d621ff
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-07 15:53:59 +0100

    dbus/gobject_service.py: Make ExportedGObject __init__ accept
    GObject properties

M	dbus/gobject_service.py

commit 863cec2464edd80fcf7fbdf62cf1c89ecab647d0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-04 19:51:50 +0100

    Create doc directory before writing HTML into it

M	Makefile.am

commit 727fa4079d91f8dd1b301e21d3e4279c202a9739
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-04 19:44:18 +0100

    doc/tutorial.txt: Don't claim we have a tutorial for p2p connections
    yet

M	doc/tutorial.txt

commit 3033d92876dc094d5f86404bdf997af9b3bb3a82
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-04 19:43:14 +0100

    Update tutorial to describe add_signal_receiver before
    connect_to_signal.
    Also remove old ./configure substitutions and update to avoid
    deprecated API.

M	doc/tutorial.txt

commit f1d118f3d8c7dee8f5611cba2786a77e3b3cdaf1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-04 19:41:59 +0100

    Stop tutorial.txt being generated by ./configure - not worthwhile
    just for a version number

M	.gitignore
M	configure.ac
R100	doc/tutorial.txt.in	doc/tutorial.txt

commit 0432c5256bad3fbdf10240b7ef76cea181c9f8b7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-04 19:39:54 +0100

    dbus/service.py: Before emitting an error, configure logging to
    write to stderr, unless already configured

M	dbus/service.py

commit 24bee8cea054fa21d3229c97d75b2c08f273d9d9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-04 19:39:16 +0100

    Remove contents of TODO: the peer-to-peer Connection now exists and
    the string change has been rejected

M	TODO

commit ed2ace3161337789924e03f559603dccfa40c56e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-04 17:09:57 +0100

    dbus/service.py: Don't use deprecated get_connection() in Object
    constructor.
    The Connection and BusConnection base classes don't have it, and we
    can now
    export Objects on a plain Connection.

M	dbus/service.py

commit 774e133d2cdc1a0fda2bd14d2354a9da2deece88
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-03 13:20:59 +0100

    Deprecate all arguments called named_service; use bus_name instead

M	dbus/bus.py
M	dbus/connection.py
M	dbus/proxies.py

commit 040adaef5646823dfb9247247104cb678cecacad
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-03 13:19:12 +0100

    examples/list-system-services.py: Make more exemplary

M	examples/list-system-services.py

commit e6d5bb0209c9cba4d42f12a448bd708a2cabaa9f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-03 12:11:31 +0100

    dbus/gobject_service.py: Make ExportedGObject work correctly.
    Also add a simple unit test for it.

M	dbus/Makefile.am
M	dbus/gobject_service.py
M	test/test-client.py
M	test/test-service.py

commit 717837a91498f9f928a0affbfa39d8cd68de5ca1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-01 13:26:51 +0100

    Simplify dbus_bindings backwards compatibility glue

M	dbus/_dbus.py
M	dbus/dbus_bindings.py
M	dbus_bindings.py

commit 77566373b89e721e468f411507821ee8a5273fff
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-05-01 12:18:50 +0100

    dbus/bus.py: Add watch_name_owner().
    Use it to avoid a race in signal name matching.
    Also change SignalMatch API from sender_unique being a public
    attribute to
    having a method set_sender_name_owner(), and make it hashable so
    we can
    use it to look up associated signal-sender matches in a dict.

M	dbus/bus.py
M	dbus/connection.py

commit 77f19ef18864f3468b7373bd75461aad3239fe52
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-30 13:38:50 +0100

    test/test-p2p.py: Added. Test "peer-to-peer" connections.
    (Actually tested by connecting to the bus daemon, because I haven't
    implemented
    a Python binding for DBusServer yet.)

M	test/Makefile.am
M	test/run-test.sh
A	test/test-p2p.py

commit a5905b31f82b898eaa3f80a907ea636e1e3d71eb
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-30 13:33:11 +0100

    dbus/connection.py: comments

M	dbus/connection.py

commit c38536726dfced572da01604909888f1f78a0492
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-30 13:32:52 +0100

    dbus/bus.py: correct name of logger

M	dbus/bus.py

commit e96509a88425c0f48c203fbfff100cde901adc7c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-30 13:15:28 +0100

    Move signal matching machinery into superclasses

M	dbus/_dbus.py
M	dbus/bus.py
M	dbus/connection.py

commit 494191632d27aa60c6f7c8fbcb1b595f8ff0253e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-30 12:55:21 +0100

    tools/check-coding-style.mk: Work correctly with out-of-tree builds

M	tools/check-coding-style.mk

commit 060ffcc1d3f3296c679b4e91c1ed070b2e0205f9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-30 12:36:37 +0100

    Move get_object, constants into Connection and BusConnection. Add
    docstrings

M	dbus/_dbus.py
M	dbus/bus.py
M	dbus/connection.py

commit dff13840b106cf08a8227379e9bb82e654442e1d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-30 11:56:42 +0100

    Convert _BusDaemonMixin and _MethodCallMixin into base classes
    BusConnection and Connection.
    Also add method activate_name_owner() for proxies to use (so they
    don't need
    to be aware of whether the connection is a bus daemon or not),
    and stop using
    deprecated get_connection method.

M	dbus/_dbus.py
M	dbus/bus.py
M	dbus/connection.py
M	dbus/proxies.py

commit 338b87fcc4010fe92b3f16ebbbf5955eab825dd7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-30 11:43:26 +0100

    dbus/service.py: Use public API for dbus.SessionBus, since we cause
    an import anyway

M	dbus/service.py

commit 2eb946f58e132706683890a8b961423e16998efe
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-30 11:41:44 +0100

    dbus/_dbus.py: in SignalMatch, use get_name_owner()

M	dbus/_dbus.py

commit 26cccef4d8e049613b4b815bf9b9bd5ac86dc087
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-30 11:39:57 +0100

    dbus/_bus_mixin.py: Add bindings for ListNames, ListActivatableNames,
    GetNameOwner too

M	dbus/bus.py
M	test/test-client.py

commit f75c1a0c7f7f4365f1265c6ede0c9465e50466ff
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-30 11:38:32 +0100

    dbus/_dbus.py: import constants from _dbus_bindings; use
    "from...import"

M	dbus/_dbus.py

commit 1d4594e2463e00def64dd10a71101a4a45e63553
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-30 11:35:54 +0100

    dbus/connection.py: Import constants from _dbus_bindings; check for
    reserved local interface as well as path

M	dbus/connection.py

commit 02d302ce90b136991de60015285ff7a39ff54375
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-30 11:34:33 +0100

    dbus/bus.py: get BUS_DAEMON_NAME etc. from _dbus_bindings

M	dbus/bus.py

commit 84beab96c9b9a1270e82e670aa3dca3f208b728f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-30 11:33:31 +0100

    dbus/proxies.py: get INTROSPECTABLE_IFACE from _dbus_bindings

M	dbus/proxies.py

commit 3c62924718ff00839843cecaae09598e36199f79
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-30 11:31:22 +0100

    Move the client method-call machinery from dbus.proxies to
    dbus.connection._MethodCallMixin.
    This makes proxy methods much simpler, and allows the _BusDaemonMixin
    to bypass
    the proxies module completely (since the signatures are already
    known, so
    we don't need to introspect anything).

M	dbus/Makefile.am
M	dbus/_dbus.py
M	dbus/bus.py
A	dbus/connection.py
M	dbus/proxies.py

commit e40ec8e4f29d104b66d78b183300e6bf134c2714
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-30 11:23:58 +0100

    Remove BusImplementation, removing its remaining functionality
    to Connection.
    * Move get_unique_name to Connection (it can be useful for connections
    which
      aren't to a real bus daemon but partially emulate one, like
      Telepathy's
      Tubes)
    * Add set_unique_name to Connection (same reason)
    * Convert BusImplementation.__new__ into Connection._new_for_bus
    * Have dbus.Bus subclass _dbus_bindings.Connection directly

M	_dbus_bindings/bus.c
M	_dbus_bindings/conn-internal.h
M	_dbus_bindings/conn-methods.c
M	_dbus_bindings/module.c
M	dbus/_dbus.py

commit 6963fa9cfa5be7af19b93c71d8a26c149cf2c88c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-30 11:20:53 +0100

    Implement o.fd.DBus method wrappers in Python instead of C.
    This reduces the need to have _dbus_bindings.BusImplementation
    and makes
    peer-to-peer connections easier to implement.

M	_dbus_bindings/bus.c
M	dbus/Makefile.am
M	dbus/_dbus.py
A	dbus/bus.py

commit 478e03e211990d05725bfec5c44a1a1bf68eaf19
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-27 12:44:45 +0100

    dbus/proxies.py: Give Interface some properties. Vastly simplify
    __getattr__ on Interface and ProxyObject

M	dbus/proxies.py

commit f6fd7b7102ac5cfd961f4e53532eb7904f877a6e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-27 12:22:54 +0100

    Move Interface from dbus._dbus to dbus.proxies (it belongs there
    really).
    Make it a new-style object and document it more clearly.

M	dbus/__init__.py
M	dbus/_dbus.py
M	dbus/proxies.py

commit fe50b35f867caed213d30cf0e046f51aeb275b20
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-27 12:12:54 +0100

    Remove redundant constants

M	dbus/_dbus.py

commit a6a86fbfc299cdc61c6d013a0081c2eec878f99a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-27 12:11:28 +0100

    dbus/_dbus.py: Match NameOwnerChanged correctly

M	dbus/_dbus.py

commit 6457e018adf4bf87a1bb4791ba5a08ad6ac6ba51
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-26 15:53:06 +0100

    test/test-service.py: Use constants for the bus name and object path

M	test/test-service.py

commit db310619c1bd0496259cd251e6df0c83af73f3d1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-25 18:33:55 +0100

    dbus/__init__.py: Add well-known interface, path, bus-name constants

M	dbus/__init__.py

commit 4be15d3a5d949107c7cf51a87a02f8555791868e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-25 18:30:52 +0100

    dbus/__init__.py: Remove pseudo-tutorial from docstring, we have a
    tutorial now

M	dbus/__init__.py

commit 4a027b3240152f7b9d5eabb66c2c1a94bd5ef831
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-25 18:29:48 +0100

    _dbus_bindings/module.c: Add some useful constants

M	_dbus_bindings/module.c

commit b6e2f84963ea0b399d50bbfeab7df046f6f24f5b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-25 17:46:54 +0100

    Make ProxyObject a new-style class, since it now has properties

M	dbus/proxies.py

commit 26965c2bf04ffb3b101623bbe02c34f43bee9232
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-25 14:07:49 +0100

    Add object_path, bus_name and requested_bus_name properties to
    ProxyObject.
    There is also a placeholder for unique_bus_name, although it's
    not currently
    implemented.

M	dbus/proxies.py

commit a81f1e90b293f1279ad4797753649f4264c559f3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-24 14:49:44 +0100

    Revert the part of the previous patch that added dbus_name to signals.
    Making this work correctly will also require changes to the introspect
    code.

M	dbus/decorators.py

commit e4050f2750d2fdb5c05a7d7b9cb4030b99133f13
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-24 14:45:14 +0100

    Preparation for fallback-object support:
    * Let exported methods receive the path, destination and raw
    message via
      kwargs, as well as the sender
    * Let exported signals be emitted from a variable object-path

M	dbus/decorators.py
M	dbus/service.py
M	test/test-client.py
M	test/test-service.py

commit ae8014c72a7d304f20d9422009f42bc48fa8f298
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-24 17:45:03 +0100

    Fix fd.o #10174: make it possible to return multiple values with
    no signature.
    More specifically: when a service method with no signature
    synchronously
    returns a tuple that is not a Struct, interpret it as a multi-valued
    return,
    rather than as a structure.

    This is a common Python idiom, and returning a struct makes little
    sense
    anyway when D-Bus lets you return multiple values.

    Returned lists are still interpreted as arrays - returning an array is
    entirely sensible, and indeed likely to be common.

    Async service methods are unaffected (there is no ambiguity), and
    it's still
    possible to return a structure by returning a dbus.Struct with
    appropriate
    contents.

    https://bugs.freedesktop.org/show_bug.cgi?id=10174

M	dbus/service.py
M	test/test-client.py
M	test/test-service.py

commit 705b343c205b82c93aab0f31535d1dc99a3c0265
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-24 17:39:27 +0100

    test/test-service.py: use a constant for the interface name,
    for clarity

M	test/test-service.py

commit a2fa9563ee9e3bfca549397c0bf58946eaff37b2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-24 17:21:11 +0100

    .gitignore: Ignore INSTALL and dbus-python-*.tar.gz

M	.gitignore

commit 50469e3e0a04d27be1ee227518ca377e16919626
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-24 14:41:45 +0100

    Remember to include tools in dist

M	Makefile.am

commit df42e53ab497dce7f00bd2eb3f2af1c022c0096c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-24 13:51:51 +0100

    Remove trailing whitespace in Python source

M	dbus/_dbus.py
M	dbus/decorators.py
M	dbus/proxies.py
M	dbus/service.py

commit 1fa0c331f5327ef1d622b55a050949845eb89b0f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-24 13:50:02 +0100

    Remove trailing whitespace in C source

M	_dbus_bindings/abstract.c
M	_dbus_bindings/conn-methods.c
M	_dbus_bindings/conn.c
M	_dbus_bindings/containers.c
M	_dbus_bindings/message-append.c
M	_dbus_bindings/message-internal.h
M	_dbus_bindings/message.c
M	_dbus_bindings/pending-call.c

commit cdf20eebae59e0ceb2cf8fc2660609e6c38ccebf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-24 13:47:09 +0100

    Add optional checks for coding style (mainly whitespace at the
    moment).
    These are on by default for git builds, off by default for releases.

M	_dbus_bindings/Makefile.am
M	configure.ac
M	dbus/Makefile.am
A	tools/Makefile.am
A	tools/check-c-style.sh
A	tools/check-coding-style.mk
A	tools/check-py-style.sh
A	tools/check-whitespace.sh

commit b5552a3ea76b3e229f40a06d32a5860b0e9e2217
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-24 13:05:17 +0100

    Refactor build system:
    * Use autoreconf to simplify autogen.sh considerably
    * Use AC_CONFIG_MACRO_DIR and aclocal -I to pick up macros from m4/
    * Drop acinclude.m4 in favour of putting our macros in m4/

M	Makefile.am
D	acinclude.m4
M	autogen.sh
M	configure.ac
A	m4/Makefile.am
A	m4/am-check-pymod.m4
A	m4/am-check-python-headers.m4
A	m4/dbus-py-add-rst2htmlflag.m4
A	m4/jh-add-cflag.m4

commit 29fae4fdfd02cc2dd4c896a2cb271d9a3597623c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-24 12:27:18 +0100

    test/run-with-tmp-session-bus.sh: untabify, remove trailing whitespace

M	test/run-with-tmp-session-bus.sh

commit d6b644f9317346211c94a2ae75b77ca9369a7088
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-24 12:26:42 +0100

    test/test-client.py: untabify

M	test/test-client.py

commit 35808b1bae43f846fdbcb740c359c66977231518
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-24 12:24:02 +0100

    dbus/service.py: untabify

M	dbus/service.py

commit 7207bc9f616b2401de609b36dc774bbe79fa7166
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-24 12:23:47 +0100

    configure.ac: untabify

M	configure.ac

commit c2aa57fc64f32e0c197320b050b93e71949edd53
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-04-24 12:23:24 +0100

    _dbus_bindings/message.c: untabify

M	_dbus_bindings/message.c

commit 58cacc6872e1b8cf365ac056775498b9dede71b4
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2007-04-16 08:23:17 -0700

    Document dbus-gtype-specialized

    Documents all the functions in dbus-gtype-specialized.c and adds an
    overview of the functionality.

M	dbus/dbus-gtype-specialized.c
M	dbus/dbus-gtype-specialized.h
M	doc/reference/dbus-glib-sections.txt
M	doc/reference/dbus-glib-undocumented.txt

commit 26d8584c04c05be29ae35acc3a2e8f573cc79206
Author: Ross Burton <ross@burtonini.com>
Date:	2007-03-30 18:12:11 +0100

    Add simple test suite for peer objects.

    Add a simple test suite for peer proxies.  This involved refactoring
    the
    MyObject class into its own file so that it can be used by multiple
    tools.  Also
    added is a test suite for dbus_connection_get_g_connection.

M	test/core/Makefile.am
C072	test/core/test-service-glib.c	test/core/my-object.c
A	test/core/my-object.h
A	test/core/peer-client.c
A	test/core/peer-server.c
A	test/core/run-peer-test.sh
M	test/core/test-service-glib.c
A	test/core/test-types.c

commit af91f5e0e2b5a20adf124707356b12da0c2f1e00
Author: Ross Burton <ross@burtonini.com>
Date:	2007-03-30 18:05:40 +0100

    Support peer-to-peer proxies.

    Previously DBus-GLib didn't support peer proxies despite having API
    for them.
    This patch stops dbus-glib from crashing when you use a peer signal
    (#10233).

M	dbus/dbus-gproxy.c

commit 25f056826336d4385b5488706f0f1ecc0843bf2f
Author: Ross Burton <ross@burtonini.com>
Date:	2007-03-30 17:54:58 +0100

    Add dbus_connection_get_g_connection.

    Add dbus_connection_get_g_connection, which is useful when you have a
    DBusConnection which was originally a DBusGConnection, and want
    it back
    again.

M	dbus/dbus-glib-lowlevel.h
M	dbus/dbus-glib.c
M	dbus/dbus-gmain.c

commit 0c46ca1a20eb8ba676ea2f1e829d039d5e3c383d
Author: Ross Burton <ross@blackadder.(none)>
Date:	2007-03-22 15:04:14 +0000

    Stop compiler warnings (#10374).

M	dbus/dbus-gthread.c
M	test/interfaces/test-server.c

commit 72e9f061668a28cbbeae2400290e1993c5d60d3c
Author: Ross Burton <ross@burtonini.com>
Date:	2007-03-28 16:32:00 +0100

    Fix error handling

M	dbus/dbus-gproxy.c

commit 9ca04c94ed6ddc2ff7459ce2031740704ec67ff2
Author: Ross Burton <ross@burtonini.com>
Date:	2007-03-22 15:38:03 +0000

    Handle dbus errors which are not name has no owner

M	dbus/dbus-gproxy.c

commit 85b269cc7ca221ee4fe0235154e783b3640ee62d
Author: Ross Burton <ross@blackadder.(none)>
Date:	2007-03-22 15:05:02 +0000

    Update abstract socket test from dbus

    The abstract socket test doesn't cross compile at all, updating the
    test from
    the original copy in DBus.

M	configure.ac

commit a64b26cdde04e624b2bb42ccadd3fc252bf05667
Author: Ross Burton <ross@burtonini.com>
Date:	2007-03-22 15:10:47 +0000

    Rename the error quark.

    The error quark was copied from GLib, renaming it to be unique.

M	dbus/dbus-glib.c

commit 5ca3418e8e00f62e3e60578e3951b51cd158f8dc
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2007-03-29 12:44:01 +0100

    Update AUTHORS

    Correct spelling of S.Nallammai, add Ross Burton, who's been missing
    here for quite some time.

M	AUTHORS

commit 7fbd3a1c49614e71a9ff2b3d6e43bf380527301b
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2007-03-29 12:32:46 +0100

    Update AUTHORS

    I had failed to update AUTHORS in the last couple of releases,
    this commit makesit current.

M	AUTHORS

commit f78b90659f32474b7ca56925ddebd88af7f06c86
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2007-03-29 12:20:30 +0100

    Update .gitignore

    Ignore autoconf errors, autom4te.cache, some new generated files.

M	.gitignore

commit a7110d5ee20f04f17346079a6a824a7c017fe124
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-03-02 18:46:12 +0000

    Implement ExportedGObject, a convenience class to export GObjects
    on the bus.
    This is non-trivial because dbus.service.Object and GObject both use
    metaclasses, so we need to implement a metaclass inheriting from
    both their
    metaclasses - it might as well go in dbus-python to avoid everyone
    having to
    reinvent this solution.

A	dbus/gobject_service.py

commit cfb1ea5f32a5ab77078ce184cb13602f2e28fec1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-03-02 18:43:09 +0000

    * dbus.service.Object: don't let the user try to export objects on
    the local
      path reserved by libdbus/dbus-daemon, or on an invalid path.
    * BusName: don't even try to claim an invalid bus name either.

M	dbus/service.py

commit 5ee2e05d5056584d589991f5d5fd0d22df598676
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-03-02 18:41:01 +0000

    * ProxyObject: allow named_service to be None, in preparation for
    peer-to-peer
      connections. If so, never attempt to follow name owner changes
      (doesn't make
      sense when you're talking directly to the peer).
    * _ProxyMethod: allow interface to be None, for when a method call
    is made
      on a ProxyObject without going via a dbus.Interface.

M	dbus/proxies.py

commit f2fda30b23b0176dd314329050127f61b5e92255
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-03-02 18:38:00 +0000

    SignalMatch: check that interface, member and sender are either valid,
    or None

M	dbus/_dbus.py

commit 91d0a865d574325328b67ec8c5dab9b841b9218c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-03-02 18:29:34 +0000

    SignalMatch: remove assorted commented-out debug messages

M	dbus/_dbus.py

commit bfc541fad2dec718abce406caa0285b1e40c4958
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-03-02 18:13:23 +0000

    Remove FIXME comment - I think the current behaviour is correct.

M	dbus/service.py

commit cf48b799ebdcaf7dca0b6f729516b413be21e989
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-03-02 18:12:47 +0000

    * Don't let the user call methods on the reserved local path -
    we'll get
      kicked off the bus if they do.
    * Don't try to introspect the reserved local path - same problem.
    * Do earlier validation of bus names etc. in client proxies.

M	dbus/proxies.py

commit f1e0a64b9f02a77cfd468f146ed3f398b2c1c8bc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-02-21 15:04:20 +0000

    If send_with_reply() returns TRUE but with pending call NULL,
    cope gracefully.
    This is a workaround for the fact that trying to use the object path
    /org/freedesktop/DBus/Local in a message header (e.g. when
    introspecting
    trackerd with dbus-inspector) causes us to be disconnected by the
    bus daemon.

M	_dbus_bindings/conn-methods.c

commit 8dce2df1ceacffb2aa6e2cc8b1d4b58ee95ac5b1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-02-21 12:31:15 +0000

    Don't examine args for functions declared METH_NOARGS.
    It's not guaranteed to be non-NULL, and Python checks there are
    no arguments
    so we don't have to.

M	_dbus_bindings/conn-methods.c

commit 4f88700588d80861c8520e56407d3a40d5bd86e6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-02-19 14:17:08 +0000

    dbus/_dbus.py: When an exception is raised by a signal handler,
    print it to stderr

M	dbus/_dbus.py

commit a79f8dacbf86efce563cc29104bbacecb5ef9739
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-02-13 17:54:55 +0000

    Update NEWS file for 0.80.2 (not actually present in the release,
    but at least it'll be in the next release's NEWS file)

M	NEWS

commit 22f2a483aa45720711b42fa8ce4ddf2d9fdbaec9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-02-13 17:44:38 +0000

    Set released flag back to 0

M	configure.ac

commit 728e8f47d884bdff66106b89cc1d803fa5f30456
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-02-13 16:54:51 +0000

    Release version 0.80.2

M	configure.ac

commit 138e4ce76ae53b86488e12c43db511a838be4fc9
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2007-02-13 14:16:22 +0000

    Do libtool versioning.

    As we're going to start behaving like a proper library, update
    libtool versionsing appropriately for our added api.

M	configure.ac

commit d19c5c0eac749704af70edffaa1fa0ac70eb9373
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2007-02-13 13:58:38 +0000

    Update NEWS

    Releasing today..

M	NEWS

commit e368483363fc920cf2978180f3a9fe6687465807
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2007-02-12 04:23:42 +0000

    Update NEWS

    Update NEWS, adding fix for bug #9769.

M	NEWS

commit 814b029d9291199bc9fdd2998c429ee15f243a93
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2007-02-12 04:21:50 +0000

    Add pkg-config support for uninstalled use.

    Adds dbus-glib-1-uninstalled.pc for use in build environments where
    dbus-glib is used as an uninstalled build dependancy. Fix due to
    Damien Carbery <damien.carbery@sun.com>.
    Fixes bug #9769.

M	configure.ac
A	dbus-glib-1-uninstalled.pc.in

commit 6bcb544eb6bc164e367a0e849b6c41274809401e
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2007-02-09 02:49:57 +0000

    Update version in configure.ac

    Updates version 0.73 in configure.ac

M	configure.ac

commit dba710006cb0b25454989f41babc53c12d3fc901
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2007-02-09 02:46:57 +0000

    Update NEWS ready for 0.73 release

    Updates NEWS with all the changes for 0.73

M	NEWS

commit 133bc8003657169f622d4340360a0e5b15a455de
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2007-02-09 02:21:20 +0000

    Allow passing of NULL to strv out arguments.

    A nicety for the user, allows passing NULL to strv out arguments as
    shorthand for an empty array.
    Patch due to Luiz Augusto von Dentz <luiz.dentz@gmail.com>
    Fixes bug #8795.

M	dbus/dbus-gvalue.c

commit 5f70d7b59445b634f94469a8c12cf31f8f81fdae
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2007-02-09 02:13:40 +0000

    Make uscore_to_wincaps return NULL when passed NULL.

    A null pointer dereference occured when uscore_to_wincaps was passed
    NULL, which could happen in some cases.
    Fixes bug #8318.

M	dbus/dbus-gobject.c

commit 678f8e5fdaf5c587547a96b173a5532f14337988
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2007-02-09 02:08:57 +0000

    Only respond to NameOwnerChanged if its one of our names.

    This fixes a crash due to code in
    dbus_g_proxy_manager_replace_name_owner that was dereferencing a
    null pointer when the process received a nameownerchanged for an
    object not registered with dbus-glib.
    Patch by Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>.
    Fixes bug #8235.

M	dbus/dbus-gproxy.c

commit 1ce4d3e7324d92d797b7e41e869b1d0ff51f129a
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2007-02-09 01:51:55 +0000

    Fix dbus-binding-tool to generate headers usable from C++

    Adds a cast that isn't needed in C, but is needed in C++
    Thanks to Christian Persch <chpe@gnome.org>, though his patch had
    a typo :)
    Fixes bug #6358.

M	dbus/dbus-binding-tool-glib.c

commit 6d61bad839512dedb62318fd82e2c0b20906d62f
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2007-02-09 01:26:48 +0000

    Only require --prefix for server side binding generation

    In dbus-binding-tool, only require --prefix for server side
    binding generation, as client-side defaults to the useful
    org_foo_bar_baz. Also fixes up the help string.

    Closes bug #4185

M	dbus/dbus-glib-tool.c

commit cb866d68e733e48bd6a6cea21fa4b5ca648d861e
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2007-02-09 00:04:13 +0000

    Clarify documentation for dbus_g_method_get_sender.

    Adds a note that the caller is responsible for freeing the returned
    value.

M	dbus/dbus-gobject.c

commit 22bd9971b4ac95f926b577e416f54ec57bb16d2d
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2007-02-08 23:54:33 +0000

    Add new API for specifying the timeout in DBusGProxy calls.

    This applies the patch from S. Nalliami <snallammai@novell.com>
    to provide new glib API's to allow the user to specify the timeout
    parameter for the method calls.
    Currently, in the dbus-glib APIs,the timeout value for synchronous
    and asynchronous method calls is hard coded as -1(ie.25seconds)
    which inhibits the user from specifying shorter or longer timeout
    values.The new APIs take the timeout value as an argument and
    processes the method calls.

    Fixes bug #9832.

M	dbus/dbus-glib.h
M	dbus/dbus-gproxy.c

commit b226873fdc2e7b98740afb93a7bae675952a29f0
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2007-02-08 23:17:40 +0000

    Dont check for libxml2 when expat not found.

    There isn't a version of dbus-gloader that works with libxml2, so
    this changes configure.ac to not check for libxml2, and error out
    if expat isn't found.

M	configure.ac

commit c51ff16bc93b4741061c362de638ab5e8cace000
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2007-02-08 15:06:08 +0000

    Add configure flags --with-introspect-xml

    Adds the configure flags --with-introspect-xml, which allows dbus-glib
    to be built with pre-generated bus daemons introspection xml (such as
    can be gained with dbus-daemon --introspect). This allows dbus-glib to
    be built without a running dbus-daemon, useful for embedded systems.

M	configure.ac
M	tools/Makefile.am

commit c5c0bed2166767162f599958270e92122da3ff2a
Author: Rob Taylor <rob.taylor@codethink.co.uk>
Date:	2007-02-08 15:00:17 +0000

    update doc/reference/dbus-glib-undocumented.txt

    dbus_g_thread_init is now documented.

M	doc/reference/dbus-glib-undocumented.txt

commit 87dc3d5807ba12c6396dbcb1acdebb8f453e8fcd
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-02-07 20:46:17 +0000

    Actually commit the numerous copyright-statement changes.

M	COPYING
M	Makefile.am
M	_dbus_bindings/abstract.c
M	_dbus_bindings/bus.c
M	_dbus_bindings/bytes.c
M	_dbus_bindings/conn-internal.h
M	_dbus_bindings/conn-methods.c
M	_dbus_bindings/conn.c
M	_dbus_bindings/containers.c
M	_dbus_bindings/dbus_bindings-internal.h
M	_dbus_bindings/debug.c
M	_dbus_bindings/exceptions.c
M	_dbus_bindings/float.c
M	_dbus_bindings/generic.c
M	_dbus_bindings/message-get-args.c
M	_dbus_bindings/message-internal.h
M	_dbus_bindings/message.c
M	_dbus_bindings/module.c
M	_dbus_bindings/pending-call.c
M	_dbus_bindings/signature.c
M	_dbus_bindings/string.c
M	_dbus_bindings/types-internal.h
M	_dbus_bindings/validation.c
M	_dbus_glib_bindings/module.c
M	dbus/lowlevel.py
M	dbus/mainloop/__init__.py
M	doc/tutorial.txt.in
M	include/dbus-python.h
M	test/cross-test-client.py
M	test/cross-test-server.py
M	test/crosstest.py
M	test/test-standalone.py

commit 1f9f29452352baf103fd6620eb0cd8315f8b736d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-02-07 17:05:29 +0000

    For files solely owned by Collabora Ltd., additionally allow use
    under LGPL 2.1.
    Also:
     * split out AFL, GPL from COPYING into separate files, and add LGPL.
     * update copyright year in recently touched files

A	COPYING.AFL-2.1
A	COPYING.GPL-2
A	COPYING.LGPL-2.1

commit 278b57d9f4a1aed4f0296b17a94bde2a36145a45
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-02-07 13:15:17 +0000

    Audit tp_dealloc callbacks to make sure they preserve the exception
    state.
    * Connection: use PyErr_Fetch and PyErr_Restore to preserve exception
    state
    * MainLoop: add a comment indicating that the "free" callback needs
    to do the
      same if it might alter the exception state

M	_dbus_bindings/conn.c
M	_dbus_bindings/mainloop.c

commit ffe3b55b4b293c5dfb36de8cf2dc2b91d09a9f0d
Merge: 5135a35 66fb274
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-02-07 13:00:33 +0000

    Merge
    git+ssh://people.freedesktop.org/home/smcv/public_html/git/dbus-python/

commit 5135a35677e25c473db0e8a463f97c15359c9e34
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-02-07 12:50:48 +0000

    Fix memory leak where Struct, _LongBase, _StrBase, String leaked
    their __dict__ on deallocation.
    * Use a fixed-size struct for String (unicode objects are in fact
    fixed-size)
      and store its variant_level that way.
    * Don't store Struct, _LongBase, _StrBase variant_level and Struct
    signature
      in a __dict__, but instead have a global dict mapping object IDs
      to variant
      levels, and a global dict mapping Struct IDs to signatures. This
      is a bit
      strange, but easier than correctly freeing the __dict__ (which
      is stored
      at the end of a variable-length struct, so somewhat hard to get at).
    * With this change, allocating objects in a loop no longer leaks
    memory, and
      neither does the test case supplied by Luka Renko.

M	_dbus_bindings/abstract.c
M	_dbus_bindings/containers.c
M	_dbus_bindings/message-append.c
M	_dbus_bindings/string.c
M	_dbus_bindings/types-internal.h

commit 870227fafd9c976a0354b02aff6052ba24234e91
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-02-05 16:21:13 +0000

    Close a couple of reference leaks in String (there's another
    somewhere, but I can't find it)

M	_dbus_bindings/string.c

commit c04456ff1b24de8695cda14f91e8886ca9c0bf0f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-02-05 15:18:39 +0000

    Don't leak memory in Struct repr()

M	_dbus_bindings/containers.c

commit 192bd48b8a17e4f62400b64e037df22c3b47de88
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-02-05 15:18:14 +0000

    Don't leak memory in _StringBase and _LongBase repr()

M	_dbus_bindings/abstract.c

commit 630f912b2155e6328a3fa48deb832f5c3d114b94
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-02-05 13:18:19 +0000

    Switch _IntBase back to using generic alloc/free implementation
    rather than half-participating in the int free list (which would
    result in _IntBase instances leaking)

M	_dbus_bindings/abstract.c

commit 95c0d3618041e8c8f9173a3eb8e8ddc93c456952
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-02-05 13:17:12 +0000

    Fix a couple of memory leaks - D-Bus signature strings, and decoded
    Unicode objects

M	_dbus_bindings/message-get-args.c

commit 99e0758b1d4f958e5753d51e843f1254e15b93b2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-31 13:47:49 +0000

    _dbus_bindings/pending-call.c: Fix memory leak of one Message per
    method call.
    Also fix a leak of references to Py_None (unlikely to be a practical
    problem,
    but best to be correct).

M	_dbus_bindings/pending-call.c

commit 66fb2745189037ba634cc3574f174f26e53a9be6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-31 13:27:16 +0000

    Fix a leak of references to Py_None in slightly pathological cases
    (should never be a problem in practice, but correctness is good)

M	_dbus_bindings/pending-call.c

commit 9285b0648419a6860ca274d381cdb2924f85fdd2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-31 13:07:49 +0000

    _pending_call_notify_function: stop leaking a Message per call

M	_dbus_bindings/pending-call.c

commit c0c48abc99e66998b4c81436a8f6eca58f93cef4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-25 12:59:39 +0000

    configure.ac: Only use -Werror if user passes --enable-Werror to
    configure.
    Also improve clarity of help message for --enable-html-docs.

M	configure.ac

commit d7c11cccfcdc3ef94f183d79203fac136e2c3494
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-25 12:49:57 +0000

    doc/tutorial.txt.in: Add copyright and license (GPL2/AFL2.1, like
    the code)

M	doc/tutorial.txt.in

commit dc6b66210bda929f92524ef10f5c3edbb3cb495c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-25 12:43:57 +0000

    COPYING: Remove information about files we no longer have

M	COPYING

commit 00ffd01f3186bf7eab88a5408daa59d162efdf70
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-25 12:43:13 +0000

    test/, include/: remove accidentally duplicated lines from license
    statement

M	include/dbus-python.h
M	test/cross-test-client.py
M	test/cross-test-server.py
M	test/crosstest.py
M	test/test-client.py
M	test/test-service.py
M	test/test-signals.py
M	test/test-standalone.py

commit 41694b4df5c1dbf745e5ddd443571d5cb67d74b3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-25 12:38:53 +0000

    dbus, _dbus_bindings, _dbus_glib_bindings: remove accidentally
    duplicated lines in license statement

M	_dbus_bindings/abstract.c
M	_dbus_bindings/bus.c
M	_dbus_bindings/bytes.c
M	_dbus_bindings/conn-internal.h
M	_dbus_bindings/conn-methods.c
M	_dbus_bindings/conn.c
M	_dbus_bindings/containers.c
M	_dbus_bindings/dbus_bindings-internal.h
M	_dbus_bindings/debug.c
M	_dbus_bindings/exceptions.c
M	_dbus_bindings/float.c
M	_dbus_bindings/generic.c
M	_dbus_bindings/int.c
M	_dbus_bindings/mainloop.c
M	_dbus_bindings/message-append.c
M	_dbus_bindings/message-get-args.c
M	_dbus_bindings/message-internal.h
M	_dbus_bindings/message.c
M	_dbus_bindings/module.c
M	_dbus_bindings/pending-call.c
M	_dbus_bindings/signature.c
M	_dbus_bindings/string.c
M	_dbus_bindings/types-internal.h
M	_dbus_bindings/validation.c
M	_dbus_glib_bindings/module.c
M	dbus/__init__.py
M	dbus/_dbus.py
M	dbus/_expat_introspect_parser.py
M	dbus/decorators.py
M	dbus/glib.py
M	dbus/lowlevel.py
M	dbus/mainloop/glib.py
M	dbus/proxies.py
M	dbus/service.py

commit 3706648c6ba07d2781fb9723eddc202a7e2b8a72
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-24 20:29:17 +0000

    Use AC_PREREQ(2.59c) to make sure we can use docdir, which is
    relatively new

M	configure.ac

commit 4c9b10a511f9465ee87e4f87065445c04a34d7e5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-24 16:37:03 +0000

    Reset released flag

M	configure.ac

commit 130d1a59220a921af7cc7738306804a6f8878062
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-24 16:17:43 +0000

    Version 0.80.1, the "oops" release. Install dbus/_version.py so
    dbus.__version__ exists again.

M	NEWS
M	configure.ac
M	dbus/Makefile.am
M	dbus/_version.py.in

commit 6e6b4cd1d7ade85612872d94374d722531f2e3f9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-24 16:03:37 +0000

    Clear "released" flag after release

M	configure.ac

commit 876f343d4eb39519ca155a4add1483d4f6ced641
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-24 16:01:09 +0000

    Relax dbus requirement to 0.93, to be nice to Ubuntu 6.10 and Fedora
    Core 6 users. Release version 0.80.0

M	configure.ac

commit 1ad24fa7b36a333a0a4e0ce1f0afd2b201f09245
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-24 14:55:43 +0000

    Remove unnecessary "..." in AC_MSG_CHECKING; correct quoting in
    AC_MSG_RESULT and tests

M	configure.ac

commit 3edafe1f009d0e228109368dcec3ba3da2d559a1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-24 14:37:32 +0000

    Clear "released" flag. Improve checking for rst2html and epydoc.

M	configure.ac

commit 057317ea759323f49133351e997ce7b892394889
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-24 14:31:54 +0000

    Update NEWS, README for 0.80.0

M	NEWS
M	README

commit bdf3c3a8ca30149b8d047ac0437858a47927f37e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-24 14:31:29 +0000

    Remove from EXTRA_DIST files we'd already be distributing

M	Makefile.am

commit 36deedcc043fb5abde7cbb432b3a3b24a5031da0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-24 14:13:50 +0000

    Add Makefile target maintainer-update-website to update
    d.fd.o/doc/dbus-python
    (to use this target, configure your fd.o username, if not the same as
    your local username, in ~/.ssh/config).
    Move API_CHANGES.txt, HACKING.txt to doc/ directory.
    Tweak documentation generation so deprecated stuff isn't documented.

M	Makefile.am
M	dbus/__init__.py
M	dbus/_dbus.py
R100	API_CHANGES.txt doc/API_CHANGES.txt
R088	HACKING.txt	doc/HACKING.txt

commit 0035c926fd188d9458a4b23275fcb277b26abfbd
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-24 12:12:39 +0000

    Install dbus-python.h in $includedir/dbus-1.0/dbus rather than
    $includedir for consistency with libdbus-glib and libdbus

M	Makefile.am

commit 6708a7bb677ac91cb1190f5f6761e2136f6dc779
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-24 12:04:19 +0000

    Automatically detect whether various desirable rst2html options are
    actually supported, using a modified version of JH_ADD_CFLAG. Also
    allow HTML documentation building to be switched off.

M	Makefile.am
M	acinclude.m4
M	configure.ac

commit 5e31fb2bfc9ea3e39e13abc519fade6e0322c864
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-22 18:52:00 +0000

    Build pre-release version 0.79.94 (= 0.80rc4)

M	configure.ac

commit 7ab85ec3ad175ed8631409e2fb216162fda70d67
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-22 18:34:11 +0000

    Alter Makefile.am, configure.ac to recurse into subdirs for previous
    change to take effect

M	.gitignore
M	Makefile.am
M	configure.ac

commit 625bfaac68f6c7afd85d62752e34fc8e00405790
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-22 18:26:36 +0000

    Split up Makefile.am between subdirectories
    As well as being conventional, this seems to be necessary to avoid
    having
    dbus_py_test.so installed, while still having it be a Libtool
    shared library
    (noinst libraries are helpfully made static).

A	_dbus_bindings/Makefile.am
A	_dbus_glib_bindings/Makefile.am
A	dbus/Makefile.am
A	examples/Makefile.am
A	test/Makefile.am

commit 6edb71ddccce139f6c7de1e43f885fed37f58b1b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-22 16:50:19 +0000

    API_CHANGES.txt, NEWS: update for 0.79.94 (= 0.80rc4)

M	API_CHANGES.txt
M	NEWS

commit b693df256198cd58c71e97531aa4169999bfd2d8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-22 16:49:52 +0000

    configure.ac: When building a non-release version, compile with
    -Werror

M	configure.ac

commit 795927e72a9b5e0a14ea7125c31972d2fc3501dc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-19 12:31:56 +0000

    Add a "released" flag to configure.ac: if not 1, append the date to
    the version.
    When making official releases please do the following:
    * set dbus_python_released to 1 and set the new version
    * make the release tarball (make distcheck)
    * commit, tag
    * change dbus_python_released back to 0 and commit again

M	configure.ac

commit 43c48b9c7fdbb5741daa024df9e7a319d1993dac
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-17 13:06:33 +0000

    dbus/proxies.py: Finish implementing deferred methods so they can
    be async.

    * Queue up async methods and execute them when introspection finishes,
    instead
      of blocking on the introspection operation (heavily based on patch
      by J5)
    * Rename DeferedMethod (sic) to spell Deferred correctly, and
    rename to
      _DeferredMethod (also _ProxyMethod) since these classes are not
      public API
    * Make it safe to keep a reference to a DeferredMethod and call
    it with
      differing arguments:
	meth = proxy.DoStuff
	meth(1, reply_handler=on_reply, error_handler=on_error)
	meth(2, reply_handler=on_reply, error_handler=on_error)
    * Make it safe to keep references to DeferredMethod even after
    introspection
      has finished - if called after introspection finishes, silently
      do an
      immediate call
    * Add some locking to avoid subtle failures if one thread appends
      to the pending introspect queue at the same time another thread gets
      introspection results back - ProxyObject and friends should now be
      threadsafe (I think)

M	dbus/proxies.py

commit 4dbee87fbe9dd7abb56d8d150d8c8ae7bd01f261
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-17 12:28:38 +0000

    dbus/service.py: cope with exceptions with no __module__
    (thanks Phil Thompson, <phil riverbankcomputing co uk>)

M	dbus/service.py

commit cc4dfc18c7fe0843b5e118d35a94ca9cca563f98
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-17 12:27:51 +0000

    DBusGMainLoop: avoid reference leak on success
    (thanks Phil Thompson, <phil riverbankcomputing co uk>)

M	_dbus_glib_bindings/module.c

commit 47860b5c25c823587e4e06636acc926b252fe114
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-16 19:52:45 +0000

    Add regression test for main loop failure handling (a main loop that
    never works)

    Also run tests with DBUS_FATAL_WARNINGS and ulimit -c unlimited so
    they dump
    core at the slightest provocation.

M	Makefile.am
A	test/dbus_py_test.c
M	test/run-test.sh
A	test/test-unusable-main-loop.py

commit 916df7703d828afec95635d309ca83bc1c05fd98
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-16 19:51:28 +0000

    examples: Don't load a main loop when only making blocking calls

M	examples/example-client.py
M	examples/list-system-services.py

commit f0deb687acad02173c20a0dc644323774b24dc0e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-16 19:38:00 +0000

    When running without a main loop, don't make introspection fail.

    Also change send_message_with_reply() to not demand a main loop
    by default
    (since you can call block() on the returned object, like blocking
    introspection
    does).

M	_dbus_bindings/conn-methods.c
M	dbus/proxies.py

commit 7d70b07e62d579ce85572a3e1ebb92f42461a185
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-16 19:36:05 +0000

    conn.c: fix Connection setup in absence of main loop, and error
    handling

    * Only set up a main loop if we actually have one (not None)
    * Don't double-close the DBusConnection (causing an assertion in
    libdbus) if
      we somehow fail to set up the main loop. Thanks to tsuraan
      <tsuraan at gmail.com> for the bug report.

M	_dbus_bindings/conn.c

commit 6d7356140055082a30090161c586b4575f8f0fa7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-16 18:08:04 +0000

    Correctly don't build HTML docs if rst2html is not found

M	configure.ac

commit b33efe312c8d89ecc6e2ba9f075d2d0a9e28c3e1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-16 17:41:45 +0000

    Switch types from int to Py_ssize_t to be compatible with Python
    2.5 on 64-bit archs

M	_dbus_bindings/conn-methods.c
M	_dbus_bindings/dbus_bindings-internal.h
M	_dbus_bindings/message-append.c
M	_dbus_bindings/message-get-args.c

commit 4d7fac530ce82c3dc888248234b955c04c364ada
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-16 17:24:00 +0000

    Always install text documentation, even if we're not able to build
    the HTML

M	Makefile.am

commit 597d278a3973ad411e345ab8938adf6c582da42d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-16 17:23:25 +0000

    bytes.c, string.c: Don't mention get_object_by_unique_name in
    docstrings, it no longer exists

M	_dbus_bindings/bytes.c
M	_dbus_bindings/string.c

commit d723afa11282cc694342a0043cdc8303747c88a7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-16 17:19:03 +0000

    When running make clean, also get rid of the generated API docs
    (now passes make distcheck DISTCHECK_CONFIGURE_ARGS=--enable-api-docs)

M	Makefile.am

commit 0557d5bdcf90dc79ed3662144d8ecd1df28e5dcf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-16 17:09:10 +0000

    Remove generated HTML documentation on distclean

M	Makefile.am

commit 3504ac8bc098b5872be747c151f304bbe80d2131
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-16 17:04:37 +0000

    Remove get_object_by_unique_name again, and replace with a
    better-thought-out version of get_object

    - Remove get_object_by_unique_name (introduced in 0.80rc1) - J5's
    right, the
      name is misleading
    - Make get_object *not* follow name changes by default (a return
    to pre-0.80
      behaviour, and the same as 0.80rc1's get_object_by_unique_name())
    - Add keyword argument follow_name_owner_changes (default is False):
    if True,
      it will follow name owner changes (like 0.80rc1's get_object()
      always did)
    - Implement with modifications to ProxyObject so it resolves the
    unique name
      on construction, if required (activating it if necessary)

M	dbus/_dbus.py
M	dbus/proxies.py

commit e8d766e1b2d5013e3f2c0a95d43b1dcb5eb00044
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-16 17:00:00 +0000

    Ensure we put the right number of items in a struct or message and
    add test cases.

    This avoids us getting kicked off the bus when trying to put the wrong
    number of things in a struct - this used to happen, but was masked
    by the fact
    that the tests ran with service activation, so the service was just
    killed and
    reactivated. Forthcoming changes to get_object make this automatic
    reactivation
    not happen (messages will be directed to the unique name by default,
    so
    stateful communication can work).

M	_dbus_bindings/message-append.c
M	test/test-standalone.py

commit bd2baf2aad6a7f5ecf0bf7e867e74077cf733cd6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-16 15:05:31 +0000

    test/run-test.sh: Re-order to run the simpler tests (standalone,
    examples, cross tests) first

M	test/run-test.sh

commit c7fa08a7a7cc6ae3811b1164b0fdd627a9377e43
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-16 14:44:01 +0000

    Write some more of the tutorial

M	doc/tutorial.txt.in

commit e018fa3f6a7e4e0da334453c81e3bde22da46fe1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-16 12:08:05 +0000

    Comment on why we're putting the client at path /Test

M	test/cross-test-client.py

commit c98c7742c13ff38998bbc6b6acca390a529e9c7f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-16 11:40:47 +0000

    Use autoconf's usual directory for docs

M	Makefile.am

commit 24d8be176996913853b01f0e3ed1d33082640dec
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-15 20:24:59 +0000

    Generate HTML docs from reStructuredText if rst2html is available

M	Makefile.am
M	configure.ac

commit a9575bf47b9ba5bc02ad5280fe35652758c0d00e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-15 20:23:48 +0000

    reStructuredText syntax corrections

M	API_CHANGES.txt
M	HACKING.txt
M	NEWS
M	README

commit cd5719adbf6cafb53fb3dd19c141ad312729c83c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-15 20:22:52 +0000

    Ignore generated documentation

M	.gitignore

commit 6053bac21757a0d87abd0c50135f6c783fdf63b9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-15 19:15:20 +0000

    configure.ac: don't divert autotools cruft into autotools/, it's
    probably more trouble than it's worth (fd.o#9630); .gitignore:
    adjust accordingly

M	.gitignore
M	configure.ac

commit 02f962921e831a710e7b1566ec5d4c0b84a15d91
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-15 19:09:04 +0000

    Makefile.am: ship example-async-client so it can be used as a test

M	Makefile.am

commit 618e13ee5bdce6dd129600a698910f5edb7ab4db
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-10 13:11:33 +0000

    Add half-written tutorial. Fix reStructuredText syntax in
    documentation, and build HTML if we have rst2html or rst2html.py.
    Distribution packagers may want to build-depend on docutils, and
    configure with --docdir=... if their distribution would usually use
    a location other than PREFIX/share/doc/dbus-python - for instance
    Debian/Ubuntu should use --docdir=/usr/share/doc/python-dbus.

A	doc/tutorial.txt.in

commit bde53f1cf59b743d5e38b6ac4fbdf348bdf773db
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-10 13:05:23 +0000

    Add special case to serialization: objects with a __dbus_object_path__
    attribute are serialized as that object path. Add that attribute to
    ProxyObject, dbus.Interface and dbus.service.Object.

M	_dbus_bindings/abstract.c
M	_dbus_bindings/message-append.c
M	_dbus_bindings/types-internal.h
M	dbus/_dbus.py
M	dbus/proxies.py
M	dbus/service.py
M	test/test-standalone.py

commit 92e8cc8ff3cb87af3e94bc455d3be057e98846d3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-10 12:45:06 +0000

    Remove old .cvsignore files

D	dbus/.cvsignore
D	examples/.cvsignore

commit 984b7fc404a89b61f5efefb2a82d203a6b4fd143
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-09 16:49:58 +0000

    Validate that the signature on an Array or Dict has the right number
    of complete types

M	_dbus_bindings/containers.c

commit 6e4a93545a40a13af7308b97e435921a0eee7805
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-09 15:30:22 +0000

    When putting a ByteArray into a variant array, serialise it as
    an array of variants containing byte, not an array of variants
    containing string

M	_dbus_bindings/message-append.c
M	test/test-standalone.py

commit 93faf8793f271d91fbc413f1c9374328605bcda8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-09 15:27:52 +0000

    Improve documentation of type conversion from D-Bus to Python

M	_dbus_bindings/message-get-args.c

commit e5cef62c8ed04f5842257653bc6ec70abbdd20bb
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-09 15:27:02 +0000

    dbus.Interface, dbus.ProxyObject: add get_dbus_method(), which can
    be used to call awkwardly-named methods like __getattr__

M	dbus/_dbus.py
M	dbus/proxies.py
M	test/test-client.py

commit ee11236f45c9aa354136e6e5d2ec1c4490bc6657
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-09 14:53:55 +0000

    Improve docstrings for String and UTF8String explaining how to get
    UTF8String from the API.

M	_dbus_bindings/string.c

commit d75fec04ba79b46872801c6132afad7b9f192c94
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-09 14:53:16 +0000

    Subscripting a ByteArray now gives 1-character strings again (for
    least astonishment). Also document how to get a ByteArray from the API

M	_dbus_bindings/bytes.c

commit b68d891998983ab94e68555855d10f85a3dca019
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-09 14:29:46 +0000

    Correct usage in example-async-client: you need to use example-client
    (or kill(1) of course) to shut down the example service

M	examples/example-async-client.py

commit 26ce68b8de3f48187091d3686cb30b75375b84d0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-09 14:05:28 +0000

    Add an example of asynchronous calls. Run the examples during
    'make check'.

A	examples/example-async-client.py
M	examples/example-client.py
M	examples/example-service.py
M	examples/example-signal-recipient.py
M	test/run-test.sh

commit 9ede20248d690d9bb2cb9fba6b75955770930a94
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-09 14:04:49 +0000

    Don't require a main loop unless async calls, signal connections or
    exported objects are actually made. (Increases backwards compatibility
    with Pyrex-dbus-python)

M	_dbus_bindings/conn-internal.h
M	_dbus_bindings/conn-methods.c
M	_dbus_bindings/conn.c
M	_dbus_bindings/module.c
M	dbus/_dbus.py

commit 336cfd395976627b9c758a48f7ec7db275963bc9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-09 13:03:27 +0000

    Accept keyword argument introspect=False to Bus.get_object(),
    Bus.get_object_by_unique_name() to suppress introspection - off by
    default, but necessary to work around broken service implementations
    which fail to reply to introspection.
    Thanks to Ulisses Furquim <ulissesf at gmail.com> for the patch.

M	dbus/_dbus.py

commit 88011f8e449d92959f83e304d8b6b2db44ec02bc
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-09 12:59:31 +0000

    Stop trying to get macros from the autotools directory (no longer
    needed)

M	configure.ac

commit adf16bd849e1ebf98f65e288bc42956810a3e2eb
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-09 12:47:26 +0000

    Remove extra M4 macros (J5 added them to acinclude.m4 instead)

D	autotools/as-ac-expand.m4
D	autotools/jhflags.m4
D	autotools/python.m4

commit 2a100a94dc4db5174244b9dac89f4ca5c1083103
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2007-01-09 12:46:53 +0000

    Remove setup.py (no longer used in favour of autotools)

D	setup.py

commit c807d408924e9a9bcc7b2eb67b411c25888090ee
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2007-01-08 08:41:11 +0000

    Use dbus_threads_init_default() rather than using own threading
    primitives.

    Modifies dbus_g_threads_init() to just call
    dbus_threads_init_default(), which with current dbus gives us full
    thread primitives with recursive locking.

    Fixes #9259.

M	dbus/dbus-gthread.c

commit 9bb928331e2ad602728320598698de90c9a246d6
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2007-01-08 08:39:22 +0000

    Reduce dependancy to dbus version 0.93, error out if correct version
    not found.

    In configure.ac, add code to error out if correct version of dbus-1
    not found. Also use correct dependancy of 0.93, as this is when the
    --introspect flag was introduced to dbus-daemon. Pacth due to Luiz
    Augusto von Dentz  <luiz.dentz@gmail.com>.

    Fixes #8793.

M	configure.ac

commit 79d115030d45fefd96d5ffc7853f80fc454c13b1
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2007-01-07 13:34:26 +0000

    Allow dbus and dbus-glib to live in different prefixes

    Adds Cflags: -I${includedir}/dbus-1.0 to dbus-glib-1.pc.in.
    Fixes #9384.

M	dbus-glib-1.pc.in

commit d0004b6162a18c3d9f02dbc4404f8f452f1c3e79
Author: John (J5) Palmieri <quinticent@localhost.localdomain>
Date:	2007-01-03 17:35:57 -0500

    fix autogen.sh to run all the correct steps that jhbuild expects

    * copy autogen.sh from D-Bus core
    * add JH_ADD_CFLAG, AM_CHECK_PYTHON_HEADERS and AM_CHECK_PYMOD
    m4 macros
      to acinclude.m4

A	acinclude.m4
M	autogen.sh

commit 5b8c9eb452b78ed56b395193f6989ad87eae111b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-21 19:51:54 +0000

    Improve various type docstrings

M	_dbus_bindings/abstract.c
M	_dbus_bindings/bus.c
M	_dbus_bindings/bytes.c
M	_dbus_bindings/containers.c
M	_dbus_bindings/generic.c
M	_dbus_bindings/int.c
M	_dbus_bindings/message-get-args.c
M	_dbus_bindings/message.c
M	_dbus_bindings/module.c
M	_dbus_bindings/pending-call.c
M	_dbus_bindings/signature.c
M	_dbus_bindings/string.c
M	_dbus_bindings/validation.c

commit b2e5a27a119ca7b94cd8a343a163bc6639f7c8f9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-21 18:39:51 +0000

    Fix recommendation given by exception message bringing it into sync
    with current API (spotted by Phil Thompson)

M	_dbus_bindings/conn.c

commit 7f7262c8d6b1e3aa6cdc541ac0cdb275f9e68501
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-19 17:48:34 +0000

    Makefile.am: if in a git checkout, generate the ChangeLog (correctly)

M	Makefile.am

commit 06e9507ebca33369c106b616f948fe6af4fe71c9
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-19 17:44:35 +0000

    NEWS, README: 0.80rc3, a.k.a. 0.79.93

M	NEWS
M	README

commit d62626c19c32348c28b90e269c47635a421247f3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-19 17:42:57 +0000

    .gitignore: ignore the generated Makefile

M	.gitignore

commit 75a897710ffafb1fc4df17460784829df844666f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-19 17:37:11 +0000

    Makefile.am: if in a git checkout, generate the ChangeLog

M	Makefile.am

commit 6020c7f6252833c2d5bf890c68335ee4cc6f777c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-19 15:57:11 +0000

    dbus-python.h: Alter header comment, use a better cpp define name
    for the multiple-inclusion guard

M	include/dbus-python.h

commit 75111a7da5f12f3f01d736694158ea266926139b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-19 15:43:57 +0000

    Remove old introspect_parser from Makefile.am too

M	Makefile.am

commit 550390810f9ee63a3f251e854f3e234c6a948436
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-19 15:17:12 +0000

    Remove old libxml2-based introspection parser

D	dbus/introspect_parser.py

commit d6bfbdd4a270a0b2421e8cba566805211b711c77
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-19 15:16:43 +0000

    Include the cross-test in 'make check'

M	test/run-test.sh

commit 432694be74b0a6bfb5336e4fa493958b1bf1ac4e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-19 15:16:22 +0000

    Add missing _expat_introspect_parser.py; fix cross-test to work for
    out-of-tree builds

M	Makefile.am

commit 0bccb0f1fd68b224e7aee6d21aef8e36cdc8d980
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-19 15:15:01 +0000

    Remove Makefile (auto-generated since switching to autotools)

D	Makefile

commit b3c9b4c65aaefc6c940793e00fcdb60831367d10
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-19 14:45:16 +0000

    Add an Expat-based introspect parser, and use it instead of libxml2.
    (Removes dependency on libxml2.)

A	dbus/_expat_introspect_parser.py
M	dbus/proxies.py

commit 164f38ea01187c1bbe9606dde81e09efd62362e5
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-19 14:24:45 +0000

    Pass introspection XML around as UTF-8, rather than decoding it
    to Unicode
    during unmarshalling and re-encoding it for libxml2.

M	dbus/introspect_parser.py
M	dbus/proxies.py

commit 956a5c9e47e9504b67685a6bf582afd04c613fd3
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-19 14:21:10 +0000

    Respect utf8_strings, byte_arrays options when calling methods
    asynchronously.

    Also make it possible to fail the async call tests in test-client,
    and add a test case for utf8_strings in async use.

M	dbus/proxies.py
M	test/test-client.py

commit b4845467ec4e381f07dadf48ce67a7b02ac46618
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-19 14:05:15 +0000

    Do cross-product of options in more obvious way

M	test/test-client.py

commit e6eb7b5307da2a446e1c8c6b0cb6b11fc6705b00
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-18 20:33:56 +0000

    Switch to autotools and test with Python 2.5 as well as 2.4.

    In the process:

    HACKING.txt: update
    include/dbus-python.h: add some typedefs to make it saner
    bus.c, conn.c, conn-methods.c: further alter docstrings to keep
    epydoc happy
    exceptions.c: create exceptions in a more longwinded way for Python
    2.5 compatibility
    message-get-args.c, bus/__init__.py: tweak docstrings
    dbus/introspect_parser.py: make docstring valid reStructuredText
    run-test.sh: simplify, since configure now does some of the work
    test/*.py: use paths from run-test.sh, cope with out-of-tree builds
    test-standalone.py: carry out additional sanity checks

M	.gitignore
M	HACKING.txt
D	MANIFEST.in
M	Makefile
A	Makefile.am
A	README
M	_dbus_bindings/bus.c
M	_dbus_bindings/conn-methods.c
M	_dbus_bindings/conn.c
M	_dbus_bindings/exceptions.c
M	_dbus_bindings/message-get-args.c
M	_dbus_bindings/module.c
A	autogen.sh
A	autotools/as-ac-expand.m4
A	autotools/jhflags.m4
A	autotools/python.m4
A	configure.ac
A	dbus-python.pc.in
M	dbus/__init__.py
A	dbus/_version.py.in
M	dbus/introspect_parser.py
M	include/dbus-python.h
A	test/TestSuitePythonService.service.in
M	test/run-test.sh
A	test/run-with-tmp-session-bus.sh
M	test/test-client.py
M	test/test-service.py
M	test/test-signals.py
M	test/test-standalone.py
R068	tools/session.conf	test/tmp-session-bus.conf.in
D	tools/run-with-tmp-session-bus.sh

commit 73457d0e435f4a9be9a9980fb06dd004b87c6647
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-18 12:05:00 +0000

    bus.c, conn-methods.c, conn.c: Alter format of signatures in
    docstrings to keep epydoc happy

M	_dbus_bindings/bus.c
M	_dbus_bindings/conn-methods.c
M	_dbus_bindings/conn.c

commit 358403cd0cba20ccda4961a39644c092a0f05b74
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-18 12:03:27 +0000

    include/dbus_bindings.h: Rename to include/dbus-python.h, improve
    namespacing.
    _dbus_bindings/conn-internal.h,
    _dbus_bindings/dbus_bindings-internal.h,
    _dbus_glib_bindings/module.c: Use dbus-python.h instead of
    dbus_bindings.h

M	_dbus_bindings/conn-internal.h
M	_dbus_bindings/dbus_bindings-internal.h
M	_dbus_glib_bindings/module.c
R096	include/dbus_bindings.h include/dbus-python.h

commit f4bb2ca522a39fbbf2cce536410c973a73b9059c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-15 12:56:36 +0000

    COMPAT.txt: cross off some to-do items, patches now sent upstream

M	COMPAT.txt

commit 6376c0c422063a48554719f9ec72162c1b63fdda
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-14 16:18:13 +0000

    _dbus_bindings/module.c: If Python is older than 2.4.2c1, initialize
    threads.
    In newer versions the PyGILState API is allowed even when threads
    haven't been
    initialized yet, but in 2.4.1 it causes a crash. It's desirable
    to avoid
    initializing threads until just before the second thread is created,
    since
    this creates locking overhead which isn't needed until the app
    actually goes
    multi-threaded.

M	_dbus_bindings/module.c

commit 274314c98304fdaa23bcc7b3940ab48e7afe0e8c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-13 15:02:36 +0000

    Bump version to 0.80rc2

M	NEWS
M	dbus/__init__.py
M	setup.py

commit 8989e8da843210e7d18c456cfaa12cabc1015ac0
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-13 15:02:07 +0000

    MANIFEST.in: include Makefile (for the benefit of mjj29's interop
    test) and examples

M	MANIFEST.in

commit 717c5b4b3852c5e519bc4a1ccb9df8414d4c019c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-13 14:48:56 +0000

    list-system-services.py: Use the NULL_MAIN_LOOP

M	examples/list-system-services.py

commit b70364f2a37e64585c53a72e36481407e375808c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-13 14:40:32 +0000

    dbus/examples: Move to examples/ (it's not part of the library and
    isn't installed)

R100	dbus/examples/.cvsignore	examples/.cvsignore
R100	dbus/examples/example-client.py examples/example-client.py
R100	dbus/examples/example-service.py
examples/example-service.py
R100	dbus/examples/example-signal-emitter.py
examples/example-signal-emitter.py
R100	dbus/examples/example-signal-recipient.py
examples/example-signal-recipient.py
R100	dbus/examples/gconf-proxy-client.py
examples/gconf-proxy-client.py
R100	dbus/examples/gconf-proxy-service2.py
examples/gconf-proxy-service2.py
R100	dbus/examples/list-system-services.py
examples/list-system-services.py

commit c874bb37093c39e3dcc974c7bff39a36e4f7202a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-13 14:39:03 +0000

    dbus/_dbus.py: Strongly reference shared connections, so they stay
    alive and signal handlers etc. stick. On close, remove them from
    the table of shared connections first

M	dbus/_dbus.py

commit 4a7f442a322a8df6306f50ae22aaf049d3807c9f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-13 14:36:00 +0000

    dbus/__init__.py: Import exceptions too in case someone is relying
    on it

M	dbus/__init__.py

commit 1cd510ab8be262106e1a57359a06708236b9dd39
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-13 13:53:38 +0000

    test/test-client.py: Add test case for weak reference logic (which
    would segfault on 0.80rc1)

M	test/test-client.py

commit a3f966c49e6158a3382a2dce553b91ceb64376fe
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-13 13:50:38 +0000

    dbus/__init__.py: Import types submodule into dbus, because Sugar
    assumes it'll be available

M	dbus/__init__.py

commit a4b88e345e8ee03ddcf12ce323730d12d51193db
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-13 13:49:38 +0000

    dbus/_dbus.py: Use absolute import for proxies

M	dbus/_dbus.py

commit 8edf45a9dc51a70ce4897606f4cd2b08e3536332
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-13 13:48:40 +0000

    message-append.c, message-get-args.c: Turn off debug messages even
    when debugging other things, they're too verbose

M	_dbus_bindings/message-append.c
M	_dbus_bindings/message-get-args.c

commit 422855dd98922b8a3038f7315809462ed6a54ba6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-13 13:48:03 +0000

    _dbus_bindings/conn.c: Fix broken weak reference handling, which
    caused a segfault on OLPC.
    Also add debug related to this.

M	_dbus_bindings/conn.c

commit 6ff6bd99176b7b1d7931bb16c8a7c8a75e3755ee
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-13 13:46:29 +0000

    conn-methods.c: Add tracing

M	_dbus_bindings/conn-methods.c

commit 98f392d386ae89e3b7ebe397beee6a15869511df
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-13 13:45:55 +0000

    conn-internal.h: Comment weakref list

M	_dbus_bindings/conn-internal.h

commit d1bc9f29818e576b07946e0ea9a89e90e1d5ec42
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-13 13:45:28 +0000

    bus.c: Add tracing and a couple of missed assertions

M	_dbus_bindings/bus.c

commit 6afa6d2e76c83c921c799bec3a7b3259248eb57f
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-13 13:45:01 +0000

    Add TRACE macro and allow debug to be turned off per file

M	_dbus_bindings/dbus_bindings-internal.h

commit 2ad0498ce6f253da333907ed87df11c6b5a8cf1e
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-12 19:56:17 +0000

    conn.c: Correct number of varargs to debug message

M	_dbus_bindings/conn.c

commit 53c4f8628eac5c1ba62e9ccf3be6e1b4c0990b20
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-12 19:55:38 +0000

    conn.c: Use __func__ instead of incorrect __FUNC__

M	_dbus_bindings/conn.c

commit d8a2d78963cf76051a72bb18e7c9d9dd0afd27e8
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-12 19:54:05 +0000

    _dbus_bindings/bus.c, _dbus_bindings/conn-methods.c,
    _dbus_bindings/conn.c: Add lifecycle debugging and assertions

M	_dbus_bindings/bus.c
M	_dbus_bindings/conn-methods.c
M	_dbus_bindings/conn.c

commit 88306feb544fac52c5ffe7de48ef0fd07a59a749
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-12 19:46:54 +0000

    _dbus_bindings/dbus_bindings-internal.h: Add wrapper macro
    "DBG_WHEREAMI;"

M	_dbus_bindings/dbus_bindings-internal.h

commit 883b24563b5f9bf406fcde5edb19caabbc812ac2
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-12 19:44:41 +0000

    Add assertion macros and supporting functions

M	_dbus_bindings/dbus_bindings-internal.h
M	_dbus_bindings/debug.c

commit b7d21102b99e717e3b4f103d71ce96e8f056cfd4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-11 21:57:52 +0000

    Whitespace consistency: Don't put a space between function name and
    parentheses around arguments

M	_dbus_bindings/bus.c
M	_dbus_bindings/message-append.c
M	_dbus_bindings/message-get-args.c
M	_dbus_bindings/message.c

commit 830f94f31010d4783490217d4b02f6f87927ae4c
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-11 21:45:29 +0000

    Convert generic glue, main loop integration, message append/get_args,
    validation into separate translation units - no *-impl.h remaining

M	_dbus_bindings/dbus_bindings-internal.h
R088	_dbus_bindings/generic-impl.h	_dbus_bindings/generic.c
R087	_dbus_bindings/mainloop-impl.h	_dbus_bindings/mainloop.c
R098	_dbus_bindings/message-append-impl.h
_dbus_bindings/message-append.c
R098	_dbus_bindings/message-get-args-impl.h
_dbus_bindings/message-get-args.c
A	_dbus_bindings/message-internal.h
M	_dbus_bindings/message.c
M	_dbus_bindings/module.c
R074	_dbus_bindings/validation-impl.h
_dbus_bindings/validation.c
M	setup.py

commit 8ab339978d34b8c14dcf53aa6fbf228efb9130c6
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-11 20:30:19 +0000

    Separate out remaining types (abstract, bytes, containers, int,
    float, signature, string) into separate translation units

M	Makefile
R097	_dbus_bindings/abstract-impl.h	_dbus_bindings/abstract.c
R097	_dbus_bindings/bytes-impl.h	_dbus_bindings/bytes.c
R098	_dbus_bindings/containers-impl.h
_dbus_bindings/containers.c
M	_dbus_bindings/dbus_bindings-internal.h
R096	_dbus_bindings/floattypes-impl.h	_dbus_bindings/float.c
M	_dbus_bindings/generic-impl.h
R070	_dbus_bindings/types-impl.h	_dbus_bindings/int.c
M	_dbus_bindings/module.c
R097	_dbus_bindings/signature-impl.h _dbus_bindings/signature.c
A	_dbus_bindings/string.c
M	_dbus_bindings/types-internal.h
M	setup.py

commit 14df12b437c1d8e0ce79aa90c99d58c820a94048
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-11 20:06:09 +0000

    Split out exceptions, pending call, message into separate .c files

M	_dbus_bindings/abstract-impl.h
M	_dbus_bindings/bus.c
M	_dbus_bindings/bytes-impl.h
M	_dbus_bindings/conn.c
M	_dbus_bindings/containers-impl.h
M	_dbus_bindings/dbus_bindings-internal.h
R083	_dbus_bindings/exceptions-impl.h
_dbus_bindings/exceptions.c
M	_dbus_bindings/floattypes-impl.h
M	_dbus_bindings/generic-impl.h
M	_dbus_bindings/mainloop-impl.h
M	_dbus_bindings/message-append-impl.h
M	_dbus_bindings/message-get-args-impl.h
R097	_dbus_bindings/message-impl.h	_dbus_bindings/message.c
M	_dbus_bindings/module.c
R097	_dbus_bindings/pending-call-impl.h
_dbus_bindings/pending-call.c
M	_dbus_bindings/signature-impl.h
M	_dbus_bindings/types-impl.h
A	_dbus_bindings/types-internal.h
M	setup.py

commit 7ee3e9020ae67172b82b39fee05d25db3f43ea08
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-08 17:57:12 +0000

    _dbus_bindings: debug-impl.h -> debug.c

R100	_dbus_bindings/debug-impl.h	_dbus_bindings/debug.c
M	_dbus_bindings/module.c
M	setup.py

commit 3273a66c7b0d8a91ffe68732a482d17775627273
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-08 17:55:24 +0000

    _dbus_bindings: bus-impl.h -> bus.c

R099	_dbus_bindings/bus-impl.h	_dbus_bindings/bus.c
M	_dbus_bindings/dbus_bindings-internal.h
M	_dbus_bindings/module.c

commit f50c6643bf9fe153a7add75ca150a1470b7eb63a
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-08 17:50:25 +0000

    _dbus_bindings: split out conn, conn-methods into separate translation
    units

M	_dbus_bindings/bus-impl.h
A	_dbus_bindings/conn-internal.h
R080	_dbus_bindings/conn-methods-impl.h
_dbus_bindings/conn-methods.c
R060	_dbus_bindings/conn-impl.h	_dbus_bindings/conn.c
A	_dbus_bindings/dbus_bindings-internal.h
M	_dbus_bindings/debug-impl.h
M	_dbus_bindings/exceptions-impl.h
M	_dbus_bindings/generic-impl.h
M	_dbus_bindings/mainloop-impl.h
M	_dbus_bindings/message-impl.h
M	_dbus_bindings/module.c
M	_dbus_bindings/pending-call-impl.h
M	_dbus_bindings/types-impl.h
M	_dbus_bindings/validation-impl.h
M	include/dbus_bindings.h
M	setup.py

commit 380b44d38d333092bc9fe2eae8b7a836cb2791c7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-08 16:10:12 +0000

    _dbus_bindings/conn-impl.h: Be more careful that referenced
    Connections always have a DBusConnection

M	_dbus_bindings/conn-impl.h

commit 93b846e642ea1830b40aee6dfc600b8cd18b51bf
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-08 16:08:56 +0000

    _dbus_bindings/bus-impl.h: Correctly construct Bus objects with
    non-default addresses

M	_dbus_bindings/bus-impl.h

commit 9c4374aba50a9de68e307b85dc0f4d0425ee0b1b
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-07 18:43:07 +0000

    gconf-proxy-{client,service2}.py: Print a message warning that these
    might not work.
    gconf-proxy-service.py: Delete, it uses API which was obsoleted
    long ago.

M	dbus/examples/gconf-proxy-client.py
D	dbus/examples/gconf-proxy-service.py
M	dbus/examples/gconf-proxy-service2.py

commit 11757fcd9434e1e541c928ee34a6294a120bc0eb
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-07 18:40:31 +0000

    dbus/examples/example-*.py: update to current API

M	dbus/examples/example-client.py
M	dbus/examples/example-service.py
M	dbus/examples/example-signal-emitter.py
M	dbus/examples/example-signal-recipient.py

commit ed1306b347fedce65a24bf525ad9d430bcfdf15d
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-07 18:39:51 +0000

    dbus/_dbus.py, dbus/proxies.py: Add keyword arguments
    interface_keyword, member_keyword, destination_keyword (completing
    the set of useful message fields for signal handlers); also add
    message_keyword (for advanced use)

M	dbus/_dbus.py
M	dbus/proxies.py

commit 14bf5b0eb6dcd7da8b4f3e90d55480dfa0c4b9b7
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-07 18:37:58 +0000

    dbus/decorators: Remove explicitly_pass_message

M	dbus/decorators.py

commit 090091828e1d616171601d68aed00991d93dfd49
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:	2006-12-07 16:53:42 +0000

    examples/list-system-services.py: Print services in a nicer form,
    once per line. Offer to connect to the session bus instead.

M	dbus/examples/list-system-services.py

commit 9802e3eb22d1ed464eec71153067593db7071764
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-12-06 12:56:59 +0000

    NEWS, setup.py, dbus/__init__.py: Bump version to 0.80rc1, aka 0.79.91

M	NEWS
M	dbus/__init__.py
M	setup.py

commit c5c7185c7638b650608a0854f28afbd94208ab02
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-12-05 18:46:45 +0000

    MANIFEST.in: add TODO (but not COMPAT.txt, which shouldn't go in
    the sdist)

M	MANIFEST.in

commit 49ea22f2a1be697437f7c232613c87920957bc86
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-12-05 18:38:36 +0000

    TODO, COMPAT.txt: add

A	COMPAT.txt
A	TODO

commit aa0710da718fb04079076b6b02c486a177323322
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-12-05 18:37:54 +0000

    dbus/__init__.py, dbus/_dbus.py, dbus/service.py: Improve docstrings,
    imports, __all__

M	dbus/__init__.py
M	dbus/_dbus.py
M	dbus/service.py

commit 31ecbdd6c42cd508ae6510e9655a805094f04b31
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-12-05 18:36:53 +0000

    _dbus_bindings/validation-impl.h: Mark new functions as :Since: 0.80

M	_dbus_bindings/validation-impl.h

commit e4a70180d3ab0eb77264dc1a9f22b2521e5d3607
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-12-05 18:36:21 +0000

    _dbus_bindings/types-impl.h: Always implement Int64 and UInt64 at
    least as a stub, raising NotImplementedError from the constructor
    on 64-bit-deficient platforms. Improve docstrings.

M	_dbus_bindings/types-impl.h

commit 34b237b3e1ed0c6665892f3a4765b09e29bdb3a5
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-12-05 18:34:58 +0000

    _dbus_bindings/signature-impl.h: Improve Signature class docstring

M	_dbus_bindings/signature-impl.h

commit 69d95e61f95c21708596d2f973f46cde61521e68
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-12-05 18:34:21 +0000

    _dbus_bindings/message-append-impl.h,
    _dbus_bindings/message-get-args.h: Use PY_LONG_LONG rather
    than long long to support deficient platforms; consistently use
    NotImplementedError for platforms with no PY_LONG_LONG type

M	_dbus_bindings/message-append-impl.h
M	_dbus_bindings/message-get-args-impl.h

commit 4ed5dcb72bcc41aa9327461a0cad325fa8d1afbd
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-12-05 18:32:25 +0000

    _dbus_bindings/containers-impl.h: Disallow empty structs. Improve
    docstrings

M	_dbus_bindings/containers-impl.h

commit 42ea333ddd2351b4dc87c12089efbda89165783b
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-12-05 18:31:54 +0000

    _dbus_bindings/module.c: Add Constructor, Supported usage field
    declarations for epydoc

M	_dbus_bindings/module.c

commit 4779424a806aecfce2754eb8fc4673f0ce35823e
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-12-05 11:36:50 +0000

    dbus/decorators.py: Say that explicitly_pass_message() is deprecated

M	dbus/decorators.py

commit c08743227d9e78da2d02d1e1f5a621d43d38efc4
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-12-05 11:36:17 +0000

    dbus/glib.py: mention that the new API only works in >= 0.80

M	dbus/glib.py

commit cb7538d514e968c19c3fea74bd5de89330112ed5
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-12-05 11:35:51 +0000

    dbus/introspect_parser.py: Add docstring for
    process_introspection_data()

M	dbus/introspect_parser.py

commit 3c606fda6ea70622ee234cc51d63644ab27e6e55
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-12-05 11:35:23 +0000

    dbus/mainloop/__init__.py, dbus/mainloop/glib.py: Add docstrings

M	dbus/mainloop/__init__.py
M	dbus/mainloop/glib.py

commit 0c7cc37a5ac8fe1a044cfcf6d615aa8341dcb30e
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-12-05 11:34:54 +0000

    dbus/proxies.py: trivial change to process_introspection_data()
    invocation: import and "." => from-import

M	dbus/proxies.py

commit 01a91b63644b7f1e8b23dea20f639a9b13bb36ef
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-12-05 11:33:51 +0000

    setup.py, dbus/matchrules.py: Remove obsolete dbus.matchrules (the
    new implementation is in _dbus)

D	dbus/matchrules.py
M	setup.py

commit 3655f865eb742eacc9f677c34757b0f115a7179b
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-12-05 11:33:10 +0000

    Stop asserting that dbus.Struct(()) works

M	test/test-standalone.py

commit 880a2a87e78355e546dc97f0661f500c1c42da73
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-12-04 14:13:24 +0000

    dbus/__init__.py: remove FIXME comment

M	dbus/__init__.py

commit 8339653949802cb296811fe488b53b721d63e0f7
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-12-04 14:11:40 +0000

    dbus/proxies.py: Ignore unused result from send_message. Pass on
    SignalMatch result from add_signal_receiver() so caller can disconnect
    the signal more easily.

M	dbus/proxies.py

commit 539faca6578f418da4bbbbd9d4a77c2f5fad682c
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-12-04 13:43:42 +0000

    dbus/introspect_parser.py: Import the right exceptions module,
    so we can raise the right exception

M	dbus/introspect_parser.py

commit f6284a1b6552652c84e76585fd208ea361ff288b
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-12-04 13:42:43 +0000

    test/test-signals.py: add test case for signal handling;
    test/run-test.sh: run test-signals.

M	test/run-test.sh
A	test/test-signals.py

commit 14ae543d77a0d6ec72d10ba33c5a50c801f1feab
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-12-04 13:41:48 +0000

    dbus/_dbus.py: Re-work signal matching so it does the right thing
    when name ownership changes

M	dbus/_dbus.py

commit 601a1a2b4bbabebb248310334a60413bffde9780
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-12-04 13:35:24 +0000

    _dbus_bindings/bus-impl.h: Correct docstring for
    Bus.remove_match_string

M	_dbus_bindings/bus-impl.h

commit a61bb622aa26d48de7cb1cb269d4b4cfc75dda3f
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-30 17:23:38 +0000

    dbus._dbus, dbus.decorators, dbus.service: Update names of newly
    public low-level methods

M	dbus/_dbus.py
M	dbus/decorators.py
M	dbus/service.py

commit 469c2586d661e16193c9d22772b37d2fe98ad5da
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-30 17:22:49 +0000

    _dbus_bindings/pending-call-impl.h: Fix reference counting

M	_dbus_bindings/pending-call-impl.h

commit 2c5f7716211f0157bf6a4fe93ea3df7f03c5f5e8
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-30 17:15:00 +0000

    _dbus_bindings/mainloop-impl.h: Fix compilation with debug enabled

M	_dbus_bindings/mainloop-impl.h

commit 114f98df9c1a6897b0030430550a23b3d5da0a83
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-30 17:02:02 +0000

    dbus.proxies: Alter calls to methods which have become public

M	dbus/proxies.py

commit 535e860b648798aae2644b2b222f19990484be88
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-30 17:00:07 +0000

    setup.py: Add dbus.lowlevel

M	setup.py

commit 4237e29b6f76e7dcfc1b34b984f9640e9a57fb7d
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-30 16:59:48 +0000

    dbus/__init__.py: Document existence of dbus.lowlevel

M	dbus/__init__.py

commit 0586633996ed3d529588b1c429f2dd02ecb9bf5a
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-30 16:59:22 +0000

    _dbus_bindings/pending-call-impl.h: Make block() public and work
    around dbus_pending_call_set_notify() race

M	_dbus_bindings/pending-call-impl.h

commit 181ff34cbd75fdb0cdfe71628f22d7b5f4b34d7b
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-30 16:58:18 +0000

    dbus.lowlevel: Add module exposing lower-level classes for advanced
    users
    _dbus_bindings/message-impl.h: Indicate that Message classes'
    "official"
	    location is dbus.lowlevel

M	_dbus_bindings/message-impl.h
A	dbus/lowlevel.py

commit 79abbf3a2c3ddd67e8b655f597f74cca347c4a26
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-30 16:56:49 +0000

    Make send, etc. public, but rename to send_message etc.

M	_dbus_bindings/conn-methods-impl.h

commit 7db487a5e4efcdaf6c8ff59dfa6f26c5042ee1e9
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-30 13:48:26 +0000

    Document the absence of dbus.mainloop.MainLoop in this release.
    Add get_object_by_unique_name to Bus objects.

M	_dbus_bindings/mainloop-impl.h
M	dbus/_dbus.py
M	dbus/proxies.py

commit 69660ac1b650a2328f21dc2d9953700d1efe1e17
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-30 11:08:41 +0000

    API_CHANGES.txt: Document mainloop changes

M	API_CHANGES.txt

commit 77778920c41ddc3fe99771f4bd0f865e9550868c
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-30 11:08:08 +0000

    dbus/mainloop/__init__.py: Export glib submodule; improve docstrings

M	dbus/mainloop/__init__.py

commit c5e4c6f8d67ad4305ab7e2254de10a6320b9c305
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-30 11:07:16 +0000

    Emulate old bus_request_name, bus_release_name

M	dbus/dbus_bindings.py

commit e54d3f2c370ebcdb07269b49081519017981bcdb
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-30 11:06:53 +0000

    dbus/service.py: Allow a Connection as parameter to Object
    constructor, to avoid having to have a well-known bus name

M	dbus/service.py

commit 6120021f3563f2df73fc35b2ded4ae30958a47da
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-30 11:05:55 +0000

    dbus/__init__.py: Export get_default_main_loop, set_default_main_loop
    and submodules service and mainloop

M	dbus/__init__.py

commit 9c1b58183966ae8a622796ae3df4a5a699bfd5fc
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-30 11:05:17 +0000

    dbus/glib.py: Use new API to set main loop as default

M	dbus/glib.py

commit f3a23de9e022e708b9884d36f65ab9ccaf634bee
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-30 11:04:48 +0000

    dbus/_dbus.py: Import get_default_main_loop, set_default_main_loop

M	dbus/_dbus.py

commit 605a8ec83eba854b319d94c9fee3467e52999005
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-30 11:04:06 +0000

    _dbus_glib_bindings/module.c: Support set_as_default keyword argument

M	_dbus_glib_bindings/module.c

commit 3aff827e8fe14a9fb9b1846e00c32f01afee40b2
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-30 11:03:19 +0000

    _dbus_bindings: Change default-main-loop API to use global functions
    get_default_main_loop, set_default_main_loop. Improve docstrings

M	_dbus_bindings/bus-impl.h
M	_dbus_bindings/conn-impl.h
M	_dbus_bindings/conn-methods-impl.h
M	_dbus_bindings/mainloop-impl.h
M	_dbus_bindings/module.c

commit 919cd3aeac6676b19246091a6ff762bb6e154773
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-24 13:00:13 +0000

    include/dbus_bindings.h: Put _dbus_bindings in a static variable
    when imported
    into e.g. _dbus_glib_bindings. Re-indent for consistency.

M	include/dbus_bindings.h

commit 16d460e5c4987d67a4db248c5fd1a69ca8b0ab23
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-24 12:58:39 +0000

    setup.py: Don't remove ChangeLog on clean.
    Yes, it's generated, but that just means it shouldn't be in the git
    repo; it
    should still appear in tarballs.

M	setup.py

commit 894bafef2cae44d4b41845ed900cffe65dd63900
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-23 16:44:21 +0000

    _dbus_bindings/mainloop-impl.h: Add Watch and Timeout types
    _dbus_bindings/generic-impl.h: Add Glue_tp_hash_by_pointer and
    Glue_tp_richcompare_by_pointer to support the above

M	_dbus_bindings/generic-impl.h
M	_dbus_bindings/mainloop-impl.h

commit aabf7935466aee3c8cc82f9c08a39017fcb603f8
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-23 16:43:05 +0000

    _dbus_bindings/conn-methods-impl.h: Correct docstring: there is
    no dbus.mainloop.base

M	_dbus_bindings/conn-methods-impl.h

commit 4a51f14170ffa4750b459fa4250bd7ce89bfa801
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-22 18:27:27 +0000

    Bump version to 0.80pre2 (or internally 0.79.2)

M	dbus/__init__.py
M	setup.py

commit 49c03f8525e321467eca862b186fa58ff2621f18
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-22 18:25:47 +0000

    MANIFEST.in: include MANIFEST.in itself

M	MANIFEST.in

commit f064ecd77fb99506ea32c500e687a59ee68d9425
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-22 18:24:48 +0000

    Include top-level dbus_bindings.py (missed in previous commit)

A	dbus_bindings.py

commit 5bcdc1378cceb0885fc2138e55259f15a83fa1ce
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-22 18:18:13 +0000

    Add short-term backwards compatibility with dbus_bindings (various
    programs try to catch dbus_bindings.DBusException)

M	dbus/__init__.py
M	dbus/_dbus.py
R053	_dbus_bindings/dbus_bindings.py dbus/dbus_bindings.py
M	setup.py

commit 08971243466ab63ea19a20a1c1f1fd0d98714541
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-22 17:34:56 +0000

    Remove _dbus_bindings/test.py (duplicates bits of test-standalone)

D	_dbus_bindings/test.py

commit 4a0902b38a50d34f28ce022fe0684aec8ce91718
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-22 17:33:59 +0000

    MANIFEST.in: pass through LC_ALL=C sort -k2

M	MANIFEST.in

commit f2c08d18ac2645311e4c0d94da0b06b3754a6def
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-22 17:28:56 +0000

    Add improved main-loop integration.
    Currently only GLib (with the default main context) and a "null
    main loop"
    are supported, but a pure-Python main loop could be supported without
    incompatible API changes.

M	_dbus_bindings/bus-impl.h
M	_dbus_bindings/conn-impl.h
M	_dbus_bindings/conn-methods-impl.h
A	_dbus_bindings/mainloop-impl.h
M	_dbus_bindings/module.c
M	_dbus_glib_bindings/module.c
M	dbus/__init__.py
M	dbus/_dbus.py
M	dbus/glib.py
A	dbus/mainloop/__init__.py
C081	dbus/glib.py	dbus/mainloop/glib.py
M	dbus/proxies.py
M	include/dbus_bindings.h
M	setup.py

commit aad4ee9dfbe203e74bffb0ec93bdd180143e4cee
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-21 18:13:14 +0000

    _dbus_bindings/conn-impl.h: Check for errors, printing them if
    necessary, before releasing GIL

M	_dbus_bindings/conn-impl.h

commit df744af92832a69dbdbe97014bee38f6271ca30a
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-16 14:34:21 +0000

    Bump version to 0.80~pre1 (but in __init__.py, write it as 0.79.1)

M	dbus/__init__.py
M	setup.py

commit 9e682a1a6d60bc31b63552c240718a9b7583f1c7
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-16 14:25:27 +0000

    MANIFEST.in: remove README, which doesn't exist

M	MANIFEST.in

commit 280061c0e03fb59f1eabf950fa4ab0716b4b7a39
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-15 19:26:56 +0000

    dbus._dbus, dbus.proxies: Raise RuntimeError when user tries to do
    async calls or receive signals without a main loop
    This makes the Connection base class useless, but should let
    people know
    that they need to use dbus.glib for async functionality. I do
    intend to
    replace the mainloop integration so GLib isn't the only option.

M	dbus/_dbus.py
M	dbus/proxies.py

commit 48a87921075edbe3b94cdd1ddfef90b8f6e3a152
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-15 19:02:20 +0000

    HACKING.txt: fix typo

M	HACKING.txt

commit 192d203341d584a3f6502d0c3fb45d26870e7698
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-15 16:31:23 +0000

    dbus._dbus, cross-test-server: fix signal calling convention support,
    and test it in cross-test-server

M	dbus/_dbus.py
M	test/cross-test-server.py

commit 1974c56c89080df4d38eba8b5d251680b5c42131
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-15 16:04:38 +0000

    dbus._dbus, dbus.matchrules, dbus.proxies: Support utf8_strings and
    byte_arrays calling convention options to signal handlers. Handle
    arg matches containing "'" correctly

M	dbus/_dbus.py
M	dbus/matchrules.py
M	dbus/proxies.py

commit 069d09797e22cf6d70c82c9b39edb3a094dd1e83
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-15 15:51:28 +0000

    dbus._dbus: Whitespace

M	dbus/_dbus.py

commit b02991564418e2136ac305669afa8457595fd397
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-15 15:44:09 +0000

    _dbus_bindings/bus-impl.h: Remove duplicate registration of
    name_has_owner method

M	_dbus_bindings/bus-impl.h

commit d3aa18da0ee31f4c7c6e17b9d027237021402292
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-15 15:16:59 +0000

    Makefile: Produce warning about "development use only" for all
    targets. Set targets PHONY. Make docs depend on build, now the build
    is quicker

M	Makefile

commit 6008b37253f7a04b563b28a2aa9357de8cfd29d1
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-14 15:48:47 +0000

    - dbus.service.Object, dbus.decorators.method: Allow utf8_strings and
      byte_arrays parameters kwargs when exporting a
      method. These change the calling convention in the same way as
      Message.get_args_list().
    - dbus.proxies.ProxyMethod: allow the same kwargs to be passed to
    any proxy
      method; this time, they change the representation of the remote
      method's
      return value(s).
    - Test that the above work
    - Improve correctness of setting the NAME_FLAG_* flags
    - Whitespace tweaks (remove hard tabs)

M	dbus/decorators.py
M	dbus/proxies.py
M	dbus/service.py
M	test/cross-test-server.py
M	test/test-client.py
M	test/test-service.py

commit 21b10a103d91651d9ac55d2d22832a5df251f45e
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-14 14:31:43 +0000

    Test UTF8String as well as String

M	test/cross-test-client.py

commit 7416bf25886650aec413eea2ca2c42b69f5a3537
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-14 14:30:19 +0000

    Update tests for the new variant API

M	test/cross-test-client.py
M	test/cross-test-server.py
M	test/run-test.sh
M	test/test-client.py
M	test/test-service.py
M	test/test-standalone.py

commit 1761e5bd810ea45776e2d1c82193b73184ed3eda
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-14 14:29:13 +0000

    Update API_CHANGES.txt

M	API_CHANGES.txt

commit 9997fd83b55e16d1c50fe04ce57951483f867982
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-14 14:28:36 +0000

    Makefile:
    - Clarify that this is only for d-p developers, not for packagers or
      end users.
    - Build with lots of warnings, and -Werror, but disable warning
    about partially
      uninitialized structs since this is conventional in Python
      (for source
      backwards compatibility).

M	Makefile

commit 1a4b9502f1d06e94fd5f90bfd85cf4d47b88c1fd
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-14 14:26:14 +0000

    setup.py: Import CFLAGS from environment (used by development Makefile
    for warning control)

M	setup.py

commit 4ce650d5c4ca5807c8eb4bc6f8074ff6eddab359
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-14 14:25:39 +0000

    Remove Variant from API, add UTF8String

M	dbus/__init__.py

commit bf5550fdcbd02a55d18f17d2b79e692145dfad58
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-14 14:25:04 +0000

    Import the newly re-added types into dbus.types

M	dbus/types.py

commit 0bd42c7cce423ce04def63217675b730228294af
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-14 14:24:37 +0000

    - Convert Message.get_args_list and Message.append to the new way
    of handling variants
    - Remove most of the options for get_args_list and just do the
    right thing

M	_dbus_bindings/message-append-impl.h
M	_dbus_bindings/message-get-args-impl.h

commit b2ba98067873acdc8f7989b63384fc1d37da49d1
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-14 14:20:10 +0000

    - Add variant_level to Array, Dict, Struct
    - Remove Variant type

M	_dbus_bindings/containers-impl.h

commit 481428655794be4491cf7fd33f86b8e9e059a2d6
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-14 14:18:30 +0000

    - Remove special case for ObjectPaths when registering object paths -
    now that
      they have a __dict__, they can reference the Connection, which
      is bad
    - Accept Unicode object paths for deregistration
    - Correctly raise an exception on non-str, non-unicode arguments
    where an
      object-path is expected
    - Annotate unused arguments

M	_dbus_bindings/conn-methods-impl.h

commit 5c908374f838e7b88c6725c6b54308316d8ed798
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-14 14:15:51 +0000

    - Remove float types from types-impl.h.
    - Re-order.
    - Subclass DBusPythonInt, etc.
    - Add UTF8String and (unicode) String types

M	_dbus_bindings/types-impl.h

commit 5bed478bed959ad477efac7da01ced0d0a76d6ed
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-14 14:12:47 +0000

    Make Signature a subclass of DBusPythonString

M	_dbus_bindings/signature-impl.h

commit 23013477f373aae9569e05bf793dcb3ec92530fb
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-14 14:12:11 +0000

    - Add Double type (and Float type #if'd out, ready for Alp's 32-bit
    float type
      if/when it's added to libdbus)
    - Include "abstract" base classes and float types in module.c

A	_dbus_bindings/floattypes-impl.h
M	_dbus_bindings/module.c

commit 3c5d7904ea641f2b4adcf1edb1165e1381119120
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-14 14:10:16 +0000

    - Make Byte a subclass of DBusPythonInt
    - Make ByteArray a subclass of DBusPythonString
    - Remove Byte_as_uchar, Byte_from_uchar, ByteArray_as_ucharptr,
      ByteArray_from_uchars helpers
    - Don't try to do clever things for Byte memory allocation

M	_dbus_bindings/bytes-impl.h

commit 77c594008a1a4a655a94868c0028ef6fdec0b492
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-14 14:01:25 +0000

    Add abstract-impl.h: abstract base classes for D-Bus types that
    subclass int/float/long/str, with a variant_level attribute.

A	_dbus_bindings/abstract-impl.h

commit ec4382fc301ddd60c4abfa0175e912880980de68
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-14 14:00:33 +0000

    Annotate UNUSED arguments

M	_dbus_bindings/bus-impl.h
M	_dbus_bindings/message-impl.h
M	_dbus_bindings/pending-call-impl.h
M	_dbus_bindings/validation-impl.h
M	_dbus_glib_bindings/module.c

commit 7e742ca5b5543ea290175f9351053f9ad6cfd492
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-14 13:58:02 +0000

    Add Glue_immutable_setattro, DEFINE_CHECK, UNUSED attribute. Remove
    generic repr() functions

M	_dbus_bindings/generic-impl.h

commit 3ab7a818a7a7a92a15de50ef848318ca61a6d2df
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-11-02 13:24:03 +0000

    Revert switch from Byte being an int subclass to a str subclass
    following discussion with J5.
    Switching Byte to be a single-character string is arguably more
    Pythonic, but
    needlessly breaks API.

M	_dbus_bindings/bytes-impl.h
M	_dbus_bindings/generic-impl.h
M	_dbus_bindings/message-append-impl.h
M	_dbus_bindings/message-get-args-impl.h
M	_dbus_bindings/types-impl.h
M	test/cross-test-client.py
M	test/cross-test-server.py
M	test/test-standalone.py

commit 6de547af3bd7d2c8b77464435c45d22bba702cc7
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-26 10:22:26 +0100

    Correct spellings in NEWS

M	NEWS

commit 83f8ed0935c37b3b5668d1a512370a51f73ccc27
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-25 22:14:02 +0100

    Update NEWS for release.

M	NEWS

commit c449668fd2b8b92fde03a83ba76a0eb8bb2a9326
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-25 21:12:03 +0100

    only use -Wfloat-equal if compiler supports it
    Closes #7658. Thanks to Jens Granseuer <jensgr@gmx.net> for the patch.

M	configure.ac

commit 505e48a851e38664c45e482b8f75ebbfd27fe278
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-25 21:00:18 +0100

    return NULL from g_return_val_if_fail in dbus_g_proxy_begin_call
    Closes #4159.

M	dbus/dbus-gproxy.c

commit 62acdb49360dfbf994ef38c8e97d9190d30149f3
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-25 20:26:04 +0100

    Add dbus-gidl.h to IGNORE_HFILES for doxygen docs

M	doc/reference/Makefile.am

commit 0d9889a99241aebc863237faf8126663c97ae059
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-25 20:17:55 +0100

    Update tools/Makefile.am for new dbus-binding-tool behaviour

M	tools/Makefile.am

commit 0aa2db3f6f18bff7d5c62a00f052ca89e21b269f
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-25 20:03:31 +0100

    Remove bashism in make-dbus-glib-error-enum.sh
    Closes #6700.

M	dbus/make-dbus-glib-error-enum.sh

commit 74bcfcfbc242325ca470d483817ae37fa8d41f25
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-25 19:37:12 +0100

    Fix introspection when object has exported properties.
    dbus-gobject:write_interface was completely broken
    Fix thanks to mccann@jhu.edu.
    Closes #8607.

M	dbus/dbus-gobject.c

commit 3647d0df5780967dd505d3c046ab37ada70529bf
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-25 19:14:50 +0100

    Require --prefix in dbus-binding-tool
    Closes #4185.

M	dbus/dbus-glib-tool.c

commit 054c6476495a6f85ae708ed81b9053bf666897b7
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-25 18:34:49 +0100

    Dont shadow index.
    Rename useage of index to index_. Thanks stdlib...
    Closes #8353.

M	dbus/dbus-gtype-specialized.c
M	dbus/dbus-gvalue.c

commit d3a494dced8e3f2de111f23ae3fbab6e32f4051a
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-25 18:27:20 +0100

    Fix small leak when marshal_table is destroyed
    Closes #6870 with patch from Richard Hult <richard@imendio.com>

M	dbus/dbus-gobject.c

commit 9bfec032a72e7af5945336fecbb9b6e0b6f2de9e
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-25 18:24:53 +0100

    Fixes crash if disposing one DBusGProxy causes another for the
    same service
    to be unrefed in a destoyed callback.

M	dbus/dbus-gproxy.c
M	test/core/test-dbus-glib.c

commit 53bf71bd852810a271d13a73ba445622616c711c
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-25 16:41:38 +0100

    Bump version to 0.72
    and use modern AC_INIT, AM_INIT_AUTOMAKE

M	configure.ac

commit 28a54df202f089a3e00930e36a787c175501be41
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-25 14:36:25 +0100

    Clean generated run-with-tmp-session-bus.conf on make clean

M	test/core/Makefile.am

commit bcf15d72892582c28755563ca63182c198ef8f64
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-25 14:35:25 +0100

    Actually run unit tests and checks when doing make distcheck

M	Makefile.am

commit 7c21166ef7ce9b370448a39c6c6744813933abee
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-25 14:33:53 +0100

    Use TEST_CORE_SERVICE_BINARY path for core test service file

M	test/data/valid-service-files/debug-glib.service.in

commit d6980d9d59edcf14cc1ab5af3945bd740a3f2495
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-25 14:32:14 +0100

    Use dbus-daemon --introspect to generate DBus service introspect xml

M	tools/Makefile.am

commit 505f5486f055558934718672f1328b52fab6cd6e
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-25 14:30:23 +0100

    Actually make interfaces tests work
    Working interfaces/Makefile.am
    Make service file for interfaces test service
    Fix up configure.ac appropriately.
    Sanitise service/object namespace for interfaces tests
    Remove accidentally added test/interfaces/.Makefile.am.sw

M	configure.ac
M	test/interfaces/Makefile.am
M	test/interfaces/run-test.sh
M	test/interfaces/test-client.c
M	test/interfaces/test-goodbye.xml
M	test/interfaces/test-hello.xml
M	test/interfaces/test-interfaces.c
M	test/interfaces/test-objects.c
M	test/interfaces/test-server.c
M	test/interfaces/test-song.xml

commit 4a479fe9516b141d94e57489f7e624ea6b94cb94
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-24 19:51:12 +0100

    Make interfaces tests work
    Working interfaces/Makefile.am
    Make service file for interfaces test service
    Fix up configure.ac appropriately.
    Sanitise service/object namespace for interfaces tests
    Remove accidentally added test/interfaces/.Makefile.am.swp

A	test/data/valid-service-files/interfaces-test.service.in
D	test/interfaces/.Makefile.am.swp

commit 4db00a26f0c67db96ff6185286658278678e23bd
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-24 18:07:26 +0100

    Changes for test/interfaces
    Changed configure.ac and test/Makefile.am

M	configure.ac
M	test/Makefile.am

commit 4f6a75760f55eeb79113d09baa46ecdd09e100e6
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-24 16:36:08 +0100

    Add tests for new interfaces functionaility
    From bug #5173

A	test/interfaces/.Makefile.am.swp
A	test/interfaces/.gitignore
A	test/interfaces/Makefile.am
A	test/interfaces/run-test.sh
A	test/interfaces/test-client.c
A	test/interfaces/test-goodbye.xml
A	test/interfaces/test-hello.xml
A	test/interfaces/test-interfaces.c
A	test/interfaces/test-interfaces.h
A	test/interfaces/test-objects.c
A	test/interfaces/test-objects.h
A	test/interfaces/test-server.c
A	test/interfaces/test-song.xml

commit 4467ffca15e4783b7e90f1349be18fca3807b6cb
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-24 15:42:42 +0100

    Bump GLib dependancy to 2.6
    Closes #4390.

M	configure.ac

commit 6ac144ff50d6c87795b470fb74cc1c0dd3e549a7
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-17 17:06:48 +0100

    Add gobject-2.0 to dbus-glib-1.pc.in
    glib bindings depend on gobject. Its amazing we've got this far with
    noone noticiing this bug...

M	dbus-glib-1.pc.in

commit 263e3ad1cf99e7cd115e7051ed1ea3f2cc35c587
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-10-05 17:37:07 +0100

    Seth was a Red Hat employee when contributing to dbus-python: alter
    copyright notices accordingly

M	dbus/__init__.py
M	dbus/_dbus.py
M	dbus/decorators.py
M	dbus/introspect_parser.py
M	dbus/matchrules.py
M	dbus/proxies.py
M	dbus/service.py
M	setup.py
M	test/test-client.py
M	test/test-service.py

commit da74c4cce7fee0dc4b5f0fa2144211f1bd0d9cdd
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-10-05 17:36:25 +0100

    test/test-standalone.py: Test API guarantee that integer types
    subclass int or long

M	test/test-standalone.py

commit 03e629cabe1100527c467fc5bf2a8aa4f7d3a6f5
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-04 19:30:46 -0400

    Remove accidentally added test/interfaces stuff in the autotools

M	configure.ac
M	test/Makefile.am

commit 8e2c2ba5f8f0a25708bac86cafa46be02a1bdb78
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-04 19:16:35 -0400

    Fix up tests
    Puts all exposed servies in the org.freedesktop.DBus.GLib namespace
    Make tests run again!

M	test/core/run-test.sh
M	test/core/test-dbus-glib.c
M	test/core/test-profile.c
M	test/core/test-service-glib.c
M	test/core/test-service-glib.xml
M	test/core/test-thread-client.c
M	test/core/test-thread-server.c
M	test/data/valid-service-files/debug-echo.service.in
M	test/data/valid-service-files/debug-glib.service.in
M	test/test-service.c

commit c0bb50ca11675274464d91ed5651676449ce360d
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-04 19:13:34 -0400

    Update autofoo for new tests layout

M	configure.ac
M	test/Makefile.am

commit 33412cde926a9fc6ce86618835661bbc48475177
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-10-04 23:43:29 +0100

    Make autogen a bit more useful for maintainers
    Adds default configure parameters - the ones you usually want ;)

M	autogen.sh

commit 6a9cafc90a31cf1d396b8a492fc1d618ef03dc65
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-10-02 15:28:00 +0100

    test/cross-test-client.py: Add more workarounds for odd dbus-java
    behaviour. Compare InvertMapping results better.

M	test/cross-test-client.py

commit df50fee665eb68d27394123ca79475bd37a0c528
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-10-02 15:26:42 +0100

    Produce debug output

M	test/cross-test-server.py

commit 3ad6bd460e0addc46cb503984e6d9cf2868111f5
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-10-02 15:26:17 +0100

    Use a temp variable to make crash debugging easier (although I now
    can't reproduce the crash...)

M	_dbus_bindings/pending-call-impl.h

commit 8801e3159d5a5a048eb30bd030ecb5dbd16610f9
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-29 20:47:09 +0100

    Make cross-test stricter by including extreme values for integers,
    etc.

M	test/cross-test-client.py

commit 52336a79a623dc2674ce22965eb6f0b010078b5e
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-29 20:46:13 +0100

    When trying to validate an int64 it helps if you put it in a 64-bit
    variable.

M	_dbus_bindings/types-impl.h

commit 0590a83202f27a98b8bb898876339a9b02a60896
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-28 18:17:41 +0100

    test/cross-test-client.py, test/cross-test-server.py: Start to fix
    for interop with dbus-java:
    * Don't assume we have introspection data - only call methods with
    correctly
      typed parameters
    * Make InvertMapping check order-independent
    * Make signal test not fail if the Triggered signal is meant to come
    from /Test
    * Use logging rather than sys.stderr

M	test/cross-test-client.py
M	test/cross-test-server.py

commit dd48a45dec3704ee459a418734485985e5fba205
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-28 16:03:11 +0100

    test/cross-test-client.py, test/cross-test-server.py: Output in the
    same format dbus-java does (the <> in the specification were not
    meant to be literal, apparently)

M	test/cross-test-client.py
M	test/cross-test-server.py

commit 3d645c9743e630d5064566a3a35d1e2c35d76cc2
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-28 16:00:22 +0100

    dbus/_dbus.py, dbus/proxies.py: Amend docstrings for signal receiving

M	dbus/_dbus.py
M	dbus/proxies.py

commit f9d2961b45a085dc5d8febf8b1ed0f9caa9558ec
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-28 15:59:17 +0100

    setup.py: Remove "import extract" (no longer exists)

M	setup.py

commit fcd45af4aa4fd81454f1c8a8fa7b8b5790f44b54
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-27 14:26:44 +0100

    Add copyright, AFL2.1, GPL2 notices, which might even be correct...

    The lists of copyright holders are derived from the D-Bus CVS
    changelog: I've
    erred on the side of adding people to the list rather than not.

    For now I've assumed that J5's contributions are owned by Red Hat,
    Collabora
    people's contributions (Rob McQueen, Rob Taylor, Ole Andre Ravnaas,
    myself) are owned by Collabora and everything else is owned by
    the author.

M	dbus/__init__.py
M	dbus/_dbus.py
M	dbus/decorators.py
M	dbus/glib.py
M	dbus/introspect_parser.py
M	dbus/matchrules.py
M	dbus/proxies.py
M	dbus/service.py
M	setup.py
M	test/cross-test-client.py
M	test/cross-test-server.py
M	test/crosstest.py
M	test/test-client.py
M	test/test-service.py
M	test/test-standalone.py

commit 329dc1e985c5090bba889e8ac5543d47c6abb5e2
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-27 14:16:29 +0100

    Put AUTHORS in the right order

M	AUTHORS

commit b47e9bca585b1104f6d7309b02da27b123015611
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-09-27 14:12:26 +0100

    Update COPYING and HACKING to be correct for dbus-glib

M	COPYING
M	HACKING

commit 50541a23757d59d93918db52c9e9c65596d943c5
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-09-27 14:04:19 +0100

    Autoconf changes from test/glib -> test/core move

M	configure.ac
M	test/Makefile.am

commit 01024785e818e72c06ba44e8feea926e8aa8f7a8
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-09-27 14:02:42 +0100

    add an .gitignore

A	.gitignore

commit 003840bd5f08802fb2a63b3c49f9d0685f6f292b
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-09-27 13:56:39 +0100

    Move tests/glib to test/core
    Move tests/glib to test/core in preparation for seperate functionality
    tests

R100	test/glib/Makefile.am	test/core/Makefile.am
R100	test/glib/my-object-marshal.list
test/core/my-object-marshal.list
R100	test/glib/run-test.sh	test/core/run-test.sh
R100	test/glib/test-dbus-glib.c	test/core/test-dbus-glib.c
R100	test/glib/test-profile.c	test/core/test-profile.c
R100	test/glib/test-service-glib.c	test/core/test-service-glib.c
R100	test/glib/test-service-glib.xml test/core/test-service-glib.xml
R100	test/glib/test-thread-client.c	test/core/test-thread-client.c
R100	test/glib/test-thread-server.c	test/core/test-thread-server.c
R100	test/glib/test-thread.h test/core/test-thread.h

commit 7aed1104ddafd10c708234189345c4696cc2759e
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-27 13:50:07 +0100

    dbus/extract.py: Remove (no longer used now we're not using Pyrex)

D	dbus/extract.py

commit de74dd48194f9aa3629d7b65dd89e0b1339f8654
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-09-27 13:39:24 +0100

    Rename configure.in to configure.ac for modernity

R100	configure.in	configure.ac

commit b4d4ab76adabd4a8d0a14efa678c057f51d23431
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-27 13:30:49 +0100

    Extend and correct docstrings. Set epydoc to expect reStructuredText
    by default.

M	Makefile
M	_dbus_bindings/conn-methods-impl.h
M	_dbus_bindings/message-append-impl.h
M	_dbus_bindings/message-get-args-impl.h
M	_dbus_bindings/validation-impl.h

commit 78a7b67f03f9267fd47ab3686f971d1190cadf1a
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-27 13:03:26 +0100

    Cast to PyCFunction to avoid compiler warning for function with kwargs

M	_dbus_bindings/module.c

commit 274b4601130abb67b5b7f68de38c71ee7a64d3fb
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-27 13:02:53 +0100

    Correct argument parsing in validate_bus_name

M	_dbus_bindings/validation-impl.h

commit b235e382198fc7599a2183a5b4cba10f650659bc
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-27 13:00:58 +0100

    setup.py: Remove _util from modules to install

M	setup.py

commit cdc40aa20b52b4a8e9910e8fe48824205b4e7591
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-27 12:50:06 +0100

    _dbus_bindings: Expose name-validation functions to Python code.
    dbus: Remove _util module in favour of using the name-validation
    functions
    from _dbus_bindings.

M	_dbus_bindings/module.c
M	_dbus_bindings/validation-impl.h
D	dbus/_util.py
M	dbus/decorators.py

commit 9c7ee716288ffc80d1c931c84cc2b3242acf0b1e
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-27 12:47:55 +0100

    Minor docstring correction

M	_dbus_bindings/types-impl.h

commit 4c53d31fcc5b2f3a8e5578cae57e51db84a396fb
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-27 12:47:27 +0100

    _dbus_bindings/message-get-args-impl: Fix ByteArray unmarshalling.

M	_dbus_bindings/message-get-args-impl.h

commit aa5cb1a66951705540a51645eb8efd3cbcf6788e
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-27 12:45:58 +0100

    dbus/_dbus.py: Now that Bus subclasses Connection, simplify signature
    of signal filter

M	dbus/_dbus.py

commit 747b2b9d37329796c4bf0bdaa1ca99e1d82d420d
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-27 11:55:46 +0100

    Add a test case for the various options to get_args_list.
    Fix ByteArray unmarshalling.

M	test/test-standalone.py

commit de8aeda1687948230bb97fa4083744087356e738
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-27 11:01:18 +0100

    .gitignore: Ignore MANIFEST, dist/

M	.gitignore

commit a7bcad2d2239e28bb32ef7cfe74105c514a32ee5
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-27 11:00:35 +0100

    _dbus_bindings/module.c: PEP7-style whitespace

M	_dbus_bindings/module.c

commit 888110c46b864b613a3281e3d0bf76ed85b04b01
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-27 10:59:01 +0100

    _dbus_bindings/module.c: Add __docformat__, top-level docstring.
    Also don't abort() if adding constants to the module fails.

M	_dbus_bindings/module.c

commit 552b7b4c997ea44de86f68e79341ecf323b9ead5
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-27 10:44:25 +0100

    MANIFEST.in: Include added files, stop trying to include the Pyrex
    version

M	MANIFEST.in

commit 84be4d92f3f913f04941562ffb4cde5d21a63b37
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-27 10:43:21 +0100

    Makefile, setup.py: Stop forcing -O0 -g

M	Makefile
M	setup.py

commit 78ce34da2c1cea65372b96505e21529d3896634f
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-27 10:38:44 +0100

    Remove the Pyrex implementation of dbus_bindings and
    dbus_glib_bindings

D	dbus/_dbus_bindings-exceptions.pxi
D	dbus/_dbus_bindings-types.pxi
D	dbus/_dbus_bindings.pxd.in
D	dbus/_dbus_bindings.pyx
D	dbus/_dbus_glib_bindings.pyx
D	dbus/dbus_h_wrapper.h

commit 97d01a1d540e5ec31b752c31ad9f2b794eddf472
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-26 20:50:58 +0100

    Throughout dbus-python: Use the C implementation.
    Add document API_CHANGES.txt listing visible API changes.
    Add more test cases, for low-level Python <-> D-Bus type mappings.
    Amend existing test cases to cope with the API changes.

A	API_CHANGES.txt
M	dbus/_dbus.py
M	dbus/decorators.py
M	dbus/exceptions.py
M	dbus/proxies.py
M	dbus/service.py
M	dbus/types.py
M	setup.py
M	test/cross-test-client.py
M	test/cross-test-server.py
M	test/run-test.sh
M	test/test-client.py
M	test/test-service.py
A	test/test-standalone.py

commit e0552c3d9cfe22e9ea1b3c2874dc4f79d6948b21
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-26 20:48:55 +0100

    _dbus_bindings: Correct get_args -> get_args_list change

M	_dbus_bindings/message-get-args-impl.h
M	_dbus_bindings/message-impl.h

commit 030e4fe368e976cb20d223d45ae787c12686b3f4
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-26 19:30:58 +0100

    _dbus_bindings/message-get-args-impl.h: Revert gratuitous API change
    Message has a method get_args_list() returning a list again,
    rather than
    a method get_args() returning a tuple.

M	_dbus_bindings/message-get-args-impl.h

commit 24eb072bd8aabbc4d0f916b981e2283be0848e97
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-26 19:27:24 +0100

    dbus/matchrules.py: Use absolute import

M	dbus/matchrules.py

commit 97900c452754b832d0817edc03f3e00fe888d24a
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-26 18:53:55 +0100

    Add a C reimplementation of the formerly-Pyrex bits of dbus-python.

A	HACKING.txt
A	_dbus_bindings/bus-impl.h
A	_dbus_bindings/bytes-impl.h
A	_dbus_bindings/conn-impl.h
A	_dbus_bindings/conn-methods-impl.h
A	_dbus_bindings/containers-impl.h
A	_dbus_bindings/dbus_bindings.py
A	_dbus_bindings/debug-impl.h
A	_dbus_bindings/exceptions-impl.h
A	_dbus_bindings/generic-impl.h
A	_dbus_bindings/message-append-impl.h
A	_dbus_bindings/message-get-args-impl.h
A	_dbus_bindings/message-impl.h
A	_dbus_bindings/module.c
A	_dbus_bindings/pending-call-impl.h
A	_dbus_bindings/signature-impl.h
A	_dbus_bindings/test.py
A	_dbus_bindings/types-impl.h
A	_dbus_bindings/validation-impl.h
A	_dbus_glib_bindings/module.c
A	include/dbus_bindings.h

commit 0a189b73baa8e7b1d1d7743534b635fabe1aaf80
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-26 18:43:04 +0100

    Add Makefile rule to do a clean build (setup.py doesn't track .h
    dependencies properly) and make it the default

M	Makefile

commit d1e74259da30f732ebf58057188478367b492840
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-26 18:42:16 +0100

    Add self to AUTHORS

M	AUTHORS

commit b17fc759d2d5422ce287706d276443fa338cbf5a
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-09-24 14:34:19 +0100

    Fix memleak in lookup_or_register_specialized.
    Applies fix from Daniel d'Andrada Tenório de Carvalho, closing
    bug #7352.

M	dbus/dbus-gtype-specialized.c

commit 4d6aa726814295cfabab95a51d2e320d02b72dde
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-09-24 14:32:52 +0100

    Add m4 directory
    Add missing changes from last commit.

M	Makefile.am
M	autogen.sh
M	configure.in

commit 1571d556aa5f087e52074e5fd7c5e5c29667c551
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-09-24 14:07:50 +0100

    Add m4 directory
    Add an m4 directory and add gtk-doc.m4, which is installed in the
    tree by gtkdocize.

A	m4/Makefile.am

commit fcc2ccdb19bfa25db005494271dbd91a3205c3a6
Merge: 99e1085 3f978cf
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-09-21 03:44:22 +0100

    Merge branch 'master' of
    git+ssh://git.freedesktop.org/git/dbus/dbus-glib

commit 3b1b6ec26d55e08c4a9fbed12714913974f8e0c3
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-08 18:10:06 +0100

    dbus/service.py, dbus/_dbus_bindings-types.pxi: Move VariantSignature
    As it's only used in dbus.service, there is no reason for
    VariantSignature
    to be written in Pyrex.

M	dbus/_dbus_bindings-types.pxi
M	dbus/service.py

commit 6e0e797a2c354d1cdd2e940ec2ab25614ac49f6f
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-08 18:08:27 +0100

    dbus/_dbus_bindings.pyx: More docstrings

M	dbus/_dbus_bindings.pyx

commit 82c249159bbbfa1ad1d77d26b8e3a2f0615a80ee
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-08 18:08:04 +0100

    dbus/proxies.py: Set __docformat__ to 'restructuredtext' for epydoc

M	dbus/proxies.py

commit 3f77ab99f21400fbea5642affff2e8bc0c8faf28
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-08 18:07:23 +0100

    dbus/_dbus.py: More docstrings

M	dbus/_dbus.py

commit 3f978cf34b91e5404dc3ea559995a9648734a2da
Author: John (J5) Palmieri <johnp@remedyz.boston.redhat.com>
Date:	2006-09-08 10:56:06 -0400

    * tools/Makefile.am: Add tools/session.conf to EXTRA_DIST so make
    check works
      from tarballs

M	tools/Makefile.am

commit d65d0b6654b19522e250a6a4a361f06fa1ccd2d2
Author: Simon McVittie <smcv@celebrin.pseudorandom.co.uk>
Date:	2006-09-07 13:21:48 +0100

    _dbus_bindings: split out types, exceptions into separate source files

A	dbus/_dbus_bindings-exceptions.pxi
A	dbus/_dbus_bindings-types.pxi
M	dbus/_dbus_bindings.pyx

commit 346e0f0f332f5e112726536c434535a40072f356
Author: Simon McVittie <smcv@celebrin.(none)>
Date:	2006-09-06 13:42:13 +0100

    Add a fairly simplistic implementation of the D-Bus bindings test
    suite.
    Currently only tested with Python <-> Python, and some of the Byte
    tests fail
    until I get an opinion from the list on whether the API should be
    in terms
    of strings-of-length-1, ints, or both.

M	Makefile
A	test/cross-test-client.py
A	test/cross-test-server.py
A	test/crosstest.py

commit dc7cea8740b53c7a7061a2392cdc7ec775dd3734
Author: Simon McVittie <smcv@celebrin.(none)>
Date:	2006-09-06 13:30:13 +0100

    _dbus_bindings.pyx: Documentation
    * Add more docstrings and note methods which I don't think should
    be public.
    * When append_byte() fails, raise a more informative TypeError

M	dbus/_dbus_bindings.pyx

commit e37b430efed0dcfa5ff6196046e0b4302b79662a
Author: Simon McVittie <smcv@celebrin.(none)>
Date:	2006-09-06 13:26:58 +0100

    dbus/_dbus.py: Add exceptions to __all__ so they'll be imported
    into __init__

M	dbus/_dbus.py

commit 99bd2cf0aad0f26cc41459be2c89256f226832f0
Author: Simon McVittie <smcv@celebrin.(none)>
Date:	2006-09-06 13:26:24 +0100

    dbus/__init__.py: Annotate __all__ with where the objects come from

M	dbus/__init__.py

commit c0574acbc663094fbb722cd6bdc97b02e7111100
Author: Simon McVittie <smcv@celebrin.(none)>
Date:	2006-09-01 16:24:46 +0100

    _dbus_bindings.pyx: Spell "negative" correctly

M	dbus/_dbus_bindings.pyx

commit cf1599248d81b848016672cc129a714095f5f11e
Author: Simon McVittie <smcv@celebrin.(none)>
Date:	2006-09-01 16:22:57 +0100

    test/test-client.py: Rename dbus.dbus_bindings to _dbus_bindings in
    test too

M	test/test-client.py

commit 9c4ad587bb237921ff49ac78581eb66a863e6105
Author: Simon McVittie <smcv@celebrin.(none)>
Date:	2006-09-01 16:21:55 +0100

    .gitignore: Add files generated during test

M	.gitignore

commit fc2c0c457100003c4b2c85d6202d75e796b89454
Author: Simon McVittie <smcv@celebrin.(none)>
Date:	2006-09-01 16:14:21 +0100

    _dbus_bindings.pyx: Remove no-op constructor overrides which just
    use superclass

M	dbus/_dbus_bindings.pyx

commit 188e54fd97c48d9183a16cc2373de62a60f36a39
Author: Simon McVittie <smcv@celebrin.(none)>
Date:	2006-09-01 15:56:16 +0100

    .gitignore: Amend for renaming of dbus_bindings

M	.gitignore

commit 10186487194e31889f0a255f7986577b169220ac
Author: Simon McVittie <smcv@celebrin.(none)>
Date:	2006-09-01 15:54:47 +0100

    dbus._dbus, _dbus_bindings, dbus.proxies: Add docstrings

M	dbus/_dbus.py
M	dbus/_dbus_bindings.pyx
M	dbus/proxies.py

commit 867c2dd9318c8cbaf810d23d5f2a332d091007d9
Author: Simon McVittie <smcv@celebrin.(none)>
Date:	2006-08-31 18:14:40 +0100

    Makefile: add. Makefile for developer convenience, currently does
    API documentation using epydoc

A	Makefile

commit bb8600d38b16999d08950a03473f03d8705394bf
Author: Simon McVittie <smcv@celebrin.(none)>
Date:	2006-08-31 18:13:39 +0100

    dbus._dbus: add __all__

M	dbus/_dbus.py

commit 5098824725bc8984e4a84f2bede278648941960d
Author: Simon McVittie <smcv@celebrin.(none)>
Date:	2006-08-31 18:13:07 +0100

    dbus.types: add __all__

M	dbus/types.py

commit 656bb219b37ac18ad9bc953ac9a2fb2b5fa6234d
Author: Simon McVittie <smcv@celebrin.(none)>
Date:	2006-08-31 18:09:23 +0100

    dbus/__init__.py: Add __all__ (listing a sensible set of public API),
    __docformat__, __version__

M	dbus/__init__.py

commit aac6f58ae96faab86e6080702d2dac2bd3a69d66
Author: Simon McVittie <smcv@celebrin.(none)>
Date:	2006-08-31 18:05:57 +0100

    Rename dbus_bindings (sometimes a.k.a. dbus.dbus_bindings) to
    _dbus_bindings.
    Ditto for dbus_glib_bindings.
    Remove dbus.pth - should no longer be needed after this change.

M	dbus/_dbus.py
R100	dbus/dbus_bindings.pxd.in	dbus/_dbus_bindings.pxd.in
R100	dbus/dbus_bindings.pyx	dbus/_dbus_bindings.pyx
R068	dbus/dbus_glib_bindings.pyx	dbus/_dbus_glib_bindings.pyx
D	dbus/dbus.pth
M	dbus/decorators.py
M	dbus/exceptions.py
M	dbus/glib.py
M	dbus/matchrules.py
M	dbus/proxies.py
M	dbus/service.py
M	dbus/types.py
M	setup.py

commit c51b148077479381844a84989292719417c543b2
Author: Simon McVittie <smcv@celebrin.(none)>
Date:	2006-08-30 20:15:07 +0100

    Add some docstrings (reStructuredText with epydoc annotations)

M	dbus/__init__.py
M	dbus/_dbus.py
M	dbus/decorators.py
M	dbus/exceptions.py
M	dbus/service.py

commit 00435b5adc76a745e17b13386d15a2a1d6b2bb16
Author: Simon McVittie <smcv@celebrin.(none)>
Date:	2006-08-30 20:12:08 +0100

    .gitignore: Add. Ignore distutils build dir, Python bytecode, Vim
    swapfiles, and generated ChangeLog, .pxd and .c files.

A	.gitignore

commit 99e10857c50a025fb37613c4dae720b5afc890f5
Merge: b193f2b 22ea91b
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-08-24 23:27:58 +0100

    Merge http://ms800.montefiore.ulg.ac.be/~frecinau/dbus-glib

commit 22ea91b33bff95cf480a4c992e4774b671f1534b
Author: Steve Frécinaux <steve@istique.net>
Date:	2006-08-22 22:57:44 +0200

    Fix compilation with -Werror

M	dbus/dbus-gmain.c
M	test/glib/test-dbus-glib.c

commit 368aaee38049dc599fb8d06d7096bcdbd04befab
Author: Steve Frécinaux <steve@istique.net>
Date:	2006-08-22 22:26:24 +0200

    Make test scripts run during out-of-tree compilation

M	test/glib/run-test.sh
M	tools/run-with-tmp-session-bus.sh

commit b193f2b28472790ff66fc575d55d4e6d5a9d3e78
Author: Steve Frécinaux <steve@istique.net>
Date:	2006-08-22 19:36:44 +0200

    Fix out-of-tree compilation
    (cherry picked from 4b85a9e92bcf21356f25c535b3550a330cb018a4 commit)

M	dbus/Makefile.am
M	dbus/examples/Makefile.am
M	dbus/examples/statemachine/Makefile.am
M	test/Makefile.am
M	test/glib/Makefile.am

commit 4b85a9e92bcf21356f25c535b3550a330cb018a4
Author: Steve Frécinaux <steve@istique.net>
Date:	2006-08-22 19:36:44 +0200

    Fix out-of-tree compilation

M	dbus/Makefile.am
M	dbus/examples/Makefile.am
M	dbus/examples/statemachine/Makefile.am
M	test/Makefile.am
M	test/glib/Makefile.am

commit 46e7e573203e354b676e031067b8607b4f2640df
Merge: 355ef78 3be8161
Author: Steve Frécinaux <steve@istique.net>
Date:	2006-08-22 19:07:59 +0200

    Merge branch 'master' of
    git://anongit.freedesktop.org/git/dbus/dbus-glib

commit 3be816118dfc560955e5cd8e85203129087959ce
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-08-22 12:25:39 +0100

    replace doxygen with gtk-doc in INSTALL

M	INSTALL

commit 27e76bb78db2b467ce93fa0088c6c2407836e4ff
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-08-22 12:25:13 +0100

    Combine .PHONY rules in toplevel Makefile.am
    A .PHONY rule was added by the gtk-doc patch, this combines it with
    the existsing .PHONY rule

M	Makefile.am

commit d49a2a2486cd60e22b360dda8ae5a50d25486667
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-08-22 12:24:00 +0100

    Modifed autogen.sh to check for autotools an gtkdocize versions
    autogen.sh now does a full check for all the correct versions of
    autotools. It uses autoreconf to do the various steps. It also
    checks for correct gtkdocize version and pretty prints a bit,
    a-la gnome-autogen.sh.

M	autogen.sh

commit 62419419257d6353c5f35001e1f538fca300f3c4
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-08-22 11:44:42 +0100

    add missing doc/Makefile.am from gtk-doc update.

A	doc/Makefile.am

commit f812d9044aa73b0c86f92dc0dcae03d26e23193a
Author: Rob Taylor <rob.taylor@collabora.co.uk>
Date:	2006-08-22 11:43:43 +0100

    Add missing m4/gtk-doc.m4 from gtk-doc patch.

A	m4/gtk-doc.m4

commit 2effafca679d6331201e7637b18888a70b958eb8
Author: Rob Taylor <robtaylor@lancastria.(none)>
Date:	2006-08-18 20:55:17 +0100

    Commit patch to switch to gtk-doc with gtype-specialized doc and
    updates from
    Marc-Andre Lureau <marcandre.lureau@gmail.com>, with minor cleanup.

    Closes #7726.

M	Makefile.am
M	autogen.sh
M	configure.in
M	dbus/dbus-gidl.c
M	dbus/dbus-glib-tool.c
M	dbus/dbus-glib.c
M	dbus/dbus-glib.h
M	dbus/dbus-gmain.c
M	dbus/dbus-gobject.c
M	dbus/dbus-gproxy.c
M	dbus/dbus-gtype-specialized.c
M	dbus/dbus-gutils.c
M	dbus/dbus-gvalue.c
A	doc/reference/Makefile.am
A	doc/reference/dbus-binding-tool.xml
A	doc/reference/dbus-glib-docs.sgml
A	doc/reference/dbus-glib-overrides.txt
A	doc/reference/dbus-glib-sections.txt
A	doc/reference/dbus-glib-undocumented.txt
A	doc/reference/version.xml.in

commit 355ef78d98d6fc65715845d56232199162cab12a
Author: Steve Frécinaux <steve@istique.net>
Date:	2006-08-17 11:48:20 +0200

    Interface support for bindings.

M	dbus/dbus-gobject.c

commit 1b1d5b77a841e68043fd1f27900b7b97b4610b33
Author: John (J5) Palmieri <johnp@remedyz.boston.redhat.com>
Date:	2006-07-27 14:00:14 -0400

    * dbus/BusName.py (BusName::__new__): Modified patch from Alex Jones
      <alex at weej dot com> - Add flags when requesting a name

M	dbus/service.py

commit eae6cd4e466d9d6dd477cf0bb5ef2b183f4c69f9
Author: John (J5) Palmieri <johnp@remedyz.boston.redhat.com>
Date:	2006-07-27 13:57:56 -0400

    * setup.py: read the stdout pipe before stderr

M	setup.py

commit f5258f571de77b18354e17073d44f316d1e0af1b
Author: John (J5) Palmieri <johnp@remedyz.boston.redhat.com>
Date:	2006-07-27 12:40:36 -0400

    * setup.py: some distros have older gits which don't have the
    git-log --stat
      flag.  We check for an error and if so revert to just calling
      git-log

M	setup.py

commit e6c7815f9457757d7364463759766c85981ce207
Author: John (J5) Palmieri <johnp@remedyz.boston.redhat.com>
Date:	2006-07-24 14:44:36 -0400

    * Released 0.71

M	NEWS
M	configure.in

commit 49948f1f9554b4431d668992b4953ff09962149f
Author: John (J5) Palmieri <johnp@remedyz.boston.redhat.com>
Date:	2006-07-24 14:34:51 -0400

    * Released 0.71

M	NEWS
M	setup.py

commit 29b7548ddf4400a20636ae558c1834ad523c33da
Author: John (J5) Palmieri <johnp@remedyz.boston.redhat.com>
Date:	2006-07-24 14:05:26 -0400

    * Patch from Joseph Sacco <joseph_sacco [at] comcast [dot] net>:
      Export the correct cflags in distutils

M	setup.py
M	test/run-test.sh

commit 5f76b5a3eec271192e9657213c6693121c3d8df9
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2006-07-21 17:17:46 -0400

    * fix import of dbus_bindings

M	test/test-client.py

commit 163206f228efad53051677a08d3813fcc5d0ab97
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2006-07-21 16:42:54 -0400

    * Automate building of ChangeLog

M	setup.py

commit f262d88279991faba06578dde48d0c607ce4b0b8
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2006-07-21 16:27:59 -0400

    * fixed where the binary modules are installed into

M	setup.py

commit 3f720d5a5028d2b4075b474ba17fb9b7508093ac
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2006-07-21 16:25:35 -0400

    * Various Makefile cleanups

M	Makefile.am
M	dbus/Makefile.am
M	test/Makefile.am

commit 7d73bb0ea7631ce1191de1cd6fbbcb07fe215f31
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2006-07-17 16:58:42 -0400

    * Released 0.70
    * Added NEWS to the dist

M	MANIFEST.in
A	NEWS

commit 8728a13fa422955aa96bf2d8644af773407dbe65
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2006-07-17 16:43:42 -0400

    * remove ChangeLog as it will be generated by git-whatchanged

D	ChangeLog

commit 05cb3fd6e2c139e61d1461443660badfbdf94a83
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2006-07-17 16:36:02 -0400

    * Released 0.70
    * Add NEWS to the dist

M	Makefile.am

commit d59c4a541397033b69d575c8cc495d0f3ba13ee3
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2006-07-17 16:28:45 -0400

    * Added a NEWS entry for this release

M	NEWS

commit 990802d9f01a7c5aa1ae582aad21963fe20b601e
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2006-07-17 16:06:52 -0400

    * remove ChangeLog because this will now be generated during dist

D	ChangeLog

commit 6a68e96e69cb17a981c801d8e7480c5bb4d51a6c
Author: John (J5) Palmieri <quinticent@phuket.(none)>
Date:	2006-07-17 15:52:26 -0400

    * add the Doxyfile.in file

A	Doxyfile.in

commit caaabe86ac7a91c84d022c5806e67a42617fa566
Author: John (J5) Palmieri <quinticent@phuket.(none)>
Date:	2006-07-14 12:52:53 -0400

    * Add Osvaldo S. Neto to AUTHORS for his distutils patch

M	AUTHORS

commit 4b1d99c3fbf0d402cb7badbcb8e6ea682f7e54c6
Author: John (J5) Palmieri <quinticent@phuket.(none)>
Date:	2006-07-12 21:40:13 -0400

    * MANIFEST.in:
      added the tools directory

M	MANIFEST.in

commit 9c70ef78b9368b5fd090dd3aafb3f189cc88616d
Author: John (J5) Palmieri <quinticent@phuket.(none)>
Date:	2006-07-12 21:32:57 -0400

    * run-test.sh:
      create the .service file before we launch dbus

M	test/run-test.sh

commit 7a0389c01ac8c775b7b677bcc20cc0da716b1c19
Author: John (J5) Palmieri <quinticent@phuket.(none)>
Date:	2006-07-12 21:28:39 -0400

    * Add tests back
    * create a check command for distutils (python setup.py check)

M	MANIFEST.in
M	setup.py
A	test/dbus_python_check.py
A	test/run-test.sh
A	test/test-client.py
A	test/test-service.py
A	tools/run-with-tmp-session-bus.sh
A	tools/session.conf

commit 303a9d690767dd40e75940f9e3c4e1d1fa504554
Author: John (J5) Palmieri <quinticent@phuket.(none)>
Date:	2006-07-12 18:11:07 -0400

    * MANIFEST.in: Added
    * setup.py: change package name to dbus-python

A	MANIFEST.in
M	setup.py

commit c72e8df76cda925d0bac0e99af94a4d3760e74b1
Author: John (J5) Palmieri <quinticent@phuket.(none)>
Date:	2006-07-12 17:34:58 -0400

    * dbus/dbus_glib_bindings.pyx: Prepend includes dbus-glib.h and
      dbus-glib-lowlevel withd dbus/ since we are no longer building in
      tree and
      need to get the system's header files

M	dbus/dbus_glib_bindings.pyx

commit 98bdb18235a405339041596c571f213ea5fa3c24
Author: John (J5) Palmieri <quinticent@phuket.(none)>
Date:	2006-07-12 17:29:04 -0400

    - s/dbus/-Idbus\// in includedirs_flag

M	setup.py

commit 82a4e8afb8ca163416f602fdb1df96b11765ecb2
Author: Robert McQueen <robot101@thubuntu.(none)>
Date:	2006-07-12 21:53:57 +0100

    setup.py, dbus/extract.py: Patch from Osvaldo Santana Neto
    <osvaldo.santana@indt.org.br> to make the python bindings build
    and install
    with distutils. Not quite working yet because of path madness with the
    extract.py stuff.

M	dbus/extract.py
A	setup.py

commit 172f80244f21a681609e6918c1f043b3272949f3
Author: Robert McQueen <robot101@thubuntu.(none)>
Date:	2006-07-12 19:40:37 +0100

    dbus/__init__.py: Set version to 0.70.

M	dbus/__init__.py

commit fb63da94f9e207e807f7f0ae18425d3b73173d43
Author: Robert McQueen <robot101@thubuntu.(none)>
Date:	2006-07-12 19:28:30 +0100

    dbus/Makefile.am, dbus/examples/Makefile.am: removed

D	dbus/Makefile.am
D	dbus/examples/Makefile.am

commit cc9eb8989a5782f62f8ca786d76e1267e48ec8bf
Author: Robert McQueen <robot101@thubuntu.(none)>
Date:	2006-07-12 19:26:39 +0100

    Move python/ to dbus/, the name of the module.

R100	python/.cvsignore	dbus/.cvsignore
R100	python/Makefile.am	dbus/Makefile.am
R100	python/__init__.py	dbus/__init__.py
R100	python/_dbus.py dbus/_dbus.py
R100	python/_util.py dbus/_util.py
R100	python/dbus.pth dbus/dbus.pth
R100	python/dbus_bindings.pxd.in	dbus/dbus_bindings.pxd.in
R100	python/dbus_bindings.pyx	dbus/dbus_bindings.pyx
R100	python/dbus_glib_bindings.pyx	dbus/dbus_glib_bindings.pyx
R100	python/dbus_h_wrapper.h dbus/dbus_h_wrapper.h
R100	python/decorators.py	dbus/decorators.py
R100	python/examples/.cvsignore	dbus/examples/.cvsignore
R100	python/examples/Makefile.am	dbus/examples/Makefile.am
R100	python/examples/example-client.py
dbus/examples/example-client.py
R100	python/examples/example-service.py
dbus/examples/example-service.py
R100	python/examples/example-signal-emitter.py
dbus/examples/example-signal-emitter.py
R100	python/examples/example-signal-recipient.py
dbus/examples/example-signal-recipient.py
R100	python/examples/gconf-proxy-client.py
dbus/examples/gconf-proxy-client.py
R100	python/examples/gconf-proxy-service.py
dbus/examples/gconf-proxy-service.py
R100	python/examples/gconf-proxy-service2.py
dbus/examples/gconf-proxy-service2.py
R100	python/examples/list-system-services.py
dbus/examples/list-system-services.py
R100	python/exceptions.py	dbus/exceptions.py
R100	python/extract.py	dbus/extract.py
R100	python/glib.py	dbus/glib.py
R100	python/introspect_parser.py	dbus/introspect_parser.py
R100	python/matchrules.py	dbus/matchrules.py
R100	python/proxies.py	dbus/proxies.py
R100	python/service.py	dbus/service.py
R100	python/types.py dbus/types.py

commit 260a7da603a0449a117690a9cc46c7d171ec1112
Author: Robert McQueen <robot101@thubuntu.(none)>
Date:	2006-07-12 19:25:47 +0100

    COPYING: Have the file with its contents and not a file full of NULLs
    (thanks XFS)

M	COPYING

commit 85ef4b2f21a67fa6f8ebb7977fc62a69208d86fe
Author: Robert McQueen <robot101@thubuntu.(none)>
Date:	2006-07-12 19:24:09 +0100

    AUTHORS, COPYING: Copy from old tree.

A	AUTHORS
A	COPYING

commit 89a2a3b5b5795434900f1ca41fc73162b7bb09f2
Author: John (J5) Palmieri <quinticent@phuket.(none)>
Date:	2006-07-06 19:16:07 -0400

    - distcheck cleanups

M	dbus/Makefile.am
M	tools/Makefile.am

commit 46ea5dc1aa64ca906d28119e2d9eed3a48e6adfc
Author: John (J5) Palmieri <quinticent@phuket.(none)>
Date:	2006-07-06 19:05:44 -0400

    - Renabled another test

M	dbus/Makefile.am

commit ae743d6feca5e24541124148a53a475f6f27e2a9
Author: John (J5) Palmieri <quinticent@phuket.(none)>
Date:	2006-07-06 18:52:50 -0400

    - add gcov source

A	test/decode-gcov.c

commit ae90f4bab7a98d89a85e8e6c11b4af72bb9a2525
Author: John (J5) Palmieri <quinticent@phuket.(none)>
Date:	2006-07-06 18:52:16 -0400

    - Adding placeholder HACKING file

A	HACKING

commit 5f47ecc191cae12930652b708d3c52d293eba4da
Author: John (J5) Palmieri <quinticent@phuket.(none)>
Date:	2006-07-06 18:05:37 -0400

    - Add back the Doxygen doc generation

M	Makefile.am
M	configure.in
A	doc/api/README

commit fdb8aaaab032ab4eb63aa80dbef7de91a3de346a
Author: John (J5) Palmieri <quinticent@phuket.(none)>
Date:	2006-07-06 17:40:30 -0400

    - Add back tests to the glib bindings

M	Makefile.am
M	configure.in
A	test/Makefile.am
A	test/data/valid-service-files/debug-echo.service.in
A	test/data/valid-service-files/debug-glib.service.in
A	test/glib/Makefile.am
A	test/glib/my-object-marshal.list
A	test/glib/run-test.sh
A	test/glib/test-dbus-glib.c
A	test/glib/test-profile.c
A	test/glib/test-service-glib.c
A	test/glib/test-service-glib.xml
A	test/glib/test-thread-client.c
A	test/glib/test-thread-server.c
A	test/glib/test-thread.h
A	test/test-service.c
A	tools/Makefile.am
A	tools/run-with-tmp-session-bus.sh
A	tools/session.conf

commit 24e982d596036202850c679aa0460b729840e45d
Author: John (J5) Palmieri <quinticent@phuket.(none)>
Date:	2006-07-06 14:40:14 -0400

    - Fix up docs

M	INSTALL
M	README

commit 6aa2aba0a64ea19e504118dc56a1f9e559568f90
Author: John (J5) Palmieri <quinticent@phuket.(none)>
Date:	2006-06-29 12:05:05 -0400

    - Really commit the glib to dbus move and build fixes

M	Makefile.am
M	configure.in
M	dbus/dbus-glib.h
M	dbus/examples/Makefile.am
M	dbus/examples/statemachine/Makefile.am

commit 6a9ac47cc9143ee899455c576f557818dab1f7d2
Author: John (J5) Palmieri <quinticent@phuket.(none)>
Date:	2006-06-29 11:26:07 -0400

    - Created empty NEWS file
    - renamed glib dir to dbus so include paths stay the same in the
    examples
    - build now works

A	NEWS
R100	glib/.cvsignore dbus/.cvsignore
R068	glib/Makefile.am	dbus/Makefile.am
R100	glib/dbus-binding-tool-glib.c	dbus/dbus-binding-tool-glib.c
R100	glib/dbus-binding-tool-glib.h	dbus/dbus-binding-tool-glib.h
R100	glib/dbus-gidl.c	dbus/dbus-gidl.c
R100	glib/dbus-gidl.h	dbus/dbus-gidl.h
R100	glib/dbus-glib-lowlevel.h	dbus/dbus-glib-lowlevel.h
R100	glib/dbus-glib-tool.c	dbus/dbus-glib-tool.c
R100	glib/dbus-glib-tool.h	dbus/dbus-glib-tool.h
R099	glib/dbus-glib.c	dbus/dbus-glib.c
R099	glib/dbus-glib.h	dbus/dbus-glib.h
R100	glib/dbus-gloader-expat.c	dbus/dbus-gloader-expat.c
R100	glib/dbus-gmain.c	dbus/dbus-gmain.c
R100	glib/dbus-gmarshal.c	dbus/dbus-gmarshal.c
R100	glib/dbus-gmarshal.h	dbus/dbus-gmarshal.h
R100	glib/dbus-gmarshal.list dbus/dbus-gmarshal.list
R100	glib/dbus-gobject.c	dbus/dbus-gobject.c
R100	glib/dbus-gobject.h	dbus/dbus-gobject.h
R100	glib/dbus-gparser.c	dbus/dbus-gparser.c
R100	glib/dbus-gparser.h	dbus/dbus-gparser.h
R100	glib/dbus-gproxy.c	dbus/dbus-gproxy.c
R100	glib/dbus-gsignature.c	dbus/dbus-gsignature.c
R100	glib/dbus-gsignature.h	dbus/dbus-gsignature.h
R100	glib/dbus-gtest-main.c	dbus/dbus-gtest-main.c
R100	glib/dbus-gtest.c	dbus/dbus-gtest.c
R100	glib/dbus-gtest.h	dbus/dbus-gtest.h
R100	glib/dbus-gthread.c	dbus/dbus-gthread.c
R100	glib/dbus-gtool-test.h	dbus/dbus-gtool-test.h
R100	glib/dbus-gtype-specialized.c	dbus/dbus-gtype-specialized.c
R100	glib/dbus-gtype-specialized.h	dbus/dbus-gtype-specialized.h
R100	glib/dbus-gutils.c	dbus/dbus-gutils.c
R100	glib/dbus-gutils.h	dbus/dbus-gutils.h
R100	glib/dbus-gvalue-utils.c	dbus/dbus-gvalue-utils.c
R100	glib/dbus-gvalue-utils.h	dbus/dbus-gvalue-utils.h
R100	glib/dbus-gvalue.c	dbus/dbus-gvalue.c
R100	glib/dbus-gvalue.h	dbus/dbus-gvalue.h
R100	glib/examples/.cvsignore	dbus/examples/.cvsignore
R100	glib/examples/Makefile.am	dbus/examples/Makefile.am
R100	glib/examples/example-client.c	dbus/examples/example-client.c
R100	glib/examples/example-service.c dbus/examples/example-service.c
R100	glib/examples/example-service.xml
dbus/examples/example-service.xml
R100	glib/examples/example-signal-emitter.c
dbus/examples/example-signal-emitter.c
R100	glib/examples/example-signal-emitter.xml
dbus/examples/example-signal-emitter.xml
R100	glib/examples/example-signal-recipient.c
dbus/examples/example-signal-recipient.c
R100	glib/examples/statemachine/.cvsignore
dbus/examples/statemachine/.cvsignore
R083	glib/examples/statemachine/Makefile.am
dbus/examples/statemachine/Makefile.am
R100	glib/examples/statemachine/sm-marshal.list
dbus/examples/statemachine/sm-marshal.list
R100	glib/examples/statemachine/statemachine-client.c
dbus/examples/statemachine/statemachine-client.c
R100	glib/examples/statemachine/statemachine-server.c
dbus/examples/statemachine/statemachine-server.c
R100	glib/examples/statemachine/statemachine-server.h
dbus/examples/statemachine/statemachine-server.h
R100	glib/examples/statemachine/statemachine-server.xml
dbus/examples/statemachine/statemachine-server.xml
R100	glib/examples/statemachine/statemachine.c
dbus/examples/statemachine/statemachine.c
R100	glib/examples/statemachine/statemachine.h
dbus/examples/statemachine/statemachine.h
R100	glib/examples/statemachine/statemachine.xml
dbus/examples/statemachine/statemachine.xml
R100	glib/make-dbus-glib-error-enum.sh
dbus/make-dbus-glib-error-enum.sh
R100	glib/make-dbus-glib-error-switch.sh
dbus/make-dbus-glib-error-switch.sh

commit 7fa1f1471e5b878253695da46a89a3186fb2a0d1
Author: John (J5) Palmieri <quinticent@phuket.(none)>
Date:	2006-06-28 14:39:18 -0400

    - Take out comment in a literal

M	configure.in

commit 1a7d56d33f83dde917871f8b2d5af19f25786449
Author: John (J5) Palmieri <quinticent@phuket.(none)>
Date:	2006-06-28 14:24:40 -0400

    - Have autogen.sh point to dbus-glib

M	autogen.sh

commit 24ec6aba3281c460f64bbe9d5bb2dd265d453cce
Author: John (J5) Palmieri <quinticent@phuket.(none)>
Date:	2006-06-28 14:22:25 -0400

    - Add files missed in the split

A	glib/dbus-glib-lowlevel.h
A	glib/dbus-glib.h
A	glib/make-dbus-glib-error-enum.sh

commit b8b86555280694d85d64b68d0f9131868598161a
Author: John (J5) Palmieri <quinticent@phuket.(none)>
Date:	2006-06-28 14:21:26 -0400

    - Add boilerplate build files

A	AUTHORS
A	COPYING
A	INSTALL
A	Makefile.am
A	README
A	autogen.sh
A	configure.in
A	dbus-glib-1.pc.in

commit 698177269a46c2cb80fbb2c471f5ad6314bd106b
Author: Ross Burton <ross@openedhand.com>
Date:	2006-06-14 16:49:37 +0000

    2006-06-14 Ross Burton <ross@openedhand.com>

	    * glib/dbus-gobject.c:
	    Free a leaking GArray (surely not!) in dbus_g_method_return.

M	glib/dbus-gobject.c

commit 0b305ffe12e7273640226e323074f2cb7d7387cc
Author: Ross Burton <ross@openedhand.com>
Date:	2006-06-12 14:22:48 +0000

    2006-06-12 Ross Burton <ross@openedhand.com>

	    * glib/dbus-gproxy.c:
	    Don't leak a GArray when firing signals (thank Rob Taylor
	    for review).

M	glib/dbus-gproxy.c

commit 66e5632e14760bbd396afbc4d474cbbed22f37f7
Author: Robert McQueen <robot101@debian.org>
Date:	2006-06-07 00:31:01 +0000

    2005-05-06 Robert McQueen <robot101@debian.org>

	    * glib/dbus-gtype-specialized.c: Fix obvious leak of GArray
	    in every
	      call to dbus_g_type_get_struct.

M	glib/dbus-gtype-specialized.c

commit 9b151fd7a396463aa3f7c6ac0a14df444c78a6b1
Author: Robert McQueen <robot101@debian.org>
Date:	2006-06-07 00:03:57 +0000

    2005-05-06 Robert McQueen <robot101@debian.org>

	    * glib/dbus-gvalue-utils.c: Fix the failing test where
	    static string
	      pointers were put into a GPtrArray-based specialised
	      collection, and
	      then freed along with the array. GValues which you add into
	      collections or maps which have the NOCOPY flag set are
	      assumed to not
	      belong to the caller, so rather than the existing
	      pointer-stealing
	      semantics, they are copied instead. Given that the main
	      consumers of
	      this abstraction are the bindings themselves, I don't
	      think this is
	      too bad, but others should watch their choice of take
	      vs set_static.

M	glib/dbus-gvalue-utils.c

commit 5559e67b90b3c186bf0002253587013264ce9dc0
Author: Robert McQueen <robot101@debian.org>
Date:	2006-06-06 23:07:04 +0000

    2005-05-06 Robert McQueen <robot101@debian.org>

	    * glib/dbus-gvalue-utils.c: Spotted a warning about the
	    return value
	      of g_slist_prepend not being used. Fixed copying of
	      slist-based
	      specialised collections, then wrote a test case and found
	      that it was
	      all broken. Went on to fix iterating and appending
	      too. Good thing
	      nobody uses this code yet.

M	glib/dbus-gvalue-utils.c

commit 7ca236d43bc91778e90ac59500aeb1d68c8acd6f
Author: Robert McQueen <robot101@debian.org>
Date:	2006-06-06 19:45:39 +0000

    2005-05-06 Robert McQueen <robot101@debian.org>

	    * glib/dbus-gvalue-utils.c: Remove duplicated code by having
	    all of
	      the iterators use gvalue_take_ptrarray_value (the GValues
	      themselves
	      are discarded without unsetting, so it makes no difference
	      whether
	      we take or set_static). Remove cases for G_TYPE_POINTER
	      because
	      there really is nothing useful we can do with them in our
	      specialised types - we *need* boxed copy/free functions
	      at the very
	      least.

M	glib/dbus-gvalue-utils.c

commit 8896d43457634c4c10d9909907d0d9082b520a07
Author: Havoc Pennington <hp@redhat.com>
Date:	2006-05-21 05:33:52 +0000

    2006-05-21 Havoc Pennington <hp@redhat.com>

	    * glib/dbus-gproxy.c: Put in a pile of assertions that the
	    proxy name
	    is not NULL when it shouldn't be. Also a couple of possible
	    fixes
	    for #4637 though I don't understand why the bug happens, to be
	    honest... also the object constructor has an assert name
	    != NULL
	    and the name is only currently NULL for peer-to-peer
	    proxies that
	    I don't think anyone uses? So it should be asserting.
	    Anyway, for now at least see if we get an earlier assertion
	    failure.

	    * glib/dbus-gvalue-utils.c: Put in a couple of assertions for
	    apparently broken code to be sure the tests fail and someone
	    will fix them...

M	glib/dbus-gvalue-utils.c

commit 4da76dd7d5845f05efd553037750ddeffd7d1962
Author: Robert McQueen <robot101@debian.org>
Date:	2006-04-28 21:11:28 +0000

    2005-04-28 Robert McQueen <robot101@debian.org>

	    * glib/dbus-gproxy.c: Fix properties so that they can be
	    given in
	    any order, making it easier for people who inherit from this
	    object.

M	glib/dbus-gproxy.c

commit 08cd19641ff8c6fcb1f8e5821e6c9dc81f11cd6f
Author: Robert McQueen <robot101@debian.org>
Date:	2006-04-28 21:02:16 +0000

    2005-04-28 Robert McQueen <robot101@debian.org>

	    * glib/dbus-gvalue-utils.c: Patch from Jakub Stachowski to
	    fix leaking
	    of memory from within pointer arrays and lists. Fixes
	    bug #6300.

M	glib/dbus-gvalue-utils.c

commit 96fb792c6a5661afeef76ece3cd7defc9ffc8db8
Author: Robert McQueen <robot101@debian.org>
Date:	2006-04-28 20:36:56 +0000

    2005-04-28 Robert McQueen <robot101@debian.org>

	    * glib/dbus-gvalue.c: Patch from Jakub Stachowski to fix a
	    leak in
	    generating struct signatures. Fixes bug #6083.

M	glib/dbus-gvalue.c

commit 636fe6ed1b321cd05b72ca39d414ecd1c2cb4b4f
Author: Havoc Pennington <hp@redhat.com>
Date:	2006-02-26 01:06:33 +0000

    2006-02-25 Havoc Pennington <hp@redhat.com>

	    * glib/dbus-glib-tool.c (usage): fix up the usage message,
	    someone
	    should make this thing use the new glib options parser

M	glib/dbus-glib-tool.c

commit 844b4184483ac979eff27319f144e8f330858062
Author: Robert McQueen <robot101@debian.org>
Date:	2006-02-16 00:43:41 +0000

    2006-02-16 Robert McQueen <robot101@debian.org>

	    * dbus/dbus-message.c (dbus_message_iter_get_fixed_array):
	    Patch from Rob Taylor <rob.taylor@collabora.co.uk> to correct
	    a bogus
	    assertion that the next element to read from the iter is
	    fixed in
	    size. This is not the case when you are at the end of
	    the iter,
	    because the next element type is INVALID.

	    * dbus/dbus-string.c (_dbus_string_init_const_len): Correct a
	    a bogus assert which means that you may not initialise
	    a 0-length
	    string unless you provide a non-NULL pointer. This prevented
	    you from marshalling messages containing zero-length arrays in
	    some cases.

	    * glib/dbus-gvalue.c (demarshal_collection_array): Another
	    patch
	    from Rob to correct bogus asserts when trying to demarshal an
	    array and get_fixed_array got you 0 elements. Append
	    nothing to
	    the GArray in this case.

	    * test/glib/test-dbus-glib.c: Add a test case for
	    round-tripping
	    an empty array via the glib bindings. Without all of the above
	    patches, this new test fails.

M	glib/dbus-gvalue.c

commit 7b33862bac766c00c12f5cb400af06200ae004c4
Author: Robert McQueen <robot101@debian.org>
Date:	2006-02-15 23:45:48 +0000

    2006-02-16 Robert McQueen <robot101@debian.org>

	    * glib/dbus-gmain.c: Make the previous commit compile.

	    * python/_dbus.py, python/matchrules.py: Patch from Ole Andre
	    Ravnaas <ole.andre.ravnaas@collabora.co.uk> to allow you to
	    specify sender_keyword="foo", path_keyword="bar" when adding
	    a signal listener, so that you can bind to signals generically
	    but still do something useful in your callback.

	    * python/dbus_bindings.pyx: Demarshal the byte type as
	    unsigned
	    chars so that they're not cast to chars and made
	    negative. Thanks
	    to Jakub Stachowski for reporting this and testing the fix.

M	glib/dbus-gmain.c

commit 8d98ce884210745d7070e4438167ece2be0e357b
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2006-02-15 21:42:54 +0000

    2006-02-15 John (J5) Palmieri <johnp@redhat.com>

	    * dbus/dbus-glib.h:
	    * glib/dbus-gmain.h:
	    (dbus_g_connection_open): new method for openning
	    a connection to an arbitrary address in the glib bindings

	    * ChangeLog: checkin last entry which doesn't seem to
	    be commited

M	glib/dbus-gmain.c

commit 6fd3dffe4561b37bc75c13f6296e91b65224ce4d
Author: Robert McQueen <robot101@debian.org>
Date:	2006-02-13 22:30:11 +0000

    2006-02-13 Robert McQueen <robot101@debian.org>

	    * glib/dbus-binding-tool-glib.c, glib/dbus-gmain.c,
	    glib/dbus-gsignature.c, glib/dbus-gtype-specialized.c,
	    glib/dbus-gtype-specialized.h, glib/dbus-gvalue-utils.c,
	    glib/dbus-gvalue-utils.h, glib/dbus-gvalue.c:
	    Patch from Rob Taylor <rob.taylor@collabora.co.uk> to add
	    a big
	    missing piece of the glib bindings jigsaw puzzle. This
	    modifies
	    the existing specialised types to have N type parameters
	    (rather
	    than the current 1 or 2 for arrays and dictionaries
	    respectively).
	    You can then use this to get a glib type to represent any
	    arbitrary
	    D-Bus struct type using dbus_g_type_get_struct. The only
	    implementation of these types is with GValueArrays as before,
	    but it's now possible to store these in arrays, emit them in
	    signals, etc.

M	glib/dbus-binding-tool-glib.c
M	glib/dbus-gmain.c
M	glib/dbus-gsignature.c
M	glib/dbus-gtype-specialized.c
M	glib/dbus-gtype-specialized.h
M	glib/dbus-gvalue-utils.c
M	glib/dbus-gvalue-utils.h
M	glib/dbus-gvalue.c

commit eef27dfbd6dc73baa13c78220f98297881071368
Author: Robert McQueen <robot101@debian.org>
Date:	2006-01-27 16:40:53 +0000

    2006-01-27 Robert McQueen <robot101@debian.org>

	    * glib/dbus-binding-tool-glib.[ch]: Patch based on Ricardo
	    Kekki's
	    patch to use an annotation
	    org.freedesktop.DBus.GLib.ClientCSymbol
	    when generating the client-side methods, instead of
	    overloading
	    CSymbol which broke everything horribly. My apologies.

M	glib/dbus-binding-tool-glib.c
M	glib/dbus-binding-tool-glib.h

commit 879e2b697e2a0fd439a38ea4d4422cd8c01fefb5
Author: Robert McQueen <robot101@debian.org>
Date:	2006-01-27 15:40:36 +0000

    2006-01-27 Robert McQueen <robot101@debian.org>

	    * glib/dbus-gtype-specialized.[ch], glib/dbus-gvalue-utils.c:
	    Patch
	    by me and Rob Taylor to add a simple_free function to
	    D-Bus map
	    and collection types, which allows those types which can
	    be freed
	    with a GDestroyNotify (such as GHashTables and GArrays,
	    but not
	    GPtrArrays) to be stored as the values in hashtables.

	    * test/glib/test-dbus-glib.c,
	    test/glib/test-service-glib.{c,xml}:
	    Patch by Rob Taylor to add nested dicts to the glib tests
	    to check
	    the above code works, and appears not to leak when called
	    repeatedly.

M	glib/dbus-gtype-specialized.c
M	glib/dbus-gtype-specialized.h
M	glib/dbus-gvalue-utils.c

commit f467138770f3b5b771e772e7f59780a502540cb6
Author: Robert McQueen <robot101@debian.org>
Date:	2006-01-27 15:15:16 +0000

    2006-01-27 Robert McQueen <robot101@debian.org>

	    * glib/dbus-gvalue.c (demarshal_valuearray): Patch from
	    Rob Taylor
	    to free a D-Bus allocated string with dbus_free () instead of
	    g_free ().

M	glib/dbus-gvalue.c

commit 0c87b127b878d41d8a134fd5dee5d41a2434ef41
Author: Robert McQueen <robot101@debian.org>
Date:	2006-01-27 15:06:54 +0000

    2006-01-27 Iain Holmes <iain@openedhand.com>

	    * glib/dbus-gproxy.c (dbus_g_proxy_dispose): Protect the
	    dispose
	    method from being called multiple times.

M	glib/dbus-gproxy.c

commit 5ad59f0f48a27d35d58e86c2cf2aa8c7d025248b
Author: Robert McQueen <robot101@debian.org>
Date:	2006-01-19 02:54:07 +0000

    2006-01-19 Robert McQueen <robot101@debian.org>

	    * glib/dbus-binding-tool-glib.c: Patch from Rob Taylor
	    <rob.taylor@collabora.co.uk> to add support for generating
	    bindings
	    to arrays that are represented as GPtrArrays rather than
	    GArrays (ie
	    size-variable things, such as strings, objects, structs, etc).

M	glib/dbus-binding-tool-glib.c

commit 0dffd5ab28874cc6453e8907f1f4cb95785748cb
Author: Robert McQueen <robot101@debian.org>
Date:	2006-01-05 20:22:06 +0000

    2006-01-05 Robert McQueen <robot101@debian.org>

	    * dbus/dbus-glib.h, glib/dbus-gproxy.c: Patch from Ricardo
	    Kekki
	    <ricardo.kekki@movial.fi> to make it possible to inherit from
	    DBusGProxy, by splitting the DBusGProxy struct into a public
	    part and
	    a private part, and moving the setting of the
	    DBusGProxyManager into a
	    connection property, allowing proper GObject construction.

M	glib/dbus-gproxy.c

commit b356f998530ffe9762b4b0f5fd7f236eceb044db
Author: Robert McQueen <robot101@debian.org>
Date:	2006-01-05 20:03:38 +0000

    2006-01-05 Robert McQueen <robot101@debian.org>

	    * glib/dbus-binding-tool-glib.c: Patch from Ricardo Kekki
	    <ricardo.kekki@movial.fi> to make dbus-binding-tool heed C
	    symbol name
	    annotations when generating glib client bindings.

M	glib/dbus-binding-tool-glib.c

commit 8029bd07868baa11810b0b3ee56a8daefc0588da
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-11-30 19:32:25 +0000

    * dbus/dbus-auth.c, dbus/dbus-connection.c, dbus/dbus-keyring.c,
    dbus/dbus-server-debug-pipe.c, glib/dbus-binding-tool-glib.c
    glib/dbus-glib-tool.c, glib/dbus-gparser.c, glib/dbus-gproxy.c
    test/test-segfault.c, test/test-utils.c, test/glib/test-dbus-glib.c,
    tools/dbus-cleanup-sockets.c tools/dbus-launch.c,
    tools/dbus-tree-view.c, tools/dbus-viewer.c: Various cleanup of
    dead code and compiler warnings (patch from Kjartan Maraas <kmaraas
    at gnome.org>)

M	glib/dbus-binding-tool-glib.c
M	glib/dbus-glib-tool.c
M	glib/dbus-gparser.c
M	glib/dbus-gproxy.c

commit c5753442aaccba39a3e0948aa77e523eb3fe866b
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-11-30 18:48:09 +0000

    * glib/dbus-gmain.c (connection_setup_add_watch): plugged a leak
    (patch from Carlos Garnacho Parro <carlosg at gnome.org>

M	glib/dbus-gmain.c

commit 5d3c9bd0cd7e98df0be8351e3c210a38a978f52a
Author: Robert McQueen <robot101@debian.org>
Date:	2005-11-27 16:55:09 +0000

    2005-11-27 Carlos Garcia Campos <carlosgc@gnome.org>

	    * glib/dbus-gobject.c: Append a GValue instead of a basic
	    type in
	    method return message for property getters

M	glib/dbus-gobject.c
M	glib/dbus-gvalue.c
M	glib/dbus-gvalue.h

commit 9f2aae9a744e45c0646b36396e846031ec4ffe7f
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-11-22 20:37:00 +0000

     * configure.in: Add test/name-test/Makefile to the generated
     Makefile list

	    * dbus/dbus-shared.h (#define
	    DBUS_NAME_FLAG_ALLOW_REPLACEMENT):
	    New flag which replaces DBUS_NAME_FLAG_PROHIBIT_REPLACEMENT
	    (#define DBUS_NAME_FLAG_DO_NOT_QUEUE): New flag for specifying
	    not to queue an ower if it can't be the primary owner

	    * bus/bus.h: Add new internal BusOwner struct

	    * bus/driver.c (bus_driver_handle_hello): Send flags (0
	    for default)
	    to bus_registry_ensure and don't set the prohibit_replacement
	    flag
	    since they are now set per BusOwner and not per name.
	    (bus_driver_handle_list_queued_owners): bus method
	    (ListQueuedOwners)
	    that returns the list of connections in a name's connection
	    queue

	    * bus/services.c (struct BusService): remove
	    prohibit_replacement field
	    (struct BusOwner): new struct for keeping track of queued
	    connections
	    and their associated flags for the queue
	    (struct BusRegistry): add a BusOwner memory pool
	    (bus_registry_new): initialize the BusOwner memory pool
	    (bus_registry_unref): free the BusOwner memory pool
	    (_bus_service_find_owner_link): new internal method for
	    searching the queue for a specific connection
	    (bus_owner_set_flags): new method for adding setting the
	    flags on a
	    bus owner
	    (bus_owner_new): new method that creates a BusOwner object
	    from the
	    pool and sets its flags
	    (bus_owner_ref, bus_owner_unref): ref counting for BusOwner
	    objects
	    (bus_registry_ensure): Add the flags parameter
	    (bus_registry_acquire_service): Switch from using raw
	    connections to
	    using the BusOwner struct
	    Add new state machine for dealing with the new set of flags
	    (bus_registry_set_service_context_table, struct
	    OwnershipCancelData,
	    cancel_ownership, free_ownership_cancel_data,
	    add_cancel_ownership_to_transaction, struct
	    OwnershipRestoreData,
	    restore_ownership, free_ownership_restore_data,
	    add_restore_ownership_to_transaction): Switch to using
	    BusOwner
	    instead of raw connections
	    (bus_service_add_owner): Add flags parameter
	    Switch to using BusOwner instead of raw connections
	    Add state machine for dealing with the new set of flags
	    (bus_service_swap_owner): Swaps the first and second owners
	    in the
	    queue.  Used to make sure proper signals are sent when a
	    service looses
	    or gains primary ownership.  We never insert an owner at
	    the top of the
	    queue.  Instead we insert it in the second position and
	    then swap.
	    (bus_service_remove_owner): Remove the owner from the
	    queue sending
	    out the NameLost and NameOwnerChanged signals if the we
	    were the
	    primary owner
	    (bus_service_get_primary_owners_connection): New method
	    that extracts
	    the connection from the primary owner
	    (bus_service_get_primary_owner): Returns the BusOwner instead
	    of the
	    connection
	    (bus_service_get_allow_replacement): Changed from the old
	    bus_service_get_prohibit_replacement method.  Checks the
	    flags of the
	    primary owner and returns if it can be replaced or not
	    (bus_service_set_prohibit_replacement): removed
	    (bus_service_has_owner): returns TRUE if and owner with
	    the specified connection exists in the queue

	    * dbus/dbus-bus.c (dbus_bus_connection_get_unique_name):
	    New helper
	    method that only compiles if tests are enabled.  Allows us
	    to get the
	    unique name of a connection so we can check it against the
	    queue when
	    doing regression tests

	    * bus/activation.c
	    (bus_activation_send_pending_auto_activate),
	    bus/dispatch.c (bus_dispatch),
	    bus/driver.c (bus_driver_handle_get_service_owner,
	    bus_driver_handle_get_connection_unix_user,
	    bus_driver_handle_get_connection_unix_process_id,
	    bus_driver_handle_get_connection_selinux_security_context),
	    bus/signals.c (connection_is_primary_owner):
	    use bus_service_get_primary_owners_connection instead of
	    bus_service_get_primary_owner

	    * dbus/dbus-sysdeps.c (_dbus_connect_unix_socket,
	    _dbus_listen_unix_socket): Calculate the length of the socket
	    path and use that instead of using a fixed length which was
	    causing socket names to contain many trailing Nul bytes.

	    * dbus/dbus-glib-lowlevel.h, glib/dbus-gobject.c
	    (dbus_g_method_get_sender): New method for extracting
	    the sender
	    from a DBusGMethodInvocation
	    (dbus_g_method_return_get_reply): changed name to
	    dbus_g_method_get_reply
	    (dbus_g_method_return_send_reply): changed name to
	    dbus_g_method_send reply

	    * doc/dbus-specification.xml: New docs that describe how
	    the new
	    queueing system works and talks about the changes to the how
	    we specify socket names

	    * glib/examples/example-service.c,
	    glib/examples/example-signal-emitter.c,
	    glib/examples/statemachine/statemachine-server.c:
	    Changed the RequestName flags to the new system

	    * test/name-test/ (test-names.c, run-test.sh, Makefile.am):
	    New
	    regression test suite for testing various states of the new
	    queueing system

M	glib/dbus-gobject.c
M	glib/examples/example-service.c
M	glib/examples/example-signal-emitter.c
M	glib/examples/statemachine/statemachine-server.c

commit 57b6ef4e8648c0c7f9b059690c4a35e73932669f
Author: Robert McQueen <robot101@debian.org>
Date:	2005-11-15 19:34:32 +0000

    2005-11-15 Robert McQueen <robot101@debian.org>

	    * dbus/dbus-glib-lowlevel.h, glib/dbus-gobject.c: Patch
	    from Rob
	    Taylor to add two methods, dbus_g_method_return_get_reply and
	    dbus_g_method_return_send_reply, to allow you to get the reply
	    message from a DBusGMethodInvocation, append arbitrary stuff
	    to it,
	    and send it. The GLib bindings can't marshal a return value of
	    something like a(s) if the array is empty - ultimately they
	    should be
	    made to heed the signature of the out arguments as the
	    Python bindings
	    now can, but this is a workable interim solution which
	    might have
	    other applications.

M	glib/dbus-gobject.c

commit cf87837198ac181b16965dcc8fb3f65bc2efa8bd
Author: Robert McQueen <robot101@debian.org>
Date:	2005-10-29 17:02:58 +0000

    2005-10-29 Robert McQueen <robot101@debian.org>

	    * glib/Makefile.am, glib/examples/Makefile.am,
	    glib/examples/statemachine/Makefile.am: Merge patch from
	    Ubuntu by
	    Daniel Stone to replace explicit calls to libtool with
	    $(LIBTOOL).

	    * test/python/.cvsignore: Add run-with-tmp-session-bus.conf.

	    * tools/dbus-monitor.1, tools/dbus-monitor.c: Merge
	    dbus-monitor patch
	    from Ubuntu by Daniel Silverstone to allow specifying match
	    rules on
	    the command line.

M	glib/Makefile.am
M	glib/examples/Makefile.am
M	glib/examples/statemachine/Makefile.am

commit 3a8319b792df4ce260f8cf1e0f95fadd76942d75
Author: Ross Burton <ross@openedhand.com>
Date:	2005-10-27 16:35:43 +0000

    Cleanups

M	glib/dbus-gobject.c

commit 29f0ea31b256784b4e75cdedcb822f30fe804dd3
Author: Ross Burton <ross@openedhand.com>
Date:	2005-10-25 15:57:13 +0000

    Add const keywords

M	glib/dbus-gmain.c
M	glib/dbus-gobject.c

commit f4b2bdf28c5e589d9161e27bf89e636c8226169f
Author: Ross Burton <ross@openedhand.com>
Date:	2005-10-25 08:54:57 +0000

    Add a NoReply annotation

M	glib/dbus-binding-tool-glib.c
M	glib/dbus-binding-tool-glib.h

commit adc1cd1de84b057cc858b1226522d2fde96871a0
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-10-18 04:38:04 +0000

    * glib/dbus-gvalue-utils.c (hash_free_from_gtype): handle gdouble

    and G_TYPE_VALUE_ARRAY (DBUS_TYPE_STRUCT)
    (gvalue_from_hash_value, hash_value_from_gvalue): handle gdouble

    * glib/dbus-gvalue.c (dbus_gvalue_to_signature): add missing
    DBUS_STRUCT_BEGIN_CHAR and DBUS_STRUCT_END_CHAR charaters
    when constructing struct signatures

    * python/_dbus.py (Bus): handle private connections using the
    private keyword in the constructor. defaults to private=False
    (Bus::close): new method to close a connection to the bus

    * python/dbus_bindings.pyx (Connection::close): renamed method
    was previously called disconnect
    (bus_get): now supports getting a private connection

    * python/proxies.py (ProxyMethod::__call__): check if ignore_reply
    keyword is set to True.  if it is, execute the method without waiting
    for a reply
    (ProxyObject::_introspect_execute_queue): new method for executing
    all the pending methods that were waiting for the introspect to
    finish.  this is called when introspect either succeeds or fails
    (ProxyObject::_introspect_error_handler): call queued methods

M	glib/dbus-gvalue-utils.c
M	glib/dbus-gvalue.c

commit 8c16af02c159982b451289945835a86ff56805c2
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-10-05 20:43:46 +0000

    * glib/dbus-gvalue.c (marshal_variant): call _dbus_gvalue_marshal
    instead of marshal basic so we can handle recursive types in a variant

    * test/glib/test-dbus-glib.c: Add test for marshaling recurive types
      in variants

    * test/glib/test-service-glib.c, test-service-glib.xml
      (my_object_echo_variant [EchoVariant],
      my_object_process_variant_of_array_of_ints123
      [ProcessVariantOfArrayOfInts123]):
      Add two test methods

    * python/introspect_parser.py: New module for parsing introspect
      data.

    * python/dbus_bindings.pyx:
      (various places): when throwing errors fix to use errormsg instead
      of message local variable because Pyrex can get confused with other
      message variables (initial patch by Robert McQueen
      <robert.mcqueen at collabora.co.uk>)
      (MessageIter::parse_signature_block): new method for getting
      the next
      block in a signiture.
      (MessageIter::append_strict): new method for appending values
      strictly
      using the passed in signature instead of guessing at the type
      (MessageItter:: append_dict, append_struct, append_array): use
      signatures to marshal children if the signature is available

    * python/exceptions.py (IntrospectionParserException): new exception

    * python/proxies.py (ProxyMethod::__call__): Marshal args with
      introspected signatures if available, else we fall back to the
      old way of doing things.
      (ProxyObject::_introspect_reply_handler ): parse introspection data

    * python/service.py (ObjectType::_reflect_on_method): Properly
      terminate <method> if there are no args in the reflection data

    * test/python/test-client.py: add tests for talking with the GLib
      test server.  This gives us better coverage for introspection since
      python to python will always generate arguments as variants.
      It also
      allows us to test the robustness of the GLib bindings and
      interlanguage
      communications.

M	glib/dbus-gvalue.c

commit b489f57506320ba3e29088dc612e27112c6a1854
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-09-26 22:26:38 +0000

    * glib/dbus-glib-tool.c: removed extra comma at the end of the
    DBusBindingOutputMode enum which was causing a warning. #include
    <time.h> so using time_t is explicitly defined

M	glib/dbus-glib-tool.c

commit a32ca0058020e7e23d72d9ad69fe881ba8b98e93
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-09-06 22:38:54 +0000

    * Released 0.50

    * Patch from Steve Grubb:
    - bus/activation.c (bus_activation_service_reload_test): clean up
    some indentation
    - dbus/dbus-keyring.c (_dbus_keyring_reload): fix conditional
    - dbus/dbus-message-factory.c (generate_special): fix a couple of
    buffer overflows in the test suite.  This is non critical because
    it can not be exploited and this code is only run when doing a
    make check.

    * Patch from Yaakov Selkowitz: Build fixes for Cygwin
    - configure.in: Don't check and link against kdecore, only qt headers
    - dbus/Makefile.am: Add -no-undefined to libdbus_1_la_LDFLAGS
    - gcj/org/freedesktop/dbus/Makefile.am:
    add libdbus_gcj_1_la_LDFLAGS = -no-undefined
    - glib/Makefile.am: Add -no-undefined to libdbus_glib_1_la_LDFLAGS
    and $(DBUS_GLIB_LIBS) to dbus_binding_tool_LDADD
    - qt/Makefile.am: Add -no-undefined to libdbus_qt_1_la_LDFLAGS
    - tools/Makefile.am: Add platform extentions to binaries
    (i.e. .exe on windows)

    * configure.in:
    - Make it so if no suitable version of python is found we only
    disable building python instead of exiting the configure script
    - Require version 2.4 of glib for glib bindings
    - Up version to 0.50

    * python/__init__.py: Sync version with libdbus to (0,50,0)

M	glib/Makefile.am

commit 23fb630c1e907187c8d7aa5539b30a34e7cc9632
Author: Colin Walters <walters@verbum.org>
Date:	2005-08-26 02:00:37 +0000

    2005-08-25 Colin Walters <walters@verbum.org>

	    * glib/dbus-gproxy.c (dbus_g_proxy_call): Doc update, thanks
	    to Ryan Lortie for the suggestion.

M	glib/dbus-gproxy.c

commit 8e13d06500c5b4df219891fc4b5b8242cb9f5cae
Author: Ross Burton <ross@openedhand.com>
Date:	2005-08-17 17:30:45 +0000

    Unref message and protect against NULL

M	glib/dbus-gproxy.c

commit 03dc49be2e41245f107e71194ebef428d4d4ccf7
Author: Colin Walters <walters@verbum.org>
Date:	2005-08-16 21:26:12 +0000

    2005-08-16 Colin Walters <walters@verbum.org>

	    * glib/dbus-gobject.c (dbus_set_g_error): Don't lose if the
	    DBusError message is NULL.

M	glib/dbus-gobject.c

commit 20ab99c264aa730de304f637a7e4eacec3e1686d
Author: Colin Walters <walters@verbum.org>
Date:	2005-08-04 15:49:30 +0000

    2005-08-04 Colin Walters <walters@verbum.org>

	    * glib/dbus-gvalue-utils.h
	    (_dbus_g_type_specialized_builtins_init)
	    (dbus_g_type_is_fixed, dbus_g_type_fixed_get_size)
	    (dbus_gvalue_set_from_pointer,
	    dbus_g_hash_table_value_foreach)
	    (dbus_g_hash_table_insert_values,
	    dbus_g_hash_table_insert_steal_values)
	    (dbus_gtype_is_valid_hash_key, dbus_gtype_is_valid_hash_value)
	    (dbus_g_hash_func_from_gtype, dbus_g_hash_free_from_gtype)
	    (dbus_g_hash_equal_from_gtype, dbus_gvalue_stor,
	    dbus_gvalue_take):
	    * glib/dbus-gvalue.h (dbus_g_value_types_init)
	    (dbus_gvalue_demarshal, dbus_gvalue_demarshal_variant)
	    (dbus_gvalue_demarshal_message, dbus_gvalue_marshal):

	    Prefix name with _ to ensure they're not exported.
	    All callers
	    updated.

	    * glib/dbus-gvalue.c (typecode_to_gtype)
	    (dbus_typecode_maps_to_basic, basic_typecode_to_gtype)
	    (signature_iter_to_g_type_dict)
	    (signature_iter_to_g_type_array)
	    (dbus_gtype_from_signature_iter, dbus_gtype_from_signature)
	    (dbus_gtypes_from_arg_signature):
	    Move to dbus-gsignature.c.

	    * glib/dbus-binding-tool-glib.c
	    (dbus_binding_tool_output_glib_server): Call
	    dbus_g_type_specialized_builtins_init instead of
	    dbus_g_value_types_init.
	    (dbus_binding_tool_output_glib_client): Ditto.

	    * glib/Makefile.am (DBUS_GLIB_INTERNALS): Add
	    dbus-gsignature.c
	    and dbus-gsignature.h

	    * test/glib/test-service-glib.c (my_object_rec_arrays): Delete
	    unused variable.

M	glib/Makefile.am
M	glib/dbus-binding-tool-glib.c
M	glib/dbus-gmain.c
M	glib/dbus-gobject.c
M	glib/dbus-gproxy.c
A	glib/dbus-gsignature.c
A	glib/dbus-gsignature.h
M	glib/dbus-gvalue-utils.c
M	glib/dbus-gvalue-utils.h
M	glib/dbus-gvalue.c
M	glib/dbus-gvalue.h

commit f19bb3b8b599f006e51a1ff81447ac6470c249fc
Author: Colin Walters <walters@verbum.org>
Date:	2005-08-03 23:21:49 +0000

    2005-08-03 Colin Walters <walters@verbum.org>

	    * glib/dbus-gobject.c: Add tests on hardcoded object info;
	    this should
	    catch any incompatible changes accidentally made.

M	glib/dbus-gobject.c

commit f902eead6b209181f7a26b4cb1a967661ac86117
Author: Colin Walters <walters@verbum.org>
Date:	2005-08-01 16:12:53 +0000

    2005-08-01 Colin Walters <walters@verbum.org>

	    Patch from Joe Markus Clarke:

	    * glib/dbus-gidl.c (property_info_unref, arg_info_unref): Fix
	    use-after-free.

M	glib/dbus-gidl.c

commit db1be2d67b4239496940080f44c7e05eed42a610
Author: Colin Walters <walters@verbum.org>
Date:	2005-08-01 16:07:19 +0000

    2005-08-01 Colin Walters <walters@verbum.org>

	    Patch from Joe Markus Clarke:

	    * glib/dbus-gvalue.c (dbus_g_value_types_init):
	    * glib/dbus-gvalue-utils.c
	    (dbus_g_type_specialized_builtins_init)
	    * glib/dbus-gobject.c (write_interface):

	    Don't use C99 style initializers (bug #3933).

M	glib/dbus-gobject.c
M	glib/dbus-gvalue-utils.c
M	glib/dbus-gvalue.c

commit 04045b587a62e4b5cafbad0b81e18761c28a41e5
Author: Havoc Pennington <hp@redhat.com>
Date:	2005-07-31 02:09:15 +0000

    2005-07-30 Havoc Pennington <hp@redhat.com>

	    * fix a bunch of Doxygen warnings and mistakes

M	glib/dbus-glib.c
M	glib/dbus-gobject.c
M	glib/dbus-gproxy.c

commit f91e8613d913ee943afa5bbb6cdafb2ce062c6ef
Author: Ross Burton <ross@openedhand.com>
Date:	2005-07-25 19:16:22 +0000

    Remove matchers when all proxies are removed

M	glib/dbus-gproxy.c

commit 2c755e157a9b41451efd5fd88e74c37501e21127
Author: Colin Walters <walters@verbum.org>
Date:	2005-07-24 18:04:23 +0000

    2005-07-24 Colin Walters <walters@verbum.org>

	    * glib/dbus-gvalue.c (signature_iter_to_g_type_array):
	    Don't require
	    typedata; recursive arrays won't have it.

	    * test/glib/test-dbus-glib.c:
	    * test/glib/test-service-glib.c:
	    * test/glib/test-service-glib.xml: Add recursive arrays tests.

M	glib/dbus-gvalue.c

commit 6bf40ec5a63f7703070f951130d8e78cb044ec66
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-07-15 20:28:05 +0000

    * glib/Makefile.am: Add make-dbus-glib-error-switch.sh to EXTRA_DIST
    so distcheck doesn't fail

    * glib/examples/Makefile.am: Add example-service.xml and
      example-signal-emitter.xml to EXTRA_DIST so distcheck doesn't fail

    * glib/examples/statemachine/Makefile.am: Add statemachine.xml and
      statemachine-server.xml to EXTRA_DIST so distcheck doesn't fail

    * python/Makefile.am: Preprend $(srcdir)/ to source files so the
      compiler looks in the right places during distcheck

M	glib/Makefile.am
M	glib/examples/Makefile.am
M	glib/examples/statemachine/Makefile.am

commit a447f257bd0b557b661be74f2d63ba0d31366a46
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-07-15 19:15:05 +0000

    * glib/example/Makefile.am: Fix a typo which cause make distcheck
    to fail

M	glib/examples/Makefile.am

commit ce277d89860aaf05064d11eb24878cbf41326ff2
Author: Ross Burton <ross@openedhand.com>
Date:	2005-07-15 13:25:48 +0000

    Don't leak messages when calling methods

M	glib/dbus-gproxy.c

commit 877add82e329e1de4ab7b4d99084362e250fa34c
Author: Colin Walters <walters@verbum.org>
Date:	2005-07-12 17:57:04 +0000

    2005-07-12 Colin Walters <walters@verbum.org>

	    * glib/examples/statemachine/Makefile.am
	    (statemachine-server-glue.h)
	    (statemachine-glue.h):
	    * glib/examples/Makefile.am (example-service-glue.h)
	    (example-signal-emitter-glue.h):
	    * glib/Makefile.am (dbus-glib-error-switch.h):
	    Add libtool --mode=execute so we use the built library instead
	    of any installed one.

M	glib/Makefile.am
M	glib/examples/Makefile.am
M	glib/examples/statemachine/Makefile.am

commit 31ca9e74c599c17f802698ad8184f9ae654983c5
Author: Colin Walters <walters@verbum.org>
Date:	2005-07-11 16:12:49 +0000

    2005-07-11 Colin Walters <walters@verbum.org>

	    * glib/dbus-gvalue.c (struct _DBusGValue): Delete.
	    (dbus_g_value_types_init): Remove assertion.
	    (dbus_g_value_get_g_type, dbus_g_value_open)
	    (dbus_g_value_iterator_get_values, dbus_g_value_get_signature)
	    (dbus_g_value_copy, dbus_g_value_free): Delete unimplemented
	    functions related to DBusGValue.  Now we marshal/demarshal
	    structures as GValueArray.
	    (dbus_gtype_from_signature_iter): Return G_TYPE_VALUE_ARRAY
	    for
	    structures.
	    (signature_iter_to_g_type_array): Don't call
	    signature_iter_to_g_type_struct.
	    (signature_iter_to_g_type_struct): Delete.
	    (dbus_gvalue_to_signature): Delete.
	    (dbus_gvalue_to_signature): New function with same name
	    as other
	    one; we can convert structures to signatures.
	    (demarshal_valuearray): New function.
	    (get_type_demarshaller): Use it.
	    (demarshal_recurse): Delete.
	    (marshal_proxy): New function.
	    (marshal_map): Warn if we can't determine signature from type.
	    (marshal_collection_ptrarray): Ditto.
	    (marshal_collection_array): Ditto.
	    (get_type_marshaller): Use marshal_valuearray.
	    (marshal_recurse): Delete.
	    (_dbus_gvalue_test): Add some tests.

	    * dbus/dbus-glib.h (struct _DBusGValueIterator):
	    (dbus_g_value_get_g_type, DBUS_TYPE_G_VALUE)
	    (dbus_g_value_open, dbus_g_value_iterator_get_value)
	    (dbus_g_value_iterator_get_values,
	    dbus_g_value_iterator_recurse)
	    (dbus_g_value_free): Remove prototypes.

	    * glib/dbus-binding-tool-glib.c
	    (dbus_g_type_get_lookup_function): Handle
	    G_TYPE_VALUE_ARRAY.

	    * glib/examples/example-service.c:
	    * glib/examples/example-client.c: Implement GetTuple.

	    * test/glib/test-dbus-glib.c:
	    * test/glib/test-service-glib.c:
	    * test/glib/test-service-glib.xml: Add structure tests.

M	glib/dbus-binding-tool-glib.c
M	glib/dbus-gvalue.c
M	glib/examples/example-client.c
M	glib/examples/example-service.c

commit 5c39fa43d8eb87284abe7d009349523ad5398db0
Author: Colin Walters <walters@verbum.org>
Date:	2005-07-10 22:54:18 +0000

    2005-07-10 Colin Walters <walters@verbum.org>

	    * doc/TODO: Knock off some GLib items with this patch.

	    * glib/dbus-gvalue-utils.c (_dbus_gtype_can_signal_error)
	    (_dbus_gvalue_signals_error): New functions.

	    * glib/dbus-gvalue-utils.h: Prototype them.

	    * glib/dbus-gobject.c (arg_iterate): Update to handle
	    return vals
	    and change to not output const/retval flags for input args.
	    All
	    callers updated.
	    (invoke_object_method): Refactor to handle return values.  Add
	    some more comments in various places.  Remove debug g_print.

	    * glib/dbus-binding-tool-glib.h
	    (DBUS_GLIB_ANNOTATION_RETURNVAL): New.

	    * glib/dbus-binding-tool-glib.c
	    (dbus_g_type_get_marshal_name):
	    Handle G_TYPE_NONE.
	    (compute_gsignature): New function; refactored from code from
	    compute_marshaller and compute_marshaller_name.  Enhance to
	    handle return values and async ops more cleanly.  Update for
	    async ops returning NONE instead of BOOLEAN.
	    (compute_marshaller, compute_marshaller_name): Call
	    compute_gsignature
	    and output appropriate string.
	    (generate_glue): Handle return value annotation.  Also don't
	    dump
	    constness flag for input arguments.

	    * glib/Makefile.am (DBUS_GLIB_INTERNALS): New variable;
	    contains
	    files shared between installed library and utilities.
	    (libdbus_glib_1_la_SOURCES): Move some stuf into
	    DBUS_GLIB_INTERNALS.
	    (libdbus_gtool_la_SOURCES): Suck in DBUS_GLIB_INTERNALS so the
	    binding tool can access gtype utility functions.

	    * test/glib/test-service-glib.c:
	    * test/glib/test-service-glib.xml:
	    * test/glib/test-dbus-glib.c: Add some tests for return
	    values.

M	glib/Makefile.am
M	glib/dbus-binding-tool-glib.c
M	glib/dbus-binding-tool-glib.h
M	glib/dbus-gobject.c
M	glib/dbus-gvalue-utils.c
M	glib/dbus-gvalue-utils.h
M	glib/examples/statemachine/.cvsignore

commit 00de44640de45aa6068ca9d1b42deb801b430320
Author: Colin Walters <walters@verbum.org>
Date:	2005-07-09 18:54:45 +0000

    2005-07-09 Colin Walters <walters@verbum.org>

	    * glib/dbus-gparser.c (parse_annotation): Add annotations to
	    argument if available, not method.

	    * glib/dbus-gobject.c (arg_iterate): More verbose warnings.
	    (invoke_object_method): First, remove some redundant
	    GValues (object_value, error_value) in favor of working on
	    array directly.  Second, rework constness to be less buggy.
	    Now we iterate directly over the argument metadata instead
	    of parallel iterating over output signature and metadata.

	    * glib/dbus-glib-tool.h: Add INVALID_ANNOTATION error.

	    * glib/dbus-binding-tool-glib.c (generate_glue): Barf on const
	    annotation on input args.

M	glib/dbus-binding-tool-glib.c
M	glib/dbus-glib-tool.h
M	glib/dbus-gobject.c
M	glib/dbus-gparser.c

commit 91dc6d18c4ccc69fef3c12e6f628f7458c1d4511
Author: Colin Walters <walters@verbum.org>
Date:	2005-07-09 17:52:51 +0000

    2005-07-09 Colin Walters <walters@verbum.org>

	    * glib/dbus-binding-tool-glib.h (DBUS_GLIB_ANNOTATION_CONST):
	    Define.

	    * glib/dbus-binding-tool-glib.c (generate_glue): Handle Const
	    annotation.

	    * glib/dbus-gobject.c (arg_iterate): Update to parse
	    constval too.
	    (method_dir_signature_from_object_info): Handle arg_iterate
	    change.
	    (write_interface): Ditto.
	    (lookup_object_info): Don't barf if format_version is > 0.
	    (invoke_object_method): Handle arg constness.

	    * glib/dbus-gidl.c (struct ArgInfo): Add annotations.
	    (arg_info_new): Create.
	    (arg_info_unref): Destroy.
	    (arg_info_get_annotations, arg_info_get_annotation)
	    (arg_info_add_annotation): New functions.

	    * glib/dbus-gidl.h: Prototype them.

	    * glib/dbus-gparser.c (parse_annotation): Allow annotations in
	    args, disallow them in properties.
	    (parse_annotation): Handle arg annotations.

	    * test/glib/test-service-glib.xml:
	    * test/glib/test-service-glib.c: Update to make some methods
	    const.

M	glib/dbus-binding-tool-glib.c
M	glib/dbus-binding-tool-glib.h
M	glib/dbus-gidl.c
M	glib/dbus-gidl.h
M	glib/dbus-gobject.c
M	glib/dbus-gparser.c

commit 52438e8f3f67fa96ffd9607bad34968875d90226
Author: Colin Walters <walters@verbum.org>
Date:	2005-07-09 01:46:51 +0000

    2005-07-08 Colin Walters <walters@verbum.org>

	    * test/glib/test-service-glib.xml:
	    * test/glib/test-service-glib.c:
	    * test/glib/test-dbus-glib.c: Test a{sv}.

	    * glib/examples/statemachine/statemachine.c:
	    * glib/examples/statemachine/statemachine-server.c:
	    * glib/examples/statemachine/statemachine-client.c: Fix
	    some bugs,
	    add progress bar, etc.

	    * glib/dbus-gvalue.c (register_array, register_dict):
	    Delete; not
	    needed anymore due to generic array/map marshalling.
	    (dbus_g_value_types_init): Don't register basic arrays or the
	    string/string hash.
	    (dbus_gtype_from_signature_iter): Don't try to recurse into
	    variants.
	    (dbus_gtype_to_signature): Check collection/map before type
	    metadata.
	    (demarshal_garray_basic): Renamed to
	    demarshal_collection_array.
	    (demarshal_ghashtable): Renamed to demarshal_map; fix to
	    use new
	    generic map creation/append functions instead of hash table
	    specifically.
	    (get_type_demarshaller): Handle maps.
	    (demarshal_collection): Dispatch on collection type to either
	    demarshal_collection_ptrarray or demarshal_collection_array.
	    (get_type_marshaller): Handle maps.
	    (marshal_collection): Dispatch collection type to either
	    marshal_collection_ptrarray or marshal_collection_array.
	    (_dbus_gvalue_test): New test.

	    * glib/dbus-gvalue-utils.c (unset_and_free_g_value):
	    New function.
	    (hash_free_from_gtype): Use it to free GValues.
	    (hashtable_append): New function.
	    (ptrarray_append): Fix prototype.
	    (slist_append): Ditto.
	    (_dbus_gvalue_utils_test): Extend tests.

	    * glib/dbus-gtype-specialized.c
	    (dbus_g_type_specialized_init_append): Renamed from
	    dbus_g_type_specialized_collection_init_append.  Remove const
	    from
	    value, since we steal it.
	    (dbus_g_type_specialized_map_append): New function.

	    * glib/dbus-gtype-specialized.h: Update prototypes.
	    Add DBusGTypeSpecializedMapAppendFunc.

	    * glib/dbus-gtest.c (dbus_glib_internal_do_not_use_run_tests):
	    Run
	    _dbus_gvalue_test.

	    * glib/dbus-gtest.h: Prototype it.

M	glib/dbus-gtest.c
M	glib/dbus-gtest.h
M	glib/dbus-gtype-specialized.c
M	glib/dbus-gtype-specialized.h
M	glib/dbus-gvalue-utils.c
M	glib/dbus-gvalue.c
M	glib/examples/statemachine/statemachine-client.c
M	glib/examples/statemachine/statemachine-server.c
M	glib/examples/statemachine/statemachine.c

commit 6758d07f4dd3bee533488381c8cf236d9d99a5f0
Author: Ross Burton <ross@openedhand.com>
Date:	2005-07-08 17:02:42 +0000

    Make async bindings work again

M	glib/dbus-binding-tool-glib.c

commit 8068477b92f2ee5ca19623e033e335d4b16d8de5
Author: Colin Walters <walters@verbum.org>
Date:	2005-07-08 16:25:28 +0000

    2005-07-08 Colin Walters <walters@verbum.org>

	    * tools/Makefile.am: Kill of print-introspect in favor
	    of using
	    dbus-send --print-reply=literal.
	    * tools/print-introspect.c: Deleted.

	    * test/glib/test-service-glib.xml:
	    * test/glib/test-service-glib.c (my_object_get_objs): New test
	    for "ao".

	    * test/glib/test-dbus-glib.c (echo_received_cb): Free
	    echo data.
	    (main): Test GetObjs.

	    * glib/examples/statemachine/Makefile.am:
	    * glib/examples/statemachine/sm-marshal.list:
	    * glib/examples/statemachine/statemachine-client.c:
	    * glib/examples/statemachine/statemachine-server.c:
	    * glib/examples/statemachine/statemachine-server.xml:
	    * glib/examples/statemachine/statemachine.c:
	    * glib/examples/statemachine/statemachine.h:
	    * glib/examples/statemachine/statemachine.xml:

	    New example.

	    * glib/examples/example-service.c (main): Move invocation
	    of dbus_g_object_type_install_info earlier, to emphasize it
	    should only be done once.

	    * glib/examples/example-signal-emitter.c (main): Ditto.

	    * glib/examples/Makefile.am (SUBDIRS): Include statemachine.

	    * glib/dbus-gvalue.h (dbus_gtype_to_signature)
	    (dbus_gvalue_marshal): Update prototypes.

	    * glib/dbus-gvalue.c: Update all marshalling functions to take
	    const GValue instead of GValue.
	    (signature_iter_to_g_type_array): Return a GPtrArray for
	    nonfixed
	    types.
	    (dbus_gvalue_to_signature): Update for dbus_gtype_to_signature
	    change.
	    (dbus_gtype_to_signature): Handle generic collecitons
	    and maps.
	    Return a newly-allocated string.
	    (demarshal_proxy, demarshal_object_path, demarshal_object)
	    (demarshal_strv, demarshal_ghashtable): Set error, don't
	    assert if
	    we get the wrong types from message.
	    (get_type_demarshaller): New function, extracted from
	    dbus_gvalue_demarshal.
	    (demarshal_collection): New function, demarshals generic
	    collection.
	    (dbus_gvalue_demarshal): Just invoke result of
	    get_type_demarshaller.  Throw error if we don't have one.
	    (marshal_garray_basic): Abort on OOM.
	    (get_type_marshaller): New function, extracted from
	    dbus_gvalue_marshal.
	    (collection_marshal_iterator, marshal_collection): New
	    functions;
	    implements generic marshalling for an iteratable specialized
	    collection.
	    (dbus_gvalue_marshal): Just invoke result of
	    get_type_marshaller.

	    * glib/dbus-gvalue-utils.c (gvalue_from_ptrarray_value):
	    Handle
	    G_TYPE_STRING.
	    (ptrarray_value_from_gvalue): Ditto.
	    (ptrarray_append, ptrarray_free): New functions.
	    (slist_constructor, slist_iterator, slist_copy_elt,
	    slist_copy)
	    (slist_append, slist_end_append, slist_free): New functions.
	    (dbus_g_type_specialized_builtins_init): Add append fuctions
	    for GPtrArray and GSList.  Register GSList.
	    (test_specialized_hash, _dbus_gvalue_utils_test): New
	    functions.

	    * glib/dbus-gtype-specialized.h
	    (DBusGTypeSpecializedAppendContext):
	    New.
	    (dbus_g_type_specialized_collection_init_append)
	    (dbus_g_type_specialized_collection_append)
	    (dbus_g_type_specialized_collection_end_append): Prototype.
	    (DBusGTypeSpecializedCollectionVtable): Add append_func and
	    end_append_func.

	    * glib/dbus-gtype-specialized.c
	    (dbus_g_type_specialized_collection_init_append)
	    (dbus_g_type_specialized_collection_append)
	    (dbus_g_type_specialized_collection_end_append): New
	    functions.
	    (dbus_g_type_map_value_iterate): Take const GValue.
	    (dbus_g_type_collection_value_iterate): Ditto.

	    * glib/dbus-gtest.c (dbus_glib_internal_do_not_use_run_tests):
	    Run
	    _dbus_gvalue_utils_test.

	    * glib/dbus-gtest.h: Prototype it.

	    * glib/dbus-gproxy.c (dbus_g_proxy_manager_filter): Avoid
	    using uninitialized owner_list.
	    (dbus_g_proxy_begin_call_internal): Move return_if_fail to
	    public API.
	    (dbus_g_proxy_end_call_internal): Update to use error set
	    from dbus_gvalue_demarshal instead of setting it here.
	    (dbus_g_proxy_begin_call): Move return_if_fail here.

	    * glib/dbus-gobject.c (write_interface): Update for
	    dbus_gtype_to_signature returning new string.

	    * configure.in: Add glib/examples/statemachine.

M	glib/dbus-gobject.c
M	glib/dbus-gproxy.c
M	glib/dbus-gtest.c
M	glib/dbus-gtest.h
M	glib/dbus-gtype-specialized.c
M	glib/dbus-gtype-specialized.h
M	glib/dbus-gvalue-utils.c
M	glib/dbus-gvalue-utils.h
M	glib/dbus-gvalue.c
M	glib/dbus-gvalue.h
M	glib/examples/Makefile.am
M	glib/examples/example-service.c
M	glib/examples/example-signal-emitter.c
A	glib/examples/statemachine/.cvsignore
A	glib/examples/statemachine/Makefile.am
A	glib/examples/statemachine/sm-marshal.list
A	glib/examples/statemachine/statemachine-client.c
A	glib/examples/statemachine/statemachine-server.c
A	glib/examples/statemachine/statemachine-server.h
A	glib/examples/statemachine/statemachine-server.xml
A	glib/examples/statemachine/statemachine.c
A	glib/examples/statemachine/statemachine.h
A	glib/examples/statemachine/statemachine.xml

commit 8b39e9d32cb505d4f9550ca24627020e5edd9681
Author: Colin Walters <walters@verbum.org>
Date:	2005-07-06 21:27:45 +0000

    2005-07-06 Colin Walters <walters@verbum.org>

	    * dbus/dbus-glib.h (DBusGPendingCall, DBusGPendingCallNotify)
	    (DBUS_TYPE_G_PENDING_CALL, dbus_g_pending_call_get_g_type)
	    (dbus_g_pending_call_ref, dbus_g_pending_call_unref): Delete.
	    (dbus_g_pending_call_set_notify, dbus_g_pending_call_cancel):
	    Delete in favor of dbus_g_proxy_begin_call and
	    dbus_g_proxy_cancel_call.
	    (DBusGProxyCall, DBusGProxyCallNotify): New.
	    (dbus_g_proxy_begin_call): Change prototype to take callback,
	    user
	    data, and destroy function.  This replaces
	    dbus_g_pending_call_set_notify.
	    (dbus_g_proxy_cancel_call): Prototype.
	    (DBusGAsyncData): Delete, shouldn't be needed anymore.

	    * glib/dbus-gproxy.c (struct _DBusGProxy): Add call_id_counter
	    and
	    pending_calls map.
	    (struct _DBusGProxyManager): Add bus_proxy member, which is an
	    internal proxy for calls to the bus. Remove
	    pending_nameowner_calls, now the internal proxy keeps track.
	    (dbus_g_proxy_manager_unref): Unref bus proxy, remove
	    reference to
	    pending_nameowner_calls.
	    (got_name_owner_cb): Update prototype, and use
	    dbus_g_proxy_end_call.
	    (got_name_owner_cb): Remove reference to
	    pending_nameowner_calls.
	    (dbus_g_proxy_manager_register): Delete directly libdbus
	    code in
	    favor of using internal proxy.
	    (dbus_g_proxy_manager_unregister): Update to use
	    dbus_g_proxy_cancel_call for any pending GetNameOwner call.
	    (dbus_g_proxy_init): Initialize pending calls map.
	    (dbus_g_proxy_constructor): New.
	    (dbus_g_proxy_class_init): Add get/set property functions,
	    constructor, and add NAME, PATH, and INTERFACE properties.
	    (cancel_pending_call): New function.
	    (dbus_g_proxy_dispose): Iterate over any outstanding calls and
	    cancel them.
	    (dbus_g_proxy_set_property, dbus_g_proxy_get_property): New.
	    (GPendingNotifyClosure): New structure.
	    (d_pending_call_notify, d_pending_call_free): Moved here from
	    dbus-glib.c.
	    (DBUS_G_VALUE_ARRAY_COLLECT_ALL): Moved around to satisfy
	    function
	    ordering.
	    (manager_begin_bus_call): New internal function for talking to
	    internal bus proxy.
	    (dbus_g_proxy_new): Construct object using GObjet properties.
	    (dbus_g_proxy_begin_call_internal): Update to take user
	    data, etc.
	    Create closure of same, and insert call into map of pending
	    calls.
	    (dbus_g_proxy_end_call_internal): Take call id instead
	    of pending
	    call.  Look up pending call in current set.  Remove it
	    when we've
	    completed.
	    (dbus_g_pending_call_end, dbus_g_proxy_end_call_internal):
	    Delete.
	    (dbus_g_proxy_begin_call): Change API to take callback,
	    user data,
	    and destroy function directly.
	    (dbus_g_proxy_end_call): Update to take DBusGProxyCall.
	    (dbus_g_proxy_call): Invoke with NULL callback.
	    (dbus_g_proxy_cancel_call): New function, replaces
	    dbus_g_pending_call_cancel.

	    * glib/dbus-gparser.c (validate_signature): Fix call to
	    dbus_set_g_error.

	    * glib/dbus-gobject.c
	    (dbus_g_object_type_dbus_metadata_quark):
	    New quark for attaching metadata to GType.
	    (info_hash): Delete.
	    (lookup_object_info): Look up using quark.
	    (dbus_g_object_type_install_info): Check that a type is
	    classed,
	    not that it's an object.  Also just install type data
	    using quark
	    instead of using global hash.

	    * glib/dbus-glib.c (dbus_g_pending_call_ref)
	    (dbus_g_pending_call_unref, dbus_pending_call_get_g_type)
	    (GPendingNotifyClosure): Delete.
	    (d_pending_call_notify, d_pending_call_free): Move to
	    dbus-gproxy.c.
	    (dbus_g_pending_call_set_notify, dbus_g_pending_call_cancel):
	    Delete.

	    * glib/dbus-binding-tool-glib.c (generate_client_glue):
	    Disable async
	    client method generation until we can fix it...

	    * tools/dbus-viewer.c (load_child_nodes): Use
	    dbus_g_proxy_call.
	    (load_from_service_thread_func): Ditto.

	    * tools/dbus-names-model.c (struct NamesModel): Hold
	    DBusGProxyCall.
	    (have_names_notify): Update prototype, use
	    dbus_g_proxy_cancel_call.
	    (names_model_reload): Update for new dbus_g_proxy_begin_call
	    API.

	    * tools/dbus-monitor.c (filter_func): Update for print_message
	    API change.

	    * test/glib/test-dbus-glib.c: Add more tests for async
	    invocations.  Update many begin_call/end_call pairs to
	    just use
	    dbus_g_proxy_call.

	    * tools/dbus-send.c (main): Add --print-reply=literal mode.
	    This
	    allows us to dump print-introspect.c.

	    * tools/dbus-print-message.h (print_message): Add literal
	    argument
	    to print_message which is intended to allow printing
	    arguments without
	    metadata like "string=".

	    * tools/dbus-print-message.c (print_iter): Add literal
	    argument.
	    (print_message): Allow printing string messages literally.

M	glib/dbus-binding-tool-glib.c
M	glib/dbus-glib.c
M	glib/dbus-gobject.c
M	glib/dbus-gparser.c
M	glib/dbus-gproxy.c

commit 462a36e4898da053ba749857511f2d634dbea665
Author: Colin Walters <walters@verbum.org>
Date:	2005-07-05 16:39:56 +0000

    2005-07-05 Colin Walters <walters@verbum.org>

	    * glib/dbus-gproxy.c (marshal_dbus_message_to_g_marshaller):
	    Remove value refcount leak, original patch from Jorn Baayen
	    <jorn@openedhand.com>.  Also remove useless extra value
	    in favor
	    of prepending to value array directly.

M	glib/dbus-gproxy.c

commit d80b7960d7d189d7c33e6d230fdbbf8b69546f60
Author: Colin Walters <walters@verbum.org>
Date:	2005-07-02 06:05:23 +0000

    2005-07-02 Colin Walters <walters@verbum.org>

	    * glib/dbus-gmain.c (_dbus_gmain_test): Fix test.

M	glib/dbus-gmain.c

commit c7f14e3c337601053b08dc07a186be81063fc005
Author: Colin Walters <walters@verbum.org>
Date:	2005-07-01 15:44:12 +0000

    2005-07-01 Colin Walters <walters@verbum.org>

	    Patch from Jonathan Matthew <jonathan@kaolin.hn.org>

	    * glib/dbus-gvalue.c (basic_typecode_to_gtype): Fix return
	    type.
	    (dbus_g_value_types_init): Marshal G_TYPE_CHAR as
	    DBUS_TYPE_BYTE,
	    G_TYPE_LONG as DBUS_TYPE_INT32, G_TYPE_ULONG as
	    DBUS_TYPE_UINT32,
	    and G_TYPE_FLOAT as DBUS_TYPE_DOUBLE.

M	glib/dbus-gvalue.c

commit 5c82c5ce0eba4ec3bbb0454f3987f56de968bf95
Author: Colin Walters <walters@verbum.org>
Date:	2005-06-30 18:22:09 +0000

    2005-06-30 Colin Walters <walters@verbum.org>

	    * test/glib/test-dbus-glib.c:
	    * test/glib/test-service-glib.c:
	    * test/glib/test-service-glib.xml: Update tests for new error
	    setting bits, also add async tests (patch from Ross Burton).

	    * test/glib/Makefile.am (test_service_glib_LDADD): Add
	    DBUS_GLIB_THREADS_LIBS.

	    * glib/dbus-gproxy.c (get_name_owner)
	    (dbus_g_pending_call_end_valist): Ditto.

	    * glib/dbus-gobject.c (error_metadata): New mapping from
	    GError
	    domain (GQuark) to DBusGErrorInfo.
	    (gerror_domaincode_to_dbus_error_name): Attempt to look
	    up error
	    quark in error_metadata.  Take message interface as default
	    error message interface.
	    (gerror_to_dbus_error_message): Pass message interface.
	    (dbus_set_g_error): Resurrected.
	    (dbus_g_error_info_free): New function.
	    (dbus_g_object_type_install_info): Use g_type_class_ref
	    instead
	    of _peek to actually create the object class if it hasn't been
	    created yet.
	    (dbus_g_error_domain_register): New function.

	    * glib/dbus-gmain.c (dbus_g_bus_get): Switch to
	    dbus_set_g_error.

	    * glib/dbus-gparser.c (validate_signature): Ditto.

	    * dbus/dbus-glib.h (dbus_g_error_set): Delete.
	    (dbus_g_error_domain_register): Prototype.

	    * glib/dbus-glib.c (dbus_g_error_set): Delete.
	    Update tests.

M	glib/dbus-glib.c
M	glib/dbus-gmain.c
M	glib/dbus-gobject.c
M	glib/dbus-gparser.c
M	glib/dbus-gproxy.c

commit f879e3e832d76a7b3b02cc7d25a3e5b9ef195f42
Author: Colin Walters <walters@verbum.org>
Date:	2005-06-29 23:52:35 +0000

    2005-06-29 Colin Walters <walters@verbum.org>

	    * dbus/dbus-glib.h: Delete DBUS_TYPE_G_PROXY_ARRAY.  Add
	    DBUS_TYPE_G_OBJECT_PATH.

	    * glib/dbus-gvalue.c (dbus_g_value_types_init): Remove
	    marshallers
	    for G_TYPE_OBJECT and DBUS_TYPE_G_PROXY_ARRAY (the latter
	    should
	    be handled more generically).  Add DBUS_TYPE_G_OBJECT_PATH.
	    (dbus_g_object_path_get_g_type): New function.
	    (dbus_gtype_from_signature_iter): Map DBUS_TYPE_OBJECT_PATH
	    to DBUS_TYPE_G_OBJECT_PATH by default.
	    (demarshal_proxy): Remove unused name variable.
	    (demarshal_object_path, marshal_object_path): New functions.
	    (demarshal_proxy_array, marshal_proxy_array): Delete.

	    * glib/dbus-binding-tool-glib.c (dbus_g_type_get_c_name): Map
	    DBUS_TYPE_G_OBJECT_PATH to char *.
	    (dbus_g_type_get_lookup_function): Map builtin
	    DBUS_TYPE_G_OBJECT_PATH.

	    * test/glib/test-dbus-glib.c
	    * test/glib/test-service-glib.c (my_object_objpath):
	    Adapt tests to new object path marshalling.

M	glib/dbus-binding-tool-glib.c
M	glib/dbus-gvalue.c

commit 1f87d5d3363d1e23208c993eabb3cb1f0341b4d9
Author: Colin Walters <walters@verbum.org>
Date:	2005-06-29 17:02:33 +0000

    2005-06-29 Colin Walters <walters@verbum.org>

	    Patch from Ross Burton <ross@openedhand.com>

	    * glib/dbus-gobject.c (invoke_object_method): Unset object
	    value in all cases, not only in async case.

M	glib/dbus-gobject.c

commit 49fce903db4124277de6aba92f7c03f24d84e598
Author: Colin Walters <walters@verbum.org>
Date:	2005-06-29 16:58:59 +0000

    2005-06-29 Colin Walters <walters@verbum.org>

	    * glib/dbus-gproxy.c (struct _DBusGProxy): Add new member
	    name_call for keeping track of any outgoing GetNameOwner call.
	    Also add for_owner and associated.
	    (struct _DBusGProxyManager): Add owner_names, which is
	    hash table
	    that maps a base name to a list of names it owns (that we're
	    interested in).  Add pending_nameowner_calls which is a
	    list of
	    all outstanding GetNameOwner; avoids us having to iterate over
	    every proxy.  Add unassociated_proxies which keeps track
	    of name
	    proxies with no associated name owner.
	    (dbus_g_proxy_manager_unref): Destroy owner_names.
	    (struct DBusGProxyNameOwnerInfo): New struct for keeping
	    track of
	    name refcounts.
	    (find_name_in_info, name_owner_foreach)
	    (dbus_g_proxy_manager_lookup_name_owner, insert_nameinfo)
	    (dbus_g_proxy_manager_monitor_name_owner)
	    (dbus_g_proxy_manager_unmonitor_name_owner)
	    (unassociate_proxies,
	    dbus_g_proxy_manager_replace_name_owner):
	    New functions; they manipulate the owner_names mapping.
	    (got_name_owner_cb): New function.
	    (get_name_owner): New function, extracted from
	    dbus_g_proxy_new_for_name_owner.
	    (dbus_g_proxy_manager_register): For now we need to keep
	    track of
	    all NameOwnerChanged.  Also if the proxy is for a name, if we
	    don't already know the name owner, queue a new GetNameOwner
	    request and add it to our list of unassociated proxies.
	    Otherwise
	    inc the refcount.
	    (dbus_g_proxy_manager_unregister): If this proxy is for
	    a name,
	    cancel any pending GetNameOwner call, etc.
	    (dbus_g_proxy_manager_filter): Handle NameOwnerChanged.
	    Also use
	    the owner_names mapping to look up the current names for the
	    signal source, and dispatch to any proxies for that name.
	    (dbus_g_proxy_new): Initialize new members.
	    (dbus_g_proxy_new_for_name): Delete unused proxy variable.
	    (dbus_g_proxy_new_for_name_owner): Use get_name_owner.
	    (dbus_g_pending_call_end_valist): New function, extracted from
	    dbus_g_proxy_end_call_internal.  Useful when we don't have
	    a proxy
	    but want to use the GLib infrastructure.  Also note how many
	    arguments in reply were over.
	    (dbus_g_pending_call_end): New function, just call
	    dbus_g_pending_call_end_valist.
	    (dbus_g_proxy_end_call_internal): Just call
	    dbus_g_pending_call_end_valist.

	    * glib/dbus-gobject.c (_dbus_gobject_lookup_marshaller):
	    Fix lookup
	    of builtin marshaller for STRING_STRING_STRING.

	    * test/glib/test-dbus-glib.c:
	    * test/glib/test-service-glib.c:
	    * test/glib/test-service-glib.xml:
	    Extend tests to cover name proxies, destruction of owner
	    proxies,
	    etc.

	    * glib/examples/example-signal-recipient.c
	    (dbus_g_proxy_new_for_name_owner): Create a name proxy.

	    * tools/dbus-send.c (main): Print D-BUS error name in addition
	    to message.

M	glib/dbus-gobject.c
M	glib/dbus-gproxy.c
M	glib/examples/example-signal-recipient.c

commit f2f505e8027bd4ef84b051ad9cd84ab86524b530
Author: Colin Walters <walters@verbum.org>
Date:	2005-06-27 18:20:20 +0000

    2005-06-27 Colin Walters <walters@verbum.org>

	    * test/glib/test-dbus-glib.c:
	    * test/glib/test-service-glib.c:
	    * test/glib/test-service-glib.xml:
	    Test hash table signal emitting.

	    * glib/dbus-gobject.c (_dbus_gobject_lookup_marshaller):
	    Convert
	    types to their fundamental basis types, since this is what
	    marshallers operate on.  Also add an entry for VOID__BOXED.
	    (dbus_g_object_register_marshaller_array): Convert to
	    fundamental.

M	glib/dbus-gobject.c

commit f0480850590afa233d7e1ad2b0c8250621c2bb9f
Author: Colin Walters <walters@verbum.org>
Date:	2005-06-26 17:02:09 +0000

    2005-06-26 Colin Walters <walters@verbum.org>

	    * glib/dbus-glib.c (dbus_set_g_error): Delete.
	    (dbus_g_error_set): New public function from its ashes;
	    used by
	    both service-side method implementation and GLib bindings
	    internals.
	    (dbus_g_error_has_name, dbus_g_error_get_name): New function.
	    (_dbus_glib_test): Add some tests.

	    * test/glib/test-dbus-glib.c (main): Test
	    dbus_g_error_has_name.

	    * test/glib/test-service-glib.c (my_object_throw_error): Use
	    dbus_g_error_set.

	    * glib/dbus-gobject.c (gerror_to_dbus_error_message): Handle
	    errors thrown by dbus_g_error_set.

	    * glib/dbus-gmain.c (dbus_g_bus_get): Change to
	    dbus_g_error_set.

	    * glib/dbus-gparser.c (validate_signature): Ditto.

	    * glib/dbus-gproxy.c (dbus_g_proxy_new_for_name_owner)
	    (dbus_g_proxy_end_call_internal): Ditto.

	    * glib/Makefile.am: Generate dbus-glib-error-switch.h, which
	    converts DBUS_ERROR_x to DBUS_GERROR_x.
	    (libdbus_glib_1_la_SOURCES, BUILT_SOURCES, CLEANFILES):
	    Add it.

	    * doc/TODO: Remove error TODO.

	    * doc/dbus-tutorial.xml: Update with documentation about error
	    handling.

	    * dbus/make-dbus-glib-error-enum.sh: Tighten up regexp to make
	    sure we only change DBUS_ERROR to DBUS_GERROR, not all
	    ERROR to
	    GERROR.  Also add DBUS_GERROR_REMOTE_EXCEPTION.

M	glib/.cvsignore
M	glib/Makefile.am
M	glib/dbus-glib.c
M	glib/dbus-gmain.c
M	glib/dbus-gobject.c
M	glib/dbus-gparser.c
M	glib/dbus-gproxy.c
A	glib/make-dbus-glib-error-switch.sh

commit ce03d4c9e9be4724a3255085b5ab5e51d9b9c196
Author: Colin Walters <walters@verbum.org>
Date:	2005-06-22 23:35:32 +0000

    2005-06-22 Colin Walters <walters@verbum.org>

	    Patch from Ross Burton <ross@openedhand.com>

	    * glib/dbus-gobject.c (dbus_g_method_return): Free out_sig.

M	glib/dbus-gobject.c

commit 6d152f08fa90bdc14d75b9091cccd5422faf3f11
Author: Colin Walters <walters@verbum.org>
Date:	2005-06-21 01:18:25 +0000

    2005-06-20 Colin Walters <walters@verbum.org>

	    * configure.in: Add glib/examples.

	    * glib/Makefile.am: Add examples/

	    * glib/examples/.cvsignore
	    * glib/examples/Makefile.am
	    * glib/examples/example-client.c
	    * glib/examples/example-service.c
	    * glib/examples/example-service.xml
	    * glib/examples/example-signal-emitter.c
	    * glib/examples/example-signal-emitter.xml
	    * glib/examples/example-signal-recipient.c:
	    New files; GLib binding examples, ported from
	    python/examples.

M	glib/Makefile.am
A	glib/examples/.cvsignore
A	glib/examples/Makefile.am
A	glib/examples/example-client.c
A	glib/examples/example-service.c
A	glib/examples/example-service.xml
A	glib/examples/example-signal-emitter.c
A	glib/examples/example-signal-emitter.xml
A	glib/examples/example-signal-recipient.c

commit ad05d7aa3b298fdc6c214550944e9aa1464a1e43
Author: Colin Walters <walters@verbum.org>
Date:	2005-06-21 00:30:20 +0000

    2005-06-20 Colin Walters <walters@verbum.org>

	    * dbus/dbus-glib.h:
	    * glib/dbus-gproxy.c: Rename dbus_g_proxy_invoke to
	    dbus_g_proxy_call.

	    * glib/dbus-binding-tool-glib.c:
	    * doc/dbus-tutorial.xml:
	    * test/glib/test-dbus-glib.c: Update for rename.

M	glib/dbus-binding-tool-glib.c
M	glib/dbus-gproxy.c

commit 17ba4df65fdf4a7b65eedd2a4f10e616dd1b186c
Author: Colin Walters <walters@verbum.org>
Date:	2005-06-20 19:54:21 +0000

    2005-06-20 Colin Walters <walters@verbum.org>

	    Patch suggested by Ross Burton <ross@openedhand.com>

	    * glib/dbus-gobject.c (export_signals): Free signal name.
	    (g_value_init): Use G_VALUE_NOCOPY_CONTENTS to plug
	    memory leak.  Add a bit of documentation.
	    (dbus_g_method_return_error): Free context, and note we do
	    so.

M	glib/dbus-gobject.c

commit 01b89e61b5b98ad983babb506c9856aeadef2562
Author: Murray Cumming <murrayc@murrayc.com>
Date:	2005-06-19 15:31:25 +0000

    2005-06-18 Murray Cumming <murrayc@murrayc.com>

	    * dbus/dbus-glib.h:
	    * glib/dbus-gobject.c:
	    * glib/dbus-gproxy.c:
	    * glib/dbus-gvalue.c: Predeclare structs as
	    typedef struct _Something Something instead of
	    typedef struct Something Something, so we can
	    redeclare the prototypes. Other GNOME libraries
	    do this already.

M	glib/dbus-gobject.c
M	glib/dbus-gproxy.c
M	glib/dbus-gvalue.c

commit da18702f63a9f33d4f929113b6361062a86443a6
Author: Colin Walters <walters@verbum.org>
Date:	2005-06-17 14:29:48 +0000

    2005-06-17 Colin Walters <walters@verbum.org>

	    * glib/dbus-gproxy.c (dbus_g_proxy_emit_remote_signal): Don't
	    spew warnings if we get malformed remote signals.

	    * glib/dbus-gobject.c (propsig_iterate): New function.
	    (lookup_object_info): New function, extracted from
	    lookup_object_and_method.
	    (introspect_properties, introspect_signals): Delete; these
	    are merged into write_interface.
	    (write_interface): Write out signals and properties here;
	    dump the org.gtk.object stuff and use the interface given
	    in the introspection data blob.  Also fix up property XML.
	    (lookup_values): New function.
	    (introspect_interfaces): Gather a mapping from interface to a
	    list of its methods, signals, and properties, then write out
	    each interface.
	    (lookup_object_and_method): Use lookup_object_info.
	    (struct DBusGSignalClosure): Add interface.
	    (dbus_g_signal_closure_new): Add interface. Don't dup signame;
	    we can just use the constant data.
	    (dbus_g_signal_closure_finalize): Don't free signal name.
	    (signal_emitter_marshaller): Use interface from signal
	    closure.
	    (export_signals): Only export signals mentioned in
	    introspection
	    blob.
	    (dbus_g_connection_register_g_object): Warn if we have no
	    introspection data for an object.
	    (funcsig_equal): Remove unused variable.
	    (dbus_g_object_register_marshaller): Take varargs instead of
	    list.
	    (dbus_g_object_register_marshaller_array): New function,
	    extracted from old dbus_g_object_register_marshaller.

	    * glib/dbus-binding-tool-glib.c (struct DBusBindingToolCData):
	    Add
	    signals and property data.
	    (write_quoted_string): New function, extracted from
	    generate_glue.
	    (generate_glue): Write signals and properties to introspection
	    blob.

	    * dbus/dbus-glib.h (struct DBusGObjectInfo): Include
	    exported_signals and exported_properties.
	    (dbus_g_object_register_marshaller): Update prototype.
	    (dbus_g_object_register_marshaller_array): Prototype.

	    * test/glib/test-dbus-glib.c: Extend testing to cover new
	    signals.

	    * test/glib/test-service-glib.c: Add new test signals
	    and method
	    to emit them.

	    * test/glib/test-service-glib.xml: Add some test signals.

	    * test/glib/Makefile.am (BUILT_SOURCES): Add
	    my-object-marshal.c
	    and my-object-marshal.h
	    (test_service_glib_SOURCES, test_dbus_glib_SOURCES): Add
	    my-object-marshal.c.
	    (my-object-marshal.c, my-object-marshal.h): Implement.

	    * test/glib/.cvsignore: Update.

	    * doc/TODO: Remove two GLib TODO items fixed by this
	    patch.

M	glib/dbus-binding-tool-glib.c
M	glib/dbus-gobject.c
M	glib/dbus-gproxy.c

commit 5c64ac1e7abcb7013c640d8aa6621319341f228d
Author: Colin Walters <walters@verbum.org>
Date:	2005-06-16 19:50:24 +0000

    2005-06-16 Colin Walters <walters@verbum.org>

	    * glib/dbus-binding-tool-glib.c:
	    * glib/dbus-gobject.c:
	    * glib/dbus-gproxy.c:  Add Nokia copyright; Patch
	    from Ross Burton, for his GLib bindings work.

M	glib/dbus-binding-tool-glib.c
M	glib/dbus-gobject.c
M	glib/dbus-gproxy.c

commit 87556105e7b984f8e56fc75d5c5ede8a69d63d12
Author: Colin Walters <walters@verbum.org>
Date:	2005-06-16 19:45:49 +0000

    2005-06-16 Colin Walters <walters@verbum.org>

	    * glib/dbus-gobject.c (funcsig_hash, funcsig_equal):
	    Use n_params
	    to iterate instead of walking to G_TYPE_INVALID.

	    Patch based on a patch from Ryan Gammon.

M	glib/dbus-gobject.c

commit b274594d1f15e23be62d3ae2693524652ff58752
Author: Colin Walters <walters@verbum.org>
Date:	2005-06-16 04:38:11 +0000

    2005-06-16 Colin Walters <walters@verbum.org>

	    * glib/dbus-gvalue.c (marshal_basic): Marshal NULL string
	    values as the empty string (#2948).

M	glib/dbus-gvalue.c

commit 702f09f4f45225f603a6d17ae77c3360c428855a
Author: Colin Walters <walters@verbum.org>
Date:	2005-06-14 15:55:10 +0000

    2005-06-14 Colin Walters <walters@verbum.org>

	    * glib/dbus-binding-tool-glib.c:
	    * glib/dbus-gobject.c:
	    * glib/dbus-gvalue.c: Fix indentation and brace style.

M	glib/dbus-binding-tool-glib.c
M	glib/dbus-gobject.c
M	glib/dbus-gvalue.c

commit ceb44c57e8ebc78ef420597bae484f7713c2e8bf
Author: Colin Walters <walters@verbum.org>
Date:	2005-06-14 15:49:43 +0000

    2005-06-14 Ross Burton <ross@burtonini.com>.

	    * glib/dbus-glib.h: Make DBusGMethodInvocation
	    a private structure.  Rearrange prototypes a bit.

	    * glib/dbus-gproxy.c (dbus_g_proxy_invoke): Add
	    documentation for first_arg_type.

	    * glib/dbus-gobject.c: Move DBusGMethodInvocation
	    here, add documentation.  Move dbus_g_method_return
	    and dbus_g_method_return_error into public API
	    section.

M	glib/dbus-gobject.c
M	glib/dbus-gproxy.c

commit 72b52186a73aac9f4d0ae1868fe1dedcedf3a6e6
Author: Colin Walters <walters@verbum.org>
Date:	2005-06-14 14:23:56 +0000

    2005-06-14 Colin Walters <walters@verbum.org>

	    * glib/dbus-gobject.c (_dbus_gobject_lookup_marshaller):
	    Add missing return statements, noticed by Ross Burton.

M	glib/dbus-gobject.c

commit 40617899dc08750ab5a8cd0fb176dc2111a95420
Author: Colin Walters <walters@verbum.org>
Date:	2005-06-13 15:36:31 +0000

    2005-06-13 Ross Burton <ross@burtonini.com>.

	    * glib/dbus-gobject.c: Handle errors on message
	    demarshalling by sending error message back.
	    * glib/dbus-gvalue.c: Initialize return variables.

M	glib/dbus-gobject.c
M	glib/dbus-gvalue.c

commit fc23d39a292cee7d4f9ee9a1df0c0141c69d0942
Author: Colin Walters <walters@verbum.org>
Date:	2005-06-13 15:34:05 +0000

    2005-06-13 Colin Walters <walters@verbum.org>

	    * glib/Makefile.am: Fix thinko in last patch.

M	glib/Makefile.am

commit 7c42065c67e99716130a5dec4e493bce3ccc9aaa
Author: Colin Walters <walters@verbum.org>
Date:	2005-06-13 14:56:51 +0000

    2005-06-13 Colin Walters <walters@verbum.org>

	    * glib/Makefile.am: Move dbus-gtype-specialized.c
	    and dbus-gtype-specialized.h into a _HEADERS variable,
	    install them.

M	glib/Makefile.am

commit 8bcbafe775d6bc63290c5c73f138c1511b104c70
Author: Colin Walters <walters@verbum.org>
Date:	2005-06-13 03:01:17 +0000

    2005-06-12 Colin Walters <walters@verbum.org>

	    Async signals and various bugfixes and testing by
	    Ross Burton <ross@burtonini.com>.

	    * glib/dbus-gvalue.h: (struct DBusBasicGValue): Delete.
	    (dbus_gvalue_genmarshal_name_from_type)
	    (dbus_gvalue_ctype_from_type): Moved to
	    dbus-binding-tool-glib.c.
	    (dbus_gtype_to_dbus_type): Renamed to
	    dbus_gtype_from_signature.
	    (dbus_g_value_types_init, dbus_gtype_from_signature)
	    (dbus_gtype_from_signature_iter, dbus_gtype_to_signature)
	    (dbus_gtypes_from_arg_signature): New function prototypes.
	    (dbus_gvalue_demarshal): Take context and error arguments.
	    (dbus_gvalue_demarshal_variant): New function.
	    (dbus_gvalue_demarshal_message): New function.
	    (dbus_gvalue_store): Delete.

	    * glib/dbus-gvalue.c:

	    File has been almost entirely rewritten; now we special-case
	    more types such as DBUS_TYPE_SIGNATURE, handle arrays and
	    hash tables correctly, etc.  Full support for recursive values
	    is not yet complete.

	    * glib/dbus-gproxy.c (dbus_g_proxy_class_init): Change last
	    argument of signal to G_TYPE_POINTER since we now pass a
	    structure.
	    (lookup_g_marshaller): Delete in favor of
	    _dbus_gobject_lookup_marshaller.
	    (marshal_dbus_message_to_g_marshaller): Use
	    _dbus_gobject_lookup_marshaller and
	    dbus_gvalue_demarshal_message
	    to handle remote signal callbacks.
	    (dbus_g_proxy_new_from_proxy): New function; creates a new
	    DBusGProxy by copying an existing one.
	    (dbus_g_proxy_get_interface, dbus_g_proxy_set_interface)
	    (dbus_g_proxy_get_path): New functions.
	    (dbus_g_proxy_marshal_args_to_message): New function;
	    factored out of existing code.
	    (DBUS_G_VALUE_ARRAY_COLLECT_ALL): Collect all arguments
	    from a varargs array.
	    (dbus_g_proxy_begin_call_internal): New function.
	    (dbus_g_proxy_end_call_internal): New function.
	    (dbus_g_proxy_begin_call): Take GTypes instead of DBus types
	    as arguments; simply invoke dbus_g_proxy_begin_call_internal
	    after collecting args into value array.
	    (dbus_g_proxy_end_call): Take GTypes instead of DBus types;
	    invoke dbus_g_proxy_end_call_internal.
	    (dbus_g_proxy_invoke): Simply invoke begin_call_interanl and
	    end_call_internal.
	    (dbus_g_proxy_call_no_reply): Take GTypes instead of DBus
	    types.
	    (array_free_all): New function.
	    (dbus_g_proxy_add_signal): Take GTypes.

	    * glib/dbus-gobject.h:
	    (_dbus_glib_marshal_dbus_message_to_gvalue_array): Delete.
	    (_dbus_gobject_get_path, _dbus_gobject_lookup_marshaller):
	    Prototype.

	    * glib/dbus-gobject.c: Add a global marshal_table hash which
	    stores mappings from type signatures to marshallers.
	    Change lots
	    of invocations of dbus_gtype_to_dbus_type to
	    dbus_gtype_to_signature.
	    (_dbus_glib_marshal_dbus_message_to_gvalue_array): Delete.
	    (introspect_signals): Fix test for query.return_type.
	    (set_object_property): Update invocation of
	    dbus_gvalue_demarshal.
	    (invoke_object_method): Many changes.  Handle asynchronous
	    invocations.  Convert arguments with
	    dbus_gvalue_demarshal_message.  Handle errors.  Use
	    DBusSignatureIter instead of strlen on args. Handle all
	    arguments
	    generically.  Special-case variants.
	    (dbus_g_method_return, dbus_g_method_return_error): New
	    function.
	    (DBusGSignalClosure): New structure, closes over signal
	    information.
	    (dbus_g_signal_closure_new): New function.
	    (dbus_g_signal_closure_finalize): New function.
	    (signal_emitter_marshaller): New function; is special
	    marshaller
	    which emits signals on bus.
	    (export_signals): New function; introspects object signals and
	    connects to them.
	    (dbus_g_object_type_install_info): Take GType instead of
	    GObjectClass.
	    (dbus_g_connection_register_g_object): Invoke export_signals.
	    (dbus_g_connection_lookup_g_object): New function.
	    (DBusGFuncSignature) New structure; used for mapping type
	    signatures to marshallers.
	    (funcsig_hash): New function; hashes DBusGFuncSignature.
	    (funcsig_equal): New function; compares DBusGFuncSignature.
	    (_dbus_gobject_lookup_marshaller): New function.
	    (dbus_g_object_register_marshaller): New function; used to
	    register a marshaller at runtime for a particular signature.

	    * glib/dbus-gmain.c (_dbus_gmain_test): Add various tests.

	    * glib/dbus-binding-tool-glib.h: Add
	    DBUS_GLIB_ANNOTATION_ASYNC
	    which notes a server method implementation should be
	    asynchronous.

	    * glib/dbus-binding-tool-glib.c
	    (dbus_binding_tool_output_glib_server): Call
	    dbus_g_value_types_init.
	    (write_formal_parameters): Use dbus_gtype_from_signature.
	    Handle
	    variants specially.
	    (dbus_g_type_get_lookup_function): Turn GType into an
	    invocation
	    of a lookup function.
	    (write_args_for_direction): Use
	    dbus_g_type_get_lookup_function.
	    (write_untyped_out_args): New method; write output arguments.
	    (write_formal_declarations_for_direction): Function for
	    writing prototypes.
	    (write_formal_parameters_for_direction): Function for
	    writing implementations.
	    (write_typed_args_for_direction): Function for writing
	    arguments prefixed with GTypes.
	    (write_async_method_client): Write out async version
	    of method.

	    * glib/dbus-binding-tool-glib.c: Include dbus-gvalue-utils.h.
	    (dbus_g_type_get_marshal_name): Move mapping from GType
	    to marshal name into here.
	    (dbus_g_type_get_c_name): Move into here.
	    (compute_marshaller): Convert signature to type with
	    dbus_gtype_from_signature, use dbus_g_type_get_marshal_name.
	    (compute_marshaller_name): Ditto.
	    (compute_marshaller): Handle async signal annotations.
	    (gather_marshallers): Return if we don't have a known
	    prefix.
	    (generate_glue): Collect introspection blob here, and
	    write all of the blob at the end.  This allows an object
	    with multiple interfaces to work.
	    Mark async methods in introspection blob.

	    * glib/Makefile.am (libdbus_glib_1_la_SOURCES): Add
	    dbus-gtype-specialized.c, dbus-gtype-specialized.h,
	    dbus-gvalue-utils.h, dbus-gvalue-utils.c.

	    * dbus/dbus-glib.h: Don't include dbus-protocol.h; this
	    avoids people accidentally using DBUS_TYPE_* which should
	    not be necessary anymore.
	    Do include dbus-gtype-specialized.h, which are utilities
	    for GLib container types.
	    Add various #defines for types such as
	    DBUS_TYPE_G_BOOLEAN_ARRAY.
	    (DBusGValueIterator, DBusGValue): Define, not fully used
	    yet.
	    (dbus_g_value_get_g_type): Type for recursive value.
	    (dbus_g_value_open, dbus_g_value_iterator_get_value)
	    (dbus_g_value_iterator_get_values,
	    dbus_g_value_iterator_recurse)
	    (dbus_g_value_free): Prototypes.
	    (dbus_g_object_register_marshaller,
	    dbus_g_proxy_new_from_proxy): Prototype.
	    (dbus_g_proxy_set_interface): Prototype.
	    (dbus_g_proxy_begin_call, dbus_g_proxy_end_call)
	    (dbus_g_proxy_call_no_reply): Take GLib types instead of DBus
	    types.
	    (dbus_g_proxy_get_path, dbus_g_proxy_get_interface):
	    Accessors.
	    (DBusGAsyncData, DBusGMethodInvocation): Structures for
	    doing async invocations.
	    (dbus_g_method_return, dbus_g_method_return_error):
	    Prototypes.
	    * doc/dbus-tutorial.xml: Update GLib section.

	    * tools/dbus-viewer.c (load_child_nodes): Update
	    for new invocation type of dbus_g_proxy_end_call.
	    (load_from_service_thread_func): Ditto.

	    * tools/print-introspect.c (main): Ditto.

	    * tools/dbus-names-model.c (have_names_notify)
	    (names_model_reload, names_model_set_connection)
	    Use GTypes.

	    * python/Makefile.am (INCLUDES): Define DBUS_COMPILATION,
	    needed since Python bindings use GLib bindings.

	    * test/glib/Makefile.am (INCLUDES): Define DBUS_COMPILATION.
	    Add --prefix argument.

	    * tools/Makefile.am: Define DBUS_COMPILATION.  Remove
	    unneeded --ignore-unsupported arg.

	    * test/glib/test-service-glib.c:
	    * test/glib/test-service-glib.xml:
	    * test/glib/test-dbus-glib.c: Add many more tests.

M	glib/Makefile.am
M	glib/dbus-binding-tool-glib.c
M	glib/dbus-binding-tool-glib.h
M	glib/dbus-gmain.c
M	glib/dbus-gobject.c
M	glib/dbus-gobject.h
M	glib/dbus-gproxy.c
A	glib/dbus-gtype-specialized.c
A	glib/dbus-gtype-specialized.h
A	glib/dbus-gvalue-utils.c
A	glib/dbus-gvalue-utils.h
M	glib/dbus-gvalue.c
M	glib/dbus-gvalue.h

commit 4bc350fedd536bc187768a7bfa2455aae7474f74
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-05-16 21:27:03 +0000

    * glib/dbus-gmain.c (io_handler_dispatch): fix deadlock when using
    recursive g_main_loops

    * python/_dbus.py (class Bus): add the ProxyObjectClass
      alias for ProxyObject to make it easier for the Twisted
      networking framework to integrate dbus.

    * python/proxies.py (class ProxyObject): add the ProxyMethodClass
      alias for ProxyMethod to make it easier for the Twisted
      networking framework to integrate dbus.

M	glib/dbus-gmain.c

commit 3c7dcbf8f47d3061fccdc315716c90a0b69a470f
Author: Colin Walters <walters@verbum.org>
Date:	2005-05-11 19:02:31 +0000

    2005-05-11 Ross Burton <ross@burtonini.com>

	    * glib/dbus-glib-tool.c: Add --prefix argument.
	    * glib/dbus-binding-tool-glib.h: Add prefix argument.
	    * glib/dbus-binding-tool-glib.c (compute_marshaller_name):
	    Add prefix argument.
	    (generate_glue): Pass prefix argument down.
	    (dbus_binding_tool_output_glib_server): Pass prefix to
	    glib-genmarshal.

M	glib/dbus-binding-tool-glib.c
M	glib/dbus-binding-tool-glib.h
M	glib/dbus-glib-tool.c

commit 55263b490f4dba73b1590939be2b087856487054
Author: Colin Walters <walters@verbum.org>
Date:	2005-05-03 17:45:29 +0000

    2005-05-03 Ross Burton <ross@burtonini.com>

	    * glib/dbus-gobject.c (dbus_g_connection_register_g_object):
	    Return if we get an error during registration.  Set up a
	    weak reference on object to unregister if object is destroyed.
	    (unregister_gobject): New function.

M	glib/dbus-gobject.c

commit 260e1fecf1690bb12c5bf7d5ddf793d79a1efed5
Author: David Zeuthen <david@fubar.dk>
Date:	2005-04-19 03:35:19 +0000

    2005-04-18 David Zeuthen <davidz@redhat.com>

	    * glib/dbus-gmain.c (io_handler_destroy_source):
	    (timeout_handler_destroy_source, connection_setup_free):
	    Also unref the source to avoid memory leaks.

M	glib/dbus-gmain.c

commit 56288b6e3a9e5f8bd8920c5f7dac2a2b64842b15
Author: Havoc Pennington <hp@redhat.com>
Date:	2005-04-13 14:10:21 +0000

    2005-04-13 Havoc Pennington <hp@redhat.com>

	    * glib/dbus-gmain.c (message_queue_dispatch): only dispatch
	    one
	    message at a time to avoid monopolizing the main loop, bug
	    #2953 from Benjamin Otte

M	glib/dbus-gmain.c

commit ca2ab9616ed7c6e936e495e64303f77956cb6b82
Author: Havoc Pennington <hp@redhat.com>
Date:	2005-04-09 23:50:58 +0000

    2005-04-09 Havoc Pennington <hp@redhat.com>

	    * dbus/dbus-message-util.c (_dbus_message_test): fix
	    signedness warning

	    * glib/dbus-glib-tool.c (main): fix warning

	    * glib/dbus-binding-tool-glib.c (generate_glue): fix warning

	    * dbus/dbus-connection.c
	    (dbus_connection_read_write_dispatch):
	    add a new function that can be used in simple applications
	    that
	    don't have a main loop and are willing to block

M	glib/dbus-binding-tool-glib.c
M	glib/dbus-glib-tool.c

commit b34961c0e5a75ff9f70e0ba439a96d993456ef92
Author: David Zeuthen <david@fubar.dk>
Date:	2005-04-06 17:36:47 +0000

    2005-04-05 David Zeuthen <davidz@redhat.com>

	    Fix https://bugs.freedesktop.org/show_bug.cgi?id=2889

	    * glib/dbus-gmain.c:
	    (io_handler_destroy_source): Remove from list of IO handlers
	    of the ConnectionSetup object
	    (timeout_handler_destroy_source): -do- for timeout handlers
	    (io_handler_source_finalized): Don't remove from list since
	    we now do that in io_handler_destroy_source(). Renamed from
	    io_handler_source_destroyed
	    (timeout_handler_source_destroyed): -do- for timeout handlers
	    (connection_setup_free): It is now safe to iterate over all
	    IO and timeout handlers as the _destroy_source removes them
	    from the list synchronously

M	glib/dbus-gmain.c

commit 681e7deee9a01c1f315b0066b87204e0da207d99
Author: Colin Walters <walters@verbum.org>
Date:	2005-03-17 17:48:29 +0000

    2005-03-17 Colin Walters <walters@verbum.org>

	    * bus/print-introspect.c: Move to tools/.
	    * bus/run-with-tmp-session-bus.sh: Ditto.

	    * glib/Makefile.am (dbus-glib-bindings.h): Move
	    generation to tools/Makefile.am.

	    * test/glib/run-test.sh: Update to handle move
	    of run-with-tmp-session-bus.sh.

	    * test/glib/test-service-glib.c: Update to handle
	    move of dbus-glib-bindings.h.

	    * tools/print-introspect.c: Moved here
	    from bus/, and ported to GLib bindings.

	    * tools/run-with-tmp-session-bus.sh: Moved here
	    from bus/.

	    * tools/Makefile.am: Generate dbus-glib-bindings.h
	    and dbus-bus-introspect.xml here.

	    * tools/.cvsignore, glib/.cvsignore, bus/.cvsignore:
	    Update.

M	glib/.cvsignore
M	glib/Makefile.am

commit 1cc2659deb9f108f449ad3ca8f18bff743a4cd81
Author: Colin Walters <walters@verbum.org>
Date:	2005-03-12 20:07:21 +0000

    2005-03-12 Colin Walters <walters@verbum.org>

	    * bus/driver.c (write_args_for_direction): New function,
	    parses a type signature into arguments and outputs to
	    XML.
	    (bus_driver_handle_introspect): Use it instead of
	    hardcoding XML for certain signatures.

	    * bus/Makefile.am (dbus-bus-introspect.xml): Add
	    dependency on dbus-daemon.

	    * glib/dbus-glib-tool.c (main): Parse ignore_unsupported
	    argument, pass it to dbus_binding_tool_output_glib_client.

	    * glib/dbus-binding-tool-glib.c
	    (generate_client_glue): Protect against multiple inclusion.
	    (dbus_binding_tool_output_glib_client): Add
	    G_BEGIN_DECLS/G_END_DECLS.

	    * glib/dbus-binding-tool-glib.c (compute_client_method_name):
	    Change to just take iface prefix directly.
	    (write_formal_parameters): Clarify error message.
	    (check_supported_parameters): New function; checks to see type
	    signatures of method parameters are supported.
	    (generate_client_glue): Handle ignore_unsupported flag.
	    (dbus_binding_tool_output_glib_client): Handle
	    ignore_unsupported
	    parameter.

	    * glib/Makefile.am (dbus-glib-bindings.h): Pass
	    --ignore-unsupported by default until glib bindings
	    support arrays.

M	glib/Makefile.am
M	glib/dbus-binding-tool-glib.c
M	glib/dbus-binding-tool-glib.h
M	glib/dbus-glib-tool.c

commit c5247484ea45ef9b6b3449a71e3ea80b86de03ad
Author: Colin Walters <walters@verbum.org>
Date:	2005-03-12 16:33:00 +0000

    2005-03-11 Colin Walters <walters@verbum.org>

	    * glib/Makefile.am: Generate dbus-glib-bindings.h and
	    install it.

	    * bus/print-introspect.c: New file; prints introspection
	    data for a given name and object path.

	    * bus/run-with-tmp-session-bus.sh: New file, refactored
	    from test/glib/run-test.sh.  Creates a temporary session
	    bus and runs another program.

	    * test/glib/run-test.sh: Refactor to invoke
	    run-with-tmp-session-bus.sh.

	    * bus/driver.c (bus_driver_handle_introspect): Fix to
	    print new
	    introspection format.  Also change to use
	    DBUS_TYPE_x_AS_STRING
	    macros instead of hardcoding.

	    * glib/.cvsignore, bus/.cvsignore, test/glib/.cvsignore:
	    Update.

M	glib/.cvsignore
M	glib/Makefile.am

commit 10dc75239d071c49622972d061ff7546ed169bc5
Author: Colin Walters <walters@verbum.org>
Date:	2005-03-09 17:09:11 +0000

    2005-03-09 Colin Walters <walters@verbum.org>

	    * glib/dbus-gproxy.c (dbus_g_proxy_invoke): New method; calls
	    to this are generated for client-side wrappers.  Invokes a
	    D-BUS method and returns reply values.

	    * glib/dbus-binding-tool-glib.c
	    (write_args_sig_for_direction): New
	    function; writes signature string for argument direction.
	    (write_args_for_direction): Change to pass input values
	    directly
	    instead of via address, and fix indentation.
	    (generate_client_glue): Change to invoke dbus_g_proxy_invoke.
	    Also
	    make generated wrappers inlineable.

	    * dbus/dbus-message.c (dbus_message_iter_get_fixed_array): Add
	    note about using dbus_type_is_fixed.

	    * dbus/dbus-marshal-basic.c (_dbus_type_is_fixed): Moved to
	    dbus/dbus-signature.c as dbus_type_is_fixed.

	    All callers updated.

	    * dbus/dbus-signature.c (dbus_type_is_fixed): Moved here
	    from dbus/dbus-marshal-basic.c:_dbus_type_is_fixed.

	    * dbus/dbus-signature.h: Prototype.

	    * glib/dbus-binding-tool-glib.c (compute_marshaller_name): Fix
	    error printf code.

	    * test/glib/test-dbus-glib.c (main): Be sure to clear error as
	    appropriate instead of just freeing it.
	    (main): Free returned strings using g_free.

	    * test/glib/Makefile.am (test-service-glib-glue.h)
	    (test-service-glib-bindings.h): Add dependency on
	    dbus-binding-tool.

	    * glib/dbus-gvalue.c (MAP_BASIC): Refactored from
	    MAP_BASIC_INIT;
	    simply maps a simple D-BUS type to GType.
	    (dbus_dbus_type_to_gtype): Function which maps D-BUS type to
	    GType.
	    (dbus_gvalue_init): Just invoke dbus_dbus_type_to_gtype and
	    initialize the value with it.
	    (dbus_gvalue_binding_type_from_type): Unused, delete.
	    (dbus_gvalue_demarshal): Switch to hardcoding demarshalling
	    for
	    various types instead of unmarshalling to value data directly.
	    Remove can_convert boolean.
	    (dbus_gvalue_marshal): Remove duplicate initialization;
	    switch to
	    returning directly instead of using can_convert boolean.
	    (dbus_gvalue_store): New function; not related to D-BUS
	    per-se.
	    Stores a GValue in a pointer to a value of its corresponding C
	    type.

	    * glib/dbus-gvalue.h: Remove
	    dbus_gvalue_binding_type_from_type,
	    add dbus_gvalue_store.

M	glib/dbus-binding-tool-glib.c
M	glib/dbus-gproxy.c
M	glib/dbus-gvalue.c
M	glib/dbus-gvalue.h

commit 61b05621beeb5a929bf68b95fdb9cb63516c1c7e
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-03-07 21:10:46 +0000

    * NEWS: Update for 0.31

    * configure.in: Release 0.31
      add LT_CURRENT, LT_REVISION, LT_AGE for easy soname bumping

    * qt/Makefile.am: fixed build

    * dbus/Makefile.am: soname bump for libdbus

    * glib/Makefile.am: soname bump for libdbus-glib

M	glib/Makefile.am

commit be6ef9488ddc1b9fd3fc303cccf6e6618450be89
Author: Colin Walters <walters@verbum.org>
Date:	2005-02-27 17:38:12 +0000

    2005-02-27 Colin Walters <walters@verbum.org>

	    * glib/dbus-gidl.c (property_info_get_type,
	    arg_info_get_type):
	    Change return value to const char * instead of int so we
	    can do
	    full signatures.
	    (struct PropertyInfo, struct ArgInfo): Store char *.
	    (property_info_new, arg_info_new): Update parameters, strdup.
	    (property_info_unref, arg_info_unref): Free.

	    * glib/dbus-gidl.h: Update prototypes.

	    * glib/dbus-gparser.c (basic_type_from_string): Delete.
	    (validate_signature): New function, just validates signature
	    and
	    sets GError.
	    (parse_property, parse_arg): Invoke validate_signature.  Store
	    signature instead of just type code.

	    * glib/dbus-gvalue.c (base_type_from_signature): New utility
	    function to return a primary type for a signature, dropping
	    information about types in container types.
	    (dbus_gvalue_genmarshal_name_from_type)
	    (dbus_gvalue_binding_type_from_type)
	    (dbus_gvalue_ctype_from_type): Update to take full signature
	     instead of type code.
	    (dbus_gtype_to_dbus_type): Moved here from
	    glib/dbus-gobject.c.

	    * glib/dbus-gvalue.h: Update prototypes for above.

	    * glib/dbus-gobject.c (gtype_to_dbus_type): Moved to
	    glib/dbus-gvalue.c as dbus_gtype_to_dbus_type.
	    (introspect_properties, introspect_signals, write_interface):
	    Update to handle signatures, and remove usage of
	    _dbus_gutils_type_to_string.
	    (handle_introspect): Print out type codes instead of
	    e.g. "string"
	    in hardcoded introspection XML; also use x_AS_STRING constants
	    instead of hardcoding in string.

	    * glib/dbus-glib-tool.c (pretty_print): Handle signature
	    change
	    to string.	Remove usage of _dbus_gutils_type_to_string.

	    * glib/dbus-gutils.c (_dbus_gutils_type_to_string): Delete.

	    * glib/dbus-gutils.h (_dbus_gutils_type_to_string): Update for
	    deletion.

	    * glib/dbus-binding-tool-glib.c (compute_marshaller)
	    (compute_marshaller_name, generate_glue): Handle signature
	    change
	    to string.
	    (write_formal_parameters, write_args_for_direction):
	    Ditto, and
	    remove FIXME.

	    * tools/dbus-tree-view.c (type_to_string): Delete.
	    (info_set_func_text): Update to print full signatures.

	    * test/glib/test-service-glib.xml: Change types to new
	    introspection format.

M	glib/dbus-binding-tool-glib.c
M	glib/dbus-gidl.c
M	glib/dbus-gidl.h
M	glib/dbus-glib-tool.c
M	glib/dbus-gobject.c
M	glib/dbus-gparser.c
M	glib/dbus-gutils.c
M	glib/dbus-gutils.h
M	glib/dbus-gvalue.c
M	glib/dbus-gvalue.h

commit 662755210c931da87972398ded13d4651e3d3fec
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-02-24 22:01:34 +0000

    glib/Makefile.am: added dbus-gobject.h to sources list

    so distcheck doesn't fail

M	glib/Makefile.am

commit 0573676ce932874b07780036eaeaa42a6f3e1628
Author: Colin Walters <walters@verbum.org>
Date:	2005-02-19 23:25:41 +0000

    2005-02-19 Colin Walters <walters@verbum.org>

	    * glib/dbus-binding-tool-glib.c
	    (dbus_binding_tool_output_glib_server): Fix iochannel
	    refcounting.

	    * glib/dbus-glib-tool.c: Include dbus-glib-tool.h, as well
	    as errno.h and sys/stat.h.
	    (lose): New function, prints error with
	    newline and exits.
	    (lose_gerror): Similar, but takes GError for message.
	    (main): Add --output argument to specify output file to
	    write to,
	    instead of always printing to stdout.  In this mode, determine
	    timestamps on source files to see whether any are newer
	    than the
	    target file.  If not, exit.  Also convert a number of error
	    messages to use lose (since it's shorter), and switch to using
	    g_io_channel_shutdown.

M	glib/dbus-binding-tool-glib.c
M	glib/dbus-glib-tool.c

commit 7ff788981218b324d0eeec16fa4b7bb9ec97d694
Author: Havoc Pennington <hp@redhat.com>
Date:	2005-02-19 16:17:29 +0000

    2005-02-19 Havoc Pennington <hp@redhat.com>

	    * glib/dbus-gobject.c
	    (_dbus_glib_marshal_dbus_message_to_gvalue_array): add docs

	    * glib/dbus-glib.c: fix doxygen warnings

	    * glib/dbus-gparser.c (parse_annotation): error if an
	    annotation
	    is found on an <arg>

M	glib/dbus-glib.c
M	glib/dbus-gobject.c
M	glib/dbus-gparser.c

commit 03186401718758948242881cf429bdbb48eb8474
Author: Colin Walters <walters@verbum.org>
Date:	2005-02-18 03:14:33 +0000

    2005-02-17 Colin Walters <walters@verbum.org>

	    * glib/dbus-gobject.h: Don't export
	    _dbus_glib_marshal_dbus_message_to_gvalue_array.

	    * glib/dbus-gobject.c
	    (_dbus_glib_marshal_dbus_message_to_gvalue_array): Do rename.
	    (invoke_object_method): Handle it.

	    * glib/dbus-gproxy.c (marshal_dbus_message_to_g_marshaller):
	    Handle rename.

M	glib/dbus-gobject.c
M	glib/dbus-gobject.h
M	glib/dbus-gproxy.c

commit a6e8deb82f6202628fcb3b9b3a616d0a98598474
Author: Colin Walters <walters@verbum.org>
Date:	2005-02-17 21:19:48 +0000

    2005-02-17 Colin Walters <walters@verbum.org>

	    * dbus/dbus-protocol.h (DBUS_SERVICE_ORG_FREEDESKTOP_DBUS):
	    Rename to DBUS_SERVICE_DBUS.
	    (DBUS_PATH_ORG_FREEDESKTOP_DBUS): Rename to DBUS_PATH_DBUS.
	    (DBUS_PATH_ORG_FREEDESKTOP_LOCAL): Rename to DBUS_PATH_LOCAL.
	    (DBUS_INTERFACE_ORG_FREEDESKTOP_DBUS): Rename to
	    DBUS_INTERFACE_DBUS.
	    (DBUS_INTERFACE_ORG_FREEDESKTOP_INTROSPECTABLE): Rename to
	    DBUS_INTERFACE_INTROSPECTABLE.
	    (DBUS_INTERFACE_ORG_FREEDESKTOP_PROPERTIES): Rename to
	    DBUS_INTERFACE_PROPERTIES.
	    (DBUS_INTERFACE_ORG_FREEDESKTOP_PEER): Rename to
	    DBUS_INTERFACE_PEER.
	    (DBUS_INTERFACE_ORG_FREEDESKTOP_LOCAL):
	    DBUS_INTERFACE_LOCAL.

	    All other users of those constants have been changed.

	    * bus/driver.c (bus_driver_handle_introspect): Use constants.

	    * glib/dbus-gobject.c (handle_introspect): Use constants.

	    * doc/dbus-faq.xml, doc/dbus-specification.xml: Update
	    for rename.

M	glib/dbus-gobject.c
M	glib/dbus-gproxy.c

commit b085dcd0556e82c8fe347cc4bedd2e5b9b876a95
Author: Colin Walters <walters@verbum.org>
Date:	2005-02-17 21:11:18 +0000

    2005-02-17 Colin Walters <walters@verbum.org>

	    * glib/dbus-gparser.c (struct Parser): Add in_annotation
	    boolean.
	    (parse_node, parse_interface, parse_method, parse_signal)
	    (parse_property, parse_annotation): Lose if we're currently
	    in an
	    annotation.
	    (parse_annotation): New function.
	    (parser_start_element, parser_end_element): Handle annotation.
	    (parse_method, parse_interface): Remove support for c_name
	    attribute,
	    switch to annotations.

	    * glib/dbus-gidl.h (interface_info_get_binding_names)
	    (method_info_get_binding_names)
	    (interface_info_get_binding_name,
	    method_info_get_binding_name)
	    (interface_info_set_binding_name,
	    method_info_set_binding_name):
	    Remove.
	    (interface_info_get_annotations, method_info_get_annotations)
	    (interface_info_get_annotation, method_info_get_annotation)
	    (interface_info_add_annotation, method_info_add_annotation):
	    Prototype.

	    * glib/dbus-gidl.c (struct InterfaceInfo): Substitute
	    "annotations"
	    for "bindings".
	    (struct MethodInfo): Ditto.
	    Straightfoward conversion of binding methods into annotation
	    methods
	    as prototyped.

	    * glib/dbus-glib-tool.c (pretty_print): Print annotations.

	    * glib/dbus-binding-tool-glib.h
	    (DBUS_GLIB_ANNOTATION_C_SYMBOL): Define.

	    * glib/dbus-binding-tool-glib.c (gather_marshallers,
	    generate_glue):
	    Use new annotation API.

	    * doc/introspect.dtd: Fix a number of DTD syntax errors.  Add
	    annotation element.

	    * doc/dbus-specification.xml: Discuss introspection
	    annotations,
	    include list of well-known annotations.

	    * test/glib/test-service-glib.xml: Make validate against
	    new DTD.

M	glib/dbus-binding-tool-glib.c
M	glib/dbus-binding-tool-glib.h
M	glib/dbus-gidl.c
M	glib/dbus-gidl.h
M	glib/dbus-glib-tool.c
M	glib/dbus-gparser.c

commit 87e81b87d7b443142302ecb48e46191a443ae02a
Author: Colin Walters <walters@verbum.org>
Date:	2005-02-17 17:41:24 +0000

    2005-02-17 Colin Walters <walters@verbum.org>

	    This patch is based on initial work from
	    Paul Kuliniewicz <kuliniew@purdue.edu>.

	    * glib/dbus-gvalue.c (dbus_gvalue_init): New function; move
	    initialization of GValue from dbus type to here.
	    (dbus_gvalue_genmarshal_name_from_type): New function;
	    generates a string
	    for the "glib-genmarshal" program from a DBus type.
	    (dbus_gvalue_binding_type_from_type): New function; turns
	    a DBus type
	    into the C name for it we use in the glib bindings.
	    (dbus_gvalue_ctype_from_type): New function; maps a DBus
	    type into a
	    glib C type (not GValue).
	    (dbus_gvalue_demarshal): invoke dbus_gvalue_init.

	    * glib/dbus-gutils.c (_dbus_gutils_wincaps_to_uscore):
	    Moved here
	    from dbus-gobject.c.

	    * glib/dbus-gutils.h: Prototype it.

	    * glib/dbus-gproxy.c: Include new dbus-gobject.h.
	    (marshal_dbus_message_to_g_marshaller): Use new shared
	    function
	    dbus_glib_marshal_dbus_message_to_gvalue_array.

	    * glib/dbus-gparser.c (parse_interface, parse_method):
	    Handle c_name attribute.
	    Will be changed once we have annotations.

	    * glib/dbus-gobject.c: Change info_hash_mutex from
	    GStaticMutex to
	    GStaticRWLock.  Callers updated.
	    (wincaps_to_uscore): Move to dbus-gutils.c.  Callers updated.
	    (string_table_next): New function for iterating over
	    zero-terminated
	    string value array.
	    (string_table_lookup): New function; retrieves specific
	    entry in
	    array.
	    (get_method_data): New function; look up method data in
	    object data chunk.
	    (object_error_domain_prefix_from_object_info)
	    (object_error_code_from_object_info): New functions, but
	    not implemented yet.
	    (method_interface_from_object_info): New function; retrieve
	    interface name.
	    (method_name_from_object_info): New function; retrieve
	    method name.
	    (method_arg_info_from_object_info): New function; retrieve
	    argument data.
	    (arg_iterate): New function; iterates over serialized
	    argument data.
	    (method_dir_signature_from_object_info): New function;
	    returns a
	    GString holding type signature for arguments for just one
	    direction (input or output).
	    (method_input_signature_from_object_info)
	    (method_output_signature_from_object_info): New functions.
	    (dbus_glib_marshal_dbus_message_to_gvalue_array): New shared
	    function;
	    converts dbus message arguments into a GValue array.
	    Used for both
	    signal handling and method invocation.
	    (struct DBusGlibWriteIterfaceData): New utility structure.
	    (write_interface): New function; generate introspection
	    XML for
	    an interface.
	    (introspect_interfaces): New function; gathers all
	    interface->methods,
	    generates introspection XML for them.
	    (handle_introspect): Invoke introspect_interfaces.
	    (get_object_property): Be sure to zero-initalize
	    stack-allocated GValue.
	    (lookup_object_and_method): New function; examines an
	    incoming message
	    and attempts to match it up (via interface, method name,
	    and argument
	    signature) with a known object and method.
	    (gerror_domaincode_to_dbus_error_name): New function;
	    converts a
	    GError domain and code into a DBus error name.  Needs GError
	    data
	    added to object introspection to work well.
	    (gerror_to_dbus_error_message): Creates a DBusMessage error
	    return from
	    GError.
	    (invoke_object_method): New function to invoke an object
	    method
	    looked up via lookup_object_and_method.  Parses the incoming
	    message, turns it into a GValue array, then invokes the
	    marshaller
	    specified in the DBusGMethodInfo.  Creates a new message with
	    either return values or error message as appropriate.
	    (gobject_message_function): Invoke lookup_object_and_method
	    and
	    invoke_object_method.

	    * glib/dbus-glib-tool.c: Include dbus-binding-tool-glib.h.
	    (enum DBusBindingOutputMode): New enum for binding output
	    modes.
	    (pretty_print): Print binding names.
	    (dbus_binding_tool_error_quark): GError bits.
	    (version): Fix typo.
	    (main): Create GIOChannel for output.  Parse new --mode
	    argument,
	    possible values are "pretty-print", "glib-server",
	    "glib-client".
	    Use mode to invoke appropriate function.

	    * glib/dbus-gobject.h: Prototype
	    dbus_glib_marshal_dbus_message_to_gvalue_array.

	    * glib/dbus-glib-tool.h: New header, just includes GError bits
	    for now.

	    * glib/dbus-gidl.c (struct InterfaceInfo): Add bindings
	    hashtable;
	    maps binding style to name.
	    (struct MethodInfo): Ditto.
	    (get_hash_keys, get_hash_key): Utility function, returns
	    keys for
	    a GHashTable.
	    (interface_info_new, method_info_new): Initialize bindings.
	    (interface_info_unref, method_info_unref): Destroy bindings.
	    (method_info_get_binding_names, method_info_get_binding_name)
	    (interface_info_get_binding_names,
	    interface_info_get_binding_name):
	    Functions for retrieving binding names.
	    (method_info_set_binding_name,
	    interface_info_set_binding_name):
	    Functions for setting binding names.

	    * glib/dbus-binding-tool-glib.h: New file, has prototypes
	    for glib binding generation.

	    * glib/dbus-binding-tool-glib.c: New file, implements
	    server-side
	    and client-side glib glue generation.

	    * glib/Makefile.am (dbus_binding_tool_SOURCES): Add
	    dbus-binding-tool-glib.c, dbus-binding-tool-glib.h,
	    dbus-glib-tool.h.

	    * dbus/dbus-glib.h (struct DBusGMethodMarshaller): Remove
	    in favor
	    of using GClosureMarshal directly.
	    (struct DBusGObjectInfo): Add n_infos member.

	    * test/glib/test-service-glib.xml: New file; contains
	    introspection data
	    for MyTestObject used in test-service-glib.c.

	    * test/glib/test-service-glib.c (enum MyObjectError): New
	    GError enum.
	    (my_object_do_nothing, my_object_increment,
	    my_object_throw_error)
	    (my_object_uppercase, my_object_many_args): New test methods.
	    (main): Use dbus_g_object_class_install_info to include
	    generated object
	    info.

	    * test/glib/Makefile.am: Generate server-side glue for
	    test-service-glib.c,
	    as well as client-side bindings.

	    * test/glib/test-dbus-glib.c: Include
	    test-service-glib-bindings.h.
	    (main): Activate TestSuiteGLibService; test invoke a bunch
	    of its methods
	    using both the dbus_gproxy stuff directly as well as the
	    generated bindings.

M	glib/Makefile.am
A	glib/dbus-binding-tool-glib.c
A	glib/dbus-binding-tool-glib.h
M	glib/dbus-gidl.c
M	glib/dbus-gidl.h
M	glib/dbus-glib-tool.c
A	glib/dbus-glib-tool.h
M	glib/dbus-gobject.c
A	glib/dbus-gobject.h
M	glib/dbus-gparser.c
M	glib/dbus-gproxy.c
M	glib/dbus-gutils.c
M	glib/dbus-gutils.h
M	glib/dbus-gvalue.c
M	glib/dbus-gvalue.h

commit dd22216537d98b06366ade81eb6f63621d4c6379
Author: Havoc Pennington <hp@redhat.com>
Date:	2005-02-16 04:37:27 +0000

    2005-02-15 Havoc Pennington <hp@redhat.com>

	    * dbus/dbus-connection.c (dbus_connection_dispatch): always
	    complete a pending call, don't run filters first.

	    * glib/dbus-gproxy.c (dbus_g_proxy_end_call): change to use
	    dbus_pending_call_steal_reply

	    * dbus/dbus-pending-call.c (dbus_pending_call_block):
	    just call
	    _dbus_connection_block_pending_call
	    (dbus_pending_call_get_reply): change to steal_reply and
	    return a
	    ref

	    * dbus/dbus-connection.c
	    (dbus_connection_send_with_reply_and_block): port to work
	    in terms
	    of DBusPendingCall
	    (_dbus_connection_block_pending_call): replace block_for_reply
	    with this

M	glib/dbus-gproxy.c

commit 3ce5325735aae6b1d4e6a28b45465a586710d23e
Author: Havoc Pennington <hp@redhat.com>
Date:	2005-02-12 20:27:45 +0000

    2005-02-12 Havoc Pennington <hp@redhat.com>

	    * tools/dbus-tree-view.c (info_set_func_text): display more
	    details on args

	    * bus/driver.c (bus_driver_handle_list_services): list the bus
	    driver

	    * glib/dbus-gparser.c (parse_arg): generate an arg name if
	    none is supplied

	    * glib/dbus-gidl.c (signal_info_get_n_args): new function
	    (method_info_get_n_args): new function

M	glib/dbus-gidl.c
M	glib/dbus-gidl.h
M	glib/dbus-gparser.c

commit 89113d257f1f75cea5d0f39bbca4785afc784bf2
Author: Havoc Pennington <hp@redhat.com>
Date:	2005-02-10 23:47:54 +0000

    2005-02-10 Havoc Pennington <hp@redhat.com>

	    * dbus/dbus-object-tree.c
	    (handle_default_introspect_and_unlock):
	    change to be _and_unlock instead of _unlocked

	    * dbus/dbus-connection.c
	    (_dbus_connection_send_preallocated_unlocked_no_update):
	    rename to
	    have no_update so we can find this bug quickly in future

M	glib/dbus-gthread.c

commit 116d931394d42412595e64185cd9cb97444cd653
Author: Havoc Pennington <hp@redhat.com>
Date:	2005-02-05 04:15:57 +0000

    2005-02-04 Havoc Pennington <hp@redhat.com>

	    * glib/dbus-gproxy.c (dbus_g_proxy_disconnect_signal): use
	    g_quark_try_string() so it actually can return 0
	    (dbus_g_proxy_connect_signal): ditto

    2005-02-04	Havoc Pennington  <hp@redhat.com>

	    * glib/dbus-gproxy.c (dbus_g_proxy_emit_remote_signal): fix a
	    bogus warning
	    (tristring_from_message): assert cleanly on null
	    path/interface
	    (should not be possible though I decided later)
	    (dbus_g_proxy_dispose): move proxy manager unregistration here
	    (DBUS_G_PROXY_DESTROYED): add this macro, and use it in a
	    bunch of
	    g_return_if_fail() checks

M	glib/dbus-gproxy.c

commit 1fdc099a4ed729871597c501a9015ec2855bebc2
Author: Havoc Pennington <hp@redhat.com>
Date:	2005-01-31 23:17:18 +0000

    2005-01-31 Havoc Pennington <hp@redhat.com>

	    * glib/dbus-gproxy.c: rewrite how signals work again, this
	    time I
	    think it's sort of right

M	glib/dbus-gproxy.c

commit 463fb506e9661849d9838aedbdf4b7febe8e132e
Author: Havoc Pennington <hp@redhat.com>
Date:	2005-01-31 02:55:12 +0000

    2005-01-30 Havoc Pennington <hp@redhat.com>

	    * tools/dbus-names-model.c: dynamically watch NameOwnerChanged

	    * autogen.sh: change to autotools 1.9

	    * glib/dbus-gproxy.c: completely change how signals work
	    (dbus_g_proxy_add_signal): new function to specify signature
	    of a
	    signal
	    (dbus_g_proxy_emit_received): marshal the dbus message
	    to GValues,
	    and g_warning if the incoming message has the wrong signature.

M	glib/Makefile.am
A	glib/dbus-gmarshal.c
A	glib/dbus-gmarshal.h
A	glib/dbus-gmarshal.list
M	glib/dbus-gproxy.c

commit c39a68d373c1f73a3bb7d0f45287cee1cd8eff55
Author: Havoc Pennington <hp@redhat.com>
Date:	2005-01-30 23:06:32 +0000

    2005-01-30 Havoc Pennington <hp@redhat.com>

	    * glib/dbus-glib.c (dbus_g_pending_call_set_notify):
	    new function
	    (dbus_g_pending_call_cancel): new function

	    * dbus/dbus-glib.h: move GType decls for connection/message
	    here;
	    * dbus/dbus-glib.c: move all the g_type and ref/unref stuff in
	    here, just kind of rationalizing how we handle all that

	    * tools/dbus-names-model.c: new file for a tree model
	    listing the
	    services on a bus

	    * tools/dbus-tree-view.c (model_new): use proper typing on the
	    model rows

M	glib/dbus-glib.c
M	glib/dbus-gmain.c
M	glib/dbus-gproxy.c

commit 967f6acd6c220b0be691edd18d9a636f4d16fbaf
Author: Havoc Pennington <hp@redhat.com>
Date:	2005-01-30 20:06:52 +0000

    2005-01-30 Havoc Pennington <hp@redhat.com>

	    * glib/dbus-gmain.c: add a custom GSource back that just
	    checks
	    whether the message queue has anything in it; otherwise,
	    there are
	    cases where we won't see messages in the queue since there
	    was no
	    IO visible to the glib main loop

	    * dbus/dbus-connection-internal.h
	    (_DBUS_DEFAULT_TIMEOUT_VALUE):
	    increase default message timeout to 25 seconds

M	glib/dbus-gmain.c

commit af3c2731c74f014c0713a52d66027a9428c1ddaf
Author: Havoc Pennington <hp@redhat.com>
Date:	2005-01-30 19:33:29 +0000

    2005-01-30 Havoc Pennington <hp@redhat.com>

	    * glib/dbus-gmain.c: rewrite the main loop stuff to avoid the
	    custom source, seems to be a lot easier to understand and work
	    better.

M	glib/dbus-gmain.c

commit 32587c38401f16a9477f7ea7868120645d072462
Author: Havoc Pennington <hp@redhat.com>
Date:	2005-01-30 18:25:14 +0000

    2005-01-30 Havoc Pennington <hp@redhat.com>

	    I think this main loop thing is conceptually broken, but
	    here are
	    some band aids. I'll maybe rewrite it in a minute.

	    * glib/dbus-gmain.c (add_timeout): timeout stuff doesn't
	    use the
	    custom GSource, so don't pass it in; confusing
	    (gsource_server_finalize, gsource_connection_finalize): add
	    finalize handlers that remove all the watches.

M	glib/dbus-gmain.c

commit 4b7acbbfacaa37ce399df1ce616920c09750ae60
Author: Havoc Pennington <hp@redhat.com>
Date:	2005-01-30 07:44:08 +0000

    2005-01-30 Havoc Pennington <hp@redhat.com>

	    * glib/dbus-gobject.c (introspect_properties): fix the XML
	    generated

	    * dbus/dbus-message.c (dbus_message_unref): add an in_cache
	    flag
	    which effectively detects the use of freed messages

	    * glib/dbus-gobject.c (handle_introspect): modify and
	    return the
	    reply message instead of the incoming message

	    * dbus/dbus-object-tree.c
	    (handle_default_introspect_unlocked):
	    gee, maybe it should SEND THE XML instead of just making
	    a string
	    and freeing it again ;-)

	    * tools/dbus-print-message.c (print_message): improve
	    printing of
	    messages

	    * configure.in: add debug-glib.service to the output

M	glib/dbus-gobject.c
M	glib/dbus-gparser.c

commit 71181795196712bbb64d721464f42432997c7d0c
Author: Havoc Pennington <hp@redhat.com>
Date:	2005-01-30 05:18:44 +0000

    2005-01-30 Havoc Pennington <hp@redhat.com>

	    dbus-viewer introspected and displayed the bus driver

	    * dbus/dbus-object-tree.c
	    (object_tree_test_iteration): add tests for a handler
	    registered on "/"

	    * dbus/dbus-object-tree.c
	    (_dbus_decompose_path): fix to handle path "/" properly
	    (run_decompose_tests): add tests for path decomposition

	    * glib/dbus-gutils.c (_dbus_gutils_split_path): fix to handle
	    "/"
	    properly

	    * glib/dbus-gobject.c (handle_introspect): fix quotes

	    * test/glib/run-test.sh: support launching the bus, then
	    running
	    dbus-viewer

	    * test/glib/test-service-glib.c (main): put in a trivial
	    gobject
	    subclass and register it on the connection

	    * bus/driver.c (bus_driver_handle_introspect): implement
	    introspection of the bus driver service

	    * dbus/dbus-protocol.h: add #defines for the XML namespace,
	    identifiers, doctype decl

	    * bus/driver.c (bus_driver_handle_get_service_owner): handle
	    attempts to get owner of DBUS_SERVICE_ORG_FREEDESKTOP_DBUS by
	    returning the service unchanged.
	    (bus_driver_handle_message): remove old check for reply_serial
	    in
	    method calls, now the message type deals with that
	    (bus_driver_handle_message): handle NULL interface

	    * glib/dbus-gproxy.c (dbus_g_proxy_get_bus_name): new function

	    * glib/dbus-gloader-expat.c (description_load_from_string):
	    allow
	    -1 for len

	    * tools/dbus-viewer.c: add support for introspecting a
	    service on
	    a bus

	    * glib/dbus-gproxy.c (dbus_g_pending_call_ref): add
	    (dbus_g_pending_call_unref): add

M	glib/dbus-gidl.c
M	glib/dbus-gidl.h
M	glib/dbus-gloader-expat.c
M	glib/dbus-gobject.c
M	glib/dbus-gproxy.c
M	glib/dbus-gutils.c

commit 3593b814632b482b541ccf3adb2b31887028b234
Author: Havoc Pennington <hp@redhat.com>
Date:	2005-01-29 20:12:21 +0000

    2005-01-29 Havoc Pennington <hp@redhat.com>

	    * tools/dbus-tree-view.c: add support for displaying
	    properties.
	    (run dbus-viewer with an introspect xml file as arg,
	    then resize
	    the window so the tree elements show up, not sure what
	    that is)

	    * glib/dbus-gobject.c (handle_introspect): return
	    org.freedesktop.Properties and org.freedesktop.Introspectable
	    interfaces when we are introspected.

	    * doc/dbus-specification.xml: allow empty interface name when
	    Get/Set a property

M	glib/dbus-gobject.c

commit 426cf6b944282d16db0d88b230627793df52f1ad
Author: Havoc Pennington <hp@redhat.com>
Date:	2005-01-29 19:52:19 +0000

    2005-01-29 Havoc Pennington <hp@redhat.com>

	    * glib/Makefile.am: rename dbus-glib-tool to
	    dbus-binding-tool;
	    though it uses glib, it could be extended for any binding in
	    principle

	    * glib/dbus-gobject.c (gobject_message_function): change
	    to the
	    new way properties work

	    * dbus/dbus-protocol.h: add the new interfaces

	    * doc/dbus-specification.xml: document the introspection
	    format,
	    Introspectable interface, and add an
	    org.freedesktop.Properties
	    interface.

	    * glib/dbus-gparser.c: add support for a <property> element

	    * glib/dbus-gidl.c: add PropertyInfo

	    * glib/dbus-gobject.c (handle_introspect): put the outermost
	    <node> outside the signal and property descriptions.
	    (introspect_properties): export properties as <property>
	    rather
	    than as method calls

M	glib/.cvsignore
M	glib/Makefile.am
M	glib/dbus-gidl.c
M	glib/dbus-gidl.h
M	glib/dbus-glib-tool.c
M	glib/dbus-gobject.c
M	glib/dbus-gparser.c

commit 54c56014a0d2dab88f1fa3bd17a7c1fd2768c4e9
Author: Havoc Pennington <hp@redhat.com>
Date:	2005-01-28 03:06:55 +0000

    2005-01-27 Havoc Pennington <hp@redhat.com>

	    * dbus/dbus-arch-deps.h.in: add 16/32-bit types

	    * configure.in: find the right type for 16 and 32 bit ints
	    as well
	    as 64

	    * dbus/dbus-protocol.h (DBUS_TYPE_INT16, DBUS_TYPE_UINT16):
	    add
	    the 16-bit types so people don't have to stuff them in
	    32-bit or
	    byte arrays.

M	glib/dbus-gparser.c
M	glib/dbus-gutils.c
M	glib/dbus-gvalue.c

commit 459e046b1ca4bdd06d85458fd4f213354833d1ed
Author: Havoc Pennington <hp@redhat.com>
Date:	2005-01-21 05:06:10 +0000

    2005-01-21 Havoc Pennington <hp@redhat.com>

	    * glib/dbus-gmain.c: don't put the GLib bindings in the same
	    toplevel doxygen group as the low-level API stuff

	    * dbus/dbus.h: note that libdbus is the low-level API

M	glib/dbus-gmain.c

commit 8cecb5bad77434129fc751c2ace45c389f46ef0d
Author: Havoc Pennington <hp@redhat.com>
Date:	2005-01-18 20:42:15 +0000

    2005-01-18 Havoc Pennington <hp@redhat.com>

	    * Throughout, grand renaming to strip out the use of
	    "service",
	    just say "name" instead (or "bus name" when ambiguous).
	    Did not
	    change the internal code of the message bus itself, only the
	    programmer-facing API and messages.

	    * doc/dbus-specification.xml: further update the message
	    bus section

	    * bus/config-parser.c (all_are_equiv): fix bug using freed
	    string
	    in error case

M	glib/dbus-gproxy.c

commit 40c882bcb60faeee24e3e887f3503e9ecb878166
Author: Havoc Pennington <hp@redhat.com>
Date:	2005-01-17 19:49:52 +0000

    2005-01-17 Havoc Pennington <hp@redhat.com>

	    * dbus/dbus-types.h: hardcode dbus_bool_t to 32 bits

	    * Throughout: modify DBUS_TYPE_BOOLEAN to be a 32-bit
	    type instead
	    of an 8-bit type. Now dbus_bool_t is the type to use
	    whenever you
	    are marshaling/unmarshaling a boolean.

M	glib/dbus-gvalue.c

commit c8c3d8a243f6b284b3aa46352afb9fb913f09f78
Author: Havoc Pennington <hp@redhat.com>
Date:	2005-01-16 15:51:55 +0000

    2005-01-16 Havoc Pennington <hp@redhat.com>

	    * Add and fix docs according to Doxygen warnings throughout
	    source.

	    * dbus/dbus-marshal-recursive.c
	    (_dbus_type_reader_array_is_empty): change this to just call
	    array_reader_get_array_len() and make it static

	    * dbus/dbus-message.c (dbus_message_iter_get_element_type):
	    rename
	    from get_array_type
	    (dbus_message_iter_init_append): rename from append_iter_init

	    * dbus/dbus-marshal-recursive.c
	    (_dbus_type_reader_get_element_type): rename from
	    _dbus_type_reader_get_array_type

M	glib/dbus-glib.c
M	glib/dbus-gobject.c

commit e116119209a507a5ba305e890f897d31e5b626e1
Author: Havoc Pennington <hp@redhat.com>
Date:	2005-01-15 07:15:38 +0000

    2005-01-15 Havoc Pennington <hp@redhat.com>

	    * Land the new message args API and type system.

	    This patch is huge, but the public API change is not
	    really large. The set of D-BUS types has changed somewhat,
	    and the arg "getters" are more geared toward language
	    bindings;
	    they don't make a copy, etc.

	    There are also some known issues. See these emails for details
	    on this huge patch:
	    http://lists.freedesktop.org/archives/dbus/2004-December/001836.html
	    http://lists.freedesktop.org/archives/dbus/2005-January/001922.html

	    * dbus/dbus-marshal-*: all the new stuff

	    * dbus/dbus-message.c: basically rewritten

	    * dbus/dbus-memory.c (check_guards): with "guards" enabled,
	    init
	    freed blocks to be all non-nul bytes so using freed memory
	    is less
	    likely to work right

	    * dbus/dbus-internals.c (_dbus_test_oom_handling): add
	    DBUS_FAIL_MALLOC=N environment variable, so you can do
	    DBUS_FAIL_MALLOC=0 to skip the out-of-memory checking, or
	    DBUS_FAIL_MALLOC=10 to make it really, really, really slow and
	    thorough.

	    * qt/message.cpp: port to the new message args API
	    (operator<<): use str.utf8() rather than str.unicode()
	    (pretty sure this is right from the Qt docs?)

	    * glib/dbus-gvalue.c: port to the new message args API

	    * bus/dispatch.c, bus/driver.c: port to the new message
	    args API

	    * dbus/dbus-string.c (_dbus_string_init_const_len):
	    initialize the
	    "locked" flag to TRUE and align_offset to 0; I guess we never
	    looked at these anyhow, but seems cleaner.

	    * dbus/dbus-string.h (_DBUS_STRING_ALLOCATION_PADDING):
	    move allocation padding macro to this header; use it to
	    implement
	    (_DBUS_STRING_STATIC): ability to declare a static string.

	    * dbus/dbus-message.c
	    (_dbus_message_has_type_interface_member):
	    change to return TRUE if the interface is not set.

	    * dbus/dbus-string.[hc]: move the D-BUS specific validation
	    stuff
	    to dbus-marshal-validate.[hc]

	    * dbus/dbus-marshal-basic.c (_dbus_type_to_string): move
	    here from
	    dbus-internals.c

	    * dbus/Makefile.am: cut over from dbus-marshal.[hc]
	    to dbus-marshal-*.[hc]

	    * dbus/dbus-object-tree.c (_dbus_decompose_path): move this
	    function here from dbus-marshal.c

M	glib/dbus-gobject.c
M	glib/dbus-gproxy.c
M	glib/dbus-gutils.c
M	glib/dbus-gvalue.c

commit 62f29fd0fea8e1eaa3e61db44ddd1eeba765f153
Author: Havoc Pennington <hp@redhat.com>
Date:	2004-11-13 07:07:46 +0000

    2004-11-13 Havoc Pennington <hp@redhat.com>

	    * test/glib/test-profile.c: fix this thing up a bit

	    * dbus/dbus-message.c (dbus_message_new_empty_header):
	    increase
	    preallocation sizes by a fair bit; not sure if this will be an
	    overall performance win or not, but it does reduce reallocs.

	    * dbus/dbus-string.c (set_length, reallocate_for_length):
	    ignore
	    the test hack that forced constant realloc if asserts are
	    disabled, so we can profile sanely. Sprinkle in some
	    _DBUS_UNLIKELY() which are probably pointless, but before I
	    noticed the real performance problem I put them in.
	    (_dbus_string_validate_utf8): micro-optimize this thing
	    a little
	    bit, though callgrind says it didn't help; then special-case
	    ascii, which did help a lot; then be sure we detect nul
	    bytes as
	    invalid, which is a bugfix.
	    (align_length_then_lengthen): add some more _DBUS_UNLIKELY
	    superstition; use memset to nul the padding instead of
	    a manual
	    loop.
	    (_dbus_string_get_length): inline this as a
	    macro; it showed up in the profile because it's used for loop
	    tests and so forth

M	glib/dbus-gmain.c

commit 0ab857b2916731f92be856c6821d5c9950716f89
Author: Olivier Andrieu <oliv__a@users.sourceforge.net>
Date:	2004-10-07 09:56:01 +0000

    * dbus/dbus-sysdeps.c (_dbus_file_get_contents): fix an incorrect
    format string.

    * glib/dbus-dbus-gmain.c (dbus_g_bus_get): do not mangle NULL pointer
    (bug #1540, Leonardo Boiko).

M	glib/dbus-gmain.c

commit 4b50c510605d5dda629c9d493a61611bb382a55d
Author: Havoc Pennington <hp@redhat.com>
Date:	2004-08-10 03:06:59 +0000

    2004-08-09 Havoc Pennington <hp@redhat.com>

	    * COPYING: switch to Academic Free License version 2.1
	    instead of
	    2.0, to resolve complaints about patent termination clause.

M	glib/dbus-gidl.c
M	glib/dbus-gidl.h
M	glib/dbus-glib-tool.c
M	glib/dbus-glib.c
M	glib/dbus-gloader-expat.c
M	glib/dbus-gmain.c
M	glib/dbus-gobject.c
M	glib/dbus-gparser.c
M	glib/dbus-gparser.h
M	glib/dbus-gproxy.c
M	glib/dbus-gtest-main.c
M	glib/dbus-gtest.c
M	glib/dbus-gtest.h
M	glib/dbus-gthread.c
M	glib/dbus-gtool-test.h
M	glib/dbus-gutils.c
M	glib/dbus-gutils.h

commit 301a3547a2efd9784fa3ab253373fa689c9bd1c3
Author: Olivier Andrieu <oliv__a@users.sourceforge.net>
Date:	2004-07-29 08:00:45 +0000

    * bus/config-loader-libxml.c: complete the implementation of libxml

    backend for config file loader. Doesn't work with full OOM test yet.

    * configure.in: change error when selecting libxml into a warning.

    * test/data/invalid-config-files: add two non-well-formed XML files.

    * glib/Makefile.am: libdbus_gtool always uses expat, not libxml.

    * dbus/dbus-transport-unix.c (unix_handle_watch): do not disconnect in
    case of DBUS_WATCH_HANGUP, several do_reading() may be necessary to
    read all the buffer. (bug #894)

    * bus/activation.c (bus_activation_activate_service): fix a potential
    assertion failure (bug #896). Small optimization in the case of
    auto-activation messages.

    * dbus/dbus-message.c (verify_test_message, _dbus_message_test): add
    test case for byte-through-vararg bug (#901). patch by Kimmo
    Hmlinen.

M	glib/Makefile.am

commit ef7e145899ce58a5df564127783f014d8bed233f
Author: Havoc Pennington <hp@redhat.com>
Date:	2004-06-20 15:28:14 +0000

    2004-06-20 Havoc Pennington <hp@redhat.com>

	    * dbus/dbus-glib-error-enum.h: autogenerate the GError enum
	    codes from the dbus error names

	    * glib/dbus-glib.h: move to subdir dbus/ since it's included
	    as dbus/dbus-glib.h and that breakage is now visible due to
	    including dbus/dbus-glib.h in dbus-glib-lowlevel.h

	    * glib/dbus-glib.h: s/gproxy/g_proxy/

	    * dbus/dbus-shared.h: new header to hold stuff shared with
	    binding APIs

	    * dbus/dbus-protocol.h (DBUS_ERROR_*): move errors here rather
	    than dbus-errors.h

	    * glib/dbus-glib.h (dbus_set_g_error): move to
	    dbus-glib-lowlevel.h

	    * glib/dbus-glib.h: remove dbus/dbus.h from here; change
	    a bunch
	    of stuff to enable this

	    * dbus/dbus-glib-lowlevel.h: put dbus/dbus.h here

	    * a bunch of other changes with the same basic "separate glib
	    bindings from dbus.h" theme

M	glib/Makefile.am
M	glib/dbus-gidl.c
M	glib/dbus-glib-tool.c
A	glib/dbus-glib.c
D	glib/dbus-glib.h
M	glib/dbus-gmain.c
M	glib/dbus-gobject.c
M	glib/dbus-gproxy.c
M	glib/dbus-gtest.c
M	glib/dbus-gtest.h
M	glib/dbus-gthread.c
M	glib/dbus-gtool-test.h
M	glib/dbus-gutils.c
M	glib/dbus-gutils.h

commit 9426e419227a721a8b7b04661ec133cb93c389e5
Author: Olivier Andrieu <oliv__a@users.sourceforge.net>
Date:	2004-06-05 16:32:00 +0000

    2004-06-05 Olivier Andrieu <oliv__a@users.sourceforge.net>

	    * dbus/dbus-connection.h, dbus/dbus-connection.c: have
	    object path
	    registration functions take the path argument as char*
	    instead of
	    char**.

	    * dbus/dbus-marshal.h, dbus/dbus-marshal.c
	    (_dbus_decompose_path):
	    split off the path decompostion part of
	    _dbus_demarshal_object_path. Some misc. fixes to silence
	    compiler
	    warnings.

	    * glib/dbus-gobject.c, test/test-service.c: update
	    accordingly.

M	glib/dbus-gobject.c

commit b2a4e237f907acd5127f85d0e2110b32d8a7ea86
Author: Kristian Hogsberg <krh@redhat.com>
Date:	2004-06-02 13:13:14 +0000

    2004-06-02 Kristian Hgsberg <krh@redhat.com>

	    * glib/dbus-gproxy.c, glib/dbus-gmain.c, dbus/dbus-string.c,
	    dbus/dbus-object-tree.c, dbus/dbus-message.c: add comments to
	    quiet doxygen.

	    * Doxyfile.in: remove deprecated options.

	    * dbus/dbus-message-handler.c, dbus/dbus-message-handler.h,
	    glib/test-thread.h, glib/test-thread-client.c,
	    glib/test-thread-server.c, glib/test-profile.c,
	    glib/test-dbus-glib.c: remove these unused files.

M	glib/dbus-gmain.c
M	glib/dbus-gproxy.c
D	glib/test-dbus-glib.c
D	glib/test-profile.c
D	glib/test-thread-client.c
D	glib/test-thread-server.c
D	glib/test-thread.h

commit 05a2332400f9e23d84e7376b9908f19a59868d5d
Author: Havoc Pennington <hp@redhat.com>
Date:	2004-06-01 03:02:26 +0000

    2004-05-31 Havoc Pennington <hp@redhat.com>

	    * glib/dbus-gidl.c (method_info_add_arg): keep args sorted
	    with
	    "in" before "out"

	    * glib/dbus-gobject.c (dbus_type_to_string): move to
	    dbus-gutils.c

	    * glib/dbus-glib-tool.c (main): set up to have a --self-test
	    option that runs the tests, and start filling in some code
	    including for starters just dumping the interfaces to stdout

	    * glib/Makefile.am (INCLUDES): define DBUS_LOCALEDIR

	    * test/data/valid-introspection-files/lots-of-types.xml:
	    test of
	    an example introspection file

	    * glib/dbus-gparser.c (parser_check_doctype): doctype
	    should be
	    "node" (I think...)

M	glib/Makefile.am
M	glib/dbus-gidl.c
M	glib/dbus-glib-tool.c
M	glib/dbus-glib.h
M	glib/dbus-gobject.c
M	glib/dbus-gparser.c
M	glib/dbus-gutils.c
M	glib/dbus-gutils.h

commit c02ba470d7a212d7c51777c467eae808dd954f2f
Author: Havoc Pennington <hp@redhat.com>
Date:	2004-05-28 22:30:04 +0000

    2004-05-28 Havoc Pennington <hp@redhat.com>

	    * test/glib/test-service-glib.c (main): remove unused variable

	    * glib/dbus-gidl.c (base_info_ref): fix a silly compiler
	    warning

	    * dbus/dbus-auth.h (enum): remove
	    AUTHENTICATED_WITH_UNUSED_BYTES
	    from the enum, no longer in use.

	    * dbus/dbus-sysdeps.h: include config.h so DBUS_VA_COPY
	    actually
	    works right.

	    * dbus/dbus-message.c: add various _dbus_return_val_if_fail
	    for
	    whether error_name passed in is a valid error name.

M	glib/dbus-gidl.c

commit 1400b16528f4d0d8f6a60b199e5799eadb0ff0ea
Author: Michael Meeks <michael@ximian.com>
Date:	2004-05-28 13:10:35 +0000

    2004-05-28 Michael Meeks <michael@ximian.com>

	    * glib/dbus-gvalue.c (dbus_gvalue_marshal,
	    dbus_gvalue_demarshal):
	    fix no int64 case.

	    * dbus/dbus-string.c (_dbus_string_parse_basic_type): impl.

	    * dbus/dbus-message.c (_dbus_message_iter_get_basic_type),
	    (_dbus_message_iter_get_basic_type_array): impl.
	    drastically simplify ~all relevant _get methods to use these.
	    (_dbus_message_iter_append_basic_array),
	    (dbus_message_iter_append_basic): impl
	    drastically simplify ~all relevant _append methods to
	    use these.

	    * dbus/dbus-message-builder.c (parse_basic_type)
	    (parse_basic_array, lookup_basic_type): impl.
	    (_dbus_message_data_load): prune scads of duplicate /
	    cut & paste coding.

	    * dbus/dbus-marshal.c (_dbus_demarshal_basic_type_array)
	    (_dbus_demarshal_basic_type): implement,
	    (demarshal_and_validate_len/arg): beef up debug.
	    (_dbus_marshal_basic_type, _dbus_marshal_basic_type_array):
	    impl.

M	glib/dbus-gvalue.c

commit 7866137fa3b028e7a8e22f03998754c0967e1501
Author: Olivier Andrieu <oliv__a@users.sourceforge.net>
Date:	2004-04-15 22:08:04 +0000

    2004-04-15 Olivier Andrieu <oliv__a@users.sourceforge.net>

	    * bus/driver.c (bus_driver_handle_get_service_owner):
	    implement a GetServiceOwner method.
	    * doc/dbus-specification.xml: document it.
	    * dbus/dbus-errors.h: add a 'ServiceHasNoOwner' error.

	    * glib/dbus-gproxy.c (dbus_gproxy_new_for_service_owner):
	    implement, using the bus GetServiceOwner method.

	    * test/glib/test-dbus-glib.c:
	    use dbus_gproxy_new_for_service_owner so that we can
	    receive the
	    signal.

M	glib/dbus-gproxy.c

commit e03a715a21237d70233d40a393958ec7d3d4027d
Author: Michael Meeks <michael@ximian.com>
Date:	2004-04-13 11:47:17 +0000

    2004-04-13 Michael Meeks <michael@ximian.com>

	    * glib/dbus-gobject.c (handle_introspect): split out
	    (introspect_properties): this.
	    (handle_introspect): implement this.

M	glib/dbus-gobject.c

commit e7e5d9377e54b9d26a59402197d26bb575c15976
Author: Michael Meeks <michael@ximian.com>
Date:	2004-03-29 13:24:50 +0000

    2004-03-29 Michael Meeks <michael@ximian.com>

	    * glib/dbus-gobject.c (set_object_property): split out /
	    re-work, use the property type, and not the message type(!)
	    (get_object_property): ditto.

	    * glib/dbus-gvalue.c (dbus_gvalue_demarshal),
	    (dbus_gvalue_marshal): make this code re-usable, needed
	    for signals too, also on both proxy and server side.
	    Re-write for more efficiency / readability.

M	glib/Makefile.am
M	glib/dbus-gobject.c
A	glib/dbus-gvalue.c
A	glib/dbus-gvalue.h

commit 82d9c846687c428fde8e517ca38d69642de9a66a
Author: Richard Hult <richard@imendio.com>
Date:	2003-12-02 10:44:21 +0000

    2003-12-02 Richard Hult <richard@imendio.com>

	    * Update AFL version to 2.0 throughout the source files
	    to reflect
	    the update that was done a while ago.

M	glib/dbus-gidl.c
M	glib/dbus-gidl.h
M	glib/dbus-glib-tool.c
M	glib/dbus-glib.h
M	glib/dbus-gloader-expat.c
M	glib/dbus-gmain.c
M	glib/dbus-gobject.c
M	glib/dbus-gparser.c
M	glib/dbus-gparser.h
M	glib/dbus-gproxy.c
M	glib/dbus-gtest-main.c
M	glib/dbus-gtest.c
M	glib/dbus-gtest.h
M	glib/dbus-gthread.c
M	glib/dbus-gtool-test.h
M	glib/dbus-gutils.c
M	glib/dbus-gutils.h
M	glib/test-profile.c

commit 64858892747bea931226f39dad9e063475bf3c89
Author: Mikael Hallendal <micke@imendio.com>
Date:	2003-11-27 01:25:49 +0000

    2003-11-26 Mikael Hallendal <micke@imendio.com>

	    * bus/*.[ch]:
	    * dbus/*.[ch]:
	    * glib/*.[ch]: Made ref functions return the pointer

M	glib/dbus-gidl.c
M	glib/dbus-gidl.h
M	glib/dbus-gmain.c
M	glib/dbus-gparser.c
M	glib/dbus-gparser.h
M	glib/dbus-gproxy.c

commit f130073ef0a107d0b57695720f5a94d0e17ce38f
Author: Havoc Pennington <hp@redhat.com>
Date:	2003-10-21 05:46:51 +0000

    2003-10-20 Havoc Pennington <hp@redhat.com>

	    hmm, make check is currently not passing.

	    * doc/dbus-specification.xml: add requirement that custom type
	    names follow the same rules as interface names.

	    * dbus/dbus-protocol.h: change some of the byte codes,
	    to avoid
	    duplication and allow 'c' to be 'custom'; dict is now 'm' for
	    'map'

	    * doc/dbus-specification.xml: update type codes to match
	    dbus-protocol.h, using the ASCII byte values. Rename type
	    NAMED to
	    CUSTOM. Add type OBJECT_PATH to the spec.

    2003-10-17	Havoc Pennington  <hp@redhat.com>

	    * bus/driver.c (create_unique_client_name): use "." as
	    separator
	    in base service names instead of '-'

	    * dbus/dbus-string.c (_dbus_string_get_byte): allow getting
	    nul
	    byte at the end of the string

	    * dbus/dbus-internals.h (_DBUS_LIKELY, _DBUS_UNLIKELY): add
	    optimization macros since string validation seems to be a slow
	    point.

	    * doc/dbus-specification.xml: restrict valid
	    service/interface/member/error names. Add test suite code
	    for the
	    name validation.

	    * dbus/dbus-string.c: limit service/interface/member/error
	    names
	    to [0-9][A-Z][a-z]_

	    * dbus/dbus-connection.c (dbus_connection_dispatch):
	    add missing
	    format arg to verbose spew

	    * glib/dbus-gproxy.c (dbus_gproxy_call_no_reply): if not
	    out of
	    memory, return instead of g_error

	    * test/test-service.c (path_message_func): support emitting a
	    signal on request

	    * dbus/dbus-bus.c (init_connections_unlocked): only fill in
	    activation bus type if DBUS_BUS_ACTIVATION was set; default to
	    assuming the activation bus was the session bus so that
	    services
	    started manually will still register.
	    (init_connections_unlocked): fix so that in OOM situation
	    we get
	    the same semantics when retrying the function

	    * test/test-service.c (main): change to use path registration,
	    to
	    test those codepaths; register with DBUS_BUS_ACTIVATION rather
	    than DBUS_BUS_SESSION

M	glib/dbus-gobject.c
M	glib/dbus-gproxy.c

commit 756f88a96232ae730faca81feeb30fcd07458df9
Author: Havoc Pennington <hp@redhat.com>
Date:	2003-10-17 16:23:19 +0000

    2003-10-16 Havoc Pennington <hp@redhat.com>

	    * glib/dbus-gtest-main.c: bracket with #ifdef DBUS_BUILD_TESTS

	    * Makefile.am (GCOV_DIRS): remove "test", we don't care
	    about test
	    coverage of the tests
	    (coverage-report.txt): don't move the .da and .bbg files
	    around

M	glib/dbus-gtest-main.c

commit aa0c367ff5214ddbb2578e5b290cfae6aa472a0d
Author: Havoc Pennington <hp@redhat.com>
Date:	2003-10-16 06:34:50 +0000

    2003-10-16 Havoc Pennington <hp@redhat.com>

	    * bus/connection.c (bus_pending_reply_expired): either
	    cancel or
	    execute, not both
	    (bus_connections_check_reply): use unlink, not remove_link,
	    as we
	    don't want to free the link; fixes double free mess

	    * dbus/dbus-pending-call.c (dbus_pending_call_block): fix
	    in case
	    where no reply was received

	    * dbus/dbus-connection.c
	    (_dbus_pending_call_complete_and_unlock):
	    fix a refcount leak

	    * bus/signals.c (match_rule_matches): add special cases
	    for the
	    bus driver, so you can match on sender/destination for it.

	    * dbus/dbus-sysdeps.c (_dbus_abort): print backtrace if
	    DBUS_PRINT_BACKTRACE is set

	    * dbus/dbus-internals.c: add pid to assertion failure messages

	    * dbus/dbus-connection.c: add message type code to the
	    debug spew

	    * glib/dbus-gproxy.c (gproxy_get_match_rule): match rules want
	    sender=foo not service=foo

	    * dbus/dbus-bus.c (dbus_bus_get): if the activation bus is the
	    session bus but DBUS_SESSION_BUS_ADDRESS isn't set, use
	    DBUS_ACTIVATION_ADDRESS instead

	    * bus/activation.c: set DBUS_SESSION_BUS_ADDRESS,
	    DBUS_SYSTEM_BUS_ADDRESS if appropriate

	    * bus/bus.c (bus_context_new): handle OOM copying bus
	    type into
	    context struct

	    * dbus/dbus-message.c (dbus_message_iter_get_object_path):
	    new function
	    (dbus_message_iter_get_object_path_array): new function (half
	    finished, disabled for the moment)

	    * glib/dbus-gproxy.c (dbus_gproxy_end_call): properly handle
	    DBUS_MESSAGE_TYPE_ERROR

	    * tools/dbus-launch.c (babysit): support DBUS_DEBUG_OUTPUT to
	    avoid redirecting stderr to /dev/null
	    (babysit): close stdin if not doing the "exit_with_session"
	    thing

	    * dbus/dbus-sysdeps.c (_dbus_become_daemon): delete some
	    leftover
	    debug code; change DBUS_DEBUG_OUTPUT to only enable stderr,
	    not
	    stdout/stdin, so things don't get confused

	    * bus/system.conf.in: fix to allow replies, I modified .conf
	    instead of .conf.in again.

M	glib/dbus-gproxy.c

commit 33689cc9f76ff14f77ba9b9d6e17094991fc2ba1
Author: Havoc Pennington <hp@redhat.com>
Date:	2003-10-12 05:59:39 +0000

    2003-10-12 Havoc Pennington <hp@pobox.com>

	    Added test code that 1) starts an actual bus daemon and
	    2) uses
	    DBusGProxy; fixed bugs that were revealed by the test. Lots
	    more testing possible, but this is the basic framework.

	    * glib/dbus-gproxy.c (dbus_gproxy_manager_unregister): remove
	    empty proxy lists from the proxy list hash

	    * dbus/dbus-message.c (dbus_message_iter_get_args_valist):
	    add a
	    couple of return_if_fail checks

	    * dbus/dbus-pending-call.c (_dbus_pending_call_new):
	    use dbus_new0
	    to allocate, so everything is cleared to NULL as it should be.

	    * glib/dbus-gmain.c (dbus_connection_setup_with_g_main): pass
	    source as data to dbus_connection_set_timeout_functions()
	    as the
	    timeout functions expected

	    * test/glib/run-test.sh: add a little script to start up
	    a message
	    bus and run tests using it

	    * tools/dbus-launch.1: updates

	    * tools/dbus-launch.c (main): add --config-file option

	    * tools/dbus-launch.c (main): remove confusing else if
	    (runprog)
	    that could never be reached.

	    * dbus/dbus-message.c (dbus_message_new_method_return)
	    (dbus_message_new_error, dbus_message_new_signal): set the
	    no-reply-expected flag on all these. Redundant, but may
	    as well be consistent.

M	glib/dbus-gmain.c
M	glib/dbus-gproxy.c

commit 6741526f3dedd835d9f0d7ae4beaa097016b0b9e
Author: Havoc Pennington <hp@redhat.com>
Date:	2003-10-03 03:55:35 +0000

    2003-10-02 Havoc Pennington <hp@pobox.com>

	    * glib/dbus-gproxy.c (dbus_gproxy_call_no_reply): rename from
	    dbus_gproxy_oneway_call

	    * glib/dbus-gmain.c (dbus_connection_setup_with_g_main)
	    (dbus_server_setup_with_g_main): fix to allow calling
	    them more
	    than once on the same args
	    (dbus_bus_get_with_g_main): new function

M	glib/dbus-glib.h
M	glib/dbus-gmain.c
M	glib/dbus-gproxy.c

commit b05fc993d8d813ca93fa2c49e4c8b7345613c8e0
Author: Havoc Pennington <hp@redhat.com>
Date:	2003-09-30 02:32:48 +0000

    2003-09-29 Havoc Pennington <hp@pobox.com>

	    * Merge dbus-object-names branch. To see the entire patch
	    do cvs diff -r DBUS_OBJECT_NAMES_BRANCHPOINT -r
	    dbus-object-names,
	    it's huuuuge though.
	    To revert, I tagged DBUS_BEFORE_OBJECT_NAMES_MERGE.

    2003-09-28	Havoc Pennington  <hp@pobox.com>

	    * HACKING: update to reflect new server

    2003-09-26	Seth Nickell  <seth@gnome.org>

	    * python/dbus.py:
	    * python/examples/example-signals.py:

	    Start implementing some notions of signals. The API
	    is really terrible, but they sort of work (with the
	    exception of being able to filter by service, and to
	    transmit signals *as* a particular service). Need to
	    figure out how to make messages come from the service
	    we registered :-(

	    * python/dbus_bindings.pyx.in:

	    Removed duplicate message_handler callbacks.

    2003-09-25	Havoc Pennington  <hp@redhat.com>

	    * bus/session.conf.in: fix my mess

    2003-09-25	Havoc Pennington  <hp@pobox.com>

	    * bus/session.conf.in: fix security policy, reported by
	    Seth Nickell

    2003-09-25	Seth Nickell  <seth@gnome.org>

	    * python/examples/example-service.py:

	    Johan notices complete wrong code in example-service, but
	    completely wrong in a way that works exactly the same (!).
	    Johan is confused, how could this possibly work? Example
	    code fails to serve purpose of making things clear.
	    Seth fixes.

    2003-09-25	Mark McLoughlin  <mark@skynet.ie>

	    * doc/dbus-specification.sgml: don't require header fields
	    to be 4-byte aligned and specify that fields should be
	    distinguished from padding by the fact that zero is not
	    a valid field name.

	    * doc/TODO: remove re-alignment item and add item to doc
	    the OBJECT_PATH type.

	    * dbus/dbus-message.c:
	    (HeaderField): rename the original member to value_offset
	    and introduce a name_offset member to keep track of where
	    the field actually begins.
	    (adjust_field_offsets): remove.
	    (append_int_field), (append_uint_field),
	    (append_string_field): don't align the start of the header
	    field to a 4-byte boundary.
	    (get_next_field): impl finding the next marhsalled field
	    after a given field.
	    (re_align_field_recurse): impl re-aligning a number of
	    already marshalled fields.
	    (delete_field): impl deleting a field of any type and
	    re-aligning any following fields.
	    (delete_int_or_uint_field), (delete_string_field): remove.
	    (set_int_field), (set_uint_field): no need to re-check
	    that we have the correct type for the field.
	    (set_string_field): ditto and impl re-aligning any
	    following fields.
	    (decode_header_data): update to take into account that
	    the fields aren't 4-byte aligned any more and the new
	    way to distinguish padding from header fields. Also,
	    don't exit when there is too much header padding.
	    (process_test_subdir): print the directory.
	    (_dbus_message_test): add test to make sure a following
	    field is re-aligned correctly after field deletion.

	    * dbus/dbus-string.[ch]:
	    (_dbus_string_insert_bytes): rename from insert_byte and
	    allow the insert of multiple bytes.
	    (_dbus_string_test): test inserting multiple bytes.

	    * dbus/dbus-marshal.c: (_dbus_marshal_set_string): add
	    warning note to docs about having to re-align any
	    marshalled values following the string.

	    * dbus/dbus-message-builder.c:
	    (append_string_field), (_dbus_message_data_load):
	    don't align the header field.

	    * dbus/dbus-auth.c: (process_test_subdir): print the
	    directory.

	    * test/break-loader.c: (randomly_add_one_byte): upd. for
	    insert_byte change.

	    *
	    test/data/invalid-messages/bad-header-field-alignment.message:
	    new test case.

	    * test/data/valid-messages/unknown-header-field.message: shove
	    a dict in the unknown field.

    2003-09-25	Seth Nickell  <seth@gnome.org>

	    * python/dbus.py:
	    * python/dbus_bindings.pyx.in:

	    Handle return values.

	    * python/examples/example-client.py:
	    * python/examples/example-service.py:

	    Pass back return values from the service to the client.

    2003-09-24	Seth Nickell  <seth@gnome.org>

	    * python/dbus.py:

	    Connect Object methods (when you are sharing an object)
	    up... pass
	    in a list of methods to be shared. Sharing all the methods
	    just
	    worked out too weird. You can now create nice Services
	    over the
	    DBus in Python. :-)

	    * python/dbus_bindings.pyx.in:

	    Keep references to user_data tuples passed into C functions so
	    Python doesn't garbage collect on us.

	    Implement MethodReturn and Error subclasses of Message
	    for creating
	    DBusMessage's of those types.

	    * python/examples/example-client.py:
	    * python/examples/example-service.py:

	    Simple example code showing both how create DBus services
	    and objects,
	    and how to use them.

    2003-09-23	Havoc Pennington  <hp@pobox.com>

	    * glib/dbus-gproxy.c (dbus_gproxy_manager_filter): implement

    2003-09-23	Havoc Pennington  <hp@redhat.com>

	    * glib/dbus-gproxy.c (dbus_gproxy_connect_signal): implement
	    (dbus_gproxy_disconnect_signal): implement
	    (dbus_gproxy_manager_remove_signal_match): implement
	    (dbus_gproxy_manager_add_signal_match): implement
	    (dbus_gproxy_oneway_call): implement

    2003-09-23	Havoc Pennington  <hp@pobox.com>

	    * glib/dbus-gproxy.c (struct DBusGProxy): convert to a GObject
	    subclass. This means dropping the transparent thread safety
	    of the
	    proxy; you now need a separate proxy per-thread, or your own
	    locking on the proxy. Probably right anyway.
	    (dbus_gproxy_ref, dbus_gproxy_unref): nuke, just use
	    g_object_ref

    2003-09-22	Havoc Pennington  <hp@redhat.com>

	    * glib/dbus-gproxy.c (dbus_gproxy_manager_get): implement

    2003-09-21	Seth Nickell  <seth@gnome.org>

	    First checkin of the Python bindings.

	    * python/.cvsignore:
	    * python/Makefile.am:
	    * python/dbus_bindings.pyx.in:
	    * python/dbus_h_wrapper.h:

	    Pieces for Pyrex to operate on, building a dbus_bindings.so
	    python module for low-level access to the DBus APIs.

	    * python/dbus.py:

	    High-level Python module for accessing DBus objects.

	    * configure.in:
	    * Makefile.am:

	    Build stuff for the python bindings.

	    * acinclude.m4:

	    Extra macro needed for finding the Python C header files.

    2003-09-21	Havoc Pennington  <hp@pobox.com>

	    * glib/dbus-gproxy.c (dbus_gproxy_manager_new): start
	    implementing the proxy manager, didn't get very far.

	    * dbus/dbus-bus.c (dbus_bus_add_match): new
	    (dbus_bus_remove_match): new

	    * glib/dbus-gproxy.c (dbus_gproxy_new_for_service): add a
	    path_name argument; adjust the other not-yet-implemented
	    gproxy constructors to be what I think they should be.

    2003-09-21	Havoc Pennington  <hp@pobox.com>

	    * dbus/dbus-bus.c (dbus_bus_get): set exit_on_disconnect
	    to TRUE
	    by default for message bus connections.

	    * dbus/dbus-connection.c (dbus_connection_dispatch): exit if
	    exit_on_disconnect flag is set and we process the disconnected
	    signal.
	    (dbus_connection_set_exit_on_disconnect): new function

    2003-09-21	Havoc Pennington  <hp@pobox.com>

	    Get matching rules mostly working in the bus; only actually
	    parsing the rule text remains. However, the client side of
	    "signal connections" hasn't been started, this patch is
	    only the
	    bus side.

	    * dbus/dispatch.c: fix for the matching rules changes

	    * bus/driver.c (bus_driver_handle_remove_match)
	    (bus_driver_handle_add_match): send an ack reply from these
	    method calls

	    * glib/dbus-gproxy.c (dbus_gproxy_begin_call): fix order of
	    arguments, reported by Seth Nickell

	    * bus/config-parser.c (append_rule_from_element): support
	    eavesdrop=true|false attribute on policies so match rules
	    can be prevented from snooping on the system bus.

	    * bus/dbus-daemon-1.1.in: consistently use terminology
	    "sender"
	    and "destination" in attribute names; fix some docs bugs;
	    add eavesdrop=true|false attribute

	    * bus/driver.c (bus_driver_handle_add_match)
	    (bus_driver_handle_remove_match): handle AddMatch, RemoveMatch
	    messages

	    * dbus/dbus-protocol.h
	    (DBUS_SERVICE_ORG_FREEDESKTOP_BROADCAST): get
	    rid of broadcast service concept, signals are just always
	    broadcast

	    * bus/signals.c, bus/dispatch.c, bus/connection.c, bus/bus.c:
	    mostly implement matching rules stuff (currently only exposed
	    as signal
	    connections)

    2003-09-21	Mark McLoughlin  <mark@skynet.ie>

	    * doc/dbus-specification.sgml: Change the header field name
	    to be an enum and update the rest of the spec to reference
	    the fields using the conventinal name.

	    * dbus/dbus-protocol.h: update to reflect the spec.

	    * doc/TODO: add item to remove the 4 byte alignment
	    requirement.

	    * dbus/dbus-message.c: Remove the code to generalise the
	    header/body length and serial number header fields as named
	    header fields so we can reference field names using the
	    protocol values.
	    (append_int_field), (append_uint_field),
	    (append_string_field):
	    Append the field name as a byte rather than four chars.
	    (delete_int_or_uint_field), (delete_string_field): reflect the
	    fact that the field name and typecode now occupy 4 bytes
	    instead
	    of 8.
	    (decode_string_field), (decode_header_data): update to reflect
	    protocol changes and move the field specific encoding from
	    decode_string_field() back into decode_header_data().

	    * dbus/dbus-internals.[ch]: (_dbus_header_field_to_string):
	    Add utility to aid debugging.

	    * dbus/dbus-message-builder.c:
	    (append_string_field), (_dbus_message_data_load): Update to
	    reflect protocol changes; Change the FIELD_NAME directive
	    to HEADER_FIELD and allow it to take the field's conventional
	    name rather than the actual value.

	    * test/data/*/*.message: Update to use HEADER_FIELD instead
	    of FIELD_NAME; Always align the header on an 8 byte boundary
	    *before* updating the header length.

    2003-09-15	Havoc Pennington  <hp@pobox.com>

	    * dbus/dbus-pending-call.c: add the get/set object data
	    boilerplate as for DBusConnection, etc. Use generic object
	    data
	    for the notify callback.

	    * glib/dbus-gparser.c (parse_node): parse child nodes

	    * tools/dbus-viewer.c: more hacking on the dbus-viewer

	    * glib/dbus-gutils.c (_dbus_gutils_split_path): add a file to
	    contain functions shared between the convenience lib and the
	    installed lib

	    * glib/Makefile.am (libdbus_glib_1_la_LDFLAGS): add
	    -export-symbols-regex to the GLib library

	    * dbus/dbus-object-tree.c
	    (_dbus_object_tree_dispatch_and_unlock):
	    fix the locking in here, and add a default handler for
	    Introspect() that just returns sub-nodes.

    2003-09-14	Havoc Pennington  <hp@pobox.com>

	    * glib/dbus-gthread.c (dbus_g_thread_init): rename to
	    make g_foo
	    rather than gfoo consistent

	    * glib/dbus-gproxy.h: delete for now, move contents to
	    dbus-glib.h, because the include files don't work right
	    since we
	    aren't in the dbus/ subdir.

	    * glib/dbus-gproxy.c (dbus_gproxy_send): finish implementing
	    (dbus_gproxy_end_call): finish
	    (dbus_gproxy_begin_call): finish

	    * glib/dbus-gmain.c (dbus_set_g_error): new

	    * glib/dbus-gobject.c (handle_introspect): include information
	    about child nodes in the introspection

	    * dbus/dbus-connection.c (dbus_connection_list_registered):
	    new
	    function to help in implementation of introspection

	    * dbus/dbus-object-tree.c
	    (_dbus_object_tree_list_registered_and_unlock): new function

    2003-09-12	Havoc Pennington  <hp@pobox.com>

	    * glib/dbus-gidl.h: add common base class for all the foo_info
	    types

	    * tools/dbus-viewer.c: add GTK-based introspection UI thingy
	    similar to kdcop

	    * test/Makefile.am: try test srcdir -ef . in addition to test
	    srcdir = ., one of them should work (yeah lame)

	    * glib/Makefile.am: build the "idl" parser stuff as a
	    convenience
	    library

	    * glib/dbus-gparser.h: make description_load routines return
	    NodeInfo* not Parser*

	    * Makefile.am (SUBDIRS): build test dir after all library dirs

	    * configure.in: add GTK+ detection

    2003-09-07	Havoc Pennington  <hp@pobox.com>

	    * Make Doxygen contented.

    2003-09-07	Havoc Pennington  <hp@pobox.com>

	    * doc/dbus-specification.sgml: more updates

    2003-09-06	Havoc Pennington  <hp@pobox.com>

	    * doc/dbus-specification.sgml: partial updates

	    * bus/dbus-daemon-1.1.in: fix the config file docs for the
	    zillionth time; hopefully I edited the right file this time.

	    * bus/config-parser.c (append_rule_from_element): support
	    send_type, send_path, receive_type, receive_path

	    * bus/policy.c: add message type and path to the list
	    of things
	    that can be "firewalled"

    2003-09-06	Havoc Pennington  <hp@pobox.com>

	    * dbus/dbus-connection.c (dbus_connection_register_fallback):
	    add this
	    (dbus_connection_register_object_path): make this not handle
	    messages to paths below the given path

    2003-09-03	Havoc Pennington  <hp@pobox.com>

	    * test/glib/Makefile.am: add this with random glib-linked test
	    programs

	    * glib/Makefile.am: remove the random test programs from here,
	    leave only the unit tests

	    * glib/dbus-gobject.c (_dbus_gobject_test): add test for
	    uscore/javacaps conversion, and fix
	    (get_object_property, set_object_property): change to .NET
	    convention for mapping props to methods,
	    set_FooBar/get_FooBar,
	    since one language has such a convention we may as well
	    copy it.
	    Plus real methods in either getFooBar or get_foo_bar style
	    won't
	    collide with this convention.

    2003-09-01	Havoc Pennington  <hp@pobox.com>

	    * glib/dbus-gparser.c: implement

	    * glib/dbus-gobject.c: start implementing skeletons support

	    * configure.in: when disabling checks/assert, also define
	    G_DISABLE_ASSERT and G_DISABLE_CHECKS

    2003-09-01	Havoc Pennington  <hp@pobox.com>

	    * glib/Makefile.am: rearrange a bunch of files and get "make
	    check" framework set up

    2003-08-31	Havoc Pennington  <hp@pobox.com>

	    * fix build with --disable-tests

    2003-08-30	Havoc Pennington  <hp@pobox.com>

	    * dbus/dbus-connection.c: purge DBusMessageHandler

	    * dbus/dbus-message-handler.c: remove DBusMessageHandler, just
	    use callbacks everywhere

    2003-08-30	Havoc Pennington  <hp@pobox.com>

	    * test/data/valid-config-files/system.d/test.conf: change to
	    root for the user so warnings don't get printed

	    * dbus/dbus-message.c: add dbus_message_get_path,
	    dbus_message_set_path

	    * dbus/dbus-object-tree.c (do_test_dispatch): add test of
	    dispatching to a path

	    * dbus/dbus-string.c (_dbus_string_validate_path): add

	    * dbus/dbus-marshal.c (_dbus_demarshal_object_path): implement
	    (_dbus_marshal_object_path): implement

	    * dbus/dbus-protocol.h (DBUS_HEADER_FIELD_PATH): new header
	    field
	    to contain the path to the target object
	    (DBUS_HEADER_FIELD_SENDER_SERVICE): rename
	    DBUS_HEADER_FIELD_SENDER to explicitly say it's the sender
	    service

    2003-08-30	Havoc Pennington  <hp@pobox.com>

	    * dbus/dbus-object-tree.c: write tests and fix the discovered
	    bugs

    2003-08-29	Havoc Pennington  <hp@pobox.com>

	    * dbus/dbus-object-tree.c: modify to allow overlapping paths
	    to be
	    registered
	    (struct DBusObjectSubtree): shrink this
	    a lot, since we may have a lot of them
	    (_dbus_object_tree_free_all_unlocked): implement
	    (_dbus_object_tree_dispatch_and_unlock): implement

    2003-08-29	Havoc Pennington  <hp@pobox.com>

	    * dbus/dbus-internals.h: fix _DBUS_N_GLOBAL_LOCKS

    2003-08-28	Havoc Pennington  <hp@pobox.com>

	    purge DBusObjectID

	    * dbus/dbus-connection.c: port to no ObjectID, create a
	    DBusObjectTree, rename ObjectTree to ObjectPath in public API

	    * dbus/dbus-connection.h (struct DBusObjectTreeVTable): delete
	    everything except UnregisterFunction and MessageFunction

	    * dbus/dbus-marshal.c: port away from DBusObjectID,
	    add DBUS_TYPE_OBJECT_PATH

	    * dbus/dbus-object-registry.[hc], dbus/dbus-object.[hc],
	    dbus/dbus-objectid.[hc]: remove these, we are moving to
	    path-based object IDs

    2003-08-25	Havoc Pennington  <hp@pobox.com>

	    Just noticed that dbus_message_test is hosed, I wonder when I
	    broke that. I thought make check was passing earlier...

	    * dbus/dbus-object-tree.c: add new "object tree" to match DCOP
	    container tree, will replace most of dbus-object-registry

	    * dbus/dbus-string.c (_dbus_string_append_printf_valist):
	    fix C99
	    screwup

    2003-08-19	Havoc Pennington  <hp@pobox.com>

	    * dbus/dbus-message.c (decode_string_field): support
	    FIELD_SENDER
	    (dbus_message_is_error): fix this function

	    * bus/dbus-daemon-1.1: clarify logic on when <deny>/<allow>
	    rules
	    match

	    * bus/policy.c (bus_client_policy_check_can_receive): fix
	    code to
	    reflect clarified man page
	    (bus_client_policy_check_can_send): ditto

	    * bus/session.conf.in: fixup

	    * bus/system.conf.in: fixup

    2003-08-18	Havoc Pennington  <hp@redhat.com>

	    * dbus/dbus-hash.c (_dbus_hash_table_insert_two_strings): fix

	...

M	glib/.cvsignore
M	glib/Makefile.am
A	glib/dbus-gidl.c
A	glib/dbus-gidl.h
A	glib/dbus-glib-tool.c
M	glib/dbus-glib.h
A	glib/dbus-gloader-expat.c
M	glib/dbus-gmain.c
A	glib/dbus-gobject.c
A	glib/dbus-gparser.c
A	glib/dbus-gparser.h
A	glib/dbus-gproxy.c
C064	glib/dbus-glib.h	glib/dbus-gtest-main.c
A	glib/dbus-gtest.c
C065	glib/dbus-glib.h	glib/dbus-gtest.h
M	glib/dbus-gthread.c
C064	glib/dbus-glib.h	glib/dbus-gtool-test.h
A	glib/dbus-gutils.c
C068	glib/dbus-glib.h	glib/dbus-gutils.h

commit c6510f49417e04522d9cc6a6c51331bef252aba0
Author: Anders Carlsson <andersca@gnome.org>
Date:	2003-08-05 13:57:20 +0000

    2003-08-05 Anders Carlsson <andersca@codefactory.se>

	    * glib/dbus-gmain.c: (watch_fd_new), (watch_fd_ref),
	    (watch_fd_unref), (dbus_gsource_check),
	    (dbus_gsource_dispatch),
	    (add_watch), (remove_watch), (create_source):
	    Refcount fds, fixes some reentrancy issues.

M	glib/dbus-gmain.c

commit a3c695d62bcfc46bd12f4165610649a604ed6166
Author: Havoc Pennington <hp@redhat.com>
Date:	2003-06-22 19:39:46 +0000

    2003-06-22 Havoc Pennington <hp@pobox.com>

	    * dbus/dbus-dataslot.c (_dbus_data_slot_allocator_unref)
	    (_dbus_data_slot_allocator_alloc): rework these to keep a
	    reference count on each slot and automatically manage a global
	    slot ID variable passed in by address

	    * bus/bus.c: convert to new dataslot API

	    * dbus/dbus-bus.c: convert to new dataslot API

	    * dbus/dbus-connection.c: convert to new dataslot API

	    * dbus/dbus-server.c: convert to new dataslot API

	    * glib/dbus-gmain.c: ditto

	    * bus/test.c: ditto

	    * bus/connection.c: ditto

M	glib/dbus-gmain.c
M	glib/test-thread-server.c

commit 1284fea96df990975632f0a5d8d982ec5c974161
Author: Anders Carlsson <andersca@gnome.org>
Date:	2003-06-19 22:19:56 +0000

    2003-06-19 Anders Carlsson <andersca@codefactory.se>

	    * glib/dbus-glib.h: Fix so that dbus-glib.h can be used
	    from C++ (Patch by Miloslav Trmac).

M	glib/dbus-glib.h

commit 375ff8ffbed8683c1a46fab9c537ccb9e603e1d7
Author: Anders Carlsson <andersca@gnome.org>
Date:	2003-06-18 10:48:07 +0000

    Add .cvsignore files

M	glib/.cvsignore

commit b4dd1b2cb3e226ece5055bc2f24ef819db7d1b08
Author: Havoc Pennington <hp@redhat.com>
Date:	2003-05-17 17:53:16 +0000

    2003-05-17 Havoc Pennington <hp@pobox.com>

	    * bus/config-parser.c (merge_included): merge in policies from
	    child configuration file.

	    * bus/policy.c (bus_policy_merge): function to merge two
	    policies
	    together

M	glib/test-profile.c

commit ae655688473fc5e5d6a279b3e764a713fc73b8ca
Author: Havoc Pennington <hp@redhat.com>
Date:	2003-05-12 02:44:44 +0000

    2003-05-11 Havoc Pennington <hp@pobox.com>

	    * dbus/dbus-marshal.c (_dbus_marshal_validate_arg): fix
	    to avoid
	    calling _dbus_marshal_validate_arg() for every byte in a byte
	    array, etc.

	    * dbus/dbus-message-handler.c: use atomic reference
	    counting to
	    reduce number of locks slightly; the global lock in here sucks

	    * dbus/dbus-connection.c
	    (_dbus_connection_update_dispatch_status_and_unlock):
	    variant of
	    update_dispatch_status that can be called with lock held;
	    then use
	    in a couple places to reduce locking/unlocking
	    (dbus_connection_send): hold the lock over the whole function
	    instead of acquiring it twice.

	    * dbus/dbus-timeout.c (_dbus_timeout_new): handle OOM

	    * bus/connection.c (bus_connections_setup_connection):
	    fix access
	    to already-freed memory.

	    * dbus/dbus-connection.c: keep a little cache of linked list
	    nodes, to avoid using the global linked list alloc lock in the
	    normal send-message case. Instead we just use the connection
	    lock
	    that we already have to take.

	    * dbus/dbus-list.c (_dbus_list_find_last): new function

	    * dbus/dbus-sysdeps.c (_dbus_atomic_inc, _dbus_atomic_dec):
	    change to use a struct for the atomic type; fix docs,
	    they return value before increment, not after increment.

	    * dbus/dbus-string.c (_dbus_string_append_4_aligned)
	    (_dbus_string_append_8_aligned): new functions to try to
	    microoptimize this operation.
	    (reallocate_for_length): break this out of set_length(), to
	    improve profile info, and also so we can consider inlining the
	    set_length() part.

	    * dbus/dbus-message.c (dbus_message_new_empty_header):
	    init data
	    strings with some preallocation, cuts down on our calls
	    to realloc
	    a fair bit. Though if we can get the "move entire string
	    to empty
	    string" optimization below to kick in here, it would be
	    better.

	    * dbus/dbus-string.c (_dbus_string_move): just call
	    _dbus_string_move_len
	    (_dbus_string_move_len): add a special case for moving
	    an entire string into an empty string; we can just
	    swap the string data instead of doing any reallocs.
	    (_dbus_string_init_preallocated): new function

M	glib/test-profile.c

commit b36dd8b35d932d01407b88e948c5196b49e31aa0
Author: Havoc Pennington <hp@redhat.com>
Date:	2003-05-11 07:59:08 +0000

    2003-05-11 Havoc Pennington <hp@pobox.com>

	    Write a "test-profile" that does echo client-server with
	    threads;
	    profile reveals lock contention, memcpy/realloc of buffers,
	    and
	    UTF-8 validation as hot spots. 20% of lock contention
	    eliminated
	    with dbus_atomic_inc/dec implementation on x86.
	    Much remaining
	    contention is global mempool locks for GList and DBusList.

	    * dbus/dbus-sysdeps.c (_dbus_atomic_inc, _dbus_atomic_dec):
	    add
	    x86 implementation

	    * dbus/dbus-connection.c (struct DBusConnection): use
	    dbus_atomic_t for the reference count

	    * dbus/dbus-message.c (struct DBusMessage): declare
	    dbus_atomic_t values as volatile

	    * configure.in: code to detect ability to use atomic integer
	    operations in assembly, from GLib patch

	    * dbus/dbus-internals.c (_dbus_verbose_real): call getpid
	    every
	    time, tired of it being wrong in threads and forked processes

	    * glib/test-profile.c: a little program to bounce messages
	    back
	    and forth between threads and eat CPU

	    * dbus/dbus-connection.c: add debug spew macros for debugging
	    thread locks; include config.h at top; fix deadlock in
	    dbus_connection_flush()

M	glib/Makefile.am
A	glib/test-profile.c

commit 6f4b867ddd6cef070d65149a4d935b4a964987f1
Author: Havoc Pennington <hp@redhat.com>
Date:	2003-04-29 22:57:13 +0000

    2003-04-29 Havoc Pennington <hp@redhat.com>

	    * glib/dbus-gmain.c: docs cleanups

	    * dbus/dbus-types.h: add docs on int64 types

	    * dbus/dbus-memory.c: fix docs to avoid putting private API in
	    public API docs section

M	glib/dbus-gmain.c

commit 7d22e9a86a21e337a31ee42ccdb851ada88c0b40
Author: Havoc Pennington <hp@redhat.com>
Date:	2003-04-25 20:41:49 +0000

    2003-04-25 Havoc Pennington <hp@redhat.com>

	    * glib/dbus-gmain.c (remove_watch): fix for a crash when
	    watches
	    were toggled without add/remove, fix from Anders Gustafsson

M	glib/dbus-gmain.c

commit 36a6a6bc4edb1b3280e405b0addb9113dc09de5c
Author: Havoc Pennington <hp@redhat.com>
Date:	2003-04-24 19:18:22 +0000

    2003-04-24 Havoc Pennington <hp@redhat.com>

	    * configure.in: add --enable-checks

	    * dbus/dbus-message.c (dbus_message_new): reverse name/service
	    arguments

	    * dbus/dbus-connection.c (dbus_connection_preallocate_send):
	    fix
	    to use thread locks.
	    (_dbus_connection_handler_destroyed_locked): move some private
	    functions into proper docs group

	    * dbus/dbus-internals.h: add _dbus_return_if_fail,
	    _dbus_return_val_if_fail

	    Throughout: use dbus_return_if_fail

M	glib/test-dbus-glib.c
M	glib/test-thread-client.c

commit eb553e370e7651a3104038cbba7ebb7a502118e7
Author: James Willcox <jwillcox@gnome.org>
Date:	2003-04-24 02:22:49 +0000

    2003-04-23 James Willcox <jwillcox@gnome.org>

	    * glib/dbus-glib.h:
	    * glib/dbus-gmain.c: (add_timeout), (wakeup_main),
	    (create_source),
	    (dbus_connection_setup_with_g_main),
	    (dbus_server_setup_with_g_main):
	    * glib/test-dbus-glib.c: (main):
	    * glib/test-thread-client.c: (main):
	    * glib/test-thread-server.c: (new_connection_callback),
	    (main):
	    * tools/dbus-monitor.c: (main):

	    Added a GMainContext argument to
	    dbus_connection_setup_with_g_main()
	    and dbus_server_setup_with_g_main().

M	glib/dbus-glib.h
M	glib/dbus-gmain.c
M	glib/test-dbus-glib.c
M	glib/test-thread-client.c
M	glib/test-thread-server.c

commit 62cc9827dee1d9fa052a11ce259acc7d1d2dcb9d
Author: Havoc Pennington <hp@redhat.com>
Date:	2003-04-18 04:18:57 +0000

    2003-04-18 Havoc Pennington <hp@pobox.com>

	    * glib/dbus-gmain.c: adapt to watch changes

	    * bus/bus.c, bus/activation.c, etc.: adjust to watch changes

	    * dbus/dbus-server.h: remove dbus_server_handle_watch

	    * dbus/dbus-connection.h: remove dbus_connection_handle_watch

	    * dbus/dbus-watch.c (dbus_watch_handle): change DBusWatch
	    to work
	    like DBusTimeout, so we don't need
	    dbus_connection_handle_watch
	    etc.

M	glib/dbus-gmain.c

commit 723f9251ee8892f05f4c94a9b0cfa864c5e56bae
Author: Alex Larsson <alexl@redhat.com>
Date:	2003-04-10 12:09:00 +0000

    2003-04-10 Alexander Larsson <alexl@redhat.com>

	    * bus/.cvsignore:
	    * glib/.cvsignore:
	    * test/.cvsignore:
	    Added files to cvsignore

	    * dbus/dbus-message.h:
	    * dbus/dbus-message.c: (dbus_message_iter_get_named):
	    Make get_named() take two out argument and return a boolean.
	    (dbus_message_iter_get_args_valist):
	    Update usage of get_named().
	    (dbus_message_iter_append_byte):
	    Fix typo
	    (dbus_message_iter_append_named)
	    Fix typo
	    (message_iter_test), (check_message_handling_type),
	    (_dbus_message_test):
	    More tests.

M	glib/.cvsignore

commit f8c607ec8949388bd09136d0a6635190910a3e9a
Author: Alex Larsson <alexl@redhat.com>
Date:	2003-04-08 15:52:50 +0000

    2003-04-08 Alexander Larsson <alexl@redhat.com>

	    Implemented recursive types, named types and new-style iters

	    * bus/driver.c:
	    * glib/test-thread-client.c: (thread_func):
	    * glib/test-thread-server.c: (handle_test_message):
	    * test/test-service.c: (handle_echo):
	    Update to new api

	    * dbus/Makefile.am:
	    * dbus/dbus-dict.c:
	    * dbus/dbus-dict.h:
	    * dbus/dbus.h
	    Remove DBusDict

	    * dbus/dbus-internals.c: (_dbus_type_to_string):
	    Update for new types.

	    * dbus/dbus-marshal.[ch]:
	    Implement recursive types and the new marshalling format.
	    Remove hardcoded dict marshalling.
	    Marshal named types.

	    * dbus/dbus-message-builder.c:
	    Add BYTE_ARRAY.
	    Remove references to old types

	    * dbus/dbus-message.[ch]:
	    New non-refcounted iter API that supports recursive iters.
	    Use iters for appending, including support for recursive
	    iters.
	    Add byte and named type support.
	    Update everything to new marshalling formats.
	    Add tests for new API.

	    * dbus/dbus-protocol.h:
	    Remove old array types.
	    Add types: BYTE, ARRAY, DICT, NAMED

	    * dbus/dbus-string.c:
	    * dbus/dbus-sysdeps.c:
	    Make parse_double locale safe.

	    * dbus/dbus-test-main.c:
	    Call setlocale.

	    * dbus/dbus-test.c:
	    Kill dict test

	    * doc/dbus-specification.sgml:
	    Update spec

	    * test/data/incomplete-messages/missing-body.message:
	    * test/data/invalid-messages/bad-boolean.message:
	    * test/data/invalid-messages/bad-boolean-array.message:
	    *
	    test/data/invalid-messages/boolean-array-length-too-long.message-raw:
	    * test/data/invalid-messages/boolean-has-no-value.message-raw:
	    * test/data/invalid-messages/too-short-dict.message:
	    * test/data/valid-messages/dict-simple.message:
	    * test/data/valid-messages/dict.message:
	    * test/data/valid-messages/emptiness.message:
	    * test/data/valid-messages/lots-of-arguments.message:
	    * test/data/valid-messages/no-padding.message:
	    * test/data/valid-messages/recursive-types.message:
	    Add missing NAME fields
	    Fix up dicts & arrays

	    * test/data/invalid-messages/dict-with-nil-value.message:
	    Removed, this is not invalid anymore.

	    * test/data/valid-messages/recursive-types.message:
	    Add new test for deeply recursive types.

M	glib/test-thread-client.c
M	glib/test-thread-server.c

commit 4612ff9267417cf8860c233a59fe8ec249ee4a62
Author: Havoc Pennington <hp@redhat.com>
Date:	2003-03-25 04:37:07 +0000

    2003-03-24 Havoc Pennington <hp@redhat.com>

	    * dbus/dbus-sysdeps.c (_dbus_set_fd_nonblocking): move to this
	    file

	    * dbus/dbus-errors.c (dbus_set_error, dbus_set_error_const):
	    allow
	    NULL argument for "message" if the error is a well-known one,
	    fill in a generic message in this case.

	    * dbus/dbus-errors.h (DBusResultCode): Kill DBusResultCode in
	    favor of DBusError

	    * bus/test.c (bus_test_flush_bus): add

	    * bus/policy.c (bus_policy_test): test code stub

M	glib/test-dbus-glib.c
M	glib/test-thread-client.c
M	glib/test-thread-server.c

commit 9eb162678713477754e9d88eb68c156d336c80ab
Author: Havoc Pennington <hp@redhat.com>
Date:	2003-03-16 20:16:46 +0000

    2003-03-16 Havoc Pennington <hp@pobox.com>

	    * dbus/dbus-string.c (_dbus_string_validate_utf8): oops,
	    unbreak
	    this. always run the test suite before commit...

	    * bus/*: adapt to DBusConnection API changes

	    * glib/dbus-gmain.c: adapt to DBusConnection API changes,
	    requires renaming stuff to avoid dbus_connection_dispatch name
	    conflict.

	    * dbus/dbus-transport.c (_dbus_transport_queue_messages): new
	    function

	    * dbus/dbus-message.c (_dbus_message_loader_queue_messages):
	    separate from _dbus_message_loader_return_buffer()

	    * dbus/dbus-connection.c (dbus_connection_get_n_messages):
	    remove
	    this, because it's now always broken to use; the number of
	    messages in queue vs. the number still buffered by the message
	    loader is undefined/meaningless. Should use
	    dbus_connection_get_dispatch_state().
	    (dbus_connection_dispatch): rename from
	    dbus_connection_dispatch_message

M	glib/dbus-gmain.c

commit 457dd574d5eda1286571f7070860c6feb56f184e
Author: Havoc Pennington <hp@redhat.com>
Date:	2003-03-15 20:47:16 +0000

    2003-03-15 Havoc Pennington <hp@pobox.com>

	    Make it pass the Hello handling test including all OOM
	    codepaths.
	    Now to do other messages...

	    * bus/services.c (bus_service_remove_owner): fix crash when
	    removing owner from an empty list of owners
	    (bus_registry_ensure): don't leave service in the list of
	    a connection's owned services if we fail to put the service
	    in the hash table.

	    * bus/connection.c (bus_connection_preallocate_oom_error): set
	    error flag on the OOM error.

	    * dbus/dbus-connection.c (_dbus_connection_new_for_transport):
	    handle _dbus_transport_set_connection failure

	    * dbus/dbus-transport-unix.c (_dbus_transport_new_for_fd):
	    modify
	    to create watches up front and simply enable/disable them as
	    needed.
	    (unix_connection_set): this can now fail on OOM

	    * dbus/dbus-timeout.c, dbus/dbus-watch.c: add concept
	    of enabling/disabling a watch or timeout.

	    * bus/loop.c (bus_loop_iterate): don't touch disabled
	    watches/timeouts

	    * glib/dbus-gmain.c: adapt to enable/disable watches and
	    timeouts

M	glib/dbus-gmain.c

commit 0f748f23b6fd40ab314bdc4d18e631cde958c1d2
Author: Havoc Pennington <hp@redhat.com>
Date:	2003-03-15 02:19:01 +0000

    2003-03-14 Havoc Pennington <hp@redhat.com>

	    * dbus/dbus-memory.c: add a "detect buffer overwrites on free"
	    cheesy hack

	    * dbus/dbus-transport-debug.c: rework this a good bit to be
	    less complicated. hopefully still works.

	    * dbus/dbus-server-debug.c (handle_new_client): remove timeout
	    manually

	    * glib/dbus-gmain.c (timeout_handler): don't remove timeout
	    after running it

	    * dbus/dbus-message.c (dbus_message_copy): rename from
	    dbus_message_new_from_message, fix it up to copy
	    all the message fields, add test case

	    * bus/dispatch.c (bus_dispatch_test): add some more test code,
	    not quite passing yet

M	glib/dbus-gmain.c

commit a15287bc97819cca7b61cc18d6d69232bb05117d
Author: Havoc Pennington <hp@redhat.com>
Date:	2003-03-14 01:27:58 +0000

    2003-03-13 Havoc Pennington <hp@redhat.com>

	    * dbus/dbus-timeout.c (_dbus_timeout_list_set_functions):
	    handle
	    out of memory

	    * dbus/dbus-watch.c (_dbus_watch_list_set_functions):
	    handle out
	    of memory

	    * dbus/dbus-connection.h: Make AddWatchFunction and
	    AddTimeoutFunction return a bool so they can fail on
	    out-of-memory

	    * bus/bus.c (bus_context_new): set up timeout handlers

	    * bus/connection.c (bus_connections_setup_connection): set up
	    timeout handlers

	    * glib/dbus-gmain.c: adapt to the fact that set_functions
	    stuff
	    can fail

	    * bus/bus.c (bus_context_new): adapt to changes

	    * bus/connection.c: adapt to changes

	    * test/watch.c: adapt to DBusWatch changes

	    * bus/dispatch.c (bus_dispatch_test): started adding this but
	    didn't finish

M	glib/dbus-gmain.c

commit e0a3fe2914f611ef4d74bbc1ca39794f0f7ae575
Author: Havoc Pennington <hp@redhat.com>
Date:	2003-03-13 00:56:43 +0000

    2003-03-12 Havoc Pennington <hp@redhat.com>

	    Mega-patch that gets the message bus daemon initially handling
	    out-of-memory. Work still needed. Also lots of random
	    moving stuff to DBusError instead of ResultCode.

	    * dbus/dbus-list.c (_dbus_list_length_is_one): new function

	    * dbus/dbus-connection.c
	    (dbus_connection_send_with_reply_and_block): use DBusError

	    * dbus/dbus-bus.c: adapt to API changes, make it use
	    DBusError not
	    DBusResultCode

	    * dbus/dbus-connection.c (dbus_connection_send): drop
	    the result
	    code here, as the only failure possible is OOM.

	    * bus/connection.c (bus_connection_disconnect):
	    rename bus_connection_disconnected as it's a notification only

	    * bus/driver.c (bus_driver_handle_acquire_service): don't free
	    "name" on get_args failure, should be done by get_args;
	    don't disconnect client for bad args, just return an error.
	    (bus_driver_handle_service_exists): ditto

	    * bus/services.c (bus_services_list): NULL-terminate
	    returned array

	    * bus/driver.c (bus_driver_send_service_lost)
	    (bus_driver_send_service_acquired): send messages from driver
	    to a
	    specific client to the client's unique name, not to the
	    broadcast
	    service.

	    * dbus/dbus-message.c (decode_header_data): reject messages
	    that
	    contain no name field
	    (_dbus_message_get_client_serial): rename to
	    dbus_message_get_serial and make public
	    (_dbus_message_set_serial): rename from set_client_serial
	    (_dbus_message_set_reply_serial): make public
	    (_dbus_message_get_reply_serial): make public

	    * bus/connection.c (bus_connection_foreach): allow stopping
	    iteration by returning FALSE from foreach function.

	    * dbus/dbus-connection.c (dbus_connection_send_preallocated)
	    (dbus_connection_free_preallocated_send)
	    (dbus_connection_preallocate_send): new API for sending
	    a message
	    without possibility of malloc failure.
	    (dbus_connection_send_message): rename to just
	    dbus_connection_send (and same for whole function family)

	    * dbus/dbus-errors.c (dbus_error_free): make this reinit
	    the error

	    * dbus/dbus-sysdeps.c (_dbus_exit): new function

	    * bus/activation.c: handle/return errors

	    * dbus/dbus-errors.h: add more DBUS_ERROR #define

	    * dbus/dbus-sysdeps.c (_dbus_directory_open)
	    (_dbus_file_get_contents)
	    (_dbus_directory_get_next_file): use DBusError instead of
	    DBusResultCode
	    (_dbus_result_from_errno): move to this file

M	glib/test-dbus-glib.c
M	glib/test-thread-client.c

commit 284daff1f103a303178243ca3e2dee960651fec0
Author: Alex Larsson <alexl@redhat.com>
Date:	2003-02-27 14:22:36 +0000

    2003-02-27 Alexander Larsson <alexl@redhat.com>

	    * glib/Makefile.am:
	    * configure.in:
	    Make gthreads-2.0 dependency optional. Don't build thread
	    test if
	    its not found.

M	glib/Makefile.am

commit b9589e9908d368cb064d1614e5c52239394414f4
Author: Alex Larsson <alexl@redhat.com>
Date:	2003-02-26 15:52:25 +0000

    2003-02-26 Alexander Larsson <alexl@redhat.com>

	    * configure.in:
	    Set DBUS_GLIB_THREADS_LIBS for apps using gthread-2.0

	    * dbus/dbus-connection.c:
	    * dbus/dbus-connection.h:
	    Fix _dbus_connection_acquire_io_path and
	    _dbus_connection_acquire_dispatch.
	    Add dbus_connection_set_wakeup_main_function and use it
	    when queueing
	    incoming and outgoing messages.

	    * dbus/dbus-dataslot.c:
	    Threadsafe usage of DBusDataSlotAllocator

	    * dbus/dbus-message.c: (dbus_message_get_args_iter):
	    dbus_new can fail.

	    * dbus/dbus-server-unix.c:
	    Add todo comment

	    * glib/dbus-gmain.c:
	    Implement the new wakeup functions for glib.

	    * glib/Makefile.am:
	    * glib/test-thread-client.c:
	    * glib/test-thread-server.c:
	    * glib/test-thread.h:
	    Initial cut at some thread test code. Not really done yet.

M	glib/Makefile.am
M	glib/dbus-gmain.c
A	glib/test-thread-client.c
A	glib/test-thread-server.c
A	glib/test-thread.h

commit c79213c6d3b041ce00bb00f24d4824e4a77f63ef
Author: Havoc Pennington <hp@redhat.com>
Date:	2003-02-26 06:42:57 +0000

    2003-02-26 Havoc Pennington <hp@pobox.com>

	    * dbus/dbus-connection.c
	    (dbus_connection_send_message_with_reply_and_block): fix crash
	    where we ref'd the outgoing message instead of the returned
	    reply

	    * dbus/dbus-transport-unix.c (do_authentication): check
	    read watch
	    at the end of this function, so if we didn't need to read for
	    authentication, we reinstall it for receiving messages

	    * dbus/dbus-message.c (dbus_message_new_reply): allow
	    replies to
	    a NULL sender for peer-to-peer case

	    * dbus/dbus-transport-unix.c (check_read_watch): handle
	    !authenticated case correctly

	    * glib/dbus-gmain.c: add support for DBusServer

	    * dbus/dbus-server.c: add data slot support

	    * glib/dbus-gmain.c (dbus_connection_setup_with_g_main): check
	    return values and handle errors

	    * dbus/dbus-dataslot.c: factor out the data slot stuff from
	    DBusConnection

	    * Doxyfile.in (INPUT): add glib subdir

	    * glib/dbus-gmain.c (dbus_connection_setup_with_g_main):
	    rename
	    setup_with_g_main instead of hookup_with_g_main; write docs

M	glib/dbus-glib.h
M	glib/dbus-gmain.c
M	glib/dbus-gthread.c
M	glib/test-dbus-glib.c

commit ebace7f90ea6b3d85a9140be3671ea527c3a5727
Author: Joe Shaw <joe@novell.com>
Date:	2003-02-18 22:51:35 +0000

    2003-02-18 Joe Shaw <joe@assbarn.com>

	    * dbus/dbus-auth.c (handle_server_data_stupid_test_mech):
	    Just get
	    credentials from our currently running process.
	    (get_word): Fix a buglet where we were copying the entire
	    length
	    instead of relative to our position.

	    * dbus/dbus-hash.c (_dbus_hash_test): Don't try to allocate
	    the
	    keys on the stack... it's 640k of data.

	    * dbus/dbus-sysdeps.c (_dbus_read_credentials_unix_socket):
	    Always
	    read the credentials byte off the socket, even if we
	    don't have
	    SO_PEERCRED.
	    (_dbus_poll): Implement poll() using select() for systems
	    which
	    don't have it.

	    * glib/test-dbus-glib.c (main): Print out an error if no
	    parameters are given.

	    * test/data/auth/fallback.auth-script: Added.  Tests that
	    a client
	    can fallback to a secondary auth mechanism if the first fails.

M	glib/test-dbus-glib.c

commit 2655a78cdf1114a686d3c2ee28025db133b287c3
Author: Anders Carlsson <andersca@gnome.org>
Date:	2003-02-16 12:57:26 +0000

    2003-02-16 Anders Carlsson <andersca@codefactory.se>

	    * dbus/dbus-auth.c: (client_try_next_mechanism):
	    Plug a leak.

	    * dbus/dbus-threads.c: (dbus_condvar_wait_timeout):
	    Return TRUE if there's no thread implementation around.

	    * glib/dbus-gmain.c: (free_source),
	    (dbus_connection_hookup_with_g_main):
	    Make sure to remove the GSource when the connection is
	    finalized.

M	glib/dbus-gmain.c

commit 4fbaec0ff143d92f96fb60c585282b5cb03bdc76
Author: Havoc Pennington <hp@redhat.com>
Date:	2003-02-16 07:20:54 +0000

    2003-02-16 Havoc Pennington <hp@pobox.com>

	    * dbus/dbus-connection.c (dbus_connection_set_change_sigpipe):
	    allow people to avoid setting SIGPIPE to SIG_IGN
	    (_dbus_connection_new_for_transport): disable SIGPIPE unless
	    we've been asked not to

M	glib/.cvsignore

commit 69a436d7913c1681eea397e768687fab736f9d7c
Author: Alex Larsson <alexl@redhat.com>
Date:	2003-02-15 16:25:08 +0000

    2003-02-15 Alexander Larsson <alexl@redhat.com>

	    * dbus/dbus-threads.c:
	    * dbus/dbus-threads.h:
	    Add condvars. Remove static mutext from API.
	    Implement static mutexes by initializing them from
	    threads_init.

	    * glib/dbus-gthread.c:
	    * qt/dbus-qthread.cpp:
	    Update with the thread api changes.

	    * dbus/dbus-list.c:
	    * dbus/dbus-list.h:
	    Turn StaticMutex into normal mutex + init function.
	    Export new functions _dbus_list_alloc_link,
	    _dbus_list_free_link,
	    _dbus_list_append_link, _dbus_list_prepend_link

	    * dbus/dbus-sysdeps.c:
	    * dbus/dbus-sysdeps.h:
	    New type dbus_atomic_t, and new functions _dbus_atomic_inc,
	    _dbus_atomic_dec. Only slow fallback implementation at
	    the moment.

	    * dbus/dbus-protocol.h:
	    Add DBUS_MESSAGE_LOCAL_DISCONNECT define

	    * dbus/dbus-message.c:
	    Make ref/unref atomic.
	    Fix some docs.

	    * dbus/dbus-connection-internal.h:
	    * dbus/dbus-connection.c:
	    * dbus/dbus-connection.h:
	    Make threadsafe.
	    Change _peek to _borrow,_return & _steal_borrowed.
	    Change disconnect callback to event.
	    Make dbus_connection_dispatch_messages reentrant.

	    * dbus/dbus-transport.c:
	    Don't ref the connection on calls to the transport
	    implementation.

	    * dbus/dbus-message-handler.c:
	    Make threadsafe.

	    * glib/dbus-gmain.c:
	    Don't use peek_message anymore

	    * test/Makefile.am:
	    * test/debug-thread.c:
	    * test/debug-thread.h:
	    Simple thread implementation that asserts() on deadlocks in
	    single-threaded code.

	    * test/bus-test.c:
	    (main) Call debug_threads_init.

	    * test/watch.c:
	    Use disconnect message instead of disconnect callback.

	    * bus/connection.c:
	    * bus/connection.h:
	    Don't call dbus_connection_set_disconnect_function. Instead
	    export
	    bus_connection_disconnect.

	    * bus/dispatch.c:
	    Call bus_connection_disconnect when we get a disconnected
	    message.

M	glib/dbus-gmain.c
M	glib/dbus-gthread.c

commit 530cf7689515707b5430b3207da225320cf244c4
Author: Anders Carlsson <andersca@gnome.org>
Date:	2003-02-13 21:37:58 +0000

    2003-02-13 Anders Carlsson <andersca@codefactory.se>

	    * bus/driver.c: (bus_driver_handle_hello):
	    * bus/driver.h:
	    * bus/services.c: (bus_service_lookup):
	    Reorder message sending so we get a more sane order.

	    * test/bus-test.c: (message_handler):
	    Fix tyop.

M	glib/test-dbus-glib.c

commit 044f4c6ed2170170d833d402079b90277893cd05
Author: Anders Carlsson <andersca@gnome.org>
Date:	2003-02-13 20:37:07 +0000

    2003-02-13 Anders Carlsson <andersca@codefactory.se>

	    * glib/dbus-gmain.c: (timeout_handler), (add_timeout),
	    (remove_timeout):
	    Implement support for timeouts in dbus-glib.

M	glib/dbus-gmain.c

commit 12d8e0d2d6aeb5f29ff8b51cdd4aae857d35d13f
Author: Alex Larsson <alexl@redhat.com>
Date:	2003-02-01 22:02:27 +0000

    2003-02-02 Alexander Larsson <alexl@redhat.com>

	    * dbus/dbus-watch.c (dbus_watch_get_flags):
	    Add note in the docs that ERROR or HANGUP won't be returned
	    and are assumed always on.

	    * glib/dbus-gmain.c (add_watch):
	    Always add IO_ERR | IO_HUP

	    * dbus/dbus-message.h:
	    Add semicolon after dbus_message_iter_get_string_array().
	    Makes qt code build again

M	glib/dbus-gmain.c

commit bb581faf87398e807a828f2686474869cd23757d
Author: Richard Hult <rhult@codefactory.de>
Date:	2003-01-26 00:06:30 +0000

    2003-01-26 Richard Hult <rhult@codefactory.se>

	    * glib/dbus-gmain.c (dbus_connection_dispatch): Traverse a
	    copy of
	    the file descriptor list, since it can change under us.

M	glib/dbus-gmain.c

commit 74cef08b5e2f2596cade4fc1027933d763cd13ae
Author: Anders Carlsson <andersca@gnome.org>
Date:	2003-01-25 21:22:57 +0000

    2003-01-25 Anders Carlsson <andersca@codefactory.se>

	    * glib/dbus-gmain.c: (dbus_connection_prepare),
	    (dbus_connection_check), (dbus_connection_dispatch),
	    (add_watch),
	    (remove_watch), (dbus_connection_hookup_with_g_main):
	    Rewrite the glib handling to use its own GSource instead of a
	    GIOChannel so we can catch messages put in the queue while
	    waiting
	    for a reply.

M	glib/dbus-gmain.c

commit 6f062c93ca19a73b34688488e76ec055d2bab2a0
Author: Anders Carlsson <andersca@gnome.org>
Date:	2003-01-24 23:51:58 +0000

    2003-01-25 Anders Carlsson <andersca@codefactory.se>

	    * bus/connection.c: (bus_connection_foreach):
	    * bus/connection.h:
	    Add new bus_connection_foreach function.

	    * bus/driver.c: (send_one_message),
	    (bus_driver_broadcast_message):
	    Add function that broadcasts a message to all clients.

	    (bus_driver_send_service_created), (bus_driver_handle_hello),
	    (bus_driver_send_welcome_message),
	    (bus_driver_handle_list_services),
	    (bus_driver_message_handler):
	    Implement functions that take care of listing services,
	    and notifying
	    clients when new services are created.

	    * bus/services.c: (bus_services_list):
	    * bus/services.h:
	    Add new function that returns an array of strings with
	    the currently
	    registered services.

	    * glib/dbus-glib.h:
	    * glib/dbus-gmain.c:
	    Update copyright year.

M	glib/dbus-glib.h
M	glib/dbus-gmain.c

commit ea868ce1cd9328ffa31cd9419e23498771f8feb2
Author: Anders Carlsson <andersca@gnome.org>
Date:	2003-01-21 09:23:18 +0000

    2003-01-21 Anders Carlsson <andersca@codefactory.se>

	    * dbus/dbus-connection.c: (dbus_connection_send_message):
	    Add a new client_serial parameter.

	    (dbus_connection_send_message_with_reply):
	    Remove a @todo since we've implemented the blocking function.

	    (dbus_connection_send_message_with_reply_and_block):
	    New function that sends a message and waits for a reply and
	    then returns the reply.

	    * dbus/dbus-connection.h:
	    Add new functions.

	    * dbus/dbus-errors.c: (dbus_result_to_string):
	    * dbus/dbus-errors.h:
	    Add new DBUS_RESULT.

	    * dbus/dbus-message-internal.h:
	    * dbus/dbus-message.c: (_dbus_message_get_reply_serial),
	    (_dbus_message_set_sender), (dbus_message_write_header),
	    (dbus_message_new_reply), (decode_header_data),
	    (_dbus_message_loader_return_buffer), (_dbus_message_test):
	    * dbus/dbus-message.h:
	    Add new functions that set the reply serial and sender.
	    Also marshal and demarshal them correctly and add test.

	    * dbus/dbus-protocol.h:
	    Add new DBUS_MESSAGE_TYPE_SENDER.

	    * glib/dbus-glib.h:
	    * glib/dbus-gmain.c: (watch_callback), (free_callback_data),
	    (add_watch), (remove_watch), (add_timeout), (remove_timeout),
	    (dbus_connection_hookup_with_g_main):
	    * glib/test-dbus-glib.c: (main):
	    Rewrite to use GIOChannel and remove the GSource crack.

	    * test/echo-client.c: (main):
	    * test/watch.c: (check_messages):
	    Update for changed APIs

M	glib/dbus-glib.h
M	glib/dbus-gmain.c
M	glib/test-dbus-glib.c

commit f8a3cb6d30e74be85b583ce9ff3482f91cd26b9a
Author: Anders Carlsson <andersca@gnome.org>
Date:	2003-01-07 20:18:23 +0000

    2003-01-07 Anders Carlsson <andersca@codefactory.se>

	    * dbus/dbus-connection-internal.h:
	    * dbus/dbus-connection.c:
	    (_dbus_connection_new_for_transport),
	    (_dbus_connection_get_next_client_serial),
	    (dbus_connection_send_message):
	    * dbus/dbus-internals.h:
	    * dbus/dbus-marshal.c: (unpack_uint32), (dbus_unpack_int32),
	    (dbus_pack_int32), (_dbus_marshal_double),
	    (_dbus_marshal_int32),
	    (_dbus_marshal_uint32), (_dbus_demarshal_double),
	    (_dbus_demarshal_int32), (_dbus_demarshal_uint32),
	    (_dbus_demarshal_string), (_dbus_marshal_get_field_end_pos),
	    (_dbus_verbose_bytes), (_dbus_marshal_test):
	    * dbus/dbus-marshal.h:
	    * dbus/dbus-message-internal.h:
	    * dbus/dbus-message.c: (_dbus_message_set_client_serial),
	    (dbus_message_write_header), (_dbus_message_lock),
	    (dbus_message_new), (dbus_message_ref), (dbus_message_unref),
	    (dbus_message_get_name), (dbus_message_append_int32),
	    (dbus_message_append_uint32), (dbus_message_append_double),
	    (dbus_message_append_string),
	    (dbus_message_append_byte_array),
	    (dbus_message_get_fields_iter), (dbus_message_iter_ref),
	    (dbus_message_iter_unref), (dbus_message_iter_has_next),
	    (dbus_message_iter_next), (dbus_message_iter_get_field_type),
	    (dbus_message_iter_get_string), (dbus_message_iter_get_int32),
	    (dbus_message_iter_get_uint32),
	    (dbus_message_iter_get_double),
	    (decode_header_data), (_dbus_message_loader_return_buffer),
	    (message_iter_test), (_dbus_message_test):
	    * dbus/dbus-message.h:
	    * dbus/dbus-protocol.h:
	    * dbus/dbus-test.c: (main):
	    * dbus/dbus-test.h:
	    * glib/test-dbus-glib.c: (message_handler), (main):
	    * test/echo-client.c: (main):
	    * test/watch.c: (check_messages):
	    Make messages sendable and receivable for real.

M	glib/test-dbus-glib.c

commit 9784f2653287c62f32a637f869ad0029412ebfae
Author: Anders Carlsson <andersca@gnome.org>
Date:	2002-12-27 08:26:26 +0000

    Ssh

A	glib/.cvsignore

commit c27a1609f595a75be3910c5185f7312cb93575c7
Author: Havoc Pennington <hp@redhat.com>
Date:	2002-12-24 06:37:32 +0000

    2002-12-24 Havoc Pennington <hp@pobox.com>

	    * glib/dbus-gthread.c: fix include

	    * glib/dbus-glib.h: rename DBusMessageHandler for now.
	    I think glib API needs to change, though, as you don't
	    want to use DBusMessageFunction, you want to use the
	    DBusMessageHandler object. Probably
	    dbus_connection_open_with_g_main_loop()
	    and dbus_connection_setup_g_main_loop() or something like that
	    (but think of better names...) that just create a connection
	    that has watch/timeout functions etc. already set up.

	    * dbus/dbus-connection.c
	    (dbus_connection_send_message_with_reply): new function
	    just to
	    show how the message handler helps us deal with replies.

	    * dbus/dbus-list.c (_dbus_list_remove_last): new function

	    * dbus/dbus-string.c (_dbus_string_test): free a string that
	    wasn't

	    * dbus/dbus-hash.c: use memory pools for the hash entries
	    (rebuild_table): be more paranoid about overflow, and
	    shrink table when we can
	    (_dbus_hash_test): reduce number of sprintfs and write
	    valid C89. Add tests for case where we grow and then
	    shrink the hash table.

	    * dbus/dbus-mempool.h, dbus/dbus-mempool.c: memory pools

	    * dbus/dbus-connection.c (dbus_connection_register_handler)
	    (dbus_connection_unregister_handler): new functions

	    * dbus/dbus-message.c (dbus_message_get_name): new

	    * dbus/dbus-list.c: fix docs typo

	    * dbus/dbus-message-handler.h, dbus/dbus-message-handler.c:
	    an object representing a handler for messages.

M	glib/dbus-glib.h
M	glib/dbus-gmain.c
M	glib/dbus-gthread.c

commit 723dc26c4880ae66688ff707588797e7c83b4fe4
Author: Anders Carlsson <andersca@gnome.org>
Date:	2002-12-16 01:43:52 +0000

    Doh

M	glib/dbus-glib.h

commit a2c39755d2c9749d22f547e9b92125509e95aae6
Author: Anders Carlsson <andersca@gnome.org>
Date:	2002-12-16 00:56:23 +0000

    2002-12-16 Anders Carlsson <andersca@codefactory.se>

	    * glib/dbus-glib.h:
	    * glib/dbus-gthread.c: (dbus_gthread_init):
	    Don't use the gdbus prefix for public functions.

M	glib/dbus-glib.h
M	glib/dbus-gthread.c

commit 03900e96a260048f23176319003671c17b6a0013
Author: Anders Carlsson <andersca@gnome.org>
Date:	2002-12-16 00:26:05 +0000

    2002-12-16 Anders Carlsson <andersca@codefactory.se>

	    * Makefile.am:
	    * configure.in:
	    Add GLib checks and fixup .pc files

	    * glib/Makefile.am:
	    * glib/dbus-glib.h:
	    * glib/dbus-gmain.c: (gdbus_connection_prepare),
	    (gdbus_connection_check), (gdbus_connection_dispatch),
	    (gdbus_add_connection_watch), (gdbus_remove_connection_watch),
	    (dbus_connection_gsource_new):
	    * glib/dbus-gthread.c: (dbus_gmutex_new), (dbus_gmutex_free),
	    (dbus_gmutex_lock), (dbus_gmutex_unlock), (dbus_gthread_init):
	    * glib/test-dbus-glib.c: (message_handler), (main):
	    Add GLib support.

A	glib/Makefile.am
A	glib/dbus-glib.h
A	glib/dbus-gmain.c
A	glib/dbus-gthread.c
A	glib/test-dbus-glib.c

commit 7c0c11bfa019cd4be3f7a62fe936aaf2573fa51e
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2006-06-28 08:14:04 -0400

    Initial commit of module dbus-glib

A	ChangeLog

commit 7d136b1b7749b9d52703f00f546524a8967aeebc
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2006-03-02 23:28:18 +0000

    2006-03-02 John (J5) Palmieri <johnp@redhat.com>

	    * python/dbus_bindings.pyx: Remove refrence to sys/cdefs.h
	    (Patch from Artem Kachitchkine <Artem.Kachitchkin at Sun.COM>)

M	python/dbus_bindings.pyx

commit 6387ac0ee38cbc2c613f1ec6b481693451e6a1d6
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2006-02-24 18:18:41 +0000

    2006-02-24 John (J5) Palmieri <johnp@redhat.com>

	    * Released 0.61

    2006-02-24	John (J5) Palmieri  <johnp@redhat.com>

	    * proxies.py: Fix the callchain

M	python/proxies.py

commit 7ce7ad66afac2b35ddab72190d31c8470a2e4d2d
Author: Robert McQueen <robot101@debian.org>
Date:	2006-02-15 23:45:48 +0000

    2006-02-16 Robert McQueen <robot101@debian.org>

	    * glib/dbus-gmain.c: Make the previous commit compile.

	    * python/_dbus.py, python/matchrules.py: Patch from Ole Andre
	    Ravnaas <ole.andre.ravnaas@collabora.co.uk> to allow you to
	    specify sender_keyword="foo", path_keyword="bar" when adding
	    a signal listener, so that you can bind to signals generically
	    but still do something useful in your callback.

	    * python/dbus_bindings.pyx: Demarshal the byte type as
	    unsigned
	    chars so that they're not cast to chars and made
	    negative. Thanks
	    to Jakub Stachowski for reporting this and testing the fix.

M	python/_dbus.py
M	python/dbus_bindings.pyx
M	python/matchrules.py

commit 62f127585556aeb828c0114225859bddc8d08aa3
Author: Robert McQueen <robot101@debian.org>
Date:	2005-12-06 12:38:07 +0000

    2005-12-06 Robert McQueen <robot101@debian.org>

	    * python/service.py: s/sucessful/successful/ so we're
	    allocating to
	    and reading from the same variable. Oops.

M	python/service.py

commit e48f4d56533ef815d05e05b31128e53640bd7ded
Author: Robert McQueen <robot101@debian.org>
Date:	2005-11-27 17:44:19 +0000

    2005-11-27 Robert McQueen <robot101@debian.org>

	    * python/dbus_bindings.pyx: Repair my previous commit which
	    reverted
	    part of the preceding one. Oops. Merge patch by Johan Hedberg
	    <johan.hedberg@nokia.com> to fix marshalling of 16-bit
	    integer values
	    on big-endian platforms.

	    * test/python/test-client.py: Add some 16-bit integers to
	    the test
	    values.

M	python/dbus_bindings.pyx

commit b5df8fdfae7b488156cef4ccc536523bfb892895
Author: Robert McQueen <robot101@debian.org>
Date:	2005-11-27 16:55:09 +0000

    2005-11-27 Carlos Garcia Campos <carlosgc@gnome.org>

	    * glib/dbus-gobject.c: Append a GValue instead of a basic
	    type in
	    method return message for property getters

M	python/dbus_bindings.pyx

commit e9046cf6eabcc6e9f86e6dc8cb73a0b28ccc3347
Author: Robert McQueen <robot101@debian.org>
Date:	2005-11-27 16:40:57 +0000

    2005-11-27 Robert McQueen <robot101@debian.org>

	    * python/dbus_bindings.pyx: Fix a bug where doing a strict
	    append
	    with type v of an instance of dbus.Variant(foo, type='x')
	    caused
	    it to be boxed twice before sending over the bus.

	    * python/dbus_bindings.pyx, python/service.py,
	    test/python/test-client.py: Update the constants for the new
	    request_name flags, and update comments/test cases now
	    that queueing
	    is the default action.

M	python/dbus_bindings.pyx
M	python/service.py

commit c38a568a59493a798164c2449f7774586fd236f3
Author: Robert McQueen <robot101@debian.org>
Date:	2005-11-15 17:19:19 +0000

    2005-11-15 Robert McQueen <robot101@debian.org>

	    * bus/driver.c, bus/services.c, bus/services.h: Add a
	    ReleaseName
	    method to org.freedesktop.DBus to release a bus name or
	    give up
	    waiting in the queue for it.

	    * dbus/dbus-bus.c, dbus/dbus-bus.h, dbus/dbus-shared.h: Add a
	    dbus_bus_release_name method to send the ReleaseName method
	    calls.
	    Add constants for the return values to dbus/dbus-shared.h.

	    * doc/dbus-specification.xml: Document the new ReleaseName
	    method
	    in the specification.

	    * python/dbus_bindings.pyx: Add a low-level python binding
	    for the
	    release name method.

	    * python/exceptions.py, python/service.py: Make freeing
	    BusName
	    objects release the name. Add a NameExistsException, and fix a
	    bug with creating UnknownMethodException.

	    * test/python/test-client.py: Add tests for freeing BusName
	    objects causing names to be released.

M	python/dbus_bindings.pyx
M	python/exceptions.py
M	python/service.py

commit e6351798aca627adba6e3dad43a605482b63a43e
Author: Robert McQueen <robot101@debian.org>
Date:	2005-11-14 20:59:32 +0000

    2005-11-15 Robert McQueen <robot101@debian.org>

	    * python/service.py: Include the traceback in the error
	    reply when we
	    send an exception over the bus. _BEST_ _PATCH_ _EVER_

M	python/service.py

commit 321ace3a0cf031e638bba1d753818ac068672dee
Author: Robert McQueen <robot101@debian.org>
Date:	2005-11-14 02:53:29 +0000

    2005-11-14 Robert McQueen <robot101@debian.org>

	    * python/decorators.py, python/service.py: Add a new argument
	    to the
	    dbus.service.method decorator called sender_keyword, which
	    if set,
	    specifies the name of an argument which will be provided
	    the bus
	    name of the method caller.

	    * test/python/test-client.py, test/python/test-service.py:
	    Add a
	    method and test to check the sender_keyword functionality.

M	python/decorators.py
M	python/service.py

commit cb37041d6ffeab9e7623dd7c51acc64cbaa7534d
Author: Robert McQueen <robot101@debian.org>
Date:	2005-11-07 15:31:30 +0000

    2005-11-07 Robert McQueen <robot101@debian.org>

	    * python/decorators.py: Change emit_signal function to use the
	    signature annotation of the signal when marhsalling the
	    arguments from
	    the service. Fix a bug where the code checking signature
	    length
	    against argument length referenced the wrong variable.

	    * python/introspect_parser.py: Avoid adding the type
	    signature of
	    signal arguments to any methods which occur after them in the
	    introspection data (!) by making the parser a little more
	    careful
	    about its current state.

	    * python/service.py: Remove debug prints from last commit
	    (again :D).

	    * test/python/test-client.py, test/python/test-service.py:
	    Add test
	    signals with signature decorators to test the strict
	    marshalling code
	    gives errors at the right time. Could do with checking
	    the signals
	    actually get emitted too, given that the test does nothing
	    with
	    signals at the moment...

M	python/decorators.py
M	python/introspect_parser.py
M	python/service.py

commit 792849028648dfc9fd0513c855b0ea9001a9ea04
Author: Robert McQueen <robot101@debian.org>
Date:	2005-11-07 12:14:52 +0000

    2005-11-07 Robert McQueen <robot101@debian.org>

	    * python/_dbus.py: Add WeakReferenceDictionary cache of
	    dbus.Bus
	    instances to stop madness of creating new instances
	    representing
	    the same bus connection all the time, rendering any
	    tracking of
	    match rules and bus names quite meaningless. Caught a
	    bug where
	    the private argument to SessionBus() and friends was being
	    passed
	    in as use_default_mainloop by mistake. Still some problems
	    with
	    multiple dbus_binding.Connection instances representing
	    the same
	    low-level connection (eg when you use both SessionBus() and
	    StarterBus() in same process), but it's a lot better now
	    than it
	    was.

	    * python/dbus_bindings.pyx: Add constants with the return
	    values
	    for bus_request_name().

	    * python/service.py: Store bus name instances in a
	    per-dbus.Bus cache
	    and retrieve the same instances for the same name, so deletion
	    can be
	    done with refcounting. Also now throws some kind of error
	    if you
	    don't actually get the name you requested, unlike
	    previously...

	    * test/python/test-client.py: Add tests for instance caching
	    of buses
	    and bus name objects.

M	python/_dbus.py
M	python/dbus_bindings.pyx
M	python/service.py

commit c6d4440b37c43681a4ecf11edfa5a4b0371734ea
Author: Robert McQueen <robot101@debian.org>
Date:	2005-11-04 12:17:54 +0000

    2005-11-04 Robert McQueen <robot101@debian.org>

	    * python/dbus_bindings.pyx, test/python/test-client.py: Fix
	    marshalling of boolean values. Add some booleans to the
	    values in
	    the test client.

	    * python/decorators.py, python/service.py: Add an
	    'async_callbacks'
	    argument to the dbus.service.method decorator, which allows
	    you to
	    name arguments to take two callback functions for replying
	    with
	    return values or an exception.

	    * test/python/test-client.py, test/python/test-service.py:
	    Add test
	    case using asynchronous method reply functions, both return
	    values and
	    errors, and from within both the function itself and from
	    a mainloop
	    callback.

	    * python/decorators.py, python/service.py: Perform checking
	    that the
	    number of method/signal arguments matches the number of
	    types in the
	    signature at class loading time, not when you first
	    introspect the
	    class.

	    * python/service.py: Remove debug print left by the last
	    commit.

M	python/dbus_bindings.pyx
M	python/decorators.py
M	python/service.py

commit fcbc5d45112bd16c9ff8f6ead36d89a6c6381dc8
Author: Robert McQueen <robot101@debian.org>
Date:	2005-11-03 21:47:31 +0000

    2005-11-03 Robert McQueen <robot101@debian.org>

	    * python/service.py: Heavy refactoring of method invocation,
	    with
	    hopefully no effect on functionality. Nuked
	    _dispatch_dbus_method_call
	    in favour of a new _message_cb that uses seperate functions
	    for
	    looking up the method to call, marshalling the return
	    values, and
	    sending exceptions as errors, and is easier to follow as a
	    consequence.  Fixes some corner cases about returning
	    things that
	    don't match your declared out_signature, allows exceptions
	    to define
	    _dbus_error_name and have it be sent over the bus as the
	    error name,
	    and paves the way for cool stuff like heeding the message
	    no reply
	    flag, asynchronous method implementations, informing the
	    method of the
	    sender, and including backtraces in the error messages.

	    * test/python/test-client.py: Catch and print exceptions
	    thrown in the
	    async callback tests, rather than passing them to the
	    low-level
	    bindings to be ignored in a noisy and frustrating manner.

M	python/service.py

commit b4a92c736cb37f2daba25283e830615dcf7137e8
Author: Robert McQueen <robot101@debian.org>
Date:	2005-11-03 16:13:52 +0000

    2005-11-03 Robert McQueen <robot101@debian.org>

	    * python/_dbus.py, python/proxies.py, python/service.py:
	    Add __repr__
	    functions to dbus.Bus, dbus.service.BusName and
	    dbus.service.Object,
	    tweak others to be consistent.

	    * test/python/test-client.py: Tweak output of testInheritance.

M	python/_dbus.py
M	python/proxies.py
M	python/service.py

commit cd40a2db923dc01ee80f4827dfd3e102a98a64ec
Author: Robert McQueen <robot101@debian.org>
Date:	2005-10-29 22:41:07 +0000

    2005-10-29 Robert McQueen <robot101@debian.org>

	    * python/service.py: Major changes to allow multiple
	    inheritance
	    from classes that define D-Bus interfaces:

	     1. Create a new Interface class which is the parent class of
		Object, and make the ObjectType metaclass into
		InterfaceType.

	     2. Patch written with Rob Taylor to replace use of
	     method_vtable
		with code that walks the class's __MRO__ (method
		resolution order)
		to behave like Python does when invoking methods and allow
		overriding as you'd expect. Code is quite tricky because
		we have to find two methods, the one to invoke which
		has the
		right name and isn't decorated with the /wrong/ interface,
		and the one to pick up the signatures from which is
		decorated
		with the right interface.

		The same caveats apply as to normal multiple inheritance -
		this has undefined behaviour if you try and inherit
		from two
		classes that define a method with the same name but are
		decorated with different interfaces. You should decorate
		your overriding method with the interface you want.

	     3. Replace grungy introspection XML generation code in
	     the metaclass
		with dictionaries that cope correctly with multiple
		inheritance
		and the overriding of methods. This also uses the
		signature
		decorations to provide correct introspection data,
		including
		the debut appearance of the types of your return
		values. :D

	    * test/python/test-client.py, test/python/test-service.py:
	    Add a test
	    case to try invoking an method that overrides one inherited
	    from a
	    D-Bus interface class.

M	python/service.py

commit f14661ee73a5efc92dfcbe22e4230dab153a4d69
Author: Robert McQueen <robot101@debian.org>
Date:	2005-10-29 22:04:01 +0000

    2005-10-29 Robert McQueen <robot101@debian.org>

	    * python/dbus_bindings.pyx: Tweak 'raise AssertionError'
	    to assert().
	    Add checking for the end of struct character when
	    marshalling a
	    struct in MessageIter.append_strict.

	    * python/examples/example-service.py,
	    python/examples/gconf-proxy-service.py,
	    python/examples/gconf-proxy-service2.py: Update to use gobject
	    mainloop directly rather than appearing to depend on gtk.

	    * python/test/test-client.py, python/test/test-server.py:
	    Remove
	    obsolete and broken test scripts for old bindings. We have
	    up to date
	    and working tests in test/python/.

M	python/dbus_bindings.pyx
M	python/examples/example-service.py
M	python/examples/gconf-proxy-service.py
M	python/examples/gconf-proxy-service2.py
D	python/tests/test-client.py
D	python/tests/test-server.py

commit a10facab362212f630b4fc3191a711523ed367b1
Author: Robert McQueen <robot101@debian.org>
Date:	2005-10-29 19:13:17 +0000

    2005-10-29 Robert McQueen <robot101@debian.org>

	    * python/decorators.py: Add optional arguments to the
	    method and
	    signal decorators to allow you to specify the signature
	    of arguments
	    and return values. Preserve the doc strings of signal
	    functions in the
	    decorated version, for pydoc and friends.

	    * python/dbus_bindings.pyx, python/proxies.py: Replace the
	    parse_signature_block function with an iterable
	    dbus.Signature()
	    type. Fix a bug in MessageIter.append_strict where you
	    could append
	    anything by claiming it was a string.

	    * python/service.py: Use the out_signature decoration on
	    methods to
	    marshal return values, meaning you no longer require
	    dbus.Array()
	    or dbus.Dictionary() to indicate the type when returning empty
	    arrays or dictionaries. Fix a bug where exceptions which
	    are defined
	    in __main__ are not turned into error replies.

	    * test/python/test-client.py, test/python/test-service.py:
	    Add test
	    for correct marshalling of return values according to
	    out_signature.
	    Fix a bug in the async call test where the error_handler is
	    missing a
	    self argument.

M	python/dbus_bindings.pyx
M	python/decorators.py
M	python/proxies.py
M	python/service.py

commit b07e4f860f8d9ff323558e8276dbda346a09b3b1
Author: Robert McQueen <robot101@debian.org>
Date:	2005-10-24 18:29:50 +0000

    2005-10-24 Robert McQueen <robot101@debian.org>

	* python/dbus_bindings.pyx (String, MessageIter): make D-Bus
	strings
	derive from unicode instead of str, and encode/decode UTF-8 when
	marshalling/unmarshalling bus messages

	* python/introspect_parser.py: encode introspection data as UTF-8
	before passing the buffer into libxml2

	* test/python/test-client.py: add unicode test strings

	* test/data/valid-service-files/.cvsignore,
	test/python/.cvsignore:
	ignore generated python test files

M	python/dbus_bindings.pyx
M	python/introspect_parser.py

commit 5b923c8dd10dc21e7f03aa8e27d1bb30652fb5da
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-10-18 04:38:04 +0000

    * glib/dbus-gvalue-utils.c (hash_free_from_gtype): handle gdouble

    and G_TYPE_VALUE_ARRAY (DBUS_TYPE_STRUCT)
    (gvalue_from_hash_value, hash_value_from_gvalue): handle gdouble

    * glib/dbus-gvalue.c (dbus_gvalue_to_signature): add missing
    DBUS_STRUCT_BEGIN_CHAR and DBUS_STRUCT_END_CHAR charaters
    when constructing struct signatures

    * python/_dbus.py (Bus): handle private connections using the
    private keyword in the constructor. defaults to private=False
    (Bus::close): new method to close a connection to the bus

    * python/dbus_bindings.pyx (Connection::close): renamed method
    was previously called disconnect
    (bus_get): now supports getting a private connection

    * python/proxies.py (ProxyMethod::__call__): check if ignore_reply
    keyword is set to True.  if it is, execute the method without waiting
    for a reply
    (ProxyObject::_introspect_execute_queue): new method for executing
    all the pending methods that were waiting for the introspect to
    finish.  this is called when introspect either succeeds or fails
    (ProxyObject::_introspect_error_handler): call queued methods

M	python/_dbus.py
M	python/dbus_bindings.pyx
M	python/proxies.py

commit cb8652321a7b3791f54a6fb1ebf1675aac9ac33d
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-10-14 21:44:00 +0000

    * python/dbus_bindings.pyx (MessageIter::append_strict): check for
    STRUCT_BEGIN not TYPE_STRUCT in indicate we are marshalling a struct

    * python/service.py (Object::_message_cb): handle exceptions correctly
      by sending them over the wire to the calling app.  This makes sure
      the client returns immediately instead of waiting the 15 seconds to
      timeout.

    * test/python/test-client.py
    (TestDBusBindings::testBenchmarkIntrospect):
      Add a test to benchmark how long it takes to introspect a service
      and
      call a method which returns a large element (pretty fast)

    * test/python/test-service.py (TestObject::GetComplexArray): new test
      method which pushes a lot of data

M	python/dbus_bindings.pyx
M	python/service.py

commit d468280ea6cf7be2c3729a182f3c252fd2a7b999
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-10-13 23:34:11 +0000

    * python/service.py(ObjectType::_reflect_on_signal,
    _reflect_on_method):

    reclaim memory outside of the loop and use del istead of just setting
    the key to None

M	python/service.py

commit fb3300cea133630f45d13776a66dcbbd71c46d97
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-10-13 23:26:00 +0000

    * python/service.py (ObjectType::_reflect_on_signal): Always close

    signal tag even when there are no arguments

M	python/service.py

commit 137d6a5121de6ae44a37ca99c5519c4300cc9dea
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-10-06 04:43:52 +0000

    * actualy add the introspection parser to CVS :-)

A	python/introspect_parser.py

commit 423589e748db1783cbce03452e5fe5685b83f750
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-10-05 20:43:46 +0000

    * glib/dbus-gvalue.c (marshal_variant): call _dbus_gvalue_marshal
    instead of marshal basic so we can handle recursive types in a variant

    * test/glib/test-dbus-glib.c: Add test for marshaling recurive types
      in variants

    * test/glib/test-service-glib.c, test-service-glib.xml
      (my_object_echo_variant [EchoVariant],
      my_object_process_variant_of_array_of_ints123
      [ProcessVariantOfArrayOfInts123]):
      Add two test methods

    * python/introspect_parser.py: New module for parsing introspect
      data.

    * python/dbus_bindings.pyx:
      (various places): when throwing errors fix to use errormsg instead
      of message local variable because Pyrex can get confused with other
      message variables (initial patch by Robert McQueen
      <robert.mcqueen at collabora.co.uk>)
      (MessageIter::parse_signature_block): new method for getting
      the next
      block in a signiture.
      (MessageIter::append_strict): new method for appending values
      strictly
      using the passed in signature instead of guessing at the type
      (MessageItter:: append_dict, append_struct, append_array): use
      signatures to marshal children if the signature is available

    * python/exceptions.py (IntrospectionParserException): new exception

    * python/proxies.py (ProxyMethod::__call__): Marshal args with
      introspected signatures if available, else we fall back to the
      old way of doing things.
      (ProxyObject::_introspect_reply_handler ): parse introspection data

    * python/service.py (ObjectType::_reflect_on_method): Properly
      terminate <method> if there are no args in the reflection data

    * test/python/test-client.py: add tests for talking with the GLib
      test server.  This gives us better coverage for introspection since
      python to python will always generate arguments as variants.
      It also
      allows us to test the robustness of the GLib bindings and
      interlanguage
      communications.

M	python/Makefile.am
M	python/dbus_bindings.pyx
M	python/exceptions.py
M	python/proxies.py
M	python/service.py

commit 747ebb525b3522cab2415fe55c6a8418a7528238
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-09-26 22:12:17 +0000

    * dbus/Python.pyx: Fixed memory leaks when throwing errors. We now
    copy the message from a DBusError and then free the error object
    befor throwing the error

M	python/dbus_bindings.pyx

commit 583a8acad47cf49f9e28d8f7360f8bb1a409e0d4
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-09-06 22:42:54 +0000

    - update to next release version

M	python/__init__.py

commit 8f6b65becb2183f68e5c923854c4b5946a40dbfd
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-09-06 22:38:54 +0000

    * Released 0.50

    * Patch from Steve Grubb:
    - bus/activation.c (bus_activation_service_reload_test): clean up
    some indentation
    - dbus/dbus-keyring.c (_dbus_keyring_reload): fix conditional
    - dbus/dbus-message-factory.c (generate_special): fix a couple of
    buffer overflows in the test suite.  This is non critical because
    it can not be exploited and this code is only run when doing a
    make check.

    * Patch from Yaakov Selkowitz: Build fixes for Cygwin
    - configure.in: Don't check and link against kdecore, only qt headers
    - dbus/Makefile.am: Add -no-undefined to libdbus_1_la_LDFLAGS
    - gcj/org/freedesktop/dbus/Makefile.am:
    add libdbus_gcj_1_la_LDFLAGS = -no-undefined
    - glib/Makefile.am: Add -no-undefined to libdbus_glib_1_la_LDFLAGS
    and $(DBUS_GLIB_LIBS) to dbus_binding_tool_LDADD
    - qt/Makefile.am: Add -no-undefined to libdbus_qt_1_la_LDFLAGS
    - tools/Makefile.am: Add platform extentions to binaries
    (i.e. .exe on windows)

    * configure.in:
    - Make it so if no suitable version of python is found we only
    disable building python instead of exiting the configure script
    - Require version 2.4 of glib for glib bindings
    - Up version to 0.50

    * python/__init__.py: Sync version with libdbus to (0,50,0)

M	python/__init__.py

commit c9ce6ac673fef6ca5189480d73b542e7f2c283f3
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-09-01 01:22:06 +0000

    * python/Makefile.am: Break on pyrexc errors instead of ignoring them

    * python/dbus_bindings.pyx: Memory management foo
    (global): remove hacky _user_data_references global list
    (GIL_safe_cunregister_function_handler): userdata now stuffed into
    tuples. Unref user_data
    (GIL_safe_cmessage_function_handler): userdata now stuffed into tuples
    (Connection::__del__): Remove and replace with __dealloc__ method
    (Connection::add_filter): Stuff user_data into a tuple.  Use Py_INCREF
    to keep tuple from being deallocated instead of the global var hack
    (Connection::register_object_path): Stuff user_data into a tuple.
    Use Py_INCREF to keep tuple from being deallocated instead of the
    global var hack
    (Connection::register_fallback): Stuff user_data into a tuple.
    Use Py_INCREF to keep tuple from being deallocated instead of the
    global var hack
    (GIL_safe_pending_call_notification): Don't unref the message
    because it gets unreffed when going out of scope.  Py_XDECREF
    the user_data
    (PendingCall::__del__): Remove and replace with __dealloc__ method
    (PendingCall::set_notify): ref the pending call because we will
    need it to stick around for when the notify callback gets called
    (Message::__del__): Remove and replace with __dealloc__ method

    * python/dbus_glib_bindings.pyx (init_gthreads): Changed to
    gthreads_init to match up with the dbus call

    * python/glib.py (init_threads): Changed to threads_init to match
    up with gobject.threads_init().  init_threads is kept for backwards
    compat but will most likely be deprecated in the future

    * test/python/test-client.py:
    - revamp to use Python's unittest functionality
    - add async call tests
    - setup threads in glib and dbus so we make sure locks are working

M	python/Makefile.am
M	python/dbus_bindings.pyx
M	python/dbus_glib_bindings.pyx
M	python/glib.py

commit c33b023b7a72b42129e202ad3a34d9ac6bc68090
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-08-31 02:18:43 +0000

    * python/dbus_bindings.pyx

    (_pending_call_notification, cunregister_function_handler,
    cmessage_function_handler): All callback functions have been
    rearranged
    to workaround a bug in Pyrex when working with the GIL which is
    Python's
    global lock when dealing with threads.  They have been split into
    a wrapper function (which assumes the name of the old function) and
    a _GIL_safe_<function name> function which contains the functionality
    of the old function.  This ensures that Pyrex does not write code
    the lock is released.

M	python/dbus_bindings.pyx

commit ccba1a75d274300215ac3b8eb06792c06679de55
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-08-30 15:21:04 +0000

    * python/dbus_bindings.pyx (_pending_call_notification): Obtain the
    GIL global lock when calling back into Python

M	python/dbus_bindings.pyx

commit 780a08253b6e9ac0270d50cb0498cb7085bd05a2
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-08-26 04:23:33 +0000

    * s/Message(_create=0)/EmptyMessage everywhere else

    * test/python/test-{server|client}.py: add the python/.libs directory
      to the lookup path so dbus_bindings and dbus_glib_bindings don't
      get picked up from the system

M	python/dbus_bindings.pyx

commit 068820cbec569f14277f0dc52e4219ad123bed24
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-08-26 03:09:58 +0000

    * python/dbus_bindings.pyx: Tracked down a major memleak and fixed
    it (EmptyMessage): new class that subclasses Message. This is a
    workaround to a Pyrex bug that fails to call __del__ when the Message
    object goes out of scope. For some reason subclassing Message fixes
    this bug (Bus::send_with_reply_and_block): use EmptyMessage instead
    of Message

M	python/dbus_bindings.pyx
M	python/proxies.py

commit 749873c6f8326c450173f62078c8eb8f38e7e2f7
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-08-24 19:58:32 +0000

    - Merged changed from the DBUS_0_36_1 bugfix branch

M	python/Makefile.am
M	python/_dbus.py
M	python/proxies.py

commit c93ba0371f2bed41ceb47826dea8852b6b6107cf
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-08-23 17:43:59 +0000

    * python/dbus_glib_bindings.pyx: reorder imports and c definitions

    to fix some wranings. We now use dbus_bindings.DBusConnection instead
    of defining DBusConnection ourselves.

M	python/dbus_glib_bindings.pyx

commit 0caa747c4dac110d7a1550cfcded41c03d5bf4f7
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-08-18 20:57:28 +0000

     * python/dbus.pth: New path file to fix up problems when installing
     c libraries to lib64 and python files to lib.

	    * python/Makefile.am: install dbus.pth in the correct spot

M	python/Makefile.am
A	python/dbus.pth

commit 53aee6867499fb4b2135ed06dd5c4c6cd96058e0
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-08-18 04:04:57 +0000

     * ChangeLog: clean up my last entry a bit

	    * doc/introspect.xsl: New stylesheet for converting
	    introspection data
	    into browser renderable xhtml. Contributed by Lennart
	    Poettering.

	    * doc/introspect.dtd: Fixups in the introspect format
	    from Lennart
	    Poettering.

	    * doc/dbus-tutorial.xml:
	    - Add Colin Walter to the Authors section for authoring
	    the GLib
	    section
	    - Add descriptions of the new signature and type functionality
	    in the Python complex type mapping section
	    - Add a sidenote on the new args matching functionality in
	    the Python bindings
	    - Fixed up some of the examples to use the gobject.MainLoop
	    instead of gtk.main

	    * python/_dbus.py:
	    (Bus::_create_args_dict): New. Converts a hash of arg matches
	    to a more useable format
	    (Bus::add_signal_receiver): add a **keywords parameter
	    for catching
	    arg match parameters
	    (Bus::remove_signal_receiver): add a **keywords parameter
	    for catching
	    arg match parameters

	    * python/matchrules.py:
	    (MatchTree::exec_matches): Check for arg matches
	    (SignalMatchRule::add_args_match): New method
	    (SignalMatchRule::execute): Added args_list parameter as
	    an optimization
	    so we don't have to marshal the args more than once
	    (SignalMatchRule::match_args_from_list): New method that
	    checks to see
	    if the rule's arg matches match an argument list.
	    Only arguments
	    set in the rule are checked.
	    (SignalMatchRule::match_args_from_rule): New method that
	    checks to see
	    if the rule's arg matches match another rule's.  All args
	    have to match
	    in order for this method to return true.  If either rule
	    has more args
	    then it is not a match.
	    (SignalMatchRule::is_match): Add args match
	    (SignalMatchRule::repr): Add args to the final output if
	    they exist

M	python/_dbus.py
M	python/examples/example-signal-recipient.py
M	python/matchrules.py

commit 4f3ccf5fd76cacb67b1a73c7a88b00fe83180275
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-08-16 22:54:02 +0000

     * python/__init__.py: Version updated (0, 43, 0)

	    * python/dbus_bindings.pyx:
	    - Fixed type objects to have self passed into __init__
	    - Added the Variant type
	    - Add the ability to specify types or signatures for Array,
	    Variant and Dictionary
	    - (Connection::send_with_reply_handlers): return a PendingCall
	    object
	    - (_pending_call_notification): handle the case when an
	    error is returned
	    without an error message in the body
	    - (MessageIter::get_boolean): return True or False instead
	    of an integer
	    - (MessageIter::python_value_to_dbus_sig): add direct checking
	    of types and
	    add checks for objects with embeded signatures or types
	    (Array, Variant and
	    Dictionary)
	    - (MessageIter::append_byte): handle case when the value is
	    a dbus.Byte
	    - (MessageIter::append_dict): handle embeded types or
	    signatures
	    - (MessageIter::append_array): handle embeded types or
	    signatures
	    - (MessageIter::append_variant): new method

	    * python/proxies.py:
	    - (DeferedMethod): New. Dummy executable object used when
	    queuing calls blocking on
	    introspection data
	    - (ProxyMethod::__call__): add the timeout keyword for
	    specifying longer or
	    shorter timeouts for method calls
	    - (ProxyObject): Add first pass at an introspection state
	    machine
	    - (ProxyObject::__init__): Add introspect keyword for turing
	    off an on
	    introspection.
	    - (ProxyObject::_Introspect): Internal Introspect call that
	    bypasses the usual
	    mechanisms for sending messages.  This is to avoid a deadlock
	    where the Intospect
	    call would be queued waiting for the Introspect call to
	    finish ;-)
	    - (ProxyObject::_introspect_reply_handler): New.  This method
	    is called when
	    introspection returns with no error
	    - (ProxyObject::_introspect_error_handler): New.  This method
	    is called when
	    introspection encounters an error
	    - (ProxyObject::__getattr__): Code to handle different
	    introspection states.
	    Queue async calls or block blocking calls if we are
	    introspecting.  Pass through
	    as normal if we are not or are done with introspecting.

	    * python/service.py: Import signal and method from
	    decorators.py

	    * python/types.py: Add Variant type

M	python/__init__.py
M	python/_dbus.py
M	python/dbus_bindings.pyx
M	python/examples/example-client.py
M	python/examples/list-system-services.py
M	python/proxies.py
M	python/service.py
M	python/types.py

commit 3ff048fc5ad215987749046e283ca97454bc7554
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-07-20 14:15:08 +0000

    * python/_dbus.py, _util.py, decorators.py, extract.py,
    matchrules.py. proxies.py, service.py: Cleanup of code after
    running it through the pyflakes code checker mostly dealing
    with undefined names. (Bug #3828, Patch from Anthony Baxter
    <anthony@interlink.com.au>)

M	python/_dbus.py
M	python/_util.py
M	python/decorators.py
M	python/extract.py
M	python/matchrules.py
M	python/proxies.py
M	python/service.py

commit a076f4405829b136edbb89d99fbc485c9179b642
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-07-17 21:02:56 +0000

    * Merge DBUS_0_35_2 branch into HEAD

    2005-07-17	John (J5) Palmieri  <johnp@redhat.com>

	    * NEWS: Update to 0.35.2

    2005-07-17	John (J5) Palmieri  <johnp@redhat.com>

	    * python/_dbus.py: Remove import of the dbus.services
	    module as it no longer exists (patch from Dimitur Kirov)

	    * python/service.py (Object::__init__): Fixed typo
	    s/name/bus_name (patch from Dimitur Kirov)

	    * python/examples/example-signal-emitter.py: import dbus.glib
	    to get the main loop and use glib mainloop instead of gtk so
	    X doesn't have to be running.

	    * python/examples/example-signal-recipient.py: import
	    dbus.glib
	    to get the main loop and use glib mainloop instead of gtk so
	    X doesn't have to be running. Import the decorators module
	    directly.

	    * test/glib/Makefile.am:  Added DIST_EXTRA files that
	    distcheck
	    didn't pick up on but are needed to build

	    * configure.in: upped version to 0.35.2

	    * bus/driver.c, bus/selinux.c, bus/selinux.h,
	    dbus/dbus-protocol.h:
	    added Colin Walters' SELinux API rename patch from head
	    s/unix sercurity context/selinux security context/

    2005-07-16	John (J5) Palmieri  <johnp@redhat.com>

	    * python/Makefile.am: dbus_binding.pxd.in should be included
	    in EXTRA_DIST not dbus_binding.pxd
	    fix up $(srcdir) hopefully for the last time

	    * NEWS: Update to 0.35.1

M	python/Makefile.am
M	python/_dbus.py
M	python/examples/example-signal-emitter.py
M	python/examples/example-signal-recipient.py
M	python/service.py

commit cf7d10b2e4240c5c2bd4df4a1f2cf5b76aa499c0
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-07-15 20:28:05 +0000

    * glib/Makefile.am: Add make-dbus-glib-error-switch.sh to EXTRA_DIST
    so distcheck doesn't fail

    * glib/examples/Makefile.am: Add example-service.xml and
      example-signal-emitter.xml to EXTRA_DIST so distcheck doesn't fail

    * glib/examples/statemachine/Makefile.am: Add statemachine.xml and
      statemachine-server.xml to EXTRA_DIST so distcheck doesn't fail

    * python/Makefile.am: Preprend $(srcdir)/ to source files so the
      compiler looks in the right places during distcheck

M	python/Makefile.am

commit dc94fa7e3cd71c0dd29b4899bb0d956dc4019b34
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-07-15 18:09:59 +0000

    * python/examples/example-service.py,
    python/examples/example-signal-emitter.py: Fixed up examples for
    API changes

M	python/examples/example-service.py
M	python/examples/example-signal-emitter.py

commit 8b4ad749be5c97607ad2c0c3bcf1fc41c4877bf5
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-07-15 17:33:17 +0000

    * python/__init__.py: Upped to version (0,42,0) because of the
    API change

M	python/__init__.py

commit 96a7dee3c739e4c5eb6b18cc093bec41bb42da35
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-07-15 15:21:43 +0000

    * bus/dispatch.c, test/test-service.c: Add testcase for sending
    messages to oneself (TODO item).

    * python/service.py (class Object): Swap ordering of bus_name
      and object_path parameters to better support inheritance.

    * doc/dbus-tutorial.xml: change Python docs to reflect change
      in parameter ordering and fix the inheritance section.

    * doc/TODO: remove sending message to oneself TODO item

M	python/service.py

commit 557f47a57fed5a5b4e56677ed0cf5ae8f2987536
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-07-15 02:15:07 +0000

    * python/_dbus.py (Bus::remove_signal_receiver): don't add a callback
    to the match if none has been passed in

    * python/matchrules.py (SignalMatchTree::remove): if the rule
      being matched does not have a callback treat it as a wildcard
      fix matching logic

    * doc/dbus-tutorial.xml: Add Python tutorial

M	python/_dbus.py
M	python/matchrules.py

commit ea23dea1046cb6e9fdb2d618a53e61d1d61b1f53
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-07-14 20:44:15 +0000

    Checking in Rodrigo's patch along with my fixes to the patch

    2005-07-14	John (J5) Palmieri  <johnp@redhat.com>

	    * bus/activation.c: clean up all tabs to be 8 spaces
	    (bus_activation_activate_service): make sure we clean up
	    if activation fails

	    * bus/dispatch.c: clean up all tabs to be 8 spaces
	    (check_shell_fail_service_auto_start): New function
	    tests to make sure we get fail properly when trying to auto
	    start a service
	    with a faulty command line
	    (check_shell_service_success_auto_start): New function tests
	    to make sure
	    auto started services get the arguments on the command line

	    * test/test-shell-service.c: Added service for testing
	    auto-starting with
	    command line arguments

	    *
	    test/data/valid-service-files/debug-shell-echo-fail.service.in,
	    test/data/valid-service-files/debug-shell-echo-success.service.in:
	    Added service files for testing auto-starting with command
	    line arguments

	    * */.cvsignore: added a bunch of generated files to various
	    .cvsignore files

    2005-07-14	Rodrigo Moya  <rodrigo@novell.com>

	    * dbus/dbus-shell.[ch]: copy/pasted code from GLib.

	    * dbus/Makefile.am: added new files to build.

	    * bus/activation.c (bus_activation_activate_service): support
	    activation commands with parameters.

	    * test/shell-test.c: added test program for the shell parsing
	    code.

M	python/.cvsignore
M	python/Makefile.am

commit 008027f4fafbbb77a45c0fa586855552c9564696
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-07-13 18:22:34 +0000

    * python/.cvsignore: remove dbus_bindings.pyx, add dbus_bindings.pxd

    * python/service.py (class Name): renamed BusName to make it clearer
      what the object is for (a name on the bus)

    * python/examples/example-service.py,
      python/examples/example-signal-emitter.py: change the Name object to
      BusName

M	python/.cvsignore
M	python/examples/example-service.py
M	python/examples/example-signal-emitter.py
M	python/service.py

commit ac9ab9544b98222fcce9329194f10774edea8a87
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-07-12 18:16:05 +0000

    * python/dbus_bindings.pyx.in: removed

    * python/dbus_bindings.pyx: Added.
	    - Fixed some memleaks (patch from
	      Sean Meiners <sean.meiners@linspireinc.com>)
	    - Broke out the #include "dbus_h_wrapper.h" and put it in its
	      own pxd file (Pyrex definition)
	    - Broke out glib dependancies into its own pyx module

    * python/dbus_bindings.pdx: Added.
	    - Defines C class Connection for exporting to other modules

    * python/dbus_glib_bindings.pyx: Added.
	    - New module to handle lowlevel dbus-glib mainloop integration

    * python/glib.py: Added.
	    - Registers the glib mainloop when you import this module

    * python/services.py: Removed (renamed to service.py)

    * python/service.py: Added.
	    - (class Server): renamed Name

    * python/__init__.py: Bump ro version (0,41,0)
	    - don't import the decorators or service module
	      by default.  These now reside in the dbus.service namespace

    * python/_dbus.py (Bus::__init__): Add code run the main loop
      setup function on creation

    * python/examples/example-service.py,
      python/examples/example-signal-emitter.py: update examples

    * python/examples/gconf-proxy-service.py,
      python/examples/gconf-proxy-service2.py: TODO fix these up

    * doc/TODO: Addition
	    - Added a Python Bindings 1.0 section
	    - added "Add match on args or match on details to match rules"

M	python/Makefile.am
M	python/__init__.py
M	python/_dbus.py
A	python/dbus_bindings.pxd.in
R098	python/dbus_bindings.pyx.in	python/dbus_bindings.pyx
A	python/dbus_glib_bindings.pyx
M	python/examples/example-service.py
M	python/examples/example-signal-emitter.py
M	python/examples/gconf-proxy-service.py
M	python/examples/gconf-proxy-service2.py
A	python/glib.py
R096	python/services.py	python/service.py

commit 5f5b7847e7a159e040bc9070a143cd6547a9689b
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-06-28 19:36:51 +0000

    * python/dbus_bindings.pyx.in (cunregister_function_handler,
    cmessage_function_handler): Patch from Anthony Baxter
    <anthony@interlink.com.au> fixes threading problems by using the
    Py_GILState_Ensure/Release to synchronize with the python runtime.

M	python/dbus_bindings.pyx.in

commit b9ef3eaf17a91f258af17c6e9ae8acb23eb7b411
Author: Colin Walters <walters@verbum.org>
Date:	2005-06-16 05:51:46 +0000

    2005-06-16 Colin Walters <walters@verbum.org>

	    * python/dbus_bindings.pyx.in: Import size_t,
	    __int64_t, __uint64_t, and __signed.

	    * dbus/dbus-sysdeps.c <HAVE_CMSGCRED>
	    (write_credentials_byte):
	    Define cmsg struct, output it.
	    (_dbus_read_credentials_unix_socket):
	    Use cmsg struct.

	    Patch from Joe Markus Clarke for FreeBSD support.

M	python/dbus_bindings.pyx.in

commit 4a8fc73472c80880c0c6c5cf1401f3ab9817965f
Author: Colin Walters <walters@verbum.org>
Date:	2005-06-13 03:01:17 +0000

    2005-06-12 Colin Walters <walters@verbum.org>

	    Async signals and various bugfixes and testing by
	    Ross Burton <ross@burtonini.com>.

	    * glib/dbus-gvalue.h: (struct DBusBasicGValue): Delete.
	    (dbus_gvalue_genmarshal_name_from_type)
	    (dbus_gvalue_ctype_from_type): Moved to
	    dbus-binding-tool-glib.c.
	    (dbus_gtype_to_dbus_type): Renamed to
	    dbus_gtype_from_signature.
	    (dbus_g_value_types_init, dbus_gtype_from_signature)
	    (dbus_gtype_from_signature_iter, dbus_gtype_to_signature)
	    (dbus_gtypes_from_arg_signature): New function prototypes.
	    (dbus_gvalue_demarshal): Take context and error arguments.
	    (dbus_gvalue_demarshal_variant): New function.
	    (dbus_gvalue_demarshal_message): New function.
	    (dbus_gvalue_store): Delete.

	    * glib/dbus-gvalue.c:

	    File has been almost entirely rewritten; now we special-case
	    more types such as DBUS_TYPE_SIGNATURE, handle arrays and
	    hash tables correctly, etc.  Full support for recursive values
	    is not yet complete.

	    * glib/dbus-gproxy.c (dbus_g_proxy_class_init): Change last
	    argument of signal to G_TYPE_POINTER since we now pass a
	    structure.
	    (lookup_g_marshaller): Delete in favor of
	    _dbus_gobject_lookup_marshaller.
	    (marshal_dbus_message_to_g_marshaller): Use
	    _dbus_gobject_lookup_marshaller and
	    dbus_gvalue_demarshal_message
	    to handle remote signal callbacks.
	    (dbus_g_proxy_new_from_proxy): New function; creates a new
	    DBusGProxy by copying an existing one.
	    (dbus_g_proxy_get_interface, dbus_g_proxy_set_interface)
	    (dbus_g_proxy_get_path): New functions.
	    (dbus_g_proxy_marshal_args_to_message): New function;
	    factored out of existing code.
	    (DBUS_G_VALUE_ARRAY_COLLECT_ALL): Collect all arguments
	    from a varargs array.
	    (dbus_g_proxy_begin_call_internal): New function.
	    (dbus_g_proxy_end_call_internal): New function.
	    (dbus_g_proxy_begin_call): Take GTypes instead of DBus types
	    as arguments; simply invoke dbus_g_proxy_begin_call_internal
	    after collecting args into value array.
	    (dbus_g_proxy_end_call): Take GTypes instead of DBus types;
	    invoke dbus_g_proxy_end_call_internal.
	    (dbus_g_proxy_invoke): Simply invoke begin_call_interanl and
	    end_call_internal.
	    (dbus_g_proxy_call_no_reply): Take GTypes instead of DBus
	    types.
	    (array_free_all): New function.
	    (dbus_g_proxy_add_signal): Take GTypes.

	    * glib/dbus-gobject.h:
	    (_dbus_glib_marshal_dbus_message_to_gvalue_array): Delete.
	    (_dbus_gobject_get_path, _dbus_gobject_lookup_marshaller):
	    Prototype.

	    * glib/dbus-gobject.c: Add a global marshal_table hash which
	    stores mappings from type signatures to marshallers.
	    Change lots
	    of invocations of dbus_gtype_to_dbus_type to
	    dbus_gtype_to_signature.
	    (_dbus_glib_marshal_dbus_message_to_gvalue_array): Delete.
	    (introspect_signals): Fix test for query.return_type.
	    (set_object_property): Update invocation of
	    dbus_gvalue_demarshal.
	    (invoke_object_method): Many changes.  Handle asynchronous
	    invocations.  Convert arguments with
	    dbus_gvalue_demarshal_message.  Handle errors.  Use
	    DBusSignatureIter instead of strlen on args. Handle all
	    arguments
	    generically.  Special-case variants.
	    (dbus_g_method_return, dbus_g_method_return_error): New
	    function.
	    (DBusGSignalClosure): New structure, closes over signal
	    information.
	    (dbus_g_signal_closure_new): New function.
	    (dbus_g_signal_closure_finalize): New function.
	    (signal_emitter_marshaller): New function; is special
	    marshaller
	    which emits signals on bus.
	    (export_signals): New function; introspects object signals and
	    connects to them.
	    (dbus_g_object_type_install_info): Take GType instead of
	    GObjectClass.
	    (dbus_g_connection_register_g_object): Invoke export_signals.
	    (dbus_g_connection_lookup_g_object): New function.
	    (DBusGFuncSignature) New structure; used for mapping type
	    signatures to marshallers.
	    (funcsig_hash): New function; hashes DBusGFuncSignature.
	    (funcsig_equal): New function; compares DBusGFuncSignature.
	    (_dbus_gobject_lookup_marshaller): New function.
	    (dbus_g_object_register_marshaller): New function; used to
	    register a marshaller at runtime for a particular signature.

	    * glib/dbus-gmain.c (_dbus_gmain_test): Add various tests.

	    * glib/dbus-binding-tool-glib.h: Add
	    DBUS_GLIB_ANNOTATION_ASYNC
	    which notes a server method implementation should be
	    asynchronous.

	    * glib/dbus-binding-tool-glib.c
	    (dbus_binding_tool_output_glib_server): Call
	    dbus_g_value_types_init.
	    (write_formal_parameters): Use dbus_gtype_from_signature.
	    Handle
	    variants specially.
	    (dbus_g_type_get_lookup_function): Turn GType into an
	    invocation
	    of a lookup function.
	    (write_args_for_direction): Use
	    dbus_g_type_get_lookup_function.
	    (write_untyped_out_args): New method; write output arguments.
	    (write_formal_declarations_for_direction): Function for
	    writing prototypes.
	    (write_formal_parameters_for_direction): Function for
	    writing implementations.
	    (write_typed_args_for_direction): Function for writing
	    arguments prefixed with GTypes.
	    (write_async_method_client): Write out async version
	    of method.

	    * glib/dbus-binding-tool-glib.c: Include dbus-gvalue-utils.h.
	    (dbus_g_type_get_marshal_name): Move mapping from GType
	    to marshal name into here.
	    (dbus_g_type_get_c_name): Move into here.
	    (compute_marshaller): Convert signature to type with
	    dbus_gtype_from_signature, use dbus_g_type_get_marshal_name.
	    (compute_marshaller_name): Ditto.
	    (compute_marshaller): Handle async signal annotations.
	    (gather_marshallers): Return if we don't have a known
	    prefix.
	    (generate_glue): Collect introspection blob here, and
	    write all of the blob at the end.  This allows an object
	    with multiple interfaces to work.
	    Mark async methods in introspection blob.

	    * glib/Makefile.am (libdbus_glib_1_la_SOURCES): Add
	    dbus-gtype-specialized.c, dbus-gtype-specialized.h,
	    dbus-gvalue-utils.h, dbus-gvalue-utils.c.

	    * dbus/dbus-glib.h: Don't include dbus-protocol.h; this
	    avoids people accidentally using DBUS_TYPE_* which should
	    not be necessary anymore.
	    Do include dbus-gtype-specialized.h, which are utilities
	    for GLib container types.
	    Add various #defines for types such as
	    DBUS_TYPE_G_BOOLEAN_ARRAY.
	    (DBusGValueIterator, DBusGValue): Define, not fully used
	    yet.
	    (dbus_g_value_get_g_type): Type for recursive value.
	    (dbus_g_value_open, dbus_g_value_iterator_get_value)
	    (dbus_g_value_iterator_get_values,
	    dbus_g_value_iterator_recurse)
	    (dbus_g_value_free): Prototypes.
	    (dbus_g_object_register_marshaller,
	    dbus_g_proxy_new_from_proxy): Prototype.
	    (dbus_g_proxy_set_interface): Prototype.
	    (dbus_g_proxy_begin_call, dbus_g_proxy_end_call)
	    (dbus_g_proxy_call_no_reply): Take GLib types instead of DBus
	    types.
	    (dbus_g_proxy_get_path, dbus_g_proxy_get_interface):
	    Accessors.
	    (DBusGAsyncData, DBusGMethodInvocation): Structures for
	    doing async invocations.
	    (dbus_g_method_return, dbus_g_method_return_error):
	    Prototypes.
	    * doc/dbus-tutorial.xml: Update GLib section.

	    * tools/dbus-viewer.c (load_child_nodes): Update
	    for new invocation type of dbus_g_proxy_end_call.
	    (load_from_service_thread_func): Ditto.

	    * tools/print-introspect.c (main): Ditto.

	    * tools/dbus-names-model.c (have_names_notify)
	    (names_model_reload, names_model_set_connection)
	    Use GTypes.

	    * python/Makefile.am (INCLUDES): Define DBUS_COMPILATION,
	    needed since Python bindings use GLib bindings.

	    * test/glib/Makefile.am (INCLUDES): Define DBUS_COMPILATION.
	    Add --prefix argument.

	    * tools/Makefile.am: Define DBUS_COMPILATION.  Remove
	    unneeded --ignore-unsupported arg.

	    * test/glib/test-service-glib.c:
	    * test/glib/test-service-glib.xml:
	    * test/glib/test-dbus-glib.c: Add many more tests.

M	python/Makefile.am

commit fc5d7298d72e20bfc3e209e44e6791643a838f49
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-05-24 16:34:38 +0000

    * python/__init__.py: Python bindings deserve a minor version
    update. Upped to (0, 40, 2)

M	python/__init__.py

commit abd0204928614dc1d36125e9d3634c25e068af59
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-05-24 16:30:50 +0000

    * python/decorators.py: add explicitly_pass_message decorator for
    passing in the dbus message as keyword for edge case signal handling

    * python/matchrules.py (SignalMatchRule.__repr__): fix output
      to conform with what dbus expects for match rules
      (SignalMatchRule.execute): add the dbus message as a keyword
      if the signal handler has requested it

    * python/examples/example/signal-recipient.py: added some more
      examples on how to hook up to signals

    * python/proxies.py: minor formatting changes

M	python/_dbus.py
M	python/decorators.py
M	python/examples/example-signal-recipient.py
M	python/matchrules.py

commit 1db6dbecffec574f6773286416f7e92ccd864068
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-05-24 00:21:07 +0000

    * python/decorators.py: import dbus_bindings

    * python/matchrules.py (SignalMatchRule, SignalMatchTree,
      SignalMatchNode): new classes that implement wildcard signal
      callback matching using a tree lookup. Heavily modified from a
      patch sent by Celso Pinto (fd.o bug #3241)

    * _dbus.py (add_signal_receiver, remove_signal_receiver,
    _signal_func):
      use new match classes to handle signals.

M	python/Makefile.am
M	python/_dbus.py
M	python/decorators.py
M	python/examples/example-signal-emitter.py
M	python/examples/example-signal-recipient.py
A	python/matchrules.py

commit 717c3781328d631a16a74a8f51a7bb04d92729f6
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-05-19 20:27:19 +0000

    - s/TYPE_PATH/TYPE_OBJECT_PATH

M	python/dbus_bindings.pyx.in

commit 3979e97cf4245f720aed1764009a5d1fa875f595
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-05-16 21:27:03 +0000

    * glib/dbus-gmain.c (io_handler_dispatch): fix deadlock when using
    recursive g_main_loops

    * python/_dbus.py (class Bus): add the ProxyObjectClass
      alias for ProxyObject to make it easier for the Twisted
      networking framework to integrate dbus.

    * python/proxies.py (class ProxyObject): add the ProxyMethodClass
      alias for ProxyMethod to make it easier for the Twisted
      networking framework to integrate dbus.

M	python/_dbus.py
M	python/proxies.py

commit 0c2e7112539a1314393826dbd2a14c3c1239078a
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-05-05 18:27:34 +0000

    * Fix my name in previous changelog ;)

    * python/proxies.py (ProxyObject.__getattr__): add further patch
      from Anthony Baxter to throw an AttributeError when python
      __special__ functions are called instead of marshling them over
      the bus (Bug#1685 comment 3).

M	python/proxies.py

commit 933695891ea748308d76faaab23bc548c585b7b8
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-05-05 18:01:45 +0000

    * python/Makefile.am: changed to use pyexecdir for the binding shared
    libraries (Bug#2494)

    * python/exceptions.py: bring exceptions over from the bindings
      so they can be used in applications (Bug#2036)
      Make all exceptions derive from DBusException

    * python/_dbus.py, python/proxies.py: implement __repr__ in a couple
      of classes so that print obj doesn't throw an exception (Bug #1685)

M	python/Makefile.am
M	python/_dbus.py
M	python/exceptions.py
M	python/proxies.py

commit 99e291c0cf9af2f4438def9212ce2f29c057ae7f
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-05-01 19:34:58 +0000

    * python/dbus_bindings.pyx.in:

    - added new type classes for hinting to the marashaler what type
    to send over the wire
    - added int16 and uint16 marshalers
    - Fixed a bug in the type constants that caused int32 to go out
    as uint16 over the wire
    * python/dbus.py: split up into different files and renamed _dbus.py
    * python/__init__.py, python/_util.py, python/decorators.py,
    python/exceptions.py, python/proxies.py, python/services.py,
    python/types.py: new files split off from dbus.py
    * python/Makefile.am: Add new files, remove dbus.py and
    install all python files to <python module dir>/dbus
    * python/examples/*: Added #!/usr/bin/env python to the top of
    every example.  Patch provided by Tatavarty Kalyan

M	python/Makefile.am
A	python/__init__.py
A	python/_dbus.py
A	python/_util.py
D	python/dbus.py
M	python/dbus_bindings.pyx.in
A	python/decorators.py
M	python/examples/example-service.py
M	python/examples/example-signal-emitter.py
M	python/examples/example-signal-recipient.py
M	python/examples/gconf-proxy-client.py
M	python/examples/gconf-proxy-service.py
M	python/examples/gconf-proxy-service2.py
M	python/examples/list-system-services.py
A	python/exceptions.py
A	python/proxies.py
A	python/services.py
A	python/types.py

commit b27b13812644b7da6a40c212437d1d6898aa9439
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-04-25 22:54:28 +0000

    * python/dbus_bindings.pyx.in (send_with_reply_handlers): New send

    method for doing async calls
    (_pending_call_notification): New C function for handling pendning
    call
    callbacks
    (set_notify): New method for setting pending call notification

    * python/dbus.py: new version tuple "version" is set at (0, 40, 0)
    Async capabilities added to remote method calls
    (Sender): class removed
    (RemoteService): class removed
    (ObjectTree): class removed for now
    (RemoteObject): Renamed to ProxyObject
    (RemoteMethod): Renamed to ProxyMethod
    (method): Decorator added for decorating python methods as dbus
    methods
    (signal): Decorator added for decorating python methods as signal
    emitters
    (ObjectType): Metaclass added for generating introspection data
    and the
    method callback vtable
    (Interface): Wrapper class added to wrap objects in a dbus interface
    (Object): Uses ObjectType as its metaclass and exports Introspect
    of the org.freedesktop.DBus.Introspectable interface
    (ValidationException, UnknownMethodException): new exceptions

    * python/examples/*: Modified to fit with the new bindings

M	python/dbus.py
M	python/dbus_bindings.pyx.in
M	python/examples/example-client.py
M	python/examples/example-service.py
M	python/examples/example-signal-emitter.py
M	python/examples/example-signal-recipient.py
M	python/examples/list-system-services.py

commit b190b899f2f645d4b71d01eb9f53ce0e198ce576
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-03-29 17:01:43 +0000

    * python/lvalue_cast_post_process.py - removed. Patch has been
    submitted to Pyrex maintainers that fixes gcc4.0 error

    * python/Makefile.am: removed refrences to lvalue_cast_post_process.py

M	python/Makefile.am
D	python/lvalue_cast_post_process.py

commit a4597b45df11db105206b87054042f9612684b2e
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-03-21 21:13:56 +0000

    * python/lvalue_cast_post_process.py - added post processor to fix
    Pyrex code so that it compiles with gcc4.0

    * python/Makefile.am: Added lvalue_cast_post_process.py to EXTRA_DIST
      run dbus_bindings.c through lvalue_cast_post_process.py and copy the
      results back to dbus_binding.c

M	python/Makefile.am
A	python/lvalue_cast_post_process.py

commit bb519aab3c2b9112eba2e67a50e2864dc65f765c
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-02-23 19:36:24 +0000

    python/dbus_bindings.pyx.in (PendingCall::get_reply):

    s/dbus_pending_call_get_reply/dbus_pending_call_steal_reply

M	python/dbus_bindings.pyx.in

commit 4940b112efc417868f567d885e36297e14e43244
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-02-11 19:51:18 +0000

    * python/dbus.py (class Sender): added to support dbus signals better

    to True.  When expand args is True the signal handler will pass the
    message arguments as parameters to the signal handler.  If False
    revert to previous behavior where the signal handler must get the
    argument list from the message.  This is to help port applications
    like HAL that have a tendancy to send variable length argument lists.
    self._match_rule_to_receivers is now a dict of dicts.
    (Bus::remove_signal_receiver): pop handler off the dict intead of
    removing it from a list
    (Bus::_signal_func): change signal handlers so that interface,
    signal_name, service, path and message are packed into a Sender
    object and that is passed to the handler.  If expand_args is True
    extract the args list from the message and append it to the parameter
    list

    * python/dbus_bindings.pyx.in (class Signature): added to support
    signiature types
    (MessageIter::__init__): changed iteration limit to match D-BUS
    (MessageIter::get*): added INT16, UINT16, SIGNATURE, DICT_ENTRY,
    STRUCT and VARIENT type support
    (MessageIter::python_value_to_dbus_sig): made recursive to support
    recursive types
    (MessageIter::append*): added Signature, dict, tuple
    support

    * python/examples/example-client.py: added examples of getting tuples
    and dicts

    * python/examples/example-service.py: added examples of sending tuples
    and dicts

    * python/examples/example-signal-recipient.py: Fixed to handle new
    signal callback format

M	python/dbus.py
M	python/dbus_bindings.pyx.in
M	python/examples/example-client.py
M	python/examples/example-service.py
M	python/examples/example-signal-recipient.py

commit ca4b771f58b30005ec4bb47acacfa73d1c467ac9
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-01-28 19:09:54 +0000

    * python/dbus_bindings.pyx.in: Updated to handle new D-BUS type
    system - BUS_ACTIVATION -> BUS_STARTER - DBUS_BUS_ACTIVATION ->
    DBUS_BUS_STARTER - class MessageIter (__init__): Added recursion
    checking so we throw a nice error instead of just disconnecting from
    the bus. (get): Added arg_type parameter for recursion. Removed
    the nil type Added signiture type placeholder (not implemented)
    Added struct type placeholder (not implemented) Added varient
    type placeholder (not implemented) Commented out dict type for
    now (get_element_type): renamed from get_array_type (get_*):
    changed to use the dbus_message_iter_get_basic API (get_*_array):
    removed in favor of recursive get_array method (get_array): new
    recursive method which calls get to marshal the elements of the
    array (value_to_dbus_sig): New method returns the corrasponding dbus
    signiture to a python value (append): Comment out dict handling for
    now Handle lists with the new recursive API Comment out None handling
    for no

    w
	    (append_nil): removed
	    (append_*): changed to use dbus_message_iter_append_basic API
	    (append_*_array): removed in favor of recursive append_array
	    method
	    (__str__): Make it easier to print out recursive iterators
	    for debugging
	    - class Message (__str__): moved type inspection to the
	    MessageIter class' __str__ method
	    (get_iter): Added an append parameter wich defaults to False
	    If True use the new API's to create an append iterator

    * python/dbus.py: Update to use new bindings API
	    - TYPE_ACTIVATION -> TYPE_STARTER
	    - class Bus (_get_match_rule): GetServiceOwner -> GetNameOwner
	    - class ActivationBus -> class StarterBus
	    - class RemoteObject (__call__): get an append iterator
	    - (_dispatch_dbus_method_call): get an append iterator
	    - class Object (emit_signal): get an append iterator

    * python/examples/: Fixed up the examples to work with the new API

M	python/dbus.py
M	python/dbus_bindings.pyx.in
M	python/examples/example-service.py
M	python/examples/example-signal-emitter.py
M	python/examples/list-system-services.py

commit f6f84489cf9e6fa2f343eb5ce4f78b9b2ee4dc90
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2005-01-25 19:06:53 +0000

    * python/dbus_bindings.pyx.in: Rename of methods
    and bindings - get_base_service->get_unique_name -
    bus_get_base_service->bus_get_unique_name - dbus_bus_get_base_service
    -> dbus_bus_get_unique_name - ACTIVATION_REPLY_ACTIVATED ->
    DBUS_START_REPLY_SUCCESS - ACTIVATION_REPLY_ALREADY_ACTIVE
    -> DBUS_START_REPLY_ALREADY_RUNNING - bus_activate_service
    -> bus_start_service_by_name - dbus_bus_activate_service
    -> dbus_bus_start_service_by_name - bus_acquire_service ->
    bus_request_name - dbus_bus_acquire_service -> dbus_bus_request_name
    - bus_service_exists -> bus_name_has_owner - dbus_bus_service_exists
    -> dbus_bus_name_has_owner

    * python/dbus.py: Rename of methods
	    - activate_service -> start_service_by_name
	    - bus_acquire_service -> bus_request_name
	    - ACTIVATION_REPLY_ACTIVATED -> START_REPLY_SUCCESS
	    - ACTIVATION_REPLY_ALREADY_ACTIVE ->
	    START_REPLY_ALREADY_RUNNING

M	python/dbus.py
M	python/dbus_bindings.pyx.in

commit dc9a91e745f5885fc9b63568a9f4228a7522c381
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2004-12-30 18:28:03 +0000

    2004-12-30 John (J5) Palmieri <johnp@redhat.com>

	    * python/dbus.py:
	    s/ACTIVATION_REPLY_ACTIVE/ACTIVATION_REPLY_ACTIVATED

M	python/dbus.py

commit 32e2f57ac99f528d159b68b8dfafc74c39a3c4cc
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2004-12-30 14:19:53 +0000

    2004-12-30 John (J5) Palmieri <johnp@redhat.com>

	    * python/dbus_bindings.pyx.in: Change
	    DBUS_ACTIVATION_REPLY_ACTIVATED
	    and DBUS_ACTIVATION_REPLY_ALREADY_ACTIVE to match the
	    values in
	    dbus-protocol.h.  Because they are defines and not enums
	    they are not
	    autogenerated.

M	python/dbus_bindings.pyx.in

commit 01740aa1f3c4c2cecdf37a3c043a42d0dbffc773
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2004-12-27 16:01:13 +0000

    2004-12-26 John (J5) Palmieri <johnp@redhat.com>

	    * python/dbus_bindings.pyx.in (bus_activate_service): Bind
	    dbus_bus_activate_service

	    * python/dbus.py (Bus.activate_service): activate a service
	    on the
	    bus.

M	python/dbus.py
M	python/dbus_bindings.pyx.in

commit f33050956dca770af4d188768bcd8537a1686d45
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2004-12-23 00:50:37 +0000

    * patch from Rob Taylor <robtaylor@fastmail.fm> - wrap
    bus_get_unix_user method in low level bindings - add get_unix_user
    method to the Bus class - fix extract.py so it can handle unsigned
    long return types

M	python/dbus.py
M	python/dbus_bindings.pyx.in
M	python/extract.py

commit 1a6d664b037ea2fcbcbfdc8d637a7f5309e68ffb
Author: David Zeuthen <david@fubar.dk>
Date:	2004-09-16 19:56:26 +0000

    2004-09-16 David Zeuthen <david@fubar.dk>

	    * python/dbus_bindings.pyx.in: Add support for int64 and
	    uint64

M	python/dbus_bindings.pyx.in

commit 6e5b6a98a792653e9248767be746a031e851cb84
Author: Anders Carlsson <andersca@gnome.org>
Date:	2004-07-28 18:14:55 +0000

    2004-07-28 Anders Carlsson <andersca@gnome.org>

	    * python/dbus.py:
	    * python/dbus_bindings.pyx.in:
	    Add dbus.init_gthreads (), allow emit_signal to pass
	    arguments to the signal.

M	python/dbus.py
M	python/dbus_bindings.pyx.in

commit bac1c708b7ae971bf96500161f56edec4120ad3b
Author: Seth Nickell <seth@gnome.org>
Date:	2004-07-18 21:44:37 +0000

    2004-07-18 Seth Nickell <seth@gnome.org>

	    * python/dbus.py:
	    * python/dbus_bindings.pyx.in:
	    * python/tests/test-client.py:

	    Add dbus.ByteArray and dbus_bindings.ByteArray
	    types so that byte streams can be passed back.

	    Give jdahlin the heaps of credit that are so
	    rightfully his.

M	python/dbus.py
M	python/dbus_bindings.pyx.in
M	python/tests/test-client.py

commit fb762d8e21ae66ceda54496168d92d7e8dc4bce2
Author: Seth Nickell <seth@gnome.org>
Date:	2004-07-12 06:28:59 +0000

    2004-07-12 Seth Nickell <seth@gnome.org>

	    * python/dbus.py:

	    Add message argument to the default object_method_handler
	    function.

	    * python/dbus_bindings.pyx.in:

	    Automatically return NIL when passed an empty list
	    (we can't pass back a list since lists are typed
	    and we don't have any idea what type the the client
	    intended the list to be... :-( )

M	python/dbus.py
M	python/dbus_bindings.pyx.in

commit 1e926c3330e91895034c91c59c368d7201a8bc56
Author: Seth Nickell <seth@gnome.org>
Date:	2004-07-11 03:09:03 +0000

    2004-07-10 Seth Nickell <seth@gnome.org>

	    * python/examples/Makefile.am:

	    Fix distcheck breakage caused by new examples.

M	python/examples/Makefile.am

commit e386459734ff05d09c43d50b8623659512d36975
Author: Seth Nickell <seth@gnome.org>
Date:	2004-07-11 03:02:14 +0000

    2004-07-10 Seth Nickell <seth@gnome.org>

	    * python/dbus.py:

	    Add "message" argument to service-side dbus.Object
	    methods. This will break existing services written
	    using the python bindings, but will allow extraction
	    of all the message information (e.g. who its from).

	    Add improved "object oriented" signal handling/emission.

	    * python/examples/example-service.py:

	    Nix this example.

	    * python/examples/example-signal-emitter.py:
	    * python/examples/example-signal-recipient.py:

	    Two new examples that show how to emit and receive
	    signals using the new APIs.

	    * python/examples/example-signals.py:
	    * python/examples/gconf-proxy-service.py:
	    * python/examples/gconf-proxy-service2.py:

	    Add "message" argument to service methods.

M	python/dbus.py
M	python/examples/example-service.py
A	python/examples/example-signal-emitter.py
A	python/examples/example-signal-recipient.py
D	python/examples/example-signals.py
M	python/examples/gconf-proxy-service.py
M	python/examples/gconf-proxy-service2.py

commit 740b3a75006d1f5cc228c65838105a7a8b3ae75c
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2004-06-23 14:59:43 +0000

    * switched include directory from glib/ to dbus/ since dbus-glib.h
    moved

M	python/Makefile.am

commit 3ba6699d5e975a50693807268923bda69a15773a
Author: Owen Fraser-Green <owen@discobabe.net>
Date:	2004-06-10 12:13:39 +0000

    Fixed typo for python/examples make

M	python/examples/Makefile.am

commit 5e41974dd9ea8db84985ff5b31d3ea525fbf0947
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2004-06-08 02:35:43 +0000

    * Python bindings are updated to reflect C API changes which now
    accept plain path strings instead of an array of path elements.

M	python/dbus_bindings.pyx.in

commit e29bd0928368c6303209b6a2a4ea1ed749f6e58f
Author: Seth Nickell <seth@gnome.org>
Date:	2004-06-01 06:16:13 +0000

    Update .cvsignore files

M	python/.cvsignore
C077	python/.cvsignore	python/examples/.cvsignore

commit 22ac6379fbc251ac40e1635353e2b83676f6ea66
Author: Seth Nickell <seth@gnome.org>
Date:	2004-06-01 06:13:31 +0000

    2004-06-01 Seth Nickell <seth@gnome.org>

	    * python/dbus_bindings.pyx.in:
	    * python/tests/test-client.py:

	    Round off basic type support. Add dicts (yay!), and
	    remaining array types.

	    Make MessageIter more general so it works for dicts too.

	    Mark all loop variables as C integers.

M	python/dbus_bindings.pyx.in
M	python/tests/test-client.py

commit dd476a9662e4f66f08610a793458b4740823a525
Author: Seth Nickell <seth@gnome.org>
Date:	2004-06-01 01:20:59 +0000

     * python/dbus_bindings.pyx.in: * python/tests/test-client.py:

	    Test Suite: 1
	    Python Bindings: 0

	    (fix string array memory trashing bug... oops)

M	python/dbus_bindings.pyx.in
M	python/tests/test-client.py

commit 897be0d7a55449df0fb97b1126afecbb6906c083
Author: Seth Nickell <seth@gnome.org>
Date:	2004-05-30 08:20:58 +0000

    2004-05-30 Seth Nickell <seth@gnome.org>

	    * python/dbus.py:

	    Add a nicer-but-less-flexible alternate API for handling
	    calls to virtual objects in dbus.ObjectTree.

	    Screw up the argument order to the dbus.Object constructor
	    for consistency with dbus.ObjectTree (and to make dbus_methods
	    optional for future extension)

	    * python/examples/Makefile.am:
	    * python/examples/gconf-proxy-service.py:
	    * python/examples/gconf-proxy-service2.py:

	    Alternate implementation of gconf-proxy-service using the
	    nicer dbus.ObjectTree API.

	    * python/examples/example-service.py:
	    * python/tests/test-server.py

	    Reverse the argument order to deal with dbus.Object
	    constructor
	    changes.

M	python/dbus.py
M	python/examples/Makefile.am
M	python/examples/example-service.py
M	python/examples/gconf-proxy-service.py
C065	python/examples/gconf-proxy-service.py
python/examples/gconf-proxy-service2.py
M	python/tests/test-server.py

commit 51c8a42abcc0a2ab8e079d218003d9ccc48f1d79
Author: Seth Nickell <seth@gnome.org>
Date:	2004-05-30 06:26:24 +0000

    2004-05-30 Seth Nickell <seth@gnome.org>

	    * python/examples/example-client.py:
	    * python/examples/example-service.py:

	    Take it back. Lists seem to work but they're broken
	    in the test suite. Make the base examples use
	    lists (works fine).

M	python/examples/example-client.py
M	python/examples/example-service.py

commit 4f3d0dac99f3f93fc04b403f8c7e6b2177725851
Author: Seth Nickell <seth@gnome.org>
Date:	2004-05-30 06:21:00 +0000

    2004-05-30 Seth Nickell <seth@gnome.org>

	    * python/dbus_bindings.pyx.in:
	    * python/tests/test-client.py:

	    Add some more tests and fix errors that crop up.
	    Unfortunately, currently it seems like marshalling
	    and unmarshalling of lists is completely broken :-(

M	python/dbus_bindings.pyx.in
M	python/tests/test-client.py

commit 92e6c358afffd4fcdd5efd0075f9faa857c60ab3
Author: Seth Nickell <seth@gnome.org>
Date:	2004-05-30 05:30:09 +0000

    2004-05-30 Seth Nickell <seth@gnome.org>

	    * python/dbus_bindings.pyx.in:

	    Add support for ObjectPath type.

	    * python/dbus.py:

	    Refactor message handling code to a common function.

	    * python/tests/test-client.py:
	    * python/tests/test-server.py:

	    Add tests that check to make sure values of all types
	    can be echoed from a service w/o mangling.

M	python/dbus.py
M	python/dbus_bindings.pyx.in
A	python/tests/test-client.py
A	python/tests/test-server.py

commit 4a5617e6090ca2402a74a0bf3cac2b891cbc0824
Author: Seth Nickell <seth@gnome.org>
Date:	2004-05-30 02:26:48 +0000

    2004-05-29 Seth Nickell <seth@gnome.org>

	    * python/dbus.py:

	    Add ObjectTree class which allows implementation
	    of trees of "virtual" objects. Basically the python
	    wrapper for "register_fallback".

	    * python/examples/Makefile.am
	    * python/examples/gconf-proxy-client.py:
	    * python/examples/gconf-proxy-service.py:

	    Implement a simple GConf proxy service that supports
	    get/set on string and int GConf keys using the ObjectTree.

M	python/dbus.py
M	python/examples/Makefile.am
A	python/examples/gconf-proxy-client.py
A	python/examples/gconf-proxy-service.py

commit 188e82d59c07729efbefe22d0919150054d8b374
Author: Seth Nickell <seth@gnome.org>
Date:	2004-05-29 22:37:13 +0000

    2004-05-29 Seth Nickell <seth@gnome.org>

	    * python/dbus.py:
	    * python/examples/example-client.py:
	    * python/examples/example-service.py:
	    * python/examples/list-system-services.py:

	    Add SessionBus, SystemBus and ActivationBus classes
	    so you don't need to know the special little BUS_TYPE
	    flag.

M	python/dbus.py
M	python/examples/example-client.py
M	python/examples/example-service.py
M	python/examples/list-system-services.py

commit 33e96395a41362c57790e3cc9313851ebdd04d96
Author: Seth Nickell <seth@gnome.org>
Date:	2004-05-28 18:43:55 +0000

     * python/examples/Makefile.am:

	    Forget to add Makefile.am. Do not pass go.

A	python/examples/Makefile.am

commit ab5a89c0348c8bd271015bfdb2a32f7d4cdf586c
Author: Seth Nickell <seth@gnome.org>
Date:	2004-05-28 02:52:23 +0000

     * configure.in: * python/Makefile.am:

	    Include the example python apps in the tarball.

	    * python/examples/list-system-services.py

	    Add a python new example that fetches the list of services
	    from the system bus.

M	python/Makefile.am
A	python/examples/list-system-services.py

commit eff8859282d14b81b24f6092a6e155b5a0df8183
Author: Seth Nickell <seth@gnome.org>
Date:	2004-05-28 02:16:11 +0000

    2004-05-27 Seth Nickell <seth@gnome.org>

	    * python/dbus.py:
	    * python/dbus_bindings.pyx.in:

	    Fix failure to notify that a signal was not handled,
	    resulted in hung functions.

M	python/dbus.py
M	python/dbus_bindings.pyx.in

commit 42f81c81ba6e69ef0ae0b4c30f9708a7afb6c1e3
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2004-05-10 18:16:29 +0000

    * Fixed python bindings by defining all need parameter and variable
    types

M	python/dbus_bindings.pyx.in

commit 7b93322959ed78fc28deda8c84835dfe2531a59d
Author: Michael Meeks <michael@ximian.com>
Date:	2004-03-29 12:50:45 +0000

    hush.

A	python/.cvsignore

commit 4f3a79f0e6ba96167dd92c730f122be5c7999889
Author: Havoc Pennington <hp@redhat.com>
Date:	2004-03-19 22:36:30 +0000

    2004-03-19 Havoc Pennington <hp@redhat.com>

	    * NEWS: 0.21 updates

	    * configure.in: 0.21

	    * doc/Makefile.am: add all XMLTO usage to
	    DBUS_XML_DOCS_ENABLED

	    * python/Makefile.am: change to avoid dist of dbus_bindings.c
	    so
	    you don't need pyrex to make dist

	    * qt/Makefile.am (libdbus_qt_1_la_SOURCES): add integrator.h
	    to
	    sources; run moc

M	python/Makefile.am

commit e150be4e0a9e55b16eac520bdb5bd0c96621ea5a
Author: David Zeuthen <david@fubar.dk>
Date:	2003-12-01 20:49:53 +0000

    2003-12-01 David Zeuthen <david@fubar.dk>

	    * python/dbus.py: Add the actual message when calling the
	    reciever
	    of a signal such that parameters can be inspected. Add
	    the method
	    remove_signal_receiver

M	python/dbus.py

commit 5dd7e406571391570edc02ed1e0998cdad9f8493
Author: David Zeuthen <david@fubar.dk>
Date:	2003-10-29 00:06:07 +0000

    2003-10-28 David Zeuthen <david@fubar.dk>

	    * python/dbus_bindings.pyx.in: add get_dict to handle
	    dictionaries
	    return types. Fixup TYPE_* to reflect changes in
	    dbus/dbus-protocol.h

M	python/dbus_bindings.pyx.in

commit 8a404b1ab5ed430112d35a23e6155c06a72f236f
Author: David Zeuthen <david@fubar.dk>
Date:	2003-10-15 21:25:13 +0000

    2003-10-14 David Zeuthen <david@fubar.dk>

	    * python/dbus_bindings.pyx.in (MessageIter.get): fixed typo in
	    argtype to arg_type when raising unknown arg type exception.
	    Changed type list to reflect the changes in dbus-protocol.h so
	    the bindings actually work.

M	python/dbus_bindings.pyx.in

commit c4a01481d5ec9530af0f1e08130420f099ffc96c
Author: Seth Nickell <seth@gnome.org>
Date:	2003-10-15 11:56:12 +0000

    Fix makefile.am

M	python/Makefile.am

commit 2a5101364f1b42e52dff3967e999419cfe266f8f
Author: Seth Nickell <seth@gnome.org>
Date:	2003-10-13 23:07:34 +0000

    2003-10-13 Seth Nickell <seth@gnome.org>

	    * python/Makefile.am:

	    Pass "make distcheck": remove a couple files from DIST_FILES
	    that weren't included in the final version.

M	python/Makefile.am

commit 362dd3f1415326f9dd545e0ac6dc11ffc9507409
Author: Havoc Pennington <hp@redhat.com>
Date:	2003-09-30 02:41:13 +0000

    add examples

A	python/examples/example-client.py
A	python/examples/example-service.py
A	python/examples/example-signals.py

commit 8253b8df29181efd8d6ddd84098384d27a403698
Author: Havoc Pennington <hp@redhat.com>
Date:	2003-09-30 02:40:49 +0000

    forgot to add files...

A	python/Makefile.am
A	python/dbus.py
A	python/dbus_bindings.pyx.in
A	python/dbus_h_wrapper.h
A	python/extract.py

commit bdadc55cae07f4034bf64604398b382951098ada
Author: John (J5) Palmieri <johnp@redhat.com>
Date:	2006-06-28 08:13:11 -0400

    Initial commit of module dbus-python

A	ChangeLog
